{"mappings":"A,M,0C,C,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,Q,C,I,E,E,S,E,E,S,E,E,S,E,E,S,E,E,S,E,E,S,E,E,SCQA,IAAM,EAAM,GAAI,CAAA,EAAA,EAAA,OAAI,AAAJ,EAAM,CACpB,OAAQ,CACN,GAAI,CAAA,EAAA,EAAA,OAAU,AAAV,EAAY,CACd,OAAQ,GAAI,CAAA,EAAA,EAAA,OAAU,AAAV,CACd,GACD,CACD,OAAQ,YACR,SAAU,AAAA,CAAA,EAAA,EAAA,QAAgB,AAAhB,EAAkB,CAC1B,mBAAoB,CAClB,YAAa,CAAA,CACf,CACF,GACA,KAAM,GAAI,CAAA,EAAA,EAAA,OAAK,AAAL,EAAO,CACf,OAAQ,CAAC,OAAQ,KAAQ,CACzB,KAAM,CACR,EACF,GAGM,EAAO,GAAI,CAAA,EAAA,EAAA,OAAO,AAAP,EAAS,CAAC,IAAA,CAAwB,GAEnD,EAAK,cAAc,GACnB,EAAK,UAAU,CAAC,CAAA,GAMhB,IAAM,EAAc,SAAS,CAAI,EAM/B,IAAI,CAAC,KAAK,CAAG,CACf,CAQA,CAAA,EAAY,QAAQ,CAAG,EAAI,KAAK,EAAE,CAAG,GAOrC,EAAY,QAAQ,CAAG,EAMvB,EAAY,SAAS,CAAC,SAAS,CAAG,WAChC,OAAO,IAAI,CAAC,KAAK,CAAC,SAAS,EAC7B,EAMA,EAAY,SAAS,CAAC,YAAY,CAAG,WACnC,MAAO,CAAC,EAAY,QAAQ,CAAE,EAAY,QAAQ,CAAC,AACrD,EAMA,EAAY,SAAS,CAAC,UAAU,CAAG,WACjC,OAAO,IAAI,CAAC,SAAS,GAAG,WAAW,IAAM,CAC3C,EAMA,EAAY,SAAS,CAAC,cAAc,CAAG,WACrC,IAAM,EAAQ,IAAI,CAAC,KAAK,CAAC,cAAc,GAEvC,MAAO,CADa,AAAA,CAAA,EAAA,EAAA,6BAA4B,AAA5B,EAA8B,EAEpD,EAMA,EAAY,SAAS,CAAC,kBAAkB,CAAG,SAAS,CAAQ,EAC1D,IAAM,EAAQ,IAAI,CAAC,KAAK,CAAC,cAAc,GACjC,EAAS,EAAM,MAAM,CACrB,EAAQ,AAAA,CAAA,EAAA,EAAA,eAAc,AAAd,EAAgB,GAE9B,GAAI,CAAC,EAAO,YACV,IAIF,IAAM,EAAiB,IAAI,CAAC,UAAU,GAChC,EAAQ,AAAA,CAAA,EAAA,EAAA,oBAAmB,AAAnB,EAAqB,EAAO,GAG1C,AAAA,CAAA,EAAA,EAAA,2BAA0B,AAA1B,EAA4B,EAAO,EAAgB,GAGnD,IAAM,EAAY,OAAO,OAAO,CAAC,eAAe,CAAC,GAC3C,EAAO,EAAO,KAAK,CAEzB,AAAA,CAAA,EAAA,EAAA,gBAAe,AAAf,EAAiB,EAAQ,CAAC,EAAO,EAAM,EADvB,CAAC,SAAA,CAAQ,EAE3B,EAGA,EAAY,SAAS,CAAC,MAAM,CAAG,SAAS,CAAK,EAC3C,IAAM,EAAO,IAAI,CAAC,KAAK,CAAC,SAAS,GAC3B,EAAU,EAAK,WAAW,GAChC,EAAK,OAAO,CAAC,CACX,SAAU,EAAU,EACpB,SAAU,GACZ,EACF,EAMA,EAAY,SAAS,CAAC,UAAU,CAAG,SAAS,CAAK,EAC/C,IAAM,EAAQ,IAAI,CAAC,KAAK,CAAC,cAAc,GACjC,EAAS,AAAA,CAAA,EAAA,EAAA,eAAc,AAAd,EAAgB,EAC3B,CAAA,GACF,AAAA,CAAA,EAAA,EAAA,2BAA0B,AAA1B,EAA4B,EAAO,EAAO,EAE9C,EAMA,EAAY,SAAS,CAAC,WAAW,CAAG,SAAS,CAAK,EAChD,IAAM,EAAQ,IAAI,CAAC,KAAK,CAAC,cAAc,GACjC,EAAS,EAAM,MAAM,CACrB,EAAQ,AAAA,CAAA,EAAA,EAAA,eAAc,AAAd,EAAgB,GAC9B,GAAI,CAAC,EAEH,OAIF,IAAM,EAAY,OAAO,OAAO,CAAC,eAAe,CAAC,GAC3C,EAAO,EAAO,KAAK,CACzB,AAAA,CAAA,EAAA,EAAA,gBAAe,AAAf,EAAiB,EAAQ,CAAC,EAAO,EAAM,EAHvB,CAAC,EAInB,EAIA,OAAO,OAAU,CAAG,IAAI,EAAY,GAKpC,AAAA,CAAA,EAAA,EAAA,eAAc,AAAd,EAAgB","sources":["<anon>","examples/rotate.js"],"sourcesContent":["import \"./buildings.88bb1910.js\";\n\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire73bb\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire73bb\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $cc3xD = parcelRequire(\"cc3xD\");\n\nvar $9DiKA = parcelRequire(\"9DiKA\");\n\nvar $f3WAG = parcelRequire(\"f3WAG\");\n\nvar $9jDAx = parcelRequire(\"9jDAx\");\n\nvar $4mWlF = parcelRequire(\"4mWlF\");\n\nvar $5DwXE = parcelRequire(\"5DwXE\");\n\nvar $5gNCk = parcelRequire(\"5gNCk\");\nconst $a8c1dd334321f150$var$map = new (0, $5DwXE.default)({\n    layers: [\n        new (0, $4mWlF.default)({\n            source: new (0, $9jDAx.default)()\n        })\n    ],\n    target: 'mapCesium',\n    controls: (0, $f3WAG.defaults)({\n        attributionOptions: {\n            collapsible: false\n        }\n    }),\n    view: new (0, $9DiKA.default)({\n        center: [\n            333333,\n            1500000\n        ],\n        zoom: 6\n    })\n});\nconst $a8c1dd334321f150$var$ol3d = new (0, $cc3xD.default)({\n    map: $a8c1dd334321f150$var$map /*, target: 'map3d'*/ \n});\n$a8c1dd334321f150$var$ol3d.getCesiumScene();\n$a8c1dd334321f150$var$ol3d.setEnabled(true);\n/**\n * @param {!olcs.OLCesium} ol3d\n * @constructor\n */ const $a8c1dd334321f150$var$OlcsControl = function(ol3d) {\n    /**\n   * @type {!olcs.OLCesium}\n   * @private\n   */ this.ol3d_ = ol3d;\n};\n/**\n * Almost PI / 2.\n * @const\n * @type {number}\n */ $a8c1dd334321f150$var$OlcsControl.MAX_TILT = 7 * Math.PI / 16;\n/**\n * @const\n * @type {number}\n */ $a8c1dd334321f150$var$OlcsControl.MIN_TILT = 0;\n/**\n * @return {ol.View}\n */ $a8c1dd334321f150$var$OlcsControl.prototype.getOlView = function() {\n    return this.ol3d_.getOlView();\n};\n/**\n * @return {Array.<number>}\n */ $a8c1dd334321f150$var$OlcsControl.prototype.getTiltRange = function() {\n    return [\n        $a8c1dd334321f150$var$OlcsControl.MIN_TILT,\n        $a8c1dd334321f150$var$OlcsControl.MAX_TILT\n    ];\n};\n/**\n * @return {number}\n */ $a8c1dd334321f150$var$OlcsControl.prototype.getHeading = function() {\n    return this.getOlView().getRotation() || 0;\n};\n/**\n * @return {number|undefined}\n */ $a8c1dd334321f150$var$OlcsControl.prototype.getTiltOnGlobe = function() {\n    const scene = this.ol3d_.getCesiumScene();\n    const tiltOnGlobe = (0, $cc3xD.computeSignedTiltAngleOnGlobe)(scene);\n    return -tiltOnGlobe;\n};\n/**\n * @param {function()} callback\n */ $a8c1dd334321f150$var$OlcsControl.prototype.resetToNorthZenith = function(callback) {\n    const scene = this.ol3d_.getCesiumScene();\n    const camera = scene.camera;\n    const pivot = (0, $cc3xD.pickBottomPoint)(scene);\n    if (!pivot) {\n        callback();\n        return;\n    }\n    const currentHeading = this.getHeading();\n    const angle = (0, $cc3xD.computeAngleToZenith)(scene, pivot);\n    // Point to North\n    (0, $cc3xD.setHeadingUsingBottomCenter)(scene, currentHeading, pivot);\n    // Go to zenith\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const options = {\n        callback: callback\n    };\n    (0, $cc3xD.rotateAroundAxis)(camera, -angle, axis, transform, options);\n};\n$a8c1dd334321f150$var$OlcsControl.prototype.rotate = function(angle) {\n    const view = this.ol3d_.getOlView();\n    const current = view.getRotation();\n    view.animate({\n        rotation: current + angle,\n        duration: 250\n    });\n};\n/**\n * @param {number} angle\n */ $a8c1dd334321f150$var$OlcsControl.prototype.setHeading = function(angle) {\n    const scene = this.ol3d_.getCesiumScene();\n    const bottom = (0, $cc3xD.pickBottomPoint)(scene);\n    if (bottom) (0, $cc3xD.setHeadingUsingBottomCenter)(scene, angle, bottom);\n};\n/**\n * @param {number} angle\n */ $a8c1dd334321f150$var$OlcsControl.prototype.tiltOnGlobe = function(angle) {\n    const scene = this.ol3d_.getCesiumScene();\n    const camera = scene.camera;\n    const pivot = (0, $cc3xD.pickBottomPoint)(scene);\n    if (!pivot) // Could not find the bottom point\n    return;\n    const options = {};\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    (0, $cc3xD.rotateAroundAxis)(camera, -angle, axis, transform, options);\n};\nwindow['control'] = new $a8c1dd334321f150$var$OlcsControl($a8c1dd334321f150$var$ol3d); // eslint-disable-line no-unused-vars\n(0, $5gNCk.initCodeSandbox)('rawjs/rotate.js');\n\n\n//# sourceMappingURL=rotate.92ce8d13.js.map\n","import OLCesium, {computeSignedTiltAngleOnGlobe, pickBottomPoint, computeAngleToZenith, setHeadingUsingBottomCenter, rotateAroundAxis} from 'olcs';\nimport olView from 'ol/View.js';\nimport {defaults as olControlDefaults} from 'ol/control.js';\nimport olSourceOSM from 'ol/source/OSM.js';\nimport olLayerTile from 'ol/layer/Tile.js';\nimport olMap from 'ol/Map.js';\n\n\nconst map = new olMap({\n  layers: [\n    new olLayerTile({\n      source: new olSourceOSM()\n    })\n  ],\n  target: 'mapCesium',\n  controls: olControlDefaults({\n    attributionOptions: {\n      collapsible: false\n    }\n  }),\n  view: new olView({\n    center: [333333, 1500000],\n    zoom: 6\n  })\n});\n\n\nconst ol3d = new OLCesium({map/*, target: 'map3d'*/});\n\nol3d.getCesiumScene();\nol3d.setEnabled(true);\n\n/**\n * @param {!olcs.OLCesium} ol3d\n * @constructor\n */\nconst OlcsControl = function(ol3d) {\n\n  /**\n   * @type {!olcs.OLCesium}\n   * @private\n   */\n  this.ol3d_ = ol3d;\n};\n\n\n/**\n * Almost PI / 2.\n * @const\n * @type {number}\n */\nOlcsControl.MAX_TILT = 7 * Math.PI / 16;\n\n\n/**\n * @const\n * @type {number}\n */\nOlcsControl.MIN_TILT = 0;\n\n\n/**\n * @return {ol.View}\n */\nOlcsControl.prototype.getOlView = function() {\n  return this.ol3d_.getOlView();\n};\n\n\n/**\n * @return {Array.<number>}\n */\nOlcsControl.prototype.getTiltRange = function() {\n  return [OlcsControl.MIN_TILT, OlcsControl.MAX_TILT];\n};\n\n\n/**\n * @return {number}\n */\nOlcsControl.prototype.getHeading = function() {\n  return this.getOlView().getRotation() || 0;\n};\n\n\n/**\n * @return {number|undefined}\n */\nOlcsControl.prototype.getTiltOnGlobe = function() {\n  const scene = this.ol3d_.getCesiumScene();\n  const tiltOnGlobe = computeSignedTiltAngleOnGlobe(scene);\n  return -tiltOnGlobe;\n};\n\n\n/**\n * @param {function()} callback\n */\nOlcsControl.prototype.resetToNorthZenith = function(callback) {\n  const scene = this.ol3d_.getCesiumScene();\n  const camera = scene.camera;\n  const pivot = pickBottomPoint(scene);\n\n  if (!pivot) {\n    callback();\n    return;\n  }\n\n  const currentHeading = this.getHeading();\n  const angle = computeAngleToZenith(scene, pivot);\n\n  // Point to North\n  setHeadingUsingBottomCenter(scene, currentHeading, pivot);\n\n  // Go to zenith\n  const transform = Cesium.Matrix4.fromTranslation(pivot);\n  const axis = camera.right;\n  const options = {callback};\n  rotateAroundAxis(camera, -angle, axis, transform, options);\n};\n\n\nOlcsControl.prototype.rotate = function(angle) {\n  const view = this.ol3d_.getOlView();\n  const current = view.getRotation();\n  view.animate({\n    rotation: current + angle,\n    duration: 250\n  });\n};\n\n\n/**\n * @param {number} angle\n */\nOlcsControl.prototype.setHeading = function(angle) {\n  const scene = this.ol3d_.getCesiumScene();\n  const bottom = pickBottomPoint(scene);\n  if (bottom) {\n    setHeadingUsingBottomCenter(scene, angle, bottom);\n  }\n};\n\n\n/**\n * @param {number} angle\n */\nOlcsControl.prototype.tiltOnGlobe = function(angle) {\n  const scene = this.ol3d_.getCesiumScene();\n  const camera = scene.camera;\n  const pivot = pickBottomPoint(scene);\n  if (!pivot) {\n    // Could not find the bottom point\n    return;\n  }\n\n  const options = {};\n  const transform = Cesium.Matrix4.fromTranslation(pivot);\n  const axis = camera.right;\n  rotateAroundAxis(camera, -angle, axis, transform, options);\n};\n\n\n\nwindow['control'] = new OlcsControl(ol3d); // eslint-disable-line no-unused-vars\n\n//##REMOVE## Keep this tag, split code here for code sandbox\n\nimport {initCodeSandbox} from './_code-sandbox.js';\ninitCodeSandbox('rawjs/rotate.js');\n"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$cc3xD","$9DiKA","$f3WAG","$9jDAx","$4mWlF","$5DwXE","$5gNCk","$a8c1dd334321f150$var$map","default","layers","source","target","controls","defaults","attributionOptions","collapsible","view","center","zoom","$a8c1dd334321f150$var$ol3d","map","getCesiumScene","setEnabled","$a8c1dd334321f150$var$OlcsControl","ol3d","ol3d_","MAX_TILT","Math","PI","MIN_TILT","prototype","getOlView","getTiltRange","getHeading","getRotation","getTiltOnGlobe","scene","computeSignedTiltAngleOnGlobe","resetToNorthZenith","callback","camera","pivot","pickBottomPoint","currentHeading","angle","computeAngleToZenith","setHeadingUsingBottomCenter","transform","Cesium","Matrix4","fromTranslation","axis","right","rotateAroundAxis","rotate","current","animate","rotation","duration","setHeading","bottom","tiltOnGlobe","window","initCodeSandbox"],"version":3,"file":"rotate.92ce8d13.js.map"}