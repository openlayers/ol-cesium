{"version":3,"sources":["webpack:///../../src/ol/xml.js","webpack:///../../src/ol/extent.js","webpack:///../../src/ol/events.js","webpack:///../../src/ol/util.js","webpack:///../../../src/ol/format/xsd.js","webpack:///../../../src/ol/proj/epsg3857.js","webpack:///../../../src/ol/proj/epsg4326.js","webpack:///../../../src/ol/proj/projections.js","webpack:///../../src/ol/proj.js","webpack:///../../../src/ol/geom/GeometryType.js","webpack:///../../../src/ol/events/EventType.js","webpack:///../../../src/ol/render/canvas.js","webpack:///../../src/ol/math.js","webpack:///../../src/ol/array.js","webpack:///../../src/ol/TileState.js","webpack:///../../src/ol/asserts.js","webpack:///../../src/ol/obj.js","webpack:///../../src/ol/transform.js","webpack:///../../src/ol/ImageState.js","webpack:///./src/olcs/util.js","webpack:///../../../src/ol/layer/Tile.js","webpack:///../../../src/ol/geom/GeometryLayout.js","webpack:///../../src/ol/dom.js","webpack:///./src/olcs/core/OLImageryProvider.js","webpack:///./src/olcs/core.js","webpack:///../../src/ol/centerconstraint.js","webpack:///../../src/ol/ViewProperty.js","webpack:///../../src/ol/View.js","webpack:///../../src/ol/resolutionconstraint.js","webpack:///../../../src/ol/style/Style.js","webpack:///../../src/ol/ViewHint.js","webpack:///../../../src/ol/style/Stroke.js","webpack:///../../../src/ol/source/OSM.js","webpack:///../../src/ol/MapEvent.js","webpack:///../../src/ol/MapBrowserEvent.js","webpack:///../../src/ol/MapBrowserPointerEvent.js","webpack:///../../../src/ol/pointer/EventType.js","webpack:///../../../src/ol/pointer/EventSource.js","webpack:///../../../src/ol/pointer/MouseSource.js","webpack:///../../../src/ol/pointer/MsSource.js","webpack:///../../../src/ol/pointer/NativeSource.js","webpack:///../../../src/ol/pointer/PointerEvent.js","webpack:///../../../src/ol/pointer/TouchSource.js","webpack:///../../../src/ol/pointer/PointerEventHandler.js","webpack:///../../src/ol/MapBrowserEventHandler.js","webpack:///../../src/ol/MapProperty.js","webpack:///../../../src/ol/structs/PriorityQueue.js","webpack:///../../src/ol/TileQueue.js","webpack:///../../src/ol/PluggableMap.js","webpack:///../../src/ol/ImageCanvas.js","webpack:///../../../src/ol/render/Event.js","webpack:///../../../src/ol/render/VectorContext.js","webpack:///../../../../src/ol/render/canvas/Immediate.js","webpack:///../../../src/ol/renderer/Map.js","webpack:///../../../../src/ol/renderer/canvas/Map.js","webpack:///../../../../src/ol/renderer/canvas/Layer.js","webpack:///../../../src/ol/renderer/Layer.js","webpack:///../../../../src/ol/renderer/canvas/IntermediateCanvas.js","webpack:///../../../../src/ol/renderer/canvas/ImageLayer.js","webpack:///../../../../src/ol/renderer/canvas/TileLayer.js","webpack:///../../../src/ol/render/ReplayGroup.js","webpack:///../../../src/ol/render/ReplayType.js","webpack:///../../../../src/ol/geom/flat/textpath.js","webpack:///../../../../src/ol/render/canvas/Instruction.js","webpack:///../../../src/ol/render/replay.js","webpack:///../../../../src/ol/render/canvas/Replay.js","webpack:///../../../../src/ol/render/canvas/ImageReplay.js","webpack:///../../../../src/ol/render/canvas/LineStringReplay.js","webpack:///../../../../src/ol/render/canvas/PolygonReplay.js","webpack:///../../../../src/ol/geom/flat/straightchunk.js","webpack:///../../../../src/ol/render/canvas/TextReplay.js","webpack:///../../../../src/ol/render/canvas/ReplayGroup.js","webpack:///../../../src/ol/renderer/vector.js","webpack:///../../../../src/ol/renderer/canvas/VectorLayer.js","webpack:///../../../../src/ol/renderer/canvas/VectorTileLayer.js","webpack:///../../src/ol/Map.js","webpack:///./src/olcs/AutoRenderLoop.js","webpack:///./src/olcs/Camera.js","webpack:///./src/olcs/AbstractSynchronizer.js","webpack:///./src/olcs/RasterSynchronizer.js","webpack:///../../../src/ol/source/Cluster.js","webpack:///../../../src/ol/layer/VectorTile.js","webpack:///./src/olcs/core/VectorLayerCounterpart.js","webpack:///./src/olcs/FeatureConverter.js","webpack:///./src/olcs/VectorSynchronizer.js","webpack:///./src/olcs/SynchronizedOverlay.js","webpack:///./src/olcs/OverlaySynchronizer.js","webpack:///./src/olcs/OLCesium.js","webpack:///../../src/ol/functions.js","webpack:///../../src/ol/Object.js","webpack:///../../../src/ol/style/Fill.js","webpack:///../../src/ol/Feature.js","webpack:///../../src/ol/MapBrowserEventType.js","webpack:///../../../src/ol/geom/Point.js","webpack:///../../../src/ol/interaction/Property.js","webpack:///../../../src/ol/interaction/Interaction.js","webpack:///../../src/ol/has.js","webpack:///../../../src/ol/events/Event.js","webpack:///../../src/ol/featureloader.js","webpack:///../../src/ol/loadingstrategy.js","webpack:///../../../src/ol/source/VectorEventType.js","webpack:///../../../src/ol/structs/RBush.js","webpack:///../../../src/ol/source/Vector.js","webpack:///../../../src/ol/format/Feature.js","webpack:///../../src/ol/easing.js","webpack:///../../../src/ol/layer/Property.js","webpack:///../../../src/ol/layer/Vector.js","webpack:///../../../src/ol/geom/LinearRing.js","webpack:///../../../src/ol/geom/Polygon.js","webpack:///../../src/ol/tilecoord.js","webpack:///../../src/ol/css.js","webpack:///../../../src/ol/style/IconOrigin.js","webpack:///../../../src/ol/geom/SimpleGeometry.js","webpack:///../../../src/ol/source/State.js","webpack:///../../../src/ol/extent/Relationship.js","webpack:///../../../src/ol/proj/Units.js","webpack:///../../src/ol/size.js","webpack:///../../src/ol/LayerType.js","webpack:///../../src/ol/Observable.js","webpack:///../../src/ol/coordinate.js","webpack:///../../../src/ol/reproj/common.js","webpack:///../../src/ol/CollectionEventType.js","webpack:///../../../src/ol/style/IconAnchorUnits.js","webpack:///../../../../src/ol/geom/flat/deflate.js","webpack:///../../../../src/ol/geom/flat/inflate.js","webpack:///../../src/ol/color.js","webpack:///../../src/ol/Collection.js","webpack:///../../../src/ol/layer/Layer.js","webpack:///../../../../src/ol/geom/flat/closest.js","webpack:///../../../../src/ol/geom/flat/transform.js","webpack:///../../../src/ol/events/Target.js","webpack:///../../../src/ol/geom/LineString.js","webpack:///../../../src/ol/render/EventType.js","webpack:///../../../src/ol/style/IconImage.js","webpack:///../../../src/ol/style/Icon.js","webpack:///../../../src/ol/tilegrid/TileGrid.js","webpack:///../../src/ol/tilegrid.js","webpack:///../../src/ol/colorlike.js","webpack:///../../../src/ol/control/Control.js","webpack:///../../../src/ol/control/Attribution.js","webpack:///../../../src/ol/control/Rotate.js","webpack:///../../../src/ol/control/Zoom.js","webpack:///../../../src/ol/control/util.js","webpack:///../../src/ol/string.js","webpack:///../../../../src/ol/geom/flat/simplify.js","webpack:///../../../src/ol/format/FormatType.js","webpack:///../../../../src/ol/geom/flat/contains.js","webpack:///../../../src/ol/style/Text.js","webpack:///./src/olcs/math.js","webpack:///../../../src/ol/layer/Group.js","webpack:///../../../src/ol/style/Circle.js","webpack:///../../../src/ol/style/RegularShape.js","webpack:///../../../src/ol/proj/transforms.js","webpack:///../../../src/ol/layer/VectorTileRenderType.js","webpack:///../../src/ol/Tile.js","webpack:///../../src/ol/ImageTile.js","webpack:///../../src/ol/TileCache.js","webpack:///../../../src/ol/reproj/Tile.js","webpack:///../../../src/ol/source/Tile.js","webpack:///../../../src/ol/source/TileEventType.js","webpack:///../../../src/ol/source/TileImage.js","webpack:///../../../src/ol/source/UrlTile.js","webpack:///../../src/ol/ObjectEventType.js","webpack:///../../src/ol/reproj.js","webpack:///../../src/ol/rotationconstraint.js","webpack:///../../../src/ol/layer/TileProperty.js","webpack:///../../../src/ol/source/WMSServerType.js","webpack:///../../../src/ol/layer/Image.js","webpack:///../../../src/ol/geom/MultiLineString.js","webpack:///../../../src/ol/proj/Projection.js","webpack:///../../../../src/ol/geom/flat/intersectsextent.js","webpack:///../../../src/ol/geom/MultiPoint.js","webpack:///../../src/ol/Kinetic.js","webpack:///../../../src/ol/interaction/DoubleClickZoom.js","webpack:///../../../src/ol/events/condition.js","webpack:///../../../src/ol/interaction/Pointer.js","webpack:///../../../src/ol/interaction/DragPan.js","webpack:///../../../src/ol/interaction/DragRotate.js","webpack:///../../../src/ol/render/Box.js","webpack:///../../../src/ol/interaction/DragBox.js","webpack:///../../../src/ol/interaction/DragZoom.js","webpack:///../../../src/ol/events/KeyCode.js","webpack:///../../../src/ol/interaction/KeyboardPan.js","webpack:///../../../src/ol/interaction/KeyboardZoom.js","webpack:///../../../src/ol/interaction/MouseWheelZoom.js","webpack:///../../../src/ol/interaction/PinchRotate.js","webpack:///../../../src/ol/interaction/PinchZoom.js","webpack:///../../src/ol/interaction.js","webpack:///../../../src/ol/geom/MultiPolygon.js","webpack:///../../../../src/ol/geom/flat/center.js","webpack:///../../src/ol/tileurlfunction.js","webpack:///../../src/ol/MapEventType.js","webpack:///../../../src/ol/reproj/Image.js","webpack:///../../../src/ol/source/Image.js","webpack:///../../../src/ol/source/common.js","webpack:///../../../../src/ol/geom/flat/reverse.js","webpack:///../../../../src/ol/geom/flat/orient.js","webpack:///../../../src/ol/tilegrid/common.js","webpack:///../../../src/ol/geom/Geometry.js","webpack:///../../../src/ol/format/GeoJSON.js","webpack:///../../../src/ol/extent/Corner.js","webpack:///../../src/ol/TileRange.js","webpack:///../../src/ol/Disposable.js","webpack:///../../../src/ol/source/ImageWMS.js","webpack:///../../src/ol/ImageBase.js","webpack:///../../../src/ol/source/Source.js","webpack:///./node_modules/rbush/index.js","webpack:///../../../../src/ol/geom/flat/area.js","webpack:///../../../src/ol/geom/GeometryCollection.js","webpack:///../../../../src/ol/geom/flat/interpolate.js","webpack:///../../../src/ol/source/TileJSON.js","webpack:///../../src/ol/OverlayPositioning.js","webpack:///../../src/ol/Overlay.js","webpack:///../../src/ol/sphere.js","webpack:///../../../src/ol/style/IconImageCache.js","webpack:///../../../src/ol/geom/Circle.js","webpack:///../../../src/ol/interaction/DragAndDrop.js","webpack:///../../src/ol/AssertionError.js","webpack:///../../../src/ol/layer/Base.js","webpack:///../../../src/ol/reproj/Triangulation.js","webpack:///../../src/ol/Image.js","webpack:///../../src/ol/uri.js","webpack:///../../../src/ol/source/TileWMS.js","webpack:///../../../src/ol/structs/LRUCache.js","webpack:///../../../src/ol/source/ImageStatic.js","webpack:///../../../../src/ol/geom/flat/interiorpoint.js","webpack:///../../../../src/ol/geom/flat/segments.js","webpack:///../../../src/ol/style/Image.js","webpack:///../../../src/ol/layer/VectorRenderType.js","webpack:///../../../../src/ol/geom/flat/length.js","webpack:///../../../src/ol/style/TextPlacement.js","webpack:///../../src/ol/net.js","webpack:///../../../src/ol/source/XYZ.js","webpack:///../../../src/ol/format/JSONFeature.js","webpack:///../../../src/ol/format/XMLFeature.js","webpack:///./node_modules/proj4/dist/proj4-src.js","webpack:///../../../src/ol/source/BingMaps.js","webpack:///../../../src/ol/proj/proj4.js","webpack:///../../../src/ol/source/Stamen.js","webpack:///../../../src/ol/format/GPX.js","webpack:///../../../src/ol/format/KML.js","webpack:///../../../src/ol/format/TopoJSON.js","webpack:///../../../src/ol/format/TextFeature.js","webpack:///../../../src/ol/format/IGC.js","webpack:///./node_modules/quickselect/quickselect.js"],"names":["__webpack_require__","d","__webpack_exports__","DOCUMENT","XML_SCHEMA_INSTANCE_URI","createElementNS","getAllTextContent","isDocument","parse","makeArrayExtender","makeArrayPusher","makeReplacer","makeObjectPropertySetter","makeChildAppender","makeArraySerializer","makeSimpleNodeFactory","OBJECT_PROPERTY_NODE_FACTORY","makeSequence","makeStructureNS","parseNode","pushParseAndPop","pushSerializeAndPop","_array_js__WEBPACK_IMPORTED_MODULE_0__","document","implementation","createDocument","namespaceURI","qualifiedName","node","normalizeWhitespace","getAllTextContent_","accumulator","nodeType","Node","CDATA_SECTION_NODE","TEXT_NODE","push","String","nodeValue","replace","let","n","firstChild","nextSibling","join","object","xml","DOMParser","parseFromString","valueReader","opt_this","objectStack","const","value","call","undefined","this","array","length","Object","opt_property","localName","nodeWriter","appendChild","serializersNS","nodeFactory","serializers","serialize","opt_nodeName","opt_namespaceURI","fixedNodeName","nodeName","orderedKeys","sequence","Array","i","namespaceURIs","structure","opt_structureNS","ii","structureNS","parsersNS","firstElementChild","nextElementSibling","parsers","parser","pop","values","opt_keys","boundingExtent","buffer","clone","closestSquaredDistanceXY","containsCoordinate","containsExtent","containsXY","coordinateRelationship","createEmpty","createOrUpdate","createOrUpdateEmpty","createOrUpdateFromCoordinate","createOrUpdateFromCoordinates","createOrUpdateFromFlatCoordinates","equals","extend","extendCoordinate","extendFlatCoordinates","forEachCorner","getArea","getBottomLeft","getBottomRight","getCenter","getCorner","getForViewAndSize","getHeight","getIntersection","getTopLeft","getTopRight","getWidth","intersects","isEmpty","returnOrUpdate","scaleFromCenter","intersectsSegment","applyTransform","_asserts_js__WEBPACK_IMPORTED_MODULE_0__","_extent_Corner_js__WEBPACK_IMPORTED_MODULE_1__","_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_2__","coordinates","extent","opt_extent","slice","x","y","dx","dy","coordinate","extent1","extent2","minX","minY","maxX","maxY","relationship","UNKNOWN","LEFT","RIGHT","BELOW","ABOVE","INTERSECTING","Infinity","extendCoordinates","flatCoordinates","offset","end","stride","extendXY","Math","min","max","callback","val","area","corner","BOTTOM_LEFT","BOTTOM_RIGHT","TOP_LEFT","TOP_RIGHT","center","resolution","rotation","size","cosRotation","cos","sinRotation","sin","xCos","xSin","yCos","ySin","x0","x1","x2","x3","y0","y1","y2","y3","intersection","deltaX","deltaY","start","startRel","endRel","startX","startY","endX","endY","slope","transformFn","xs","ys","apply","_boundingExtentXYs","listen","listenOnce","unlisten","unlistenByKey","unlistenAll","_obj_js__WEBPACK_IMPORTED_MODULE_0__","findListener","listeners","listener","opt_setDeleteIndex","listenerObj","bindTo","deleteIndex","getListeners","target","type","listenerMap","getListenerMap","opt_create","ol_lm","removeListeners","removeEventListener","boundListener","keys","removeListenerMap","opt_once","callOnce","addEventListener","evt","bindListener","key","indexOf","splice","abstract","Error","getUid","VERSION","uidCounter_","obj","ol_uid","readBoolean","readDateTime","readDecimal","readNonNegativeInteger","readString","writeBooleanTextNode","writeCDATASection","writeDateTimeTextNode","writeDecimalTextNode","writeNonNegativeIntegerTextNode","writeStringTextNode","_xml_js__WEBPACK_IMPORTED_MODULE_0__","_string_js__WEBPACK_IMPORTED_MODULE_1__","m","s","exec","dateTime","Date","isNaN","parseFloat","parseInt","trim","bool","string","createCDATASection","date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","createTextNode","decimal","toPrecision","nonNegativeInteger","toString","RADIUS","HALF_SIZE","PI","EXTENT","WORLD_EXTENT","epsg3857_EPSG3857Projection","Projection","EPSG3857Projection","code","super","units","Units","METERS","global","worldExtent","getPointResolution","point","math","prototype","constructor","proj_Projection","PROJECTIONS","fromEPSG4326","input","opt_output","opt_dimension","dimension","output","halfSize","log","tan","epsg3857_toEPSG4326","atan","exp","epsg4326_EXTENT","METERS_PER_UNIT","epsg4326_EPSG4326Projection","EPSG4326Projection","opt_axisOrientation","DEGREES","axisOrientation","metersPerUnit","epsg4326_PROJECTIONS","cache","projections2","forwardTransform","inverseTransform","cloneTransform","identityTransform","addProjection","projection","add","getCode","transforms","proj_get","projectionLike","proj_getPointResolution","opt_units","pointResolution","getter","getPointResolutionFunc","getUnits","toEPSG4326","getTransformFromProjections","vertices","sphere","getMetersPerUnit","addEquivalentProjections","projections","forEach","addProjections","source","destination","createProjection","defaultCode","createTransformFromCoordinateTransform","coordTransform","j","addCoordinateTransforms","forward","inverse","sourceProj","destProj","fromLonLat","opt_projection","transform","equivalent","projection1","projection2","equalUnits","sourceProjection","destinationProjection","sourceCode","destinationCode","transformFunc","getTransform","transformExtent","ol_extent","POINT","LINE_STRING","LINEAR_RING","POLYGON","MULTI_POINT","MULTI_LINE_STRING","MULTI_POLYGON","GEOMETRY_COLLECTION","CIRCLE","CHANGE","CLEAR","CONTEXTMENU","CLICK","DBLCLICK","DRAGENTER","DRAGOVER","DROP","ERROR","KEYDOWN","KEYPRESS","LOAD","MOUSEDOWN","MOUSEMOVE","MOUSEOUT","MOUSEUP","MOUSEWHEEL","MSPOINTERDOWN","RESIZE","TOUCHSTART","TOUCHMOVE","TOUCHEND","WHEEL","defaultFont","defaultFillStyle","defaultLineCap","defaultLineDash","defaultLineDashOffset","defaultLineJoin","defaultMiterLimit","defaultStrokeStyle","defaultTextAlign","defaultTextBaseline","defaultPadding","defaultLineWidth","labelCache","checkFont","measureTextHeight","measureTextWidth","rotateAtOffset","resetTransform","drawImage","_css_js__WEBPACK_IMPORTED_MODULE_0__","_dom_js__WEBPACK_IMPORTED_MODULE_1__","_obj_js__WEBPACK_IMPORTED_MODULE_2__","_structs_LRUCache_js__WEBPACK_IMPORTED_MODULE_3__","_transform_js__WEBPACK_IMPORTED_MODULE_4__","checkedFonts","measureContext","textHeights","interval","referenceWidth","retries","checked","referenceFonts","len","text","isAvailable","font","context","getMeasureContext","weight","fontWeight","available","referenceFont","measureText","width","check","done","clear","clearInterval","fontSpec","fontFamilies","fontFamily","setInterval","span","heights","height","createElement","textContent","style","margin","padding","position","left","body","offsetHeight","removeChild","offsetX","offsetY","translate","rotate","opacity","image","originX","originY","w","h","scale","alpha","globalAlpha","setTransform","clamp","cosh","squaredSegmentDistance","squaredDistance","solveLinearSystem","toDegrees","toRadians","modulo","lerp","t","mat","maxRow","maxEl","abs","r","absValue","tmp","coef","k","l","angleInRadians","angleInDegrees","a","b","binarySearch","haystack","needle","opt_comparator","mid","cmp","comparator","numberSafeCompareFunction","low","high","found","includes","arr","linearFindNearest","direction","reverseSubArray","begin","data","extension","isArray","remove","arr1","arr2","len1","stableSort","compareFnc","index","sort","isSorted","opt_func","opt_strict","compare","every","currentVal","res","IDLE","LOADING","LOADED","EMPTY","ABORT","assert","_AssertionError_js__WEBPACK_IMPORTED_MODULE_0__","assertion","errorCode","assign","getValues","var_sources","TypeError","arguments","hasOwnProperty","property","create","reset","setFromArray","compose","invert","tmp_","set","multiply","transform1","transform2","a1","b1","c1","d1","e1","f1","a2","b2","c2","d2","e2","f2","c","e","f","dx1","dy1","sx","sy","angle","dx2","dy2","det","olcsListen","removeNode","removeChildren","isGroundPolylinePrimitiveSupported","exports","observable","on","param","supportsImageRenderingPixelatedResult_","imageRenderingValueResult_","supportsImageRenderingPixelated","canvas","setAttribute","imageRenderingValue","getSourceProjection","get","getProjection","olcs_uid","parentNode","lastChild","scene","Cesium","GroundPolylinePrimitive","isSupported","_LayerType_js__WEBPACK_IMPORTED_MODULE_0__","_Layer_js__WEBPACK_IMPORTED_MODULE_1__","_TileProperty_js__WEBPACK_IMPORTED_MODULE_2__","_obj_js__WEBPACK_IMPORTED_MODULE_3__","TileLayer","Layer","opt_options","options","baseOptions","preload","useInterimTilesOnError","setPreload","setUseInterimTilesOnError","TILE","getPreload","PRELOAD","getUseInterimTilesOnError","USE_INTERIM_TILES_ON_ERROR","getSource","XY","XYZ","XYM","XYZM","createCanvasContext2D","opt_width","opt_height","getContext","outerWidth","element","offsetWidth","getComputedStyle","marginLeft","marginRight","outerHeight","marginTop","marginBottom","replaceNode","newNode","oldNode","parent","replaceChild","OLImageryProvider","olMap","opt_fallbackProj","_this","source_","projection_","fallbackProj_","ready_","tilingScheme_","rectangle_","map_","proxy","proxy_","getURL","DefaultProxy","errorEvent_","Event","emptyCanvas_","handleSourceChanged_","frameState","getState","olcsUtil","GeographicTilingScheme","WebMercatorTilingScheme","rectangle","getTileCredits","level","getView","calculateExtent","getSize","viewState","zoom","attributionsFunction","getAttributions","attributions","map","html","Credit","requestImage","tileUrlFunction","getTileUrlFunction","z_","y_","url","ImageryProvider","loadImage","defineProperties","ready","tileWidth","tg","getTileGrid","getTileSize","tileHeight","maximumLevel","getMaxZoom","minimumLevel","tilingScheme","tileDiscardPolicy","errorEvent","hasAlphaChannel","pickFeatures","camera","frustum","distance","Cartesian3","magnitude","subtract","pixelSize","Cartesian2","getPixelDimensions","clientWidth","clientHeight","amount","computePixelSizeAtCoordinate","Transforms","eastNorthUpToFixedFrame","bottomLeft","Matrix4","multiplyByPoint","topRight","Ellipsoid","WGS84","cartesianArrayToCartographicArray","geometry","translation","ZERO","ol4326CoordinateToCesiumCartesian","rawMatrix","quaternion","Quaternion","fromAxisAngle","UNIT_Z","rotationMatrix","fromTranslationQuaternionRotationScale","axis","defaultValue","duration","easing","linearEasing","lastProgress","oldTransform","now","window","requestAnimationFrame","step","timestamp","progress","stepAngle","lookAtTransform","heading","bottomCenter","angleToZenith","computeAngleToZenith","right","Matrix3","fromQuaternion","vector","zenith","multiplyByVector","fromTranslation","rotateAroundAxis","pixel","ray","getPickRay","globe","pick","pickEllipsoid","bottom","pickOnTerrainOrEllipsoid","Ray","ellipsoid","IntersectionTests","rayEllipsoid","getPoint","normal","geocentricSurfaceNormal","angleBetween","signedAngleBetween","convertLongitudeRange","fovy2","fovy","matrix","first","second","normalize","cross","cosine","dot","sine","sign","atan2","pivot","fy","bottomFovRay","negate","ext","Rectangle","fromDegrees","olLayer","viewProj","olLayerTile","olLayerImage","provider","olSourceImageWMS","getUrl","getImageLoadFunction","defaultImageLoadFunction","sourceProps","olcs.proxy","olcs.extent","olcs.projection","olcs.imagesource","olSourceTileWMS","params","getParams","setProperties","olSourceTileImage","isCesiumProjection","olcsCoreOLImageryProvider","olSourceImageStatic","SingleTileImageryProvider","getImageExtent","layerOptions","getExtent","extentToRectangle","ImageryLayer","olLayerWithParents","csLayer","visible","layer","concat","parents","layerOpacity","getOpacity","layerVisible","getVisible","show","coo","toCartesian","cartesians","proj4326","proj","properties","getProperties","olColor","Color","byteToFloat","fromCssColorString","CanvasPattern","CanvasGradient","ctx","fillStyle","fillRect","ImageMaterialProperty","subdomains","re","match","charCode","startCharCode","charCodeAt","stopCharCode","fromCharCode","Promise","resolve","reject","pickBottomPoint","currentHeading","getRotation","setHeadingUsingBottomCenter","view","normalizeView","getResolution","setRotation","setResolution","constrainResolution","is3857","is4326","none","ViewProperty","DEFAULT_MIN_ZOOM","View_View","BaseObject","View","hints_","animations_","updateAnimationKey_","updateAnimations_","bind","applyOptions_","resolutionConstraintInfo","resolutionConstraint","maxResolution","minResolution","minZoom","maxZoom","zoomFactor","resolutions","delta","z","floor","power","pow","createSnapToResolutions","defaultMaxResolution","common","defaultMinResolution","opt_maxLevel","oldLevel","newLevel","createSnapToPower","constraint","createResolutionConstraint","maxResolution_","minResolution_","zoomFactor_","resolutions_","minZoom_","centerConstraint","createCenterConstraint","rotationConstraint","enableRotation","constrainRotation","rotationconstraint","createRotationConstraint","constraints_","Number","options_","getUpdatedOptions_","newOptions","getZoom","animate","var_args","animationCount","isDef","state","setCenter","setZoom","animationCallback","series","animation","complete","anchor","sourceCenter","targetCenter","sourceResolution","targetResolution","sourceRotation","targetRotation","isNoopAnimation","setHint","ViewHint","ANIMATING","getAnimating","getInteracting","INTERACTING","cancelAnimations","cancelAnimationFrame","more","seriesComplete","jj","elapsed","fraction","calculateCenterZoom","calculateCenterRotate","filter","Boolean","currentCenter","currentResolution","getSizeFromViewport_","selector","util","querySelector","metrics","constrainCenter","opt_delta","opt_direction","getConstraints","getHints","opt_hints","opt_size","asserts","getMaxResolution","getMinResolution","getZoomForResolution","setMaxZoom","getMinZoom","setMinZoom","getResolutions","getResolutionForExtent","xResolution","yResolution","getResolutionForValueFunction","opt_power","getValueForResolutionFunction","pixelRatio","pixelResolution","round","nearest","getResolutionForZoom","fit","geometryOrExtent","getSimplifiedGeometry","Polygon","getType","GeometryType","coords","getFlatCoordinates","cosAngle","sinAngle","minRotX","minRotY","maxRotX","maxRotY","getStride","rotX","rotY","constrainedResolution","centerRotX","centerRotY","functions","centerOn","centerX","centerY","opt_anchor","hint","changed","ol_Object","returnValue","setTimeout","toFunction","createDefaultStyle","_Circle_js__WEBPACK_IMPORTED_MODULE_2__","_Fill_js__WEBPACK_IMPORTED_MODULE_3__","_Stroke_js__WEBPACK_IMPORTED_MODULE_4__","Style","geometry_","geometryFunction_","defaultGeometryFunction","setGeometry","fill_","fill","image_","renderer_","renderer","stroke_","stroke","text_","zIndex_","zIndex","styleFunction","styles","getZIndex","getGeometry","getFill","getImage","getStroke","getText","getRenderer","setRenderer","getGeometryFunction","setFill","setImage","setStroke","setText","feature","setZIndex","defaultStyles","color","radius","_util_js__WEBPACK_IMPORTED_MODULE_0__","Stroke","color_","lineCap_","lineCap","lineDash_","lineDash","lineDashOffset_","lineDashOffset","lineJoin_","lineJoin","miterLimit_","miterLimit","width_","checksum_","getColor","getLineCap","getLineDash","getLineDashOffset","getLineJoin","getMiterLimit","setColor","setLineCap","setLineDash","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","getChecksum","ATTRIBUTION","_XYZ_js__WEBPACK_IMPORTED_MODULE_0__","OSM","crossOrigin","cacheSize","opaque","reprojectionErrorThreshold","tileLoadFunction","wrapX","attributionsCollapsible","ol_MapEvent","MapEvent","opt_frameState","ol_MapBrowserEvent","MapBrowserEvent","browserEvent","opt_dragging","originalEvent","getEventPixel","getCoordinateFromPixel","dragging","preventDefault","stopPropagation","ol_MapBrowserPointerEvent","MapBrowserPointerEvent","pointerEvent","EventType","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","EventSource_EventSource","dispatcher","mapping","mapping_","getEvents","getHandlerForEvent","eventType","pointer_EventSource","POINTER_ID","POINTER_TYPE","mousedown","inEvent","isEventSimulatedFromTouch_","pointerMap","cancel","prepareEvent","down","mousemove","move","mouseup","p","button","up","cleanupMouse","mouseover","enterOver","mouseout","leaveOut","cloneEvent","pd","pointerId","isPrimary","pointerType","pointer_MouseSource","EventSource","MouseSource","lastTouches","lts","clientX","clientY","POINTER_TYPES","msPointerDown","prepareEvent_","msPointerMove","msPointerUp","cleanup","msPointerOut","msPointerOver","msPointerCancel","msLostPointerCapture","makeEvent","dispatchEvent","msGotPointerCapture","pointer_MsSource","MsSource","MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture","pointerDown","fireNativeEvent","pointerMove","pointerUp","pointerOut","pointerOver","pointerCancel","lostPointerCapture","gotPointerCapture","pointer_NativeSource","NativeSource","pointerdown","pointermove","pointerup","pointerout","pointerover","pointercancel","gotpointercapture","lostpointercapture","HAS_BUTTONS","PointerEvent","_Event","opt_eventDict","eventDict","buttons","which","getButtons","pressure","getPressure","bubbles","cancelable","detail","screenX","screenY","ctrlKey","altKey","shiftKey","metaKey","relatedTarget","tiltX","tiltY","hwTimestamp","ev","MouseEvent","pointer_PointerEvent","touchstart","vacuumTouches_","setPrimaryTouch_","changedTouches","dedupSynthMouse_","clickCount_","processTouches_","overDown_","touchmove","moveOverOut_","touchend","upOut_","touchcancel","cancelOut_","pointer_TouchSource","TouchSource","mouseSource","firstTouchId_","resetId_","dedupTimeout_","isPrimaryTouch_","inTouch","identifier","count","cancelResetClickCount_","removePrimaryPointer_","inPointer","resetClickCount_","resetClickCountHandler_","clearTimeout","touchToPointer_","radiusX","radiusY","force","inFunction","touches","pointer","findTouch_","touchList","searchId","out","outTarget","over","enter","event","outEvent","leave","cleanUpPointer_","lt","CLONE_PROPS","pointer_PointerEventHandler","EventTarget","PointerEventHandler","element_","eventMap_","eventSourceList_","registerSources","has","registerSource","register_","name","newEvents","handler","eventSource","addEvents_","unregister_","removeEvents_","eventHandler_","events","eventName","ol_events","eventCopy","fireEvent","contains_","container","contained","contains","inType","wrapMouseEvent","disposeInternal","Target","ol_MapBrowserEventHandler","MapBrowserEventHandler","moveTolerance","clickTimeoutId_","dragging_","dragListenerKeys_","moveTolerance_","down_","getViewport","activePointers_","trackedTouches_","pointerEventHandler_","documentPointerEventHandler_","pointerdownListenerKey_","handlePointerDown_","relayedListenerKey_","relayEvent_","emulateClick_","newEvent","MapBrowserEventType","SINGLECLICK","updateActivePointers_","handlePointerUp_","propagationStopped","isMouseActionButton_","dispose","handlePointerMove_","isMoving_","POINTERDRAG","MapProperty","LAYERGROUP","SIZE","TARGET","VIEW","PriorityQueue_PriorityQueue","priorityFunction","keyFunction","priorityFunction_","keyFunction_","elements_","priorities_","queuedElements_","dequeue","elements","priorities","siftUp_","elementKey","enqueue","priority","siftDown_","getCount","getLeftChildIndex_","getRightChildIndex_","getParentIndex_","heapify_","isKeyQueued","isQueued","startIndex","lIndex","rIndex","smallerChildIndex","parentIndex","reprioritize","ol_TileQueue","PriorityQueue","TileQueue","tilePriorityFunction","tileChangeCallback","getKey","tileChangeCallback_","tilesLoading_","tilesLoadingKeys_","added","tile","events_EventType","handleTileChange","getTilesLoading","TileState","tileKey","loadMoreTiles","maxTotalLoading","maxNewLoads","newLoads","abortedTiles","load","ol_PluggableMap","PluggableMap","optionsInternal","keyboardEventTarget","getElementById","controls","interactions","overlays","layerGroup","layers","getLayers","Group","Collection","getArray","createOptionsInternal","maxTilesLoading_","maxTilesLoading","loadTilesWhileAnimating_","loadTilesWhileAnimating","loadTilesWhileInteracting_","loadTilesWhileInteracting","pixelRatio_","animationDelayKey_","animationDelay_","renderFrame_","coordinateToPixelTransform_","ol_transform","pixelToCoordinateTransform_","frameIndex_","frameState_","previousExtent_","viewPropertyListenerKey_","viewChangeListenerKey_","layerGroupPropertyListenerKeys_","viewport_","className","overflow","msTouchAction","touchAction","overlayContainer_","overlayContainerStopEvent_","overlayEvents","mapBrowserEventHandler_","handleMapBrowserEvent","keyboardEventTarget_","keyHandlerKeys_","handleBrowserEvent","overlays_","overlayIdIndex_","createRenderer","handleResize_","focus_","postRenderFunctions_","tileQueue_","getTilePriority","handleTileChange_","skippedFeatureUids_","handleLayerGroupChanged_","handleViewChanged_","handleSizeChanged_","handleTargetChanged_","control","setMap","CollectionEventType","ADD","REMOVE","interaction","addOverlayInternal_","id","getId","addControl","getControls","addInteraction","getInteractions","addLayer","getLayerGroup","addOverlay","overlay","getOverlays","setTarget","forEachFeatureAtPixel","hitTolerance","layerFilter","forEachFeatureAtCoordinate","getFeaturesAtPixel","features","forEachLayerAtPixel","hasFeatureAtPixel","hasFeatureAtCoordinate","getEventCoordinate","viewportPosition","getBoundingClientRect","eventPosition","top","getTarget","getTargetElement","pixelToCoordinateTransform","getOverlayById","getPixelFromCoordinate","coordinateToPixelTransform","getOverlayContainer","getOverlayContainerStopEvent","tileSourceKey","tileCenter","tileResolution","wantedTiles","focus","sqrt","opt_type","mapBrowserEvent","interactionsArray","getActive","handleEvent","handlePostRender","tileQueue","hints","viewHints","hasListener","render_EventType","RENDERCOMPLETE","getLoading","loading","dispatchRenderEvent","postRenderFunctions","render","targetElement","updateSize","removeLayerRenderers","dom","handleViewPropertyChanged_","ObjectEventType","PROPERTYCHANGE","isRendered","renderSync","removeControl","removeInteraction","removeLayer","removeOverlay","time","previousFrameState","ol_size","layerStatesArray","getLayerStatesArray","layerStates","skippedFeatureUids","usedTiles","renderFrame","MapEventType","MOVESTART","MOVEEND","POSTRENDER","setLayerGroup","setSize","setView","skipFeature","computedStyle","unskipFeature","ol_ImageCanvas","ImageBase","ImageCanvas","opt_loader","ImageState","loader_","canvas_","error_","getError","handleLoad_","err","ol_ImageBase","render_Event","RenderEvent","opt_vectorContext","opt_context","opt_glContext","vectorContext","glContext","VectorContext_VectorContext","drawCustom","drawGeometry","setStyle","drawCircle","circleGeometry","drawFeature","drawGeometryCollection","geometryCollectionGeometry","drawLineString","lineStringGeometry","drawMultiLineString","multiLineStringGeometry","drawMultiPoint","multiPointGeometry","drawMultiPolygon","multiPolygonGeometry","drawPoint","pointGeometry","drawPolygon","polygonGeometry","drawText","setFillStrokeStyle","strokeStyle","setImageStyle","imageStyle","opt_declutterGroup","setTextStyle","textStyle","render_VectorContext","Immediate","VectorContext","CanvasImmediateRenderer","viewRotation","context_","extent_","transform_","viewRotation_","contextFillState_","contextStrokeState_","contextTextState_","fillState_","strokeState_","imageAnchorX_","imageAnchorY_","imageHeight_","imageOpacity_","imageOriginX_","imageOriginY_","imageRotateWithView_","imageRotation_","imageScale_","imageWidth_","textOffsetX_","textOffsetY_","textRotateWithView_","textRotation_","textScale_","textFillState_","textStrokeState_","textState_","pixelCoordinates_","tmpLocalTransform_","drawImages_","pixelCoordinates","flat_transform","localTransform","drawText_","setContextFillState_","setContextStrokeState_","setContextTextState_","strokeText","fillText","moveToLineTo_","close","moveTo","lineTo","closePath","drawRings_","ends","SimpleGeometry","beginPath","arc","geometries","getGeometriesArray","flatMidpoint","getFlatMidpoint","geometryExtent","getEnds","flatMidpoints","getFlatMidpoints","getOrientedFlatCoordinates","flatInteriorPoint","getFlatInteriorPoint","endss","getEndss","flatInteriorPoints","getFlatInteriorPoints","fillState","contextFillState","strokeState","contextStrokeState","lineWidth","textState","contextTextState","textAlign","render_canvas","textBaseline","fillStyleColor","colorlike","strokeStyleColor","strokeStyleLineCap","strokeStyleLineDash","strokeStyleLineDashOffset","strokeStyleLineJoin","strokeStyleWidth","strokeStyleMiterLimit","imageAnchor","getAnchor","imageImage","imageOrigin","getOrigin","imageSize","getRotateWithView","getScale","textFillStyle","textFillStyleColor","textStrokeStyle","textStrokeStyleColor","textStrokeStyleLineCap","textStrokeStyleLineDash","textStrokeStyleLineDashOffset","textStrokeStyleLineJoin","textStrokeStyleWidth","textStrokeStyleMiterLimit","textFont","getFont","textOffsetX","getOffsetX","textOffsetY","getOffsetY","textRotateWithView","textRotation","textScale","textText","textTextAlign","getTextAlign","textTextBaseline","getTextBaseline","expireIconCache","IconImageCache","expire","sortByZIndex","state1","state2","renderer_Map","Disposable","MapRenderer","layerRenderers_","layerRendererListeners_","layerRendererConstructors_","registerLayerRenderers","constructors","calculateMatrices2D","removeLayerRendererByKey_","thisArg","thisArg2","result","viewResolution","managed","translatedCoordinate","canWrapX","projectionExtent","worldWidth","ceil","layerState","layerRenderer","getLayerRenderer","getWrapX","layerKey","candidate","handleLayerRendererChange_","getLayerRendererByKey","getLayerRenderers","getMap","removeUnusedLayerRenderers_","scheduleExpireIconCache","scheduleRemoveUnusedLayerRenderers","ol_Disposable","layerRendererConstructors","canvas_Map","CanvasMapRenderer","display","css","insertBefore","childNodes","renderedVisible_","composeEvent","clearRect","PRECOMPOSE","save","sourceState","State","READY","prepareFrame","composeFrame","restore","POSTCOMPOSE","numLayers","forEachLayerAtCoordinate","ctor","canvas_Layer","LayerRenderer","CanvasLayerRenderer","renderedResolution","clip","topLeft","bottomRight","dispatchComposeEvent_","opt_transform","getLayer","postCompose","preCompose","RENDER","Observable","layer_","createLoadedTileFinder","tiles","tileRange","forEachLoadedTile","tileCoord","handleImageChange_","renderIfReadyAndVisible","imageState","getSourceState","scheduleExpireCache","tileSource","canExpireCache","postRenderFunction","expireCache","updateUsedTiles","zKey","manageTilePyramid","tileGrid","currentZ","opt_tileCallback","getTileRangeForExtentAndZ","getTile","getTileCoordCenter","useTile","IntermediateCanvas","IntermediateCanvasRenderer","coordinateToCanvasPixelTransform","hitCanvasContext_","clipped","imageTransform","getImageTransform","dw","dh","ol_coordinate","imageData","getImageData","ImageLayer_CanvasImageLayerRenderer","CanvasImageLayerRenderer","imageLayer","imageTransform_","skippedFeatures_","vectorRenderer_","LayerType","VECTOR","viewCenter","imageSource","vectorRenderer","renderedExtent","skippedFeatures","imageFrameState","newSkippedFeatures","replayGroupChanged","imageExtent","imageResolution","imagePixelRatio","getPixelRatio","IMAGE","getRenderMode","VectorRenderType","mapRenderer","ImageLayer","TileLayer_CanvasTileLayerRenderer","CanvasTileLayerRenderer","tileLayer","opt_noContext","oversampling_","renderedExtent_","renderedRevision","renderedTiles","newTiles_","tmpExtent","tmpTileRange_","TileRange","zDirection","isDrawableTile_","tileState","setState","getInterimTile","sourceRevision","getRevision","getTileGridForProjection","getZForResolution","oversampling","getTileRangeExtent","tilePixelRatio","getTilePixelRatio","tilesToDrawByZ","findLoadedTiles","animatingOrInteracting","tmpTileRange","uid","inTransition","getAlpha","childTileRange","getTileCoordChildTileRange","covered","forEachTileCoordParentTileRange","tilePixelSize","getTilePixelSize","currentScale","currentTilePixelSize","tileExtent","tileGutter","tilesToDraw","zs","tileCoordKey","getGutterForProjection","getTileCoordExtent","getTileCoord","drawTileImage","gutter","transition","getTileImage","getOpaque","alphaChanged","endTransition","ReplayGroup_ReplayGroup","getReplay","replayType","addDeclutter","group","render_ReplayGroup","ReplayType","DEFAULT","TEXT","drawTextOnPath","measure","startM","maxAngle","previousAngle","reverse","numChars","segmentM","segmentLength","chunk","chunkLength","char","charAt","charLength","charM","segmentPos","interpolate","unshift","Instruction","BEGIN_GEOMETRY","BEGIN_PATH","CLOSE_PATH","CUSTOM","DRAW_CHARS","DRAW_IMAGE","END_GEOMETRY","FILL","MOVE_TO_LINE_TO","SET_FILL_STYLE","SET_STROKE_STYLE","STROKE","Instruction_fillInstruction","Instruction_strokeInstruction","beginPathInstruction","closePathInstruction","canvas_Instruction","ORDER","TEXT_ALIGN","middle","hanging","alphabetic","ideographic","Replay_tmpExtent","tmpTransform","Replay","CanvasReplay","tolerance","maxExtent","overlaps","declutterTree","maxLineWidth","alignFill_","beginGeometryInstruction1_","beginGeometryInstruction2_","bufferedMaxExtent_","instructions","coordinateCache_","renderedTransform_","hitDetectionInstructions","replayTextBackground_","p1","p2","p3","p4","fillInstruction","strokeInstruction","setStrokeStyle_","replayImage_","anchorX","anchorY","declutterGroup","snapToPixel","fillStroke","boxW","boxH","boxX","boxY","strokePadding","declutterArgs","applyPixelRatio","dashArray","dash","appendFlatCoordinates","closed","skipFirst","myEnd","getBufferedMaxExtent","lastRel","nextRel","lastCoord","nextCoord","NaN","skipped","Relationship","drawCustomCoordinates_","replayEnds","replayEnd","beginGeometry","replayEndss","replayBegin","myEnds","inflate","endGeometry","finish","origin","repeatSize","instruction","renderDeclutter_","groupCount","box","collides","insert","declutterData","replay_","skippedFeaturesHash","featureCallback","opt_hitExtent","dd","prevX","prevY","roundX","roundY","skipFeatures","pendingFill","pendingStroke","lastFillInstruction","lastStrokeInstruction","coordinateCache","batchSize","fn","rotateWithView","backgroundFill","backgroundStroke","baseline","fillKey","strokeKey","strokeWidth","textKey","pathLength","flat_length","textLength","textStates","parts","cc","chars","label","part","replay","replayHitDetection","opt_featureCallback","reverseHitDetectionInstructions","createFill","applyStroke","createStroke","updateFillStyle","currentFillStyle","updateStrokeStyle","currentStrokeStyle","currentLineCap","currentLineDash","currentLineDashOffset","currentLineJoin","currentLineWidth","currentMiterLimit","endGeometryInstruction","ImageReplay","CanvasImageReplay","declutterGroup_","hitDetectionImage_","anchorX_","anchorY_","height_","opacity_","originX_","originY_","rotateWithView_","rotation_","scale_","drawCoordinates_","myBegin","hitDetectionImage","getHitDetectionImage","LineStringReplay","CanvasLineStringReplay","drawFlatCoordinates_","moveToLineToInstruction","lastStroke","PolygonReplay","CanvasPolygonReplay","drawFlatCoordinatess_","numEnds","setFillStrokeStyles_","circleInstruction","simplify","matchingChunk","m12","m23","x12","y12","x23","y23","chunkStart","chunkEnd","chunkM","acos","BATCH_CONSTRUCTORS","Circle","Default","Image","LineString","Text","CanvasTextReplay","labels_","fillStates","strokeStates","textKey_","fillKey_","strokeKey_","widths_","prune","geometryType","placement","TextPlacement","LINE","flatEnd","flatOffset","o","oo","range","drawChars_","interiorPoints","drawTextImage_","containsKey","align","lines","split","numLines","widths","currentWidth","measureTextWidths","lineHeight","renderWidth","leftRight","getOverflow","getMaxAngle","getPlacement","getBackgroundFill","getBackgroundStroke","getPadding","ReplayGroup_CanvasReplayGroup","ReplayGroup","CanvasReplayGroup","opt_renderBuffer","declutterTree_","tolerance_","maxExtent_","overlaps_","resolution_","renderBuffer_","replaysByZIndex_","hitDetectionContext_","hitDetectionTransform_","declutter","flatClipCoords","getClipCoords","hasReplays","replays","candidates","replayKey","declutterReplays","hitExtent","contextSize","declutteredFeatures","mask","circleArrayCache","arraySize","error","fillCircleArrayRowToMiddle","getCircleArray","all","entry","zIndexKey","Constructor","getReplays","opt_replayTypes","opt_declutterReplays","replayTypes","0","canvas_ReplayGroup","SIMPLIFY_TOLERANCE","GEOMETRY_RENDERERS","Point","replayGroup","getImageState","imageReplay","textReplay","lineStringReplay","polygonReplay","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection","geometryRenderer","circleReplay","defaultOrder","feature1","feature2","getSquaredTolerance","getTolerance","renderFeature","squaredTolerance","unlistenImageChange","listenImageChange","simplifiedGeometry","renderGeometry","getGeometries","renderFeatureInternal","VectorLayer_CanvasVectorLayerRenderer","CanvasVectorLayerRenderer","vectorLayer","getDeclutter","rbush_default","dirty_","renderedRevision_","renderedResolution_","renderedRenderOrder_","replayGroup_","handleFontsChanged_","vectorSource","clipExtent","replayContext","drawOffsetX","drawOffsetY","transparentLayer","hasRenderListeners","drawWidth","drawHeight","drawSize","world","mainContextAlpha","handleStyleImageChange_","animating","interacting","updateWhileAnimating","getUpdateWhileAnimating","updateWhileInteracting","getUpdateWhileInteracting","frameStateExtent","vectorLayerRevision","vectorLayerRenderBuffer","getRenderBuffer","vectorLayerRenderOrder","getRenderOrder","getOverlaps","loadFeatures","getStyleFunction","dirty","forEachFeatureInExtent","VectorLayer","IMAGE_REPLAYS","hybrid","VECTOR_REPLAYS","VectorTileLayer_CanvasVectorTileLayerRenderer","CanvasVectorTileLayerRenderer","renderedLayerRevision_","tmpTransform_","renderMode","VectorTileRenderType","createReplayGroup_","renderTileImage_","layerRevision","revision","renderOrder","replayState","getReplayState","renderedRenderOrder","sourceTileGrid","sourceTile","tileKeys","sourceTileCoord","sourceTileExtent","sharedExtent","bufferedExtent","tileProjection","reproject","setProjection","getFeatures","TILE_PIXELS","setWorldExtent","setExtent","setReplayGroup","tt","loop","getReplayGroup","getReplayTransform_","renderResolution","clips","worldOffset","currentClip","zz","replayData","replayDeclutter","renderedTileRevision","wrappedTileCoord","pixelScale","VECTOR_TILE","VectorTileLayer","Map_Map","Map","control_util","AutoRenderLoop","ol3d","scene_","getCesiumScene","_boundNotifyRepaintRequired","notifyRepaintRequired","repaintEventNames_","enable","requestRenderMode","maximumRenderTimeChange","_iterator","_isArray","_i","Symbol","iterator","_ref","next","repaintKey","getOlMap","disable","_iterator2","_isArray2","_i2","_ref2","un","restartRenderLoop","requestRender","Camera","cam_","view_","viewListenKey_","toLonLat_","identityProjection","fromLonLat_","tilt_","distance_","lastCameraViewMatrix_","viewUpdateInProgress_","setView_","dim","_this2","olObservableUnByKey","toLonLat","handleViewEvent_","readFromView","setHeading","getHeading","setTilt","tilt","updateCamera_","getTilt","setDistance","updateView","getDistance","setPosition","ll","carto","Cartographic","getAltitude","cartographicToCartesian","getPosition","cartesianToCartographic","longitude","latitude","setAltitude","altitude","orientation","pitch","PI_OVER_TWO","roll","moveBackward","checkCameraChange","calcDistanceForResolution","olcsCore","pickCenterPoint","bestTarget","positionCartographic","bestTargetCartographic","calcResolutionForDistance","pos","targetNormal","targetToCamera","tiltAngle","opt_dontSync","old","current","viewMatrix","equalsEpsilon","AbstractSynchronizer","olLayers","mapLayerGroup","layerMap","olLayerListenKeys","olGroupListenKeys_","synchronize","destroyAll","addLayers_","orderLayers","root","fifo","_loop","olLayerId","cesiumObjects","olLayerGroup","listenForGroupChanges_","createSingleLayerCounterparts","newOlLayerWithParents","layerId","layerWithParents","onLayerChange","cesiumObjs","addCesiumObjects_","cesiumObject","addCesiumObject","removeAndDestroySingleLayer_","_this3","counterparts","counterpart","removeSingleCesiumObject","destroyCesiumObject","unlistenSingleGroup_","removeLayer_","_this4","uuid","listenKeyArray","contentKeys","listenAddRemove","_this5","collection","el","objKey","removeAllCesiumObjects","destroy","RasterSynchronizer","_olcsAbstractSynchron","cesiumLayers_","imageryLayers","ourLayers_","ImageryLayerCollection","removeAll","convertLayerToCesiumImageries","tileLayerToImageryLayer","_this$olLayerListenKe","olLayerItem","updateCesiumLayerProperties","zIndices","queue","sublayers","layer1","layer2","raiseToTop","olcsAbstractSynchronizer","source_Cluster","VectorSource","Cluster","geometryFunction","refresh","cluster","addFeatures","mapDistance","clustered","ol_util","getCoordinates","neighbors","getFeaturesInExtent","neighbor","createCluster","centroid","Feature","Vector","VectorTile_VectorTileLayer","HYBRID","TileProperty","layer_Vector","VectorTile","VectorLayerCounterpart","layerProjection","billboards","BillboardCollection","primitives","PrimitiveCollection","olListenKeys","rootCollection_","featureToCesiumMap","getRootPrimitive","FeatureConverter","boundOnRemoveOrClearFeatureListener_","onRemoveOrClearFeature_","defaultBillboardEyeOffset_","cancellers","canceller","setReferenceForPicking","primitive","olFeature","createColoredPrimitive","olGeometry","opt_lineWidth","flat","renderState","depthTest","enabled","instances","instance","GeometryInstance","attributes","ColorGeometryInstanceAttribute","fromColor","createInstance","getHeightReference","HeightReference","CLAMP_TO_GROUND","GroundPrimitive","geometryInstances","Primitive","dataUri","getValue","toDataURL","appearance","MaterialAppearance","material","Material","fabric","uniforms","PerInstanceColorAppearance","extractColorFromOlStyle","outline","fillColor","strokeColor","convertColorToCesium","extractLineWidthFromOlStyle","wrapFillAndOutlineGeometries","fillGeometry","outlineGeometry","olStyle","outlineColor","addTextStyle","olGeometry4326TextPartToCesium","csAddBillboard","bbOptions","eyeOffset","bb","olCircleGeometryToCesium","olGeometryCloneTo4326","getRadius","outlinePrimitive","CircleGeometry","circlePolygon","olCreateCircularPolygon","positions","ol4326CoordinateArrayToCsCartesians","getLinearRing","GroundPolylineGeometry","PolylineMaterialAppearance","olStyleToCesium","classificationType","ClassificationType","TERRAIN","readyPromise","then","_primitive","createStackedGroundCorridors","CircleOutlineGeometry","extrudedHeight","previousDistance","_arr","geometryOptions","vertexFormat","VertexFormat","POSITION_ONLY","linePositions","CorridorGeometry","distanceDisplayCondition","DistanceDisplayConditionGeometryInstanceAttribute","olLineStringGeometryToCesium","heightReference","primitiveOptions","PolylineGeometry","olPolygonGeometryToCesium","maxHeight","RectangleGeometry","RectangleOutlineGeometry","rings","getLinearRings","hierarchy","polygonHierarchy","olPos","holes","PolygonGeometry","perPositionHeight","_i4","_positions2","polylineGeometry","PolygonOutlineGeometry","altitudeMode","NONE","RELATIVE_TO_GROUND","createBillboardFromImage","opt_newBillboardCallback","olStyleIcon","reallyCreateBillboard","HTMLCanvasElement","HTMLImageElement","pixelOffset","src","naturalHeight","naturalWidth","isImageLoaded","cancelled","fuid","isDestroyed","olPointGeometryToCesium","modelPrimitive","olcsModelFunction","olcsModel","cesiumOptions","model","Model","fromGltf","debugModelMatrix","DebugModelMatrixPrimitive","modelMatrix","olMultiGeometryToCesium","subgeos","accumulate","functor","getPoints","getLineStrings","getPolygons","labels","LabelCollection","extentCenter","olGeomSimpleGeometry","getFirstCoordinate","horizontalOrigin","labelStyle","LabelStyle","outlineWidth","OUTLINE","FILL_AND_OUTLINE","HorizontalOrigin","CENTER","verticalOrigin","VerticalOrigin","TOP","BOTTOM","fromType","horizontal","repeat","evenColor","oddColor","computePlainStyle","fallbackStyleFunction","featureStyleFunction","getGeometryFromFeature","opt_geom","geom3d","olGeomGeometry","geomFuncRes","olFeatureToCesium","geom","newBillboardAddedCallback","featureBb","prims","bbs","result2","olVectorLayerToCesium","olView","featurePrimitiveMap","olSourceCluster","olcsCoreVectorLayerCounterpart","layerStyle","prim","convert","VectorSynchronizer","opt_converter","converter","olcsFeatureConverter","csAllPrimitives_","destroyPrimitives","updateLayerVisibility","csPrimitive","olLayerVector","olLayerVectorTile","csPrimitives","onAddFeature","onRemoveFeature","Billboard","SynchronizedOverlay","_olOverlay","getOptions","scenePostRenderListenerRemover_","synchronizer_","synchronizer","parent_","positionWGS84_","observer_","MutationObserver","handleElementChanged","_assertThisInitialized","attributeObserver_","listenerKeys_","setPropertyFromEvent","setPropertyFromEvent_","handleMapChanged","observeTarget_","disconnect","observe","childList","characterData","subtree","observer","getScene","postRender","updatePixelPosition","stopEvent","insertFirst","handlePositionChanged","cloneNode","nodes","getElement","clonedNode","globeHeight","tilesLoaded","cartesian","ellipsoidBoundingSphere","BoundingSphere","Occluder","isPointVisible","computeCullingVolume","computeVisibility","setVisible","pixelCartesian","cartesianToCanvasCoordinates","mapSize","updateRenderedPosition","olOverlay","OverlaySynchronizer","parentElement","overlayMap_","addOverlays","addOverlayFromEvent_","removeOverlayFromEvent_","cesiumOverlay","olcsSynchronizedOverlay","overlayId","removedOverlay","csOverlay","OLCesium","autoRenderLoop_","time_","JulianDate","to4326Transform_","resolutionScale_","canvasClientWidth_","canvasClientHeight_","resolutionScaleChanged_","fillArea","container_","containerAttribute","createAttribute","setAttributeNode","oc","isOverMap_","stopOpenLayersEventsPropagation","canvasAttribute","oncontextmenu","onselectstart","enabled_","pausedInteractions_","hiddenRootGroup_","sceneOptions","scene3DOnly","Scene","sscc","screenSpaceCameraController","tiltEventTypes","CameraEventType","LEFT_DRAG","modifier","KeyboardEventModifier","SHIFT","ALT","enableLook","constrainedAxis","camera_","olcsCamera","globe_","Globe","baseColor","WHITE","skyAtmosphere","SkyAtmosphere","firstImageryProvider","addImageryProvider","dataSourceCollection_","DataSourceCollection","dataSourceDisplay_","DataSourceDisplay","dataSourceCollection","synchronizers","createSynchronizers","olcsRasterSynchronizer","olcsVectorSynchronizer","olcsOverlaySynchronizer","lastFrameTime_","renderId_","targetFrameRate_","POSITIVE_INFINITY","blockCesiumRendering_","warmingUp_","trackedFeature_","trackedEntity_","entityView_","needTrackedEntityUpdate_","boundingSphereScratch_","EventHelper","updateTrackedEntity_","enableSuspendTerrainAdjustment","render_","onAnimationFrame_","frameTime","julianDate","initializeFrame","update","trackedEntity","getBoundingSphere","BoundingSphereState","DONE","PENDING","enableTilt","bs","FAILED","EntityView","mapProjection","resolutionScale","devicePixelRatio","aspectRatio","getCamera","getOlView","getDataSources","getDataSourceDisplay","getEnabled","setEnabled","visibility","throwOnUnitializedMap_","rootGroup","classList","warmUp","timeout","csCamera","setBlockCesiumRendering","block","enableAutoRenderLoop","olcsAutoRenderLoop","getAutoRenderLoop","setResolutionScale","setTargetFrameRate","trackedFeature","defaultDataSource","entities","IDENTITY","to4326Transform","CallbackProperty","coo4326","TRANSPARENT","TRUE","FALSE","VOID","getChangeEventType","_ObjectEventType_js__WEBPACK_IMPORTED_MODULE_1__","_Observable_js__WEBPACK_IMPORTED_MODULE_2__","_events_Event_js__WEBPACK_IMPORTED_MODULE_3__","_obj_js__WEBPACK_IMPORTED_MODULE_4__","ObjectEvent","oldValue","opt_values","values_","getKeys","notify","opt_silent","unset","changeEventTypeCache","_color_js__WEBPACK_IMPORTED_MODULE_1__","Fill","_events_js__WEBPACK_IMPORTED_MODULE_1__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__","_Object_js__WEBPACK_IMPORTED_MODULE_3__","opt_geometryOrProperties","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","handleGeometryChanged_","setGeometryName","getGeometryName","getStyle","handleGeometryChange_","createStyleFunction","setId","_events_EventType_js__WEBPACK_IMPORTED_MODULE_0__","_extent_js__WEBPACK_IMPORTED_MODULE_0__","_GeometryType_js__WEBPACK_IMPORTED_MODULE_1__","_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_2__","_flat_deflate_js__WEBPACK_IMPORTED_MODULE_3__","_math_js__WEBPACK_IMPORTED_MODULE_4__","opt_layout","setCoordinates","layout","closestPointXY","closestPoint","minSquaredDistance","computeExtent","intersectsExtent","setLayout","Property","pan","rotateWithoutConstraints","zoomByDelta","zoomWithoutConstraints","Interaction_Interaction","Interaction","setActive","active","opt_duration","currentRotation","FIREFOX","SAFARI","WEBKIT","MAC","DEVICE_PIXEL_RATIO","CANVAS_LINE_DASH","TOUCH","POINTER","MSPOINTER","ua","navigator","userAgent","toLowerCase","msPointerEnabled","featureloader_xhr","format","success","failure","xhr","XMLHttpRequest","open","FormatType","ARRAY_BUFFER","responseType","onload","status","JSON","responseText","XML","responseXML","response","readFeatures","featureProjection","readProjection","getLastExtent","onerror","send","loadFeaturesXhr","dataProjection","loadingstrategy_all","VectorEventType","RBush_RBush","opt_maxEntries","rbush_","items_","item","extents","items","bbox","getAll","getInExtent","search","forEach_","forEachInExtent","ol_obj","toJSON","rbush","structs_RBush","VectorSourceEvent","opt_feature","Vector_VectorSource","Source","format_","url_","loader","strategy_","strategy","useSpatialIndex","featuresRtree_","loadedExtentsRtree_","nullGeometryFeatures_","idIndex_","undefIdIndex_","featureChangeKeys_","featuresCollection_","addFeaturesInternal","bindFeaturesCollection_","addFeature","addFeatureInternal","featureKey","addToIndex_","setupChangeEvents_","handleFeatureChange_","valid","newFeatures","geometryFeatures","modifyingCollection","removeFeature","opt_fast","featureId","removeFeatureInternal","clearEvent","forEachFeature","forEachFeatureAtCoordinateDirect","intersectsCoordinate","forEachFeatureIntersectingExtent","getFeaturesCollection","getFeaturesAtCoordinate","getClosestFeatureToCoordinate","opt_filter","closestFeature","previousMinSquaredDistance","minDistance","getFeatureById","getFormat","sid","removeFromIdIndex_","hasFeature","loadedExtentsRtree","extentsToLoad","extentToLoad","removeLoadedExtent","removed","setLoader","source_Source","transformWithOptions","_util_js__WEBPACK_IMPORTED_MODULE_1__","_proj_js__WEBPACK_IMPORTED_MODULE_2__","FeatureFormat","defaultFeatureProjection","write","transformed","decimals","getReadOptions","adaptOptions","readFeature","readGeometry","writeFeature","writeFeatures","writeGeometry","easeIn","easeOut","inAndOut","linear","OPACITY","VISIBLE","Z_INDEX","MAX_RESOLUTION","MIN_RESOLUTION","SOURCE","_VectorRenderType_js__WEBPACK_IMPORTED_MODULE_2__","_style_Style_js__WEBPACK_IMPORTED_MODULE_4__","renderBuffer","declutter_","updateWhileAnimating_","updateWhileInteracting_","renderMode_","setDeclutter","setRenderOrder","geom_LinearRing","LinearRing","maxDelta_","maxDeltaRevision_","setFlatCoordinates","closest","flat_area","getSimplifiedGeometryInternal","simplifiedFlatCoordinates","GeometryLayout","deflate","geom_SimpleGeometry","circular","fromExtent","Polygon_Polygon","opt_ends","ends_","flatInteriorPointRevision_","flatInteriorPoint_","orientedRevision_","orientedFlatCoordinates_","appendLinearRing","linearRing","opt_right","orient","flatCenter","interiorpoint","getInteriorPoint","getLinearRingCount","linearRings","simplifiedEnds","intersectsextent","opt_n","opt_sphereRadius","opt_tileCoord","getKeyZXY","fromKey","hash","quadKey","digits","withinExtentAndZ","getFullTileRange","CLASS_HIDDEN","CLASS_SELECTABLE","CLASS_UNSELECTABLE","CLASS_CONTROL","CLASS_COLLAPSED","getFontFamilies","family","transformGeom2D","_extent_js__WEBPACK_IMPORTED_MODULE_1__","_Geometry_js__WEBPACK_IMPORTED_MODULE_2__","_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_3__","_flat_transform_js__WEBPACK_IMPORTED_MODULE_4__","_obj_js__WEBPACK_IMPORTED_MODULE_5__","Geometry","getLastCoordinate","getLayout","simplifiedGeometryRevision","simplifiedGeometryCache","simplifiedGeometryMaxMinSquaredTolerance","getStrideForLayout","nesting","getLayoutForStride","opt_sy","simpleGeometry","opt_dest","UNDEFINED","FEET","PIXELS","USFEET","num","hasArea","ratio","toSize","unByKey","_events_js__WEBPACK_IMPORTED_MODULE_0__","_events_Target_js__WEBPACK_IMPORTED_MODULE_1__","revision_","once","toStringHDMS","_math_js__WEBPACK_IMPORTED_MODULE_0__","degreesToStringHDMS","hemispheres","degrees","opt_fractionDigits","normalizedDegrees","dflPrecision","precision","deg","sec","coordinate1","coordinate2","ERROR_THRESHOLD","ENABLE_RASTER_REPROJECTION","FRACTION","deflateCoordinate","deflateCoordinates","deflateCoordinatesArray","coordinatess","deflateMultiCoordinatesArray","coordinatesss","opt_endss","inflateCoordinates","opt_coordinates","inflateCoordinatesArray","opt_coordinatess","inflateMultiCoordinatesArray","opt_coordinatesss","asString","asArray","_math_js__WEBPACK_IMPORTED_MODULE_1__","HEX_COLOR_RE_","NAMED_COLOR_RE_","fromString","g","rgb","fromNamed","hasAlpha","substr","fromStringInternal_","_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_1__","_Object_js__WEBPACK_IMPORTED_MODULE_2__","CollectionEvent","opt_element","opt_array","unique_","unique","array_","assertUnique_","updateLength_","getLength","insertAt","elem","removeAt","prev","setAt","opt_except","visibleAtResolution","_events_EventType_js__WEBPACK_IMPORTED_MODULE_1__","_util_js__WEBPACK_IMPORTED_MODULE_2__","_Base_js__WEBPACK_IMPORTED_MODULE_4__","_Property_js__WEBPACK_IMPORTED_MODULE_5__","_obj_js__WEBPACK_IMPORTED_MODULE_6__","_render_EventType_js__WEBPACK_IMPORTED_MODULE_7__","_source_State_js__WEBPACK_IMPORTED_MODULE_8__","BaseLayer","mapPrecomposeKey_","mapRenderKey_","sourceChangeKey_","handleSourcePropertyChange_","setSource","getLayersArray","opt_states","states","getLayerState","handleSourceChange_","renderEvent","maxSquaredDelta","arrayMaxSquaredDelta","multiArrayMaxSquaredDelta","assignClosestPoint","assignClosestArrayPoint","assignClosestMultiArrayPoint","assignClosest","offset1","offset2","squaredDelta","maxDelta","isRing","opt_tmpPoint","tmpPoint","transform2D","dest","_Disposable_js__WEBPACK_IMPORTED_MODULE_0__","_functions_js__WEBPACK_IMPORTED_MODULE_2__","_Event_js__WEBPACK_IMPORTED_MODULE_3__","pendingRemovals_","dispatching_","listeners_","propagate","pendingRemovals","_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_2__","_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__","_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_4__","_flat_closest_js__WEBPACK_IMPORTED_MODULE_5__","_flat_deflate_js__WEBPACK_IMPORTED_MODULE_6__","_flat_inflate_js__WEBPACK_IMPORTED_MODULE_7__","_flat_interpolate_js__WEBPACK_IMPORTED_MODULE_8__","_flat_intersectsextent_js__WEBPACK_IMPORTED_MODULE_9__","_flat_length_js__WEBPACK_IMPORTED_MODULE_10__","_flat_segments_js__WEBPACK_IMPORTED_MODULE_11__","_flat_simplify_js__WEBPACK_IMPORTED_MODULE_12__","flatMidpoint_","flatMidpointRevision_","appendCoordinate","forEachSegment","getCoordinateAtM","opt_extrapolate","extrapolate","getCoordinateAt","IconImage_IconImage","IconImage","imageListenerKeys_","imageState_","size_","src_","tainted_","isTainted_","dispatchChangeEvent_","handleImageError_","unlistenImage_","handleImageLoad_","replaceColor_","getSrc","imgData","putImageData","Icon_Icon","ImageStyle","Icon","anchor_","normalizedAnchor_","anchorOrigin_","anchorOrigin","IconOrigin","anchorXUnits_","anchorXUnits","IconAnchorUnits","anchorYUnits_","anchorYUnits","crossOrigin_","img","imgSize","ol_color","iconImage_","iconImage","offset_","offsetOrigin_","offsetOrigin","origin_","setAnchor","getImageSize","getHitDetectionImageSize","iconImageSize","tmpTileCoord","TileGrid_TileGrid","origins","origins_","tileSizes_","tileSizes","tileSize_","tileSize","fullTileRanges_","tmpSize_","sizes","calculateTileRanges_","forEachTileCoord","opt_tileRange","tileCoordExtent","getTileCoordForXYAndZ_","getTileCoordForCoordAndResolution","getTileCoordForXYAndResolution_","reverseIntersectionPolicy","adjustX","adjustY","xFromOrigin","yFromOrigin","tileCoordX","tileCoordY","tilecoord","getTileCoordForCoordAndZ","getTileCoordResolution","fullTileRanges","tilegrid_TileGrid","getForProjection","getDefaultTileGrid","opt_maxZoom","opt_tileSize","opt_corner","Corner","resolutionsFromExtent","createForExtent","extentFromProjection","createForProjection","setDefaultTileGrid","worldsAway","createXYZ","xyzOptions","gridOptions","half","asColorLike","_color_js__WEBPACK_IMPORTED_MODULE_0__","control_Control","Control","target_","listenerKeys","mapEvent","updateElement_","control_Attribution","Attribution","ulElement_","collapsed_","collapsed","overrideCollapsible_","collapsible","collapsible_","tipLabel","collapseLabel","collapseLabel_","label_","activeLabel","title","handleClick_","cssClasses","renderedAttributions_","collectSourceAttributions_","lookup","visibleAttributions","attributionGetter","getAttributionsCollapsible","setCollapsible","innerHTML","handleToggle_","toggle","getCollapsible","setCollapsed","getCollapsed","Rotate_render","autoHide_","msTransform","webkitTransform","control_Rotate","Rotate","callResetNorth_","resetNorth","duration_","autoHide","resetNorth_","control_Zoom","Zoom","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","outElement","zoomByDelta_","newResolution","defaults","zoomOptions","rotateOptions","attribution","attributionOptions","padNumber","number","opt_precision","numberString","toFixed","compareVersions","v1","v2","s1","s2","n1","n2","douglasPeucker","douglasPeuckerArray","snap","quantizeArray","quantizeMultiArray","simplifiedOffset","markers","stack","last","maxSquaredDistance","quantize","simplifiedEndss","linearRingContainsExtent","linearRingContainsXY","linearRingsContainsXY","linearRingssContainsXY","wn","_Fill_js__WEBPACK_IMPORTED_MODULE_0__","_TextPlacement_js__WEBPACK_IMPORTED_MODULE_1__","font_","textAlign_","textBaseline_","maxAngle_","placement_","overflow_","offsetX_","offsetY_","backgroundFill_","backgroundStroke_","padding_","setOverflow","setFont","setMaxAngle","setOffsetX","setOffsetY","setPlacement","setScale","setTextAlign","setTextBaseline","setBackgroundFill","setBackgroundStroke","setPadding","_Collection_js__WEBPACK_IMPORTED_MODULE_1__","_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_2__","_ObjectEventType_js__WEBPACK_IMPORTED_MODULE_4__","_asserts_js__WEBPACK_IMPORTED_MODULE_5__","_events_js__WEBPACK_IMPORTED_MODULE_6__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_7__","_extent_js__WEBPACK_IMPORTED_MODULE_8__","_Base_js__WEBPACK_IMPORTED_MODULE_9__","_obj_js__WEBPACK_IMPORTED_MODULE_10__","_source_State_js__WEBPACK_IMPORTED_MODULE_11__","LAYERS","LayerGroup","layersListenerKeys_","handleLayersChanged_","setLayers","handleLayerChange_","handleLayersAdd_","handleLayersRemove_","layersArray","collectionEvent","ownLayerState","CircleStyle","RegularShape","points","atlasManager","atlasManager_","setOpacity","setRadius","radius_","checksums_","hitDetectionCanvas_","points_","radius1","radius2_","radius2","angle_","imageSize_","hitDetectionImageSize_","getRadius2","getAngle","renderOptions","draw_","createHitDetectionCanvas_","renderHitDetectionCallback","hasCustomHitDetectionImage","drawHitDetectionCanvas_","info","hitImage","angle0","radiusC","strokeChecksum","fillChecksum","checksum","ol_Tile","Tile","interimTile","transition_","transitionStarts_","refreshInterimChain","getBlankImage","ol_ImageTile","ImageTile","tileLoadFunction_","ol_TileCache","LRUCache","TileCache","opt_highWaterMark","peekLast","pruneExceptNewestZ","peekFirstKey","structs_LRUCache","reproj_Tile","ReprojTile","targetProj","targetTileGrid","getTileFunction","opt_errorThreshold","opt_renderEdges","renderEdges_","gutter_","sourceTileGrid_","targetTileGrid_","wrappedTileCoord_","sourceTiles_","sourcesListenerKeys_","sourceZ_","targetExtent","maxTargetExtent","maxSourceExtent","limitedTargetExtent","sourceProjExtent","reproj","isFinite","errorThresholdInPixels","triangulation_","Triangulation","getTriangles","sourceExtent","calculateSourceExtent","sourceRange","srcX","srcY","unlistenSources_","reproject_","sources","leftToLoad","sourceListenKey","Tile_TileSource","TileSource","opaque_","tilePixelRatio_","tileCache","tmpSize","key_","tileOptions","getTileCacheForProjection","loaded","setKey","ol_tilegrid","thisProj","ol_proj","getTileCoordForTileUrlFunction","isGlobal","TileSourceEvent","TileEventType","TileImage_TileImage","UrlTile","TileImage","defaultTileLoadFunction","urls","tileClass","tileCacheForProjection","tileGridForProjection","reprojectionErrorThreshold_","renderReprojectionEdges_","usedTileCache","getGutter","projKey","highWaterMark","createTile_","urlTileCoord","tileUrl","newTile","getTileInternal","setRenderReprojectionEdges","setTileGridForProjection","tilegrid","generateTileUrlFunction_","tileurlfunction","setUrls","setUrl","setTileUrlFunction","tileLoadingKeys_","getTileLoadFunction","getUrls","setTileLoadFunction","imageTile","calculateSourceResolution","_dom_js__WEBPACK_IMPORTED_MODULE_0__","_math_js__WEBPACK_IMPORTED_MODULE_2__","_proj_js__WEBPACK_IMPORTED_MODULE_3__","targetMetersPerUnit","sourceMetersPerUnit","compensationFactor","enlargeClipPoint","centroidX","centroidY","dX","dY","triangulation","sourceDataExtent","canvasWidthInUnits","canvasHeightInUnits","stitchContext","stitchScale","xPos","yPos","srcWidth","srcHeight","targetTopLeft","triangle","u0","v0","u1","u2","sourceNumericalShiftX","sourceNumericalShiftY","augmentedMatrix","affineCoefs","p0","createSnapToN","createSnapToZero","theta","opt_tolerance","CARMENTA_SERVER","GEOSERVER","MAPSERVER","QGIS","_LineString_js__WEBPACK_IMPORTED_MODULE_4__","_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_5__","_flat_closest_js__WEBPACK_IMPORTED_MODULE_6__","_flat_deflate_js__WEBPACK_IMPORTED_MODULE_7__","_flat_inflate_js__WEBPACK_IMPORTED_MODULE_8__","_flat_interpolate_js__WEBPACK_IMPORTED_MODULE_9__","_flat_intersectsextent_js__WEBPACK_IMPORTED_MODULE_10__","_flat_simplify_js__WEBPACK_IMPORTED_MODULE_11__","lineStrings","lineString","appendLineString","opt_interpolate","getLineString","midpoints","midpoint","_Units_js__WEBPACK_IMPORTED_MODULE_0__","code_","units_","worldExtent_","axisOrientation_","global_","canWrapX_","getPointResolutionFunc_","defaultTileGrid_","metersPerUnit_","getWorldExtent","getAxisOrientation","setGlobal","setGetPointResolution","func","intersectsLineString","intersectsLineStringArray","intersectsLinearRingArray","intersectsLinearRingMultiArray","_contains_js__WEBPACK_IMPORTED_MODULE_1__","_segments_js__WEBPACK_IMPORTED_MODULE_2__","coordinatesExtent","point1","point2","intersectsLinearRing","_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__","_Point_js__WEBPACK_IMPORTED_MODULE_3__","_flat_deflate_js__WEBPACK_IMPORTED_MODULE_5__","_flat_inflate_js__WEBPACK_IMPORTED_MODULE_6__","_math_js__WEBPACK_IMPORTED_MODULE_7__","appendPoint","Kinetic","decay","minVelocity","delay","decay_","minVelocity_","delay_","initialVelocity_","lastIndex","firstIndex","ol_Kinetic","DoubleClickZoom_handleEvent","delta_","interaction_Interaction","interaction_DoubleClickZoom","DoubleClickZoom","altShiftKeysOnly","condition_focus","activeElement","always","condition_mouseActionButton","noModifierKeys","shiftKeyOnly","targetNotEditable","tagName","condition_mouseOnly","Pointer_centroid","pointerEvents","Pointer","PointerInteraction","handleDownEvent","handleDragEvent","handleMoveEvent","handleUpEvent","stopDown","handlingDownUpSequence","trackedPointers_","targetPointers","updateTrackedPointers_","handledUp","handled","isPointerDraggingEvent","interaction_DragPan","DragPan","kinetic_","kinetic","lastCentroid","lastPointersCount_","panning_","condition_","condition","noKinetic_","centerpx","interaction_DragRotate","DragRotate","lastAngle_","Box","RenderBox","startPixel_","endPixel_","startPixel","endPixel","setPixels","createOrUpdateGeometry","DragBoxEventType","DragBoxEvent","onBoxEnd","out_","mapExtent","boxPixelExtent","factor","interaction_DragZoom","DragBox","DragZoom","box_","minArea_","minArea","onBoxEnd_","boxEndCondition_","boxEndCondition","defaultBoxEndCondition","KeyCode","UP","DOWN","KeyboardPan_handleEvent","keyCode","mapUnitsDelta","pixelDelta_","interaction_KeyboardPan","KeyboardPan","defaultCondition_","pixelDelta","KeyboardZoom_handleEvent","interaction_KeyboardZoom","KeyboardZoom","Mode","interaction_MouseWheelZoom","MouseWheelZoom","timeout_","useAnchor_","useAnchor","constrainResolution_","lastAnchor_","startTime_","timeoutId_","mode_","trackpadEventGap_","trackpadTimeoutId_","trackpadDeltaPerZoom_","trackpadZoomBuffer_","decrementInteractingHint_","wheelEvent","deltaMode","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","wheelDeltaY","rebound","timeLeft","handleWheelZoom_","setMouseAnchor","interaction_PinchRotate","PinchRotate","pointerOptions","rotating_","rotationDelta_","threshold_","threshold","rotationDelta","touch0","touch1","interaction_PinchZoom","PinchZoom","lastDistance_","lastScaleDelta_","scaleDelta","altShiftDragRotate","doubleClickZoom","zoomDelta","zoomDuration","dragPan","onFocusOnly","pinchRotate","pinchZoom","keyboard","mouseWheelZoom","shiftDragZoom","MultiPolygon_MultiPolygon","endss_","flatInteriorPointsRevision_","flatInteriorPoints_","polygons","polygon","appendPolygon","newEndss","flatCenters","linearRingss","getInteriorPoints","getPolygon","prevEnds","lastEnds","createFromTemplates","createFromTileUrlFunctions","nullTileUrlFunction","expandUrl","_tilecoord_js__WEBPACK_IMPORTED_MODULE_2__","createFromTemplate","template","zRegEx","xRegEx","yRegEx","dashYRegEx","templates","tileUrlFunctions","stop","ReprojImage","getImageFunction","sourceImage","sourcePixelRatio","targetProj_","maxSourceExtent_","targetResolution_","targetExtent_","sourceImage_","sourcePixelRatio_","sourceListenerKey_","unlistenSource_","ImageSourceEventType","ImageSourceEvent","Image_ImageSource","ImageSource","reprojectedImage_","reprojectedRevision_","findNearestResolution","idx","getImageInternal","handleImageChange","DEFAULT_WMS_VERSION","linearRingIsClockwise","edge","linearRingIsOriented","isClockwise","linearRingsAreOriented","orientLinearRings","orientLinearRingsArray","DEFAULT_MAX_ZOOM","DEFAULT_TILE_SIZE","_Object_js__WEBPACK_IMPORTED_MODULE_1__","_extent_js__WEBPACK_IMPORTED_MODULE_2__","_flat_transform_js__WEBPACK_IMPORTED_MODULE_3__","_proj_js__WEBPACK_IMPORTED_MODULE_4__","_proj_Units_js__WEBPACK_IMPORTED_MODULE_5__","_transform_js__WEBPACK_IMPORTED_MODULE_6__","extentRevision_","getClosestPoint","opt_closestPoint","inCoordinates","outCoordinates","pixelExtent","projectedExtent","_Feature_js__WEBPACK_IMPORTED_MODULE_1__","_Feature_js__WEBPACK_IMPORTED_MODULE_2__","_JSONFeature_js__WEBPACK_IMPORTED_MODULE_3__","_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_4__","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_5__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_6__","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_7__","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_8__","_geom_Point_js__WEBPACK_IMPORTED_MODULE_9__","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_10__","_obj_js__WEBPACK_IMPORTED_MODULE_11__","_proj_js__WEBPACK_IMPORTED_MODULE_12__","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_13__","GeoJSON","JSONFeature","geometryName","extractGeometryName_","extractGeometryName","readFeatureFromObject","geoJSONFeature","readFeaturesFromObject","geoJSONFeatures","readGeometryFromObject","readProjectionFromObject","crs","writeFeatureObject","writeFeaturesObject","objects","writeGeometryObject","readPointGeometry","readLineStringGeometry","readPolygonGeometry","readMultiPointGeometry","readMultiLineStringGeometry","readMultiPolygonGeometry","readGeometryCollectionGeometry","geoJSON","writePointGeometry","writeLineStringGeometry","rightHanded","writePolygonGeometry","writeMultiPointGeometry","writeMultiLineStringGeometry","writeMultiPolygonGeometry","writeGeometryCollectionGeometry","containsTileRange","disposed_","_common_js__WEBPACK_IMPORTED_MODULE_0__","_Image_js__WEBPACK_IMPORTED_MODULE_1__","_asserts_js__WEBPACK_IMPORTED_MODULE_2__","_events_js__WEBPACK_IMPORTED_MODULE_3__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_4__","_extent_js__WEBPACK_IMPORTED_MODULE_5__","_proj_js__WEBPACK_IMPORTED_MODULE_7__","_reproj_js__WEBPACK_IMPORTED_MODULE_8__","_Image_js__WEBPACK_IMPORTED_MODULE_9__","_WMSServerType_js__WEBPACK_IMPORTED_MODULE_10__","_string_js__WEBPACK_IMPORTED_MODULE_11__","_uri_js__WEBPACK_IMPORTED_MODULE_12__","GETFEATUREINFO_IMAGE_SIZE","ImageWMS","imageLoadFunction_","imageLoadFunction","params_","v13_","updateV13_","serverType_","serverType","hidpi_","hidpi","ratio_","getGetFeatureInfoUrl","projectionObj","sourceProjectionObj","baseParams","SERVICE","REQUEST","FORMAT","QUERY_LAYERS","getRequestUrl_","viewWidth","viewHeight","viewExtent","requestWidth","requestHeight","requestExtent","dpi","setImageLoadFunction","updateParams","version","_State_js__WEBPACK_IMPORTED_MODULE_3__","attributions_","adaptAttributions","attributionsCollapsible_","state_","wrapX_","setAttributions","attributionLike","module","default","quickselect","maxEntries","_maxEntries","_minEntries","_initFormat","findItem","equalsFn","calcBBox","toBBox","distBBox","children","destNode","createNode","child","leaf","compareNodeMinX","compareNodeMinY","bboxArea","bboxMargin","multiSelect","_all","childBBox","nodesToSearch","_build","_splitRoot","tmpNode","_insert","goingUp","path","indexes","_condense","compareMinX","compareMinY","fromJSON","N","M","right2","right3","N2","N1","_chooseSubtree","targetNode","enlargement","minEnlargement","isNode","insertPath","_split","_adjustParentBBoxes","_chooseSplitAxis","splitIndex","_chooseSplitIndex","bbox1","bbox2","overlap","minOverlap","_allDistMargin","leftBBox","rightBBox","siblings","compareArr","Function","twiceArea","_Geometry_js__WEBPACK_IMPORTED_MODULE_3__","_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__","opt_geometries","geometries_","listenGeometriesChange_","unlistenGeometriesChange_","geometryCollection","setGeometries","cloneGeometries","simplifiedGeometries","simplified","simplifiedGeometryCollection","setGeometriesArray","clonedGeometries","interpolatePoint","lineStringCoordinateAtM","lineStringsCoordinateAtM","pointX","pointY","cumulativeLengths","lo","hi","m0","_tileurlfunction_js__WEBPACK_IMPORTED_MODULE_0__","_asserts_js__WEBPACK_IMPORTED_MODULE_1__","_net_js__WEBPACK_IMPORTED_MODULE_3__","_State_js__WEBPACK_IMPORTED_MODULE_5__","_TileImage_js__WEBPACK_IMPORTED_MODULE_6__","_tilegrid_js__WEBPACK_IMPORTED_MODULE_7__","TileJSON","tileJSON_","jsonp","handleTileJSONResponse","handleTileJSONError","client","onXHRLoad_","onXHRError_","tileJSON","getTileJSON","epsg4326Projection","attributionExtent","OverlayPositioning","BOTTOM_CENTER","CENTER_LEFT","CENTER_CENTER","CENTER_RIGHT","TOP_CENTER","ELEMENT","MAP","OFFSET","POSITION","POSITIONING","Overlay_Overlay","Overlay","autoPan","autoPanAnimation","autoPanMargin","rendered","bottom_","left_","right_","top_","mapPostrenderListenerKey","handleOffsetChanged","handlePositioningChanged","setElement","setOffset","setPositioning","positioning","getOffset","getPositioning","panIntoView","mapRect","getRect","overlayRect","offsetLeft","offsetRight","offsetTop","offsetBottom","centerPx","newCenterPx","pageXOffset","pageYOffset","DEFAULT_RADIUS","opt_radius","lat1","lat2","deltaLatBy2","deltaLonBy2","bearing","lon1","dByR","lat","asin","lon","shared","cache_","cacheSize_","maxCacheSize_","maxCacheSize","setCenterAndRadius","getRadiusSquared_","circleExtent","_functions_js__WEBPACK_IMPORTED_MODULE_0__","_events_Event_js__WEBPACK_IMPORTED_MODULE_2__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_3__","_Interaction_js__WEBPACK_IMPORTED_MODULE_4__","_proj_js__WEBPACK_IMPORTED_MODULE_5__","DragAndDropEventType","DragAndDropEvent","file","opt_features","DragAndDrop","formatConstructors_","formatConstructors","dropListenKeys_","handleResult_","tryReadFeatures_","registerListeners_","dropArea","handleDrop","handleStop","unregisterListeners_","files","dataTransfer","reader","FileReader","readAsText","dropEffect","AssertionError","message","_Property_js__WEBPACK_IMPORTED_MODULE_2__","_math_js__WEBPACK_IMPORTED_MODULE_3__","setMaxResolution","setMinResolution","zindex","errorThreshold","sourceProj_","transformInvCache","transformInv","transformInv_","errorThresholdSquared_","triangles_","wrapsXInSource_","canWrapXInSource_","sourceWorldWidth_","targetWorldWidth_","destinationTopLeft","destinationTopRight","destinationBottomRight","destinationBottomLeft","sourceTopLeft","sourceTopRight","sourceBottomRight","sourceBottomLeft","addQuad_","leftBound","newTriangle","addTriangle_","aSrc","bSrc","cSrc","dSrc","maxSubdivision","sourceQuadExtent","sourceCoverageX","sourceWorldWidth","wrapsX","needsSubdivision","targetQuadExtent","centerSrc","bc","bcSrc","da","daSrc","ab","abSrc","cd","cdSrc","_ImageBase_js__WEBPACK_IMPORTED_MODULE_0__","_ImageState_js__WEBPACK_IMPORTED_MODULE_1__","_events_js__WEBPACK_IMPORTED_MODULE_2__","_extent_js__WEBPACK_IMPORTED_MODULE_4__","ImageWrapper","appendParams","uri","keyParams","encodeURIComponent","qs","_reproj_js__WEBPACK_IMPORTED_MODULE_6__","_size_js__WEBPACK_IMPORTED_MODULE_7__","_TileImage_js__WEBPACK_IMPORTED_MODULE_8__","_WMSServerType_js__WEBPACK_IMPORTED_MODULE_9__","_tilecoord_js__WEBPACK_IMPORTED_MODULE_10__","TileWMS","transparent","tmpExtent_","getKeyForParams_","count_","entries_","oldest_","newest_","value_","newer","older","peekLastKey","_Image_js__WEBPACK_IMPORTED_MODULE_0__","_dom_js__WEBPACK_IMPORTED_MODULE_2__","_proj_js__WEBPACK_IMPORTED_MODULE_6__","_Image_js__WEBPACK_IMPORTED_MODULE_7__","Static","imageExtent_","imageWidth","imageHeight","targetWidth","getInteriorPointOfArray","getInteriorPointsOfMultiArray","flatCentersOffset","intersections","rr","maxSegmentLength","ret","getSnapToPixel","setRotateWithView","setSnapToPixel","lineStringLength","opt_errback","opt_callbackParam","script","async","timer","getElementsByTagName","_TileImage_js__WEBPACK_IMPORTED_MODULE_0__","_tilegrid_js__WEBPACK_IMPORTED_MODULE_1__","_FormatType_js__WEBPACK_IMPORTED_MODULE_2__","getObject","stringify","_array_js__WEBPACK_IMPORTED_MODULE_1__","_format_Feature_js__WEBPACK_IMPORTED_MODULE_2__","_format_FormatType_js__WEBPACK_IMPORTED_MODULE_3__","_xml_js__WEBPACK_IMPORTED_MODULE_4__","XMLFeature","xmlSerializer_","XMLSerializer","doc","readFeatureFromDocument","readFeatureFromNode","readFeaturesFromDocument","readFeaturesFromNode","ELEMENT_NODE","readGeometryFromDocument","readGeometryFromNode","readProjectionFromDocument","readProjectionFromNode","writeFeatureNode","serializeToString","writeFeaturesNode","writeGeometryNode","PJD_3PARAM","PJD_7PARAM","PJD_WGS84","PJD_NODATUM","SEC_TO_RAD","HALF_PI","SIXTH","RA4","RA6","EPSLN","D2R","R2D","FORTPI","TWO_PI","SPI","exports$1","greenwich","lisbon","paris","bogota","madrid","rome","bern","jakarta","ferro","brussels","stockholm","athens","oslo","ft","to_meter","us-ft","ignoredChar","testkey","lkey","parseProj","defData","paramName","paramVal","paramOutname","self","paramObj","v","reduce","datum","rf","lat_0","lat0","lat_1","lat_2","lat_ts","lon_0","long0","lon_1","long1","lon_2","long2","lonc","longc","x_0","y_0","k_0","k0","r_a","R_A","zone","south","utmSouth","towgs84","datum_params","unit","from_greenwich","pm","nadgrids","datumCode","NEUTRAL","whitespace","latin","keyword","endThings","digets","Parser","place","currentObject","mapit","thing","newObj","sExpr","shift","readCharicter","test","neutral","quoted","afterquote","word","afterItem","newObjects","D2R$1","d2r","wkt","lisp","projName","local","PROJECTION","UNIT","DATUM","SPHEROID","geogcs","GEOGCS","toMeter","ellps","TOWGS84","outName","inName","cleanWKT","defs","that","def","EPSG","ESRI","IAU2000","GOOGLE","globals","codeWords","codes","testObj","testDef","some","testWKT","auth","checkMercator","maybeProjStr","checkProjStr","testProj","msfnz","eccent","sinphi","cosphi","con","adjust_lon","tsfnz","phi","com","phi2z","ts","dphi","eccnth","identity","pt","projs","init","es","names","projStore","exports$2","MERIT","ellipseName","SGS85","GRS80","IAU76","airy","APL4","NWL9D","mod_airy","andrae","aust_SA","GRS67","bessel","bess_nam","clrk66","clrk80","clrk58","CPM","delmbr","engelis","evrst30","evrst48","evrst56","evrst69","evrstSS","fschr60","fschr60m","fschr68","helmert","hough","intl","kaula","lerch","mprts","new_intl","plessis","krass","SEasia","walbeck","WGS60","WGS66","WGS7","exports$3","srsCode","json","ourProj","datumDef","ellipse","datumName","sphere_","ecc","ep2","datumObj","datum_type","checkParams","wgs84","ch1903","ggrs87","nad83","nad27","potsdam","carthage","hermannskogel","osni52","ire65","rassadiran","nzgd49","osgb36","s_jtsk","beduaram","gunung_segara","rnb72","datum_transform","compareDatums","Rn","Sin_Lat","Sin2_Lat","Cos_Lat","Longitude","Latitude","Height","geodeticToGeocentric","Dx_BF","Dy_BF","Dz_BF","Rx_BF","Ry_BF","Rz_BF","M_BF","geocentricToWgs84","x_tmp","y_tmp","z_tmp","geocentricFromWgs84","P","RR","CT","ST","RX","RK","RN","CPHI0","SPHI0","CPHI","SPHI","SDPHI","iter","X","Y","Z","geocentricToGeodetic","adjust_axis","denorm","xin","yin","zin","toPoint","checkSanity","checkCoord","checkNotWGS","transformer","from","to","transformedArray","checkProj","oProj","proj4$1","fromProj","toProj","coord","single","NUM_100K_SETS","SET_ORIGIN_COLUMN_LETTERS","SET_ORIGIN_ROW_LETTERS","A","I","O","V","mgrs","forward$1","UTMtoLL","decode","toUpperCase","toPoint$1","accuracy","utm","column","row","colOrigin","rowOrigin","colInt","rowInt","rollover","easting","northing","zoneNumber","setParm","setColumn","setRow","seasting","snorthing","zoneLetter","get100kSetForZone","encode","T","C","LongOriginRad","ZoneNumber","Lat","Long","LatRad","degToRad","LongRad","LetterDesignator","UTMEasting","UTMNorthing","LLtoUTM","radToDeg","rad","T1","C1","R1","D","LongOrigin","mu","phi1Rad","mgrsString","testChar","hunK","sb","substring","east100k","curCol","eastingValue","rewindMarker","getEastingFromChar","north100k","curRow","northingValue","getNorthingFromChar","getMinNorthing","remainder","accuracyBonus","sepEastingString","sepNorthingString","sep","sepEasting","sepNorthing","fromMGRS","mgrsStr","toMGRS","C08","pj_enfn","en","pj_mlfn","sphi","cphi","pj_inv_mlfn","arg","tmerc","ml0","delta_lon","sin_phi","cos_phi","al","als","cs","tq","ml","tan_phi","ds","temp","sinh","hypot","asinhy","log1py","gatg","pp","B","cos_2B","h1","h2","clens","arg_r","hr","hr1","hr2","clens_cmplx","arg_i","hi2","sin_arg_r","cos_arg_r","sinh_arg_i","cosh_arg_i","hi1","etmerc","cgb","cbg","utg","gtu","np","Qn","Zb","Ce","Cn","sin_Cn","cos_Cn","sin_Ce","cos_Ce","adjust_zone","dependsOn","srat","esinp","MAX_ITER$1","gauss","rc","phic0","ratexp","K","sterea","sinc0","cosc0","R2","sinc","cosc","cosl","rho","stere","coslat0","sinlat0","cons","ms1","X0","ssfn_","cosX0","sinX0","sinX","cosX","rh","sinlat","coslat","dlon","ce","Chi","phit","eccen","somerc","phy0","lambda0","sinPhy0","semiMajorAxis","flattening","R","b0","k1","k2","k3","Sa1","Sa2","S","rotI","rotB","lambda","phy","prevPhy","iteration","omerc","no_off","no_rot","bl","fl","gl","t0","dl","t1","t2","hl","jl","pl","dlon12","dlon10","gamma0","uc","us","vs","ql","sl","tl","vl","ul","qp","sp","tp","vp","lcc","sin1","cos1","ts1","sin2","cos2","ms2","ts2","ts0","ns","f0","rh1","krovak","s45","s90","fi0","alfa","uq","n0","s0","ro0","ad","gfi","u","deltav","eps","ro","czech","fi1","ok","mlfn","e0","e3","e0fn","e1fn","e2fn","e3fn","gN","adjust_lat","imlfn","cass","lam","nl","asq","cl","ml1","phi1","nl1","rl1","tl1","dsq","qsfnz","P00","P01","P02","P10","P11","P20","laea","mode","S_POLE","N_POLE","EQUIT","OBLIQ","mmf","apa","APA","authset","rq","xmf","ymf","sinb1","cosb1","sinph0","cosph0","coslam","sinlam","q","sinb","cosb","phi0","cCe","sCe","beta","cosz","sinz","asinz","aea","sin_po","cos_po","qs1","qs2","t3","qs0","ns0","phi1z","eccnts","gnom","sin_p14","cos_p14","infinity_dist","coslon","iqsfnz","cea","eqc","dlat","MAX_ITER$2","poly","tanphi","mln","mlnp","ma","nzmg","B_re","B_im","C_re","C_im","delta_lat","d_phi","d_lambda","d_phi_n","d_psi","th_n_im1","th_re","th_im","th_n_re","th_n_im","z_re","z_im","z_n_im1","delta_x","z_n_re","z_n_im","iterations","num_re","num_im","den_re","den_im","den2","d_psi_n","mill","MAX_ITER$3","sinu","C_y","C_x","moll","delta_theta","eqdc","ml2","vandg","sinth","costh","gsq","msq","xx","yy","xys","c3","m1","th1","aeqd","sin_p12","cos_p12","Mlp","Ml","Nl1","Nl","psi","Az","G","H","GH","Hs","kp","cos_c","s3","s4","cosAz","Ee","F","ortho","FACE_ENUM","FRONT","BACK","AREA_ENUM","AREA_0","AREA_1","AREA_2","AREA_3","qsc_fwd_equat_face_theta","qsc_shift_lon_origin","slon","proj4","qsc","face","one_minus_f","one_minus_f_squared","xy","sinlon","nu","cosmu","tannu","tantheta","invert_sign","xa","lp","COEFS_X","COEFS_Y","FXC","FYC","RC1","NODES","poly3_val","coefs","poly3_der","robin","f_df","max_err","iters","upd","newton_rapshon","defaultDatum","Proj","factory","_net_js__WEBPACK_IMPORTED_MODULE_2__","_State_js__WEBPACK_IMPORTED_MODULE_4__","_TileImage_js__WEBPACK_IMPORTED_MODULE_5__","_tilecoord_js__WEBPACK_IMPORTED_MODULE_6__","BingMaps","culture_","culture","maxZoom_","apiKey_","imagerySet_","imagerySet","handleImageryMetadataResponse","getApiKey","getImagerySet","statusCode","statusDescription","authenticationResultCode","resourceSets","resources","resource","zoomMax","zoomMin","imageUrlSubdomains","subdomain","quadKeyTileCoord","imageUrl","imageryProviders","imageryProvider","intersecting","coverageAreas","coverageArea","epsg4326Extent","register","_proj_js__WEBPACK_IMPORTED_MODULE_0__","_transforms_js__WEBPACK_IMPORTED_MODULE_1__","_Projection_js__WEBPACK_IMPORTED_MODULE_2__","projCodes","code1","proj1","code2","proj2","_OSM_js__WEBPACK_IMPORTED_MODULE_0__","_XYZ_js__WEBPACK_IMPORTED_MODULE_1__","ATTRIBUTIONS","LayerConfig","terrain","terrain-background","terrain-labels","terrain-lines","toner-background","toner","toner-hybrid","toner-labels","toner-lines","toner-lite","watercolor","ProviderConfig","Stamen","providerConfig","layerConfig","_Feature_js__WEBPACK_IMPORTED_MODULE_0__","_XMLFeature_js__WEBPACK_IMPORTED_MODULE_3__","_xsd_js__WEBPACK_IMPORTED_MODULE_4__","_geom_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_5__","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_6__","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_8__","_proj_js__WEBPACK_IMPORTED_MODULE_10__","_xml_js__WEBPACK_IMPORTED_MODULE_11__","NAMESPACE_URIS","FEATURE_READER","rte","readRte","trk","readTrk","wpt","readWpt","GPX_PARSERS","LINK_PARSERS","GPX_SERIALIZERS","RTE_SEQUENCE","RTE_SERIALIZERS","multiLineString","TRK_SEQUENCE","TRK_SERIALIZERS","writeWptType","GPX","readExtensions_","readExtensions","handleReadExtensions_","extensionsNode","featureReader","gpx","setAttributeNS","GPX_NODE_FACTORY","RTE_PARSERS","cmt","desc","link","parseLink","extensions","parseExtensions","rtept","RTEPT_PARSERS","rteValues","layoutOptions","ele","TRK_PARSERS","trkseg","TRKSEG_PARSERS","trkpt","TRKPT_PARSERS","trkValues","WPT_PARSERS","magvar","geoidheight","sym","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid","LINK_SEQUENCE","LINK_SERIALIZERS","writeLink","RTEPT_TYPE_SEQUENCE","TRKSEG_SERIALIZERS","TRKSEG_NODE_FACTORY","WPT_TYPE_SEQUENCE","WPT_TYPE_SERIALIZERS","GEOMETRY_TYPE_TO_NODENAME","getAttribute","hasZ","hasM","applyLayoutOptions","href","DEFAULT_COLOR","DEFAULT_IMAGE_STYLE_ANCHOR","DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS","DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS","DEFAULT_IMAGE_STYLE_SIZE","DEFAULT_IMAGE_STYLE_SRC","DEFAULT_IMAGE_SCALE_MULTIPLIER","_color_js__WEBPACK_IMPORTED_MODULE_3__","_Feature_js__WEBPACK_IMPORTED_MODULE_4__","_XMLFeature_js__WEBPACK_IMPORTED_MODULE_5__","_xsd_js__WEBPACK_IMPORTED_MODULE_6__","_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_7__","_geom_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_8__","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_9__","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_11__","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_12__","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_13__","_geom_Point_js__WEBPACK_IMPORTED_MODULE_14__","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_15__","_math_js__WEBPACK_IMPORTED_MODULE_16__","_proj_js__WEBPACK_IMPORTED_MODULE_17__","_style_Fill_js__WEBPACK_IMPORTED_MODULE_18__","_style_Icon_js__WEBPACK_IMPORTED_MODULE_19__","_style_IconAnchorUnits_js__WEBPACK_IMPORTED_MODULE_20__","_style_IconOrigin_js__WEBPACK_IMPORTED_MODULE_21__","_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__","_style_Style_js__WEBPACK_IMPORTED_MODULE_23__","_style_Text_js__WEBPACK_IMPORTED_MODULE_24__","_xml_js__WEBPACK_IMPORTED_MODULE_25__","GX_NAMESPACE_URIS","ICON_ANCHOR_UNITS_MAP","pixels","insetPixels","PLACEMARK_PARSERS","ExtendedData","extendedDataParser","Region","regionParser","MultiGeometry","readMultiGeometry","readLineString","readLinearRing","readPoint","readPolygon","readStyle","StyleMap","styleMapValue","readStyleMapValue","placemarkObject","address","description","phoneNumber","styleUrl","readURI","MultiTrack","GX_MULTITRACK_GEOMETRY_PARSERS","Track","readGxTrack","NETWORK_LINK_PARSERS","Link","REGION_PARSERS","LatLonAltBox","LAT_LON_ALT_BOX_PARSERS","regionObject","Lod","LOD_PARSERS","lodObject","KML_SEQUENCE","KML_SERIALIZERS","Document","DOCUMENT_SERIALIZERS","DOCUMENT_NODE_FACTORY","Placemark","writePlacemark","DEFAULT_FILL_STYLE","DEFAULT_NO_IMAGE_STYLE","DEFAULT_IMAGE_STYLE","DEFAULT_TEXT_STROKE_STYLE","DEFAULT_STROKE_STYLE","DEFAULT_TEXT_STYLE","DEFAULT_STYLE","DEFAULT_STYLE_ARRAY","KML","defaultStyle_","defaultStyle","extractStyles_","extractStyles","writeStyles_","writeStyles","sharedStyles_","showPointNames_","showPointNames","readDocumentOrFolder_","Folder","readPlacemark_","readSharedStyle_","readSharedStyleMap_","sharedStyles","nameStyle","drawName","createNameStyleFunction","foundStyle","findStyle","styleValue","createFeatureStyleFunction","styleUri","baseURI","location","URL","fs","readName","readNameFromDocument","readNameFromNode","readNetworkLinks","networkLinks","readNetworkLinksFromDocument","readNetworkLinksFromNode","readRegion","regions","readRegionFromDocument","readRegionFromNode","kml","xmlnsUri","textOffset","imageScale","foundText","readColor","hexColor","readFlatCoordinates","readScale","STYLE_MAP_PARSERS","Pair","pairObject","PAIR_PARSERS","ICON_STYLE_PARSERS","iconObject","ICON_PARSERS","hotSpot","xunits","yunits","LABEL_STYLE_PARSERS","LINE_STYLE_PARSERS","POLY_STYLE_PARSERS","FLAT_LINEAR_RING_PARSERS","readFlatLinearRing","GX_TRACK_PARSERS","when","whens","gxTrackObject","GEOMETRY_FLAT_COORDINATES_PARSERS","readFlatCoordinatesFromNode","EXTRUDE_AND_ALTITUDE_MODE_PARSERS","extrude","tessellate","MULTI_GEOMETRY_PARSERS","multiGeometry","homogeneous","setCommonGeometryProperties","FLAT_LINEAR_RINGS_PARSERS","innerBoundaryIs","flatLinearRing","INNER_BOUNDARY_IS_PARSERS","flatLinearRings","outerBoundaryIs","OUTER_BOUNDARY_IS_PARSERS","STYLE_PARSERS","IconStyle","styleObject","IconObject","drawIcon","LineStyle","PolyStyle","hasExtrude","hasTessellate","hasAltitudeMode","extrudes","tessellates","altitudeModes","DATA_PARSERS","displayName","EXTENDED_DATA_PARSERS","Data","featureObject","SchemaData","SCHEMA_DATA_PARSERS","SimpleData","minAltitude","maxAltitude","north","east","west","minLodPixels","maxLodPixels","minFadeExtent","maxFadeExtent","writeColorTextNode","rgba","abgr","hex","EXTENDEDDATA_NODE_SERIALIZERS","pair","DATA_NODE_FACTORY","ICON_SEQUENCE","ICON_SERIALIZERS","GX_NODE_FACTORY","ICON_STYLE_SEQUENCE","ICON_STYLE_SERIALIZERS","icon","vec2","writeScaleTextNode","LABEL_STYLE_SEQUENCE","LABEL_STYLE_SERIALIZERS","LINE_STYLE_SEQUENCE","LINE_STYLE_SERIALIZERS","GEOMETRY_NODE_FACTORY","POINT_NODE_FACTORY","LINE_STRING_NODE_FACTORY","LINEAR_RING_NODE_FACTORY","POLYGON_NODE_FACTORY","MULTI_GEOMETRY_SERIALIZERS","writePrimitiveGeometry","writePolygon","writeMultiGeometry","BOUNDARY_IS_SERIALIZERS","writeBoundaryIs","PLACEMARK_SERIALIZERS","namesAndValues","STYLE_SEQUENCE","STYLE_SERIALIZERS","PLACEMARK_SEQUENCE","EXTENDEDDATA_NODE_FACTORY","PRIMITIVE_GEOMETRY_SEQUENCE","PRIMITIVE_GEOMETRY_SERIALIZERS","POLYGON_SERIALIZERS","INNER_BOUNDARY_NODE_FACTORY","OUTER_BOUNDARY_NODE_FACTORY","outerRing","POLY_STYLE_SERIALIZERS","COLOR_NODE_FACTORY","iconProperties","_JSONFeature_js__WEBPACK_IMPORTED_MODULE_2__","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_3__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_4__","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_5__","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_6__","_geom_Point_js__WEBPACK_IMPORTED_MODULE_7__","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_8__","_proj_js__WEBPACK_IMPORTED_MODULE_9__","TopoJSON","layerName_","layerName","layers_","topoJSONTopology","arcs","transformArc","transformArcs","topoJSONFeatures","objectName","readFeaturesFromGeometryCollection","readFeatureFromGeometry","GEOMETRY_READERS","transformVertex","concatenateArcs","polyArray","ringCoords","indices","geometryReader","vertex","format_TextFeature","TextFeature","readFeatureFromText","readFeaturesFromText","readGeometryFromText","readProjectionFromText","writeFeatureText","writeFeaturesText","writeGeometryText","format_Feature","IGCZ","BAROMETRIC","GPS","B_RECORD_RE","H_RECORD_RE","HFDTE_RECORD_RE","NEWLINE_RE","IGC_IGC","IGC","altitudeMode_","year","month","day","lastDateTime","line","hour","minute","UTC","swap","defaultCompare","quickselectStep","sd","newLeft","newRight"],"mappings":"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","file":"commons.1ba132e07f9f7066a8c6.js","sourcesContent":["/**\n * @module ol/xml\n */\nimport {extend} from './array.js';\n\n\n/**\n * When using {@link module:ol/xml~makeChildAppender} or\n * {@link module:ol/xml~makeSimpleNodeFactory}, the top `objectStack` item needs\n * to have this structure.\n * @typedef {Object} NodeStackItem\n * @property {Node} node\n */\n\n\n/**\n * @typedef {function(Element, Array<*>)} Parser\n */\n\n\n/**\n * @typedef {function(Element, *, Array<*>)} Serializer\n */\n\n\n/**\n * This document should be used when creating nodes for XML serializations. This\n * document is also used by {@link module:ol/xml~createElementNS}\n * @const\n * @type {Document}\n */\nexport const DOCUMENT = document.implementation.createDocument('', '', null);\n\n\n/**\n * @type {string}\n */\nexport const XML_SCHEMA_INSTANCE_URI = 'http://www.w3.org/2001/XMLSchema-instance';\n\n\n/**\n * @param {string} namespaceURI Namespace URI.\n * @param {string} qualifiedName Qualified name.\n * @return {Element} Node.\n */\nexport function createElementNS(namespaceURI, qualifiedName) {\n  return DOCUMENT.createElementNS(namespaceURI, qualifiedName);\n}\n\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @return {string} All text content.\n * @api\n */\nexport function getAllTextContent(node, normalizeWhitespace) {\n  return getAllTextContent_(node, normalizeWhitespace, []).join('');\n}\n\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @param {Array<string>} accumulator Accumulator.\n * @private\n * @return {Array<string>} Accumulator.\n */\nexport function getAllTextContent_(node, normalizeWhitespace, accumulator) {\n  if (node.nodeType == Node.CDATA_SECTION_NODE ||\n      node.nodeType == Node.TEXT_NODE) {\n    if (normalizeWhitespace) {\n      accumulator.push(String(node.nodeValue).replace(/(\\r\\n|\\r|\\n)/g, ''));\n    } else {\n      accumulator.push(node.nodeValue);\n    }\n  } else {\n    let n;\n    for (n = node.firstChild; n; n = n.nextSibling) {\n      getAllTextContent_(n, normalizeWhitespace, accumulator);\n    }\n  }\n  return accumulator;\n}\n\n\n/**\n * @param {Object} object Object.\n * @return {boolean} Is a document.\n */\nexport function isDocument(object) {\n  return 'documentElement' in object;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {?string} namespaceURI Namespace URI.\n * @param {string} name Attribute name.\n * @return {string} Value\n */\nexport function getAttributeNS(node, namespaceURI, name) {\n  return node.getAttributeNS(namespaceURI, name) || '';\n}\n\n\n/**\n * Parse an XML string to an XML Document.\n * @param {string} xml XML.\n * @return {Document} Document.\n * @api\n */\nexport function parse(xml) {\n  return new DOMParser().parseFromString(xml, 'application/xml');\n}\n\n\n/**\n * Make an array extender function for extending the array at the top of the\n * object stack.\n * @param {function(this: T, Node, Array<*>): (Array<*>|undefined)} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeArrayExtender(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const array = /** @type {Array<*>} */ (objectStack[objectStack.length - 1]);\n        extend(array, value);\n      }\n    }\n  );\n}\n\n\n/**\n * Make an array pusher function for pushing to the array at the top of the\n * object stack.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeArrayPusher(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const array = /** @type {Array<*>} */ (objectStack[objectStack.length - 1]);\n        array.push(value);\n      }\n    });\n}\n\n\n/**\n * Make an object stack replacer function for replacing the object at the\n * top of the stack.\n * @param {function(this: T, Node, Array<*>): *} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeReplacer(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        objectStack[objectStack.length - 1] = value;\n      }\n    });\n}\n\n\n/**\n * Make an object property pusher function for adding a property to the\n * object at the top of the stack.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {string=} opt_property Property.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertyPusher(valueReader, opt_property, opt_this) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const object = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n        const property = opt_property !== undefined ? opt_property : node.localName;\n        let array;\n        if (property in object) {\n          array = object[property];\n        } else {\n          array = object[property] = [];\n        }\n        array.push(value);\n      }\n    });\n}\n\n\n/**\n * Make an object property setter function.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {string=} opt_property Property.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertySetter(valueReader, opt_property, opt_this) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const object = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n        const property = opt_property !== undefined ? opt_property : node.localName;\n        object[property] = value;\n      }\n    });\n}\n\n\n/**\n * Create a serializer that appends nodes written by its `nodeWriter` to its\n * designated parent. The parent is the `node` of the\n * {@link module:ol/xml~NodeStackItem} at the top of the `objectStack`.\n * @param {function(this: T, Node, V, Array<*>)} nodeWriter Node writer.\n * @param {T=} opt_this The object to use as `this` in `nodeWriter`.\n * @return {Serializer} Serializer.\n * @template T, V\n */\nexport function makeChildAppender(nodeWriter, opt_this) {\n  return function(node, value, objectStack) {\n    nodeWriter.call(opt_this !== undefined ? opt_this : this, node, value, objectStack);\n    const parent = /** @type {NodeStackItem} */ (objectStack[objectStack.length - 1]);\n    const parentNode = parent.node;\n    parentNode.appendChild(node);\n  };\n}\n\n\n/**\n * Create a serializer that calls the provided `nodeWriter` from\n * {@link module:ol/xml~serialize}. This can be used by the parent writer to have the\n * 'nodeWriter' called with an array of values when the `nodeWriter` was\n * designed to serialize a single item. An example would be a LineString\n * geometry writer, which could be reused for writing MultiLineString\n * geometries.\n * @param {function(this: T, Element, V, Array<*>)} nodeWriter Node writer.\n * @param {T=} opt_this The object to use as `this` in `nodeWriter`.\n * @return {Serializer} Serializer.\n * @template T, V\n */\nexport function makeArraySerializer(nodeWriter, opt_this) {\n  let serializersNS, nodeFactory;\n  return function(node, value, objectStack) {\n    if (serializersNS === undefined) {\n      serializersNS = {};\n      const serializers = {};\n      serializers[node.localName] = nodeWriter;\n      serializersNS[node.namespaceURI] = serializers;\n      nodeFactory = makeSimpleNodeFactory(node.localName);\n    }\n    serialize(serializersNS, nodeFactory, value, objectStack);\n  };\n}\n\n\n/**\n * Create a node factory which can use the `opt_keys` passed to\n * {@link module:ol/xml~serialize} or {@link module:ol/xml~pushSerializeAndPop} as node names,\n * or a fixed node name. The namespace of the created nodes can either be fixed,\n * or the parent namespace will be used.\n * @param {string=} opt_nodeName Fixed node name which will be used for all\n *     created nodes. If not provided, the 3rd argument to the resulting node\n *     factory needs to be provided and will be the nodeName.\n * @param {string=} opt_namespaceURI Fixed namespace URI which will be used for\n *     all created nodes. If not provided, the namespace of the parent node will\n *     be used.\n * @return {function(*, Array<*>, string=): (Node|undefined)} Node factory.\n */\nexport function makeSimpleNodeFactory(opt_nodeName, opt_namespaceURI) {\n  const fixedNodeName = opt_nodeName;\n  return (\n    /**\n     * @param {*} value Value.\n     * @param {Array<*>} objectStack Object stack.\n     * @param {string=} opt_nodeName Node name.\n     * @return {Node} Node.\n     */\n    function(value, objectStack, opt_nodeName) {\n      const context = /** @type {NodeStackItem} */ (objectStack[objectStack.length - 1]);\n      const node = context.node;\n      let nodeName = fixedNodeName;\n      if (nodeName === undefined) {\n        nodeName = opt_nodeName;\n      }\n\n      const namespaceURI = opt_namespaceURI !== undefined ? opt_namespaceURI : node.namespaceURI;\n      return createElementNS(namespaceURI, /** @type {string} */ (nodeName));\n    }\n  );\n}\n\n\n/**\n * A node factory that creates a node using the parent's `namespaceURI` and the\n * `nodeName` passed by {@link module:ol/xml~serialize} or\n * {@link module:ol/xml~pushSerializeAndPop} to the node factory.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nexport const OBJECT_PROPERTY_NODE_FACTORY = makeSimpleNodeFactory();\n\n\n/**\n * Create an array of `values` to be used with {@link module:ol/xml~serialize} or\n * {@link module:ol/xml~pushSerializeAndPop}, where `orderedKeys` has to be provided as\n * `opt_key` argument.\n * @param {Object<string, V>} object Key-value pairs for the sequence. Keys can\n *     be a subset of the `orderedKeys`.\n * @param {Array<string>} orderedKeys Keys in the order of the sequence.\n * @return {Array<V>} Values in the order of the sequence. The resulting array\n *     has the same length as the `orderedKeys` array. Values that are not\n *     present in `object` will be `undefined` in the resulting array.\n * @template V\n */\nexport function makeSequence(object, orderedKeys) {\n  const length = orderedKeys.length;\n  const sequence = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    sequence[i] = object[orderedKeys[i]];\n  }\n  return sequence;\n}\n\n\n/**\n * Create a namespaced structure, using the same values for each namespace.\n * This can be used as a starting point for versioned parsers, when only a few\n * values are version specific.\n * @param {Array<string>} namespaceURIs Namespace URIs.\n * @param {T} structure Structure.\n * @param {Object<string, T>=} opt_structureNS Namespaced structure to add to.\n * @return {Object<string, T>} Namespaced structure.\n * @template T\n */\nexport function makeStructureNS(namespaceURIs, structure, opt_structureNS) {\n  /**\n   * @type {Object<string, T>}\n   */\n  const structureNS = opt_structureNS !== undefined ? opt_structureNS : {};\n  let i, ii;\n  for (i = 0, ii = namespaceURIs.length; i < ii; ++i) {\n    structureNS[namespaceURIs[i]] = structure;\n  }\n  return structureNS;\n}\n\n\n/**\n * Parse a node using the parsers and object stack.\n * @param {Object<string, Object<string, Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*=} opt_this The object to use as `this`.\n */\nexport function parseNode(parsersNS, node, objectStack, opt_this) {\n  let n;\n  for (n = node.firstElementChild; n; n = n.nextElementSibling) {\n    const parsers = parsersNS[n.namespaceURI];\n    if (parsers !== undefined) {\n      const parser = parsers[n.localName];\n      if (parser !== undefined) {\n        parser.call(opt_this, n, objectStack);\n      }\n    }\n  }\n}\n\n\n/**\n * Push an object on top of the stack, parse and return the popped object.\n * @param {T} object Object.\n * @param {Object<string, Object<string, Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*=} opt_this The object to use as `this`.\n * @return {T} Object.\n * @template T\n */\nexport function pushParseAndPop(object, parsersNS, node, objectStack, opt_this) {\n  objectStack.push(object);\n  parseNode(parsersNS, node, objectStack, opt_this);\n  return /** @type {T} */ (objectStack.pop());\n}\n\n\n/**\n * Walk through an array of `values` and call a serializer for each value.\n * @param {Object<string, Object<string, Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>=} opt_keys Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T=} opt_this The object to use as `this` for the node factory and\n *     serializers.\n * @template T\n */\nexport function serialize(\n  serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n  const length = (opt_keys !== undefined ? opt_keys : values).length;\n  let value, node;\n  for (let i = 0; i < length; ++i) {\n    value = values[i];\n    if (value !== undefined) {\n      node = nodeFactory.call(opt_this !== undefined ? opt_this : this, value, objectStack,\n        opt_keys !== undefined ? opt_keys[i] : undefined);\n      if (node !== undefined) {\n        serializersNS[node.namespaceURI][node.localName]\n          .call(opt_this, node, value, objectStack);\n      }\n    }\n  }\n}\n\n\n/**\n * @param {O} object Object.\n * @param {Object<string, Object<string, Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>=} opt_keys Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T=} opt_this The object to use as `this` for the node factory and\n *     serializers.\n * @return {O|undefined} Object.\n * @template O, T\n */\nexport function pushSerializeAndPop(object, serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n  objectStack.push(object);\n  serialize(serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this);\n  return /** @type {O|undefined} */ (objectStack.pop());\n}\n","/**\n * @module ol/extent\n */\nimport {assert} from './asserts.js';\nimport Corner from './extent/Corner.js';\nimport Relationship from './extent/Relationship.js';\n\n\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array<number>} Extent\n * @api\n */\n\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n  const extent = createEmpty();\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Array<number>} xs Xs.\n * @param {Array<number>} ys Ys.\n * @param {Extent=} opt_extent Destination extent.\n * @private\n * @return {Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, opt_extent) {\n  const minX = Math.min.apply(null, xs);\n  const minY = Math.min.apply(null, ys);\n  const maxX = Math.max.apply(null, xs);\n  const maxY = Math.max.apply(null, ys);\n  return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n}\n\n\n/**\n * Return extent increased by the provided value.\n * @param {Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0] - value;\n    opt_extent[1] = extent[1] - value;\n    opt_extent[2] = extent[2] + value;\n    opt_extent[3] = extent[3] + value;\n    return opt_extent;\n  } else {\n    return [\n      extent[0] - value,\n      extent[1] - value,\n      extent[2] + value,\n      extent[3] + value\n    ];\n  }\n}\n\n\n/**\n * Creates a clone of an extent.\n *\n * @param {Extent} extent Extent to clone.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} The clone.\n */\nexport function clone(extent, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0];\n    opt_extent[1] = extent[1];\n    opt_extent[2] = extent[2];\n    opt_extent[3] = extent[3];\n    return opt_extent;\n  } else {\n    return extent.slice();\n  }\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n  let dx, dy;\n  if (x < extent[0]) {\n    dx = extent[0] - x;\n  } else if (extent[2] < x) {\n    dx = x - extent[2];\n  } else {\n    dx = 0;\n  }\n  if (y < extent[1]) {\n    dy = extent[1] - y;\n  } else if (extent[3] < y) {\n    dy = y - extent[3];\n  } else {\n    dy = 0;\n  }\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n  return containsXY(extent, coordinate[0], coordinate[1]);\n}\n\n\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n  return extent1[0] <= extent2[0] && extent2[2] <= extent1[2] &&\n      extent1[1] <= extent2[1] && extent2[3] <= extent1[3];\n}\n\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n  return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n\n\n/**\n * Get the relationship between a coordinate and extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate The coordinate.\n * @return {Relationship} The relationship (bitwise compare with\n *     import(\"./extent/Relationship.js\").Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const x = coordinate[0];\n  const y = coordinate[1];\n  let relationship = Relationship.UNKNOWN;\n  if (x < minX) {\n    relationship = relationship | Relationship.LEFT;\n  } else if (x > maxX) {\n    relationship = relationship | Relationship.RIGHT;\n  }\n  if (y < minY) {\n    relationship = relationship | Relationship.BELOW;\n  } else if (y > maxY) {\n    relationship = relationship | Relationship.ABOVE;\n  }\n  if (relationship === Relationship.UNKNOWN) {\n    relationship = Relationship.INTERSECTING;\n  }\n  return relationship;\n}\n\n\n/**\n * Create an empty extent.\n * @return {Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n  return [Infinity, Infinity, -Infinity, -Infinity];\n}\n\n\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = minX;\n    opt_extent[1] = minY;\n    opt_extent[2] = maxX;\n    opt_extent[3] = maxY;\n    return opt_extent;\n  } else {\n    return [minX, minY, maxX, maxY];\n  }\n}\n\n\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateEmpty(opt_extent) {\n  return createOrUpdate(\n    Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n}\n\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, opt_extent) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  return createOrUpdate(x, y, x, y, opt_extent);\n}\n\n\n/**\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendCoordinates(extent, coordinates);\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(flatCoordinates, offset, end, stride, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n\n/**\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendRings(extent, rings);\n}\n\n\n/**\n * Determine if two extents are equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n  return extent1[0] == extent2[0] && extent1[2] == extent2[2] &&\n      extent1[1] == extent2[1] && extent1[3] == extent2[3];\n}\n\n\n/**\n * Modify an extent to include another extent.\n * @param {Extent} extent1 The extent to be modified.\n * @param {Extent} extent2 The extent that will be included in the first.\n * @return {Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n  if (extent2[0] < extent1[0]) {\n    extent1[0] = extent2[0];\n  }\n  if (extent2[2] > extent1[2]) {\n    extent1[2] = extent2[2];\n  }\n  if (extent2[1] < extent1[1]) {\n    extent1[1] = extent2[1];\n  }\n  if (extent2[3] > extent1[3]) {\n    extent1[3] = extent2[3];\n  }\n  return extent1;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0];\n  }\n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0];\n  }\n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1];\n  }\n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1];\n  }\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Extent} Extent.\n */\nexport function extendFlatCoordinates(extent, flatCoordinates, offset, end, stride) {\n  for (; offset < end; offset += stride) {\n    extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @return {Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n  for (let i = 0, ii = rings.length; i < ii; ++i) {\n    extendCoordinates(extent, rings[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n  extent[0] = Math.min(extent[0], x);\n  extent[1] = Math.min(extent[1], y);\n  extent[2] = Math.max(extent[2], x);\n  extent[3] = Math.max(extent[3], y);\n}\n\n\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {Extent} extent Extent.\n * @param {function(this:T, import(\"./coordinate.js\").Coordinate): S} callback Callback.\n * @param {T=} opt_this Value to use as `this` when executing `callback`.\n * @return {S|boolean} Value.\n * @template S, T\n */\nexport function forEachCorner(extent, callback, opt_this) {\n  let val;\n  val = callback.call(opt_this, getBottomLeft(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getBottomRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getTopRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getTopLeft(extent));\n  if (val) {\n    return val;\n  }\n  return false;\n}\n\n\n/**\n * Get the size of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n  let area = 0;\n  if (!isEmpty(extent)) {\n    area = getWidth(extent) * getHeight(extent);\n  }\n  return area;\n}\n\n\n/**\n * Get the bottom left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n  return [extent[0], extent[1]];\n}\n\n\n/**\n * Get the bottom right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n  return [extent[2], extent[1]];\n}\n\n\n/**\n * Get the center coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n\n\n/**\n * Get a corner coordinate of an extent.\n * @param {Extent} extent Extent.\n * @param {Corner} corner Corner.\n * @return {import(\"./coordinate.js\").Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n  let coordinate;\n  if (corner === Corner.BOTTOM_LEFT) {\n    coordinate = getBottomLeft(extent);\n  } else if (corner === Corner.BOTTOM_RIGHT) {\n    coordinate = getBottomRight(extent);\n  } else if (corner === Corner.TOP_LEFT) {\n    coordinate = getTopLeft(extent);\n  } else if (corner === Corner.TOP_RIGHT) {\n    coordinate = getTopRight(extent);\n  } else {\n    assert(false, 13); // Invalid corner\n  }\n  return coordinate;\n}\n\n\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n  const minX = Math.min(extent1[0], extent2[0]);\n  const minY = Math.min(extent1[1], extent2[1]);\n  const maxX = Math.max(extent1[2], extent2[2]);\n  const maxY = Math.max(extent1[3], extent2[3]);\n  return (maxX - minX) * (maxY - minY);\n}\n\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, opt_extent) {\n  const dx = resolution * size[0] / 2;\n  const dy = resolution * size[1] / 2;\n  const cosRotation = Math.cos(rotation);\n  const sinRotation = Math.sin(rotation);\n  const xCos = dx * cosRotation;\n  const xSin = dx * sinRotation;\n  const yCos = dy * cosRotation;\n  const ySin = dy * sinRotation;\n  const x = center[0];\n  const y = center[1];\n  const x0 = x - xCos + ySin;\n  const x1 = x - xCos - ySin;\n  const x2 = x + xCos - ySin;\n  const x3 = x + xCos + ySin;\n  const y0 = y - xSin - yCos;\n  const y1 = y - xSin + yCos;\n  const y2 = y + xSin + yCos;\n  const y3 = y + xSin - yCos;\n  return createOrUpdate(\n    Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3),\n    Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3),\n    opt_extent);\n}\n\n\n/**\n * Get the height of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n  return extent[3] - extent[1];\n}\n\n\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n  const intersection = getIntersection(extent1, extent2);\n  return getArea(intersection);\n}\n\n\n/**\n * Get the intersection of two extents.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {Extent=} opt_extent Optional extent to populate with intersection.\n * @return {Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, opt_extent) {\n  const intersection = opt_extent ? opt_extent : createEmpty();\n  if (intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0];\n    } else {\n      intersection[0] = extent2[0];\n    }\n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1];\n    } else {\n      intersection[1] = extent2[1];\n    }\n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2];\n    } else {\n      intersection[2] = extent2[2];\n    }\n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3];\n    } else {\n      intersection[3] = extent2[3];\n    }\n  } else {\n    createOrUpdateEmpty(intersection);\n  }\n  return intersection;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n  return getWidth(extent) + getHeight(extent);\n}\n\n\n/**\n * Get the size (width, height) of an extent.\n * @param {Extent} extent The extent.\n * @return {import(\"./size.js\").Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n  return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n\n\n/**\n * Get the top left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n  return [extent[0], extent[3]];\n}\n\n\n/**\n * Get the top right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n  return [extent[2], extent[3]];\n}\n\n\n/**\n * Get the width of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n  return extent[2] - extent[0];\n}\n\n\n/**\n * Determine if one extent intersects another.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n  return extent1[0] <= extent2[2] &&\n      extent1[2] >= extent2[0] &&\n      extent1[1] <= extent2[3] &&\n      extent1[3] >= extent2[1];\n}\n\n\n/**\n * Determine if an extent is empty.\n * @param {Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1];\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function returnOrUpdate(extent, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0];\n    opt_extent[1] = extent[1];\n    opt_extent[2] = extent[2];\n    opt_extent[3] = extent[3];\n    return opt_extent;\n  } else {\n    return extent;\n  }\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n  const deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n  const deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n  extent[0] -= deltaX;\n  extent[2] += deltaX;\n  extent[1] -= deltaY;\n  extent[3] += deltaY;\n}\n\n\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} start Segment start coordinate.\n * @param {import(\"./coordinate.js\").Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n  let intersects = false;\n  const startRel = coordinateRelationship(extent, start);\n  const endRel = coordinateRelationship(extent, end);\n  if (startRel === Relationship.INTERSECTING ||\n      endRel === Relationship.INTERSECTING) {\n    intersects = true;\n  } else {\n    const minX = extent[0];\n    const minY = extent[1];\n    const maxX = extent[2];\n    const maxY = extent[3];\n    const startX = start[0];\n    const startY = start[1];\n    const endX = end[0];\n    const endY = end[1];\n    const slope = (endY - startY) / (endX - startX);\n    let x, y;\n    if (!!(endRel & Relationship.ABOVE) &&\n        !(startRel & Relationship.ABOVE)) {\n      // potentially intersects top\n      x = endX - ((endY - maxY) / slope);\n      intersects = x >= minX && x <= maxX;\n    }\n    if (!intersects && !!(endRel & Relationship.RIGHT) &&\n        !(startRel & Relationship.RIGHT)) {\n      // potentially intersects right\n      y = endY - ((endX - maxX) * slope);\n      intersects = y >= minY && y <= maxY;\n    }\n    if (!intersects && !!(endRel & Relationship.BELOW) &&\n        !(startRel & Relationship.BELOW)) {\n      // potentially intersects bottom\n      x = endX - ((endY - minY) / slope);\n      intersects = x >= minX && x <= maxX;\n    }\n    if (!intersects && !!(endRel & Relationship.LEFT) &&\n        !(startRel & Relationship.LEFT)) {\n      // potentially intersects left\n      y = endY - ((endX - minX) * slope);\n      intersects = y >= minY && y <= maxY;\n    }\n\n  }\n  return intersects;\n}\n\n\n/**\n * Apply a transform function to the extent.\n * @param {Extent} extent Extent.\n * @param {import(\"./proj.js\").TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, opt_extent) {\n  const coordinates = [\n    extent[0], extent[1],\n    extent[0], extent[3],\n    extent[2], extent[1],\n    extent[2], extent[3]\n  ];\n  transformFn(coordinates, coordinates, 2);\n  const xs = [coordinates[0], coordinates[2], coordinates[4], coordinates[6]];\n  const ys = [coordinates[1], coordinates[3], coordinates[5], coordinates[7]];\n  return _boundingExtentXYs(xs, ys, opt_extent);\n}\n","/**\n * @module ol/events\n */\nimport {clear} from './obj.js';\n\n\n/**\n * Key to use with {@link module:ol/Observable~Observable#unByKey}.\n * @typedef {Object} EventsKey\n * @property {Object} [bindTo]\n * @property {ListenerFunction} [boundListener]\n * @property {boolean} callOnce\n * @property {number} [deleteIndex]\n * @property {ListenerFunction} listener\n * @property {import(\"./events/Target.js\").EventTargetLike} target\n * @property {string} type\n * @api\n */\n\n\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n\n\n/**\n * @param {EventsKey} listenerObj Listener object.\n * @return {ListenerFunction} Bound listener.\n */\nexport function bindListener(listenerObj) {\n  const boundListener = function(evt) {\n    const listener = listenerObj.listener;\n    const bindTo = listenerObj.bindTo || listenerObj.target;\n    if (listenerObj.callOnce) {\n      unlistenByKey(listenerObj);\n    }\n    return listener.call(bindTo, evt);\n  };\n  listenerObj.boundListener = boundListener;\n  return boundListener;\n}\n\n\n/**\n * Finds the matching {@link module:ol/events~EventsKey} in the given listener\n * array.\n *\n * @param {!Array<!EventsKey>} listeners Array of listeners.\n * @param {!Function} listener The listener function.\n * @param {Object=} opt_this The `this` value inside the listener.\n * @param {boolean=} opt_setDeleteIndex Set the deleteIndex on the matching\n *     listener, for {@link module:ol/events~unlistenByKey}.\n * @return {EventsKey|undefined} The matching listener object.\n */\nexport function findListener(listeners, listener, opt_this, opt_setDeleteIndex) {\n  let listenerObj;\n  for (let i = 0, ii = listeners.length; i < ii; ++i) {\n    listenerObj = listeners[i];\n    if (listenerObj.listener === listener &&\n        listenerObj.bindTo === opt_this) {\n      if (opt_setDeleteIndex) {\n        listenerObj.deleteIndex = i;\n      }\n      return listenerObj;\n    }\n  }\n  return undefined;\n}\n\n\n/**\n * @param {import(\"./events/Target.js\").EventTargetLike} target Target.\n * @param {string} type Type.\n * @return {Array<EventsKey>|undefined} Listeners.\n */\nexport function getListeners(target, type) {\n  const listenerMap = getListenerMap(target);\n  return listenerMap ? listenerMap[type] : undefined;\n}\n\n\n/**\n * Get the lookup of listeners.\n * @param {Object} target Target.\n * @param {boolean=} opt_create If a map should be created if it doesn't exist.\n * @return {!Object<string, Array<EventsKey>>} Map of\n *     listeners by event type.\n */\nfunction getListenerMap(target, opt_create) {\n  let listenerMap = target.ol_lm;\n  if (!listenerMap && opt_create) {\n    listenerMap = target.ol_lm = {};\n  }\n  return listenerMap;\n}\n\n\n/**\n * Remove the listener map from a target.\n * @param {Object} target Target.\n */\nfunction removeListenerMap(target) {\n  delete target.ol_lm;\n}\n\n\n/**\n * Clean up all listener objects of the given type.  All properties on the\n * listener objects will be removed, and if no listeners remain in the listener\n * map, it will be removed from the target.\n * @param {import(\"./events/Target.js\").EventTargetLike} target Target.\n * @param {string} type Type.\n */\nfunction removeListeners(target, type) {\n  const listeners = getListeners(target, type);\n  if (listeners) {\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      /** @type {import(\"./events/Target.js\").default} */ (target).\n        removeEventListener(type, listeners[i].boundListener);\n      clear(listeners[i]);\n    }\n    listeners.length = 0;\n    const listenerMap = getListenerMap(target);\n    if (listenerMap) {\n      delete listenerMap[type];\n      if (Object.keys(listenerMap).length === 0) {\n        removeListenerMap(target);\n      }\n    }\n  }\n}\n\n\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events~unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean=} opt_once If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, opt_this, opt_once) {\n  const listenerMap = getListenerMap(target, true);\n  let listeners = listenerMap[type];\n  if (!listeners) {\n    listeners = listenerMap[type] = [];\n  }\n  let listenerObj = findListener(listeners, listener, opt_this, false);\n  if (listenerObj) {\n    if (!opt_once) {\n      // Turn one-off listener into a permanent one.\n      listenerObj.callOnce = false;\n    }\n  } else {\n    listenerObj = /** @type {EventsKey} */ ({\n      bindTo: opt_this,\n      callOnce: !!opt_once,\n      listener: listener,\n      target: target,\n      type: type\n    });\n    /** @type {import(\"./events/Target.js\").default} */ (target).\n      addEventListener(type, bindListener(listenerObj));\n    listeners.push(listenerObj);\n  }\n\n  return listenerObj;\n}\n\n\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events~unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events~listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, opt_this) {\n  return listen(target, type, listener, opt_this, true);\n}\n\n\n/**\n * Unregisters an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * To return a listener, this function needs to be called with the exact same\n * arguments that were used for a previous {@link module:ol/events~listen} call.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n */\nexport function unlisten(target, type, listener, opt_this) {\n  const listeners = getListeners(target, type);\n  if (listeners) {\n    const listenerObj = findListener(listeners, listener, opt_this, true);\n    if (listenerObj) {\n      unlistenByKey(listenerObj);\n    }\n  }\n}\n\n\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events~listen} or {@link module:ol/events~listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n  if (key && key.target) {\n    /** @type {import(\"./events/Target.js\").default} */ (key.target).\n      removeEventListener(key.type, key.boundListener);\n    const listeners = getListeners(key.target, key.type);\n    if (listeners) {\n      const i = 'deleteIndex' in key ? key.deleteIndex : listeners.indexOf(key);\n      if (i !== -1) {\n        listeners.splice(i, 1);\n      }\n      if (listeners.length === 0) {\n        removeListeners(key.target, key.type);\n      }\n    }\n    clear(key);\n  }\n}\n\n\n/**\n * Unregisters all event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Target.\n */\nexport function unlistenAll(target) {\n  const listenerMap = getListenerMap(target);\n  if (listenerMap) {\n    for (const type in listenerMap) {\n      removeListeners(target, type);\n    }\n  }\n}\n","/**\n * @module ol/util\n */\n\n/**\n * @return {?} Any return.\n */\nexport function abstract() {\n  return /** @type {?} */ ((function() {\n    throw new Error('Unimplemented abstract method.');\n  })());\n}\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * Usage:\n *\n *     function ParentClass(a, b) { }\n *     ParentClass.prototype.foo = function(a) { }\n *\n *     function ChildClass(a, b, c) {\n *       // Call parent constructor\n *       ParentClass.call(this, a, b);\n *     }\n *     inherits(ChildClass, ParentClass);\n *\n *     var child = new ChildClass('a', 'b', 'see');\n *     child.foo(); // This works.\n *\n * @param {!Function} childCtor Child constructor.\n * @param {!Function} parentCtor Parent constructor.\n * @function module:ol.inherits\n * @deprecated\n * @api\n */\nexport function inherits(childCtor, parentCtor) {\n  childCtor.prototype = Object.create(parentCtor.prototype);\n  childCtor.prototype.constructor = childCtor;\n}\n\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {string} The unique ID for the object.\n * @function module:ol.getUid\n * @api\n */\nexport function getUid(obj) {\n  return obj.ol_uid || (obj.ol_uid = String(++uidCounter_));\n}\n\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport const VERSION = 'latest';\n","/**\n * @module ol/format/xsd\n */\nimport {getAllTextContent, DOCUMENT} from '../xml.js';\nimport {padNumber} from '../string.js';\n\n\n/**\n * @param {Node} node Node.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBoolean(node) {\n  const s = getAllTextContent(node, false);\n  return readBooleanString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBooleanString(string) {\n  const m = /^\\s*(true|1)|(false|0)\\s*$/.exec(string);\n  if (m) {\n    return m[1] !== undefined || false;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} DateTime in seconds.\n */\nexport function readDateTime(node) {\n  const s = getAllTextContent(node, false);\n  const dateTime = Date.parse(s);\n  return isNaN(dateTime) ? undefined : dateTime / 1000;\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimal(node) {\n  const s = getAllTextContent(node, false);\n  return readDecimalString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimalString(string) {\n  // FIXME check spec\n  const m = /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*$/i.exec(string);\n  if (m) {\n    return parseFloat(m[1]);\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeInteger(node) {\n  const s = getAllTextContent(node, false);\n  return readNonNegativeIntegerString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeIntegerString(string) {\n  const m = /^\\s*(\\d+)\\s*$/.exec(string);\n  if (m) {\n    return parseInt(m[1], 10);\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {string|undefined} String.\n */\nexport function readString(node) {\n  return getAllTextContent(node, false).trim();\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the boolean to.\n * @param {boolean} bool Boolean.\n */\nexport function writeBooleanTextNode(node, bool) {\n  writeStringTextNode(node, (bool) ? '1' : '0');\n}\n\n\n/**\n * @param {Node} node Node to append a CDATA Section with the string to.\n * @param {string} string String.\n */\nexport function writeCDATASection(node, string) {\n  node.appendChild(DOCUMENT.createCDATASection(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the dateTime to.\n * @param {number} dateTime DateTime in seconds.\n */\nexport function writeDateTimeTextNode(node, dateTime) {\n  const date = new Date(dateTime * 1000);\n  const string = date.getUTCFullYear() + '-' +\n      padNumber(date.getUTCMonth() + 1, 2) + '-' +\n      padNumber(date.getUTCDate(), 2) + 'T' +\n      padNumber(date.getUTCHours(), 2) + ':' +\n      padNumber(date.getUTCMinutes(), 2) + ':' +\n      padNumber(date.getUTCSeconds(), 2) + 'Z';\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} decimal Decimal.\n */\nexport function writeDecimalTextNode(node, decimal) {\n  const string = decimal.toPrecision();\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} nonNegativeInteger Non negative integer.\n */\nexport function writeNonNegativeIntegerTextNode(node, nonNegativeInteger) {\n  const string = nonNegativeInteger.toString();\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the string to.\n * @param {string} string String.\n */\nexport function writeStringTextNode(node, string) {\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n","/**\n * @module ol/proj/epsg3857\n */\nimport {cosh} from '../math.js';\nimport Projection from './Projection.js';\nimport Units from './Units.js';\n\n\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const HALF_SIZE = Math.PI * RADIUS;\n\n\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const EXTENT = [\n  -HALF_SIZE, -HALF_SIZE,\n  HALF_SIZE, HALF_SIZE\n];\n\n\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const WORLD_EXTENT = [-180, -85, 180, 85];\n\n\n/**\n * @classdesc\n * Projection object for web/spherical Mercator (EPSG:3857).\n */\nclass EPSG3857Projection extends Projection {\n\n  /**\n   * @param {string} code Code.\n   */\n  constructor(code) {\n    super({\n      code: code,\n      units: Units.METERS,\n      extent: EXTENT,\n      global: true,\n      worldExtent: WORLD_EXTENT,\n      getPointResolution: function(resolution, point) {\n        return resolution / cosh(point[1] / RADIUS);\n      }\n    });\n\n  }\n\n}\n\n\n/**\n * Projections equal to EPSG:3857.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport const PROJECTIONS = [\n  new EPSG3857Projection('EPSG:3857'),\n  new EPSG3857Projection('EPSG:102100'),\n  new EPSG3857Projection('EPSG:102113'),\n  new EPSG3857Projection('EPSG:900913'),\n  new EPSG3857Projection('urn:ogc:def:crs:EPSG:6.18:3:3857'),\n  new EPSG3857Projection('urn:ogc:def:crs:EPSG::3857'),\n  new EPSG3857Projection('http://www.opengis.net/gml/srs/epsg.xml#3857')\n];\n\n\n/**\n * Transformation from EPSG:4326 to EPSG:3857.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function fromEPSG4326(input, opt_output, opt_dimension) {\n  const length = input.length;\n  const dimension = opt_dimension > 1 ? opt_dimension : 2;\n  let output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  const halfSize = HALF_SIZE;\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = halfSize * input[i] / 180;\n    let y = RADIUS *\n        Math.log(Math.tan(Math.PI * (input[i + 1] + 90) / 360));\n    if (y > halfSize) {\n      y = halfSize;\n    } else if (y < -halfSize) {\n      y = -halfSize;\n    }\n    output[i + 1] = y;\n  }\n  return output;\n}\n\n\n/**\n * Transformation from EPSG:3857 to EPSG:4326.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function toEPSG4326(input, opt_output, opt_dimension) {\n  const length = input.length;\n  const dimension = opt_dimension > 1 ? opt_dimension : 2;\n  let output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = 180 * input[i] / HALF_SIZE;\n    output[i + 1] = 360 * Math.atan(\n      Math.exp(input[i + 1] / RADIUS)) / Math.PI - 90;\n  }\n  return output;\n}\n","/**\n * @module ol/proj/epsg4326\n */\nimport Projection from './Projection.js';\nimport Units from './Units.js';\n\n\n/**\n * Semi-major radius of the WGS84 ellipsoid.\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n\n/**\n * Extent of the EPSG:4326 projection which is the whole world.\n *\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const EXTENT = [-180, -90, 180, 90];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const METERS_PER_UNIT = Math.PI * RADIUS / 180;\n\n\n/**\n * @classdesc\n * Projection object for WGS84 geographic coordinates (EPSG:4326).\n *\n * Note that OpenLayers does not strictly comply with the EPSG definition.\n * The EPSG registry defines 4326 as a CRS for Latitude,Longitude (y,x).\n * OpenLayers treats EPSG:4326 as a pseudo-projection, with x,y coordinates.\n */\nclass EPSG4326Projection extends Projection {\n\n  /**\n   * @param {string} code Code.\n   * @param {string=} opt_axisOrientation Axis orientation.\n   */\n  constructor(code, opt_axisOrientation) {\n    super({\n      code: code,\n      units: Units.DEGREES,\n      extent: EXTENT,\n      axisOrientation: opt_axisOrientation,\n      global: true,\n      metersPerUnit: METERS_PER_UNIT,\n      worldExtent: EXTENT\n    });\n\n  }\n\n}\n\n\n/**\n * Projections equal to EPSG:4326.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport const PROJECTIONS = [\n  new EPSG4326Projection('CRS:84'),\n  new EPSG4326Projection('EPSG:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:EPSG::4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:EPSG:6.6:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:1.3:CRS84'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:2:84'),\n  new EPSG4326Projection('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'),\n  new EPSG4326Projection('urn:x-ogc:def:crs:EPSG:4326', 'neu')\n];\n","/**\n * @module ol/proj/projections\n */\n\n\n/**\n * @type {Object<string, import(\"./Projection.js\").default>}\n */\nlet cache = {};\n\n\n/**\n * Clear the projections cache.\n */\nexport function clear() {\n  cache = {};\n}\n\n\n/**\n * Get a cached projection by code.\n * @param {string} code The code for the projection.\n * @return {import(\"./Projection.js\").default} The projection (if cached).\n */\nexport function get(code) {\n  return cache[code] || null;\n}\n\n\n/**\n * Add a projection to the cache.\n * @param {string} code The projection code.\n * @param {import(\"./Projection.js\").default} projection The projection to cache.\n */\nexport function add(code, projection) {\n  cache[code] = projection;\n}\n","/**\n * @module ol/proj\n */\n\n/**\n * The ol/proj module stores:\n * * a list of {@link module:ol/proj/Projection}\n * objects, one for each projection supported by the application\n * * a list of transform functions needed to convert coordinates in one projection\n * into another.\n *\n * The static functions are the methods used to maintain these.\n * Each transform function can handle not only simple coordinate pairs, but also\n * large arrays of coordinates such as vector geometries.\n *\n * When loaded, the library adds projection objects for EPSG:4326 (WGS84\n * geographic coordinates) and EPSG:3857 (Web or Spherical Mercator, as used\n * for example by Bing Maps or OpenStreetMap), together with the relevant\n * transform functions.\n *\n * Additional transforms may be added by using the http://proj4js.org/\n * library (version 2.2 or later). You can use the full build supplied by\n * Proj4js, or create a custom build to support those projections you need; see\n * the Proj4js website for how to do this. You also need the Proj4js definitions\n * for the required projections. These definitions can be obtained from\n * https://epsg.io/, and are a JS function, so can be loaded in a script\n * tag (as in the examples) or pasted into your application.\n *\n * After all required projection definitions are added to proj4's registry (by\n * using `proj4.defs()`), simply call `register(proj4)` from the `ol/proj/proj4`\n * package. Existing transforms are not changed by this function. See\n * examples/wms-image-custom-proj for an example of this.\n *\n * Additional projection definitions can be registered with `proj4.defs()` any\n * time. Just make sure to call `register(proj4)` again; for example, with user-supplied data where you don't\n * know in advance what projections are needed, you can initially load minimal\n * support and then load whichever are requested.\n *\n * Note that Proj4js does not support projection extents. If you want to add\n * one for creating default tile grids, you can add it after the Projection\n * object has been created with `setExtent`, for example,\n * `get('EPSG:1234').setExtent(extent)`.\n *\n * In addition to Proj4js support, any transform functions can be added with\n * {@link module:ol/proj~addCoordinateTransforms}. To use this, you must first create\n * a {@link module:ol/proj/Projection} object for the new projection and add it with\n * {@link module:ol/proj~addProjection}. You can then add the forward and inverse\n * functions with {@link module:ol/proj~addCoordinateTransforms}. See\n * examples/wms-custom-proj for an example of this.\n *\n * Note that if no transforms are needed and you only need to define the\n * projection, just add a {@link module:ol/proj/Projection} with\n * {@link module:ol/proj~addProjection}. See examples/wms-no-proj for an example of\n * this.\n */\nimport {getDistance} from './sphere.js';\nimport {applyTransform} from './extent.js';\nimport {modulo} from './math.js';\nimport {toEPSG4326, fromEPSG4326, PROJECTIONS as EPSG3857_PROJECTIONS} from './proj/epsg3857.js';\nimport {PROJECTIONS as EPSG4326_PROJECTIONS} from './proj/epsg4326.js';\nimport Projection from './proj/Projection.js';\nimport Units, {METERS_PER_UNIT} from './proj/Units.js';\nimport * as projections from './proj/projections.js';\nimport {add as addTransformFunc, clear as clearTransformFuncs, get as getTransformFunc} from './proj/transforms.js';\n\n\n/**\n * A projection as {@link module:ol/proj/Projection}, SRS identifier\n * string or undefined.\n * @typedef {Projection|string|undefined} ProjectionLike\n * @api\n */\n\n\n/**\n * A transform function accepts an array of input coordinate values, an optional\n * output array, and an optional dimension (default should be 2).  The function\n * transforms the input coordinate values, populates the output array, and\n * returns the output array.\n *\n * @typedef {function(Array<number>, Array<number>=, number=): Array<number>} TransformFunction\n * @api\n */\n\n\nexport {METERS_PER_UNIT};\n\nexport {Projection};\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array<number>} Output coordinate array (new array, same coordinate\n *     values).\n */\nexport function cloneTransform(input, opt_output, opt_dimension) {\n  let output;\n  if (opt_output !== undefined) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    output = opt_output;\n  } else {\n    output = input.slice();\n  }\n  return output;\n}\n\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array<number>} Input coordinate array (same array as input).\n */\nexport function identityTransform(input, opt_output, opt_dimension) {\n  if (opt_output !== undefined && input !== opt_output) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    input = opt_output;\n  }\n  return input;\n}\n\n\n/**\n * Add a Projection object to the list of supported projections that can be\n * looked up by their code.\n *\n * @param {Projection} projection Projection instance.\n * @api\n */\nexport function addProjection(projection) {\n  projections.add(projection.getCode(), projection);\n  addTransformFunc(projection, projection, cloneTransform);\n}\n\n\n/**\n * @param {Array<Projection>} projections Projections.\n */\nexport function addProjections(projections) {\n  projections.forEach(addProjection);\n}\n\n\n/**\n * Fetches a Projection object for the code specified.\n *\n * @param {ProjectionLike} projectionLike Either a code string which is\n *     a combination of authority and identifier such as \"EPSG:4326\", or an\n *     existing projection object, or undefined.\n * @return {Projection} Projection object, or null if not in list.\n * @api\n */\nexport function get(projectionLike) {\n  return typeof projectionLike === 'string' ?\n    projections.get(/** @type {string} */ (projectionLike)) :\n    (/** @type {Projection} */ (projectionLike) || null);\n}\n\n\n/**\n * Get the resolution of the point in degrees or distance units.\n * For projections with degrees as the unit this will simply return the\n * provided resolution. For other projections the point resolution is\n * by default estimated by transforming the 'point' pixel to EPSG:4326,\n * measuring its width and height on the normal sphere,\n * and taking the average of the width and height.\n * A custom function can be provided for a specific projection, either\n * by setting the `getPointResolution` option in the\n * {@link module:ol/proj/Projection~Projection} constructor or by using\n * {@link module:ol/proj/Projection~Projection#setGetPointResolution} to change an existing\n * projection object.\n * @param {ProjectionLike} projection The projection.\n * @param {number} resolution Nominal resolution in projection units.\n * @param {import(\"./coordinate.js\").Coordinate} point Point to find adjusted resolution at.\n * @param {Units=} opt_units Units to get the point resolution in.\n * Default is the projection's units.\n * @return {number} Point resolution.\n * @api\n */\nexport function getPointResolution(projection, resolution, point, opt_units) {\n  projection = get(projection);\n  let pointResolution;\n  const getter = projection.getPointResolutionFunc();\n  if (getter) {\n    pointResolution = getter(resolution, point);\n  } else {\n    const units = projection.getUnits();\n    if (units == Units.DEGREES && !opt_units || opt_units == Units.DEGREES) {\n      pointResolution = resolution;\n    } else {\n      // Estimate point resolution by transforming the center pixel to EPSG:4326,\n      // measuring its width and height on the normal sphere, and taking the\n      // average of the width and height.\n      const toEPSG4326 = getTransformFromProjections(projection, get('EPSG:4326'));\n      let vertices = [\n        point[0] - resolution / 2, point[1],\n        point[0] + resolution / 2, point[1],\n        point[0], point[1] - resolution / 2,\n        point[0], point[1] + resolution / 2\n      ];\n      vertices = toEPSG4326(vertices, vertices, 2);\n      const width = getDistance(vertices.slice(0, 2), vertices.slice(2, 4));\n      const height = getDistance(vertices.slice(4, 6), vertices.slice(6, 8));\n      pointResolution = (width + height) / 2;\n      const metersPerUnit = opt_units ?\n        METERS_PER_UNIT[opt_units] :\n        projection.getMetersPerUnit();\n      if (metersPerUnit !== undefined) {\n        pointResolution /= metersPerUnit;\n      }\n    }\n  }\n  return pointResolution;\n}\n\n\n/**\n * Registers transformation functions that don't alter coordinates. Those allow\n * to transform between projections with equal meaning.\n *\n * @param {Array<Projection>} projections Projections.\n * @api\n */\nexport function addEquivalentProjections(projections) {\n  addProjections(projections);\n  projections.forEach(function(source) {\n    projections.forEach(function(destination) {\n      if (source !== destination) {\n        addTransformFunc(source, destination, cloneTransform);\n      }\n    });\n  });\n}\n\n\n/**\n * Registers transformation functions to convert coordinates in any projection\n * in projection1 to any projection in projection2.\n *\n * @param {Array<Projection>} projections1 Projections with equal\n *     meaning.\n * @param {Array<Projection>} projections2 Projections with equal\n *     meaning.\n * @param {TransformFunction} forwardTransform Transformation from any\n *   projection in projection1 to any projection in projection2.\n * @param {TransformFunction} inverseTransform Transform from any projection\n *   in projection2 to any projection in projection1..\n */\nexport function addEquivalentTransforms(projections1, projections2, forwardTransform, inverseTransform) {\n  projections1.forEach(function(projection1) {\n    projections2.forEach(function(projection2) {\n      addTransformFunc(projection1, projection2, forwardTransform);\n      addTransformFunc(projection2, projection1, inverseTransform);\n    });\n  });\n}\n\n\n/**\n * Clear all cached projections and transforms.\n */\nexport function clearAllProjections() {\n  projections.clear();\n  clearTransformFuncs();\n}\n\n\n/**\n * @param {Projection|string|undefined} projection Projection.\n * @param {string} defaultCode Default code.\n * @return {Projection} Projection.\n */\nexport function createProjection(projection, defaultCode) {\n  if (!projection) {\n    return get(defaultCode);\n  } else if (typeof projection === 'string') {\n    return get(projection);\n  } else {\n    return (\n      /** @type {Projection} */ (projection)\n    );\n  }\n}\n\n\n/**\n * Creates a {@link module:ol/proj~TransformFunction} from a simple 2D coordinate transform\n * function.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} coordTransform Coordinate\n *     transform.\n * @return {TransformFunction} Transform function.\n */\nexport function createTransformFromCoordinateTransform(coordTransform) {\n  return (\n    /**\n     * @param {Array<number>} input Input.\n     * @param {Array<number>=} opt_output Output.\n     * @param {number=} opt_dimension Dimension.\n     * @return {Array<number>} Output.\n     */\n    function(input, opt_output, opt_dimension) {\n      const length = input.length;\n      const dimension = opt_dimension !== undefined ? opt_dimension : 2;\n      const output = opt_output !== undefined ? opt_output : new Array(length);\n      for (let i = 0; i < length; i += dimension) {\n        const point = coordTransform([input[i], input[i + 1]]);\n        output[i] = point[0];\n        output[i + 1] = point[1];\n        for (let j = dimension - 1; j >= 2; --j) {\n          output[i + j] = input[i + j];\n        }\n      }\n      return output;\n    });\n}\n\n\n/**\n * Registers coordinate transform functions to convert coordinates between the\n * source projection and the destination projection.\n * The forward and inverse functions convert coordinate pairs; this function\n * converts these into the functions used internally which also handle\n * extents and coordinate arrays.\n *\n * @param {ProjectionLike} source Source projection.\n * @param {ProjectionLike} destination Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} forward The forward transform\n *     function (that is, from the source projection to the destination\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} inverse The inverse transform\n *     function (that is, from the destination projection to the source\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @api\n */\nexport function addCoordinateTransforms(source, destination, forward, inverse) {\n  const sourceProj = get(source);\n  const destProj = get(destination);\n  addTransformFunc(sourceProj, destProj, createTransformFromCoordinateTransform(forward));\n  addTransformFunc(destProj, sourceProj, createTransformFromCoordinateTransform(inverse));\n}\n\n\n/**\n * Transforms a coordinate from longitude/latitude to a different projection.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate as longitude and latitude, i.e.\n *     an array with longitude as 1st and latitude as 2nd element.\n * @param {ProjectionLike=} opt_projection Target projection. The\n *     default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate projected to the target projection.\n * @api\n */\nexport function fromLonLat(coordinate, opt_projection) {\n  return transform(coordinate, 'EPSG:4326',\n    opt_projection !== undefined ? opt_projection : 'EPSG:3857');\n}\n\n\n/**\n * Transforms a coordinate to longitude/latitude.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Projected coordinate.\n * @param {ProjectionLike=} opt_projection Projection of the coordinate.\n *     The default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate as longitude and latitude, i.e. an array\n *     with longitude as 1st and latitude as 2nd element.\n * @api\n */\nexport function toLonLat(coordinate, opt_projection) {\n  const lonLat = transform(coordinate,\n    opt_projection !== undefined ? opt_projection : 'EPSG:3857', 'EPSG:4326');\n  const lon = lonLat[0];\n  if (lon < -180 || lon > 180) {\n    lonLat[0] = modulo(lon + 180, 360) - 180;\n  }\n  return lonLat;\n}\n\n\n/**\n * Checks if two projections are the same, that is every coordinate in one\n * projection does represent the same geographic point as the same coordinate in\n * the other projection.\n *\n * @param {Projection} projection1 Projection 1.\n * @param {Projection} projection2 Projection 2.\n * @return {boolean} Equivalent.\n * @api\n */\nexport function equivalent(projection1, projection2) {\n  if (projection1 === projection2) {\n    return true;\n  }\n  const equalUnits = projection1.getUnits() === projection2.getUnits();\n  if (projection1.getCode() === projection2.getCode()) {\n    return equalUnits;\n  } else {\n    const transformFunc = getTransformFromProjections(projection1, projection2);\n    return transformFunc === cloneTransform && equalUnits;\n  }\n}\n\n\n/**\n * Searches in the list of transform functions for the function for converting\n * coordinates from the source projection to the destination projection.\n *\n * @param {Projection} sourceProjection Source Projection object.\n * @param {Projection} destinationProjection Destination Projection\n *     object.\n * @return {TransformFunction} Transform function.\n */\nexport function getTransformFromProjections(sourceProjection, destinationProjection) {\n  const sourceCode = sourceProjection.getCode();\n  const destinationCode = destinationProjection.getCode();\n  let transformFunc = getTransformFunc(sourceCode, destinationCode);\n  if (!transformFunc) {\n    transformFunc = identityTransform;\n  }\n  return transformFunc;\n}\n\n\n/**\n * Given the projection-like objects, searches for a transformation\n * function to convert a coordinates array from the source projection to the\n * destination projection.\n *\n * @param {ProjectionLike} source Source.\n * @param {ProjectionLike} destination Destination.\n * @return {TransformFunction} Transform function.\n * @api\n */\nexport function getTransform(source, destination) {\n  const sourceProjection = get(source);\n  const destinationProjection = get(destination);\n  return getTransformFromProjections(sourceProjection, destinationProjection);\n}\n\n\n/**\n * Transforms a coordinate from source projection to destination projection.\n * This returns a new coordinate (and does not modify the original).\n *\n * See {@link module:ol/proj~transformExtent} for extent transformation.\n * See the transform method of {@link module:ol/geom/Geometry~Geometry} and its\n * subclasses for geometry transforms.\n *\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n * @api\n */\nexport function transform(coordinate, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return transformFunc(coordinate, undefined, coordinate.length);\n}\n\n\n/**\n * Transforms an extent from source projection to destination projection.  This\n * returns a new extent (and does not modify the original).\n *\n * @param {import(\"./extent.js\").Extent} extent The extent to transform.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./extent.js\").Extent} The transformed extent.\n * @api\n */\nexport function transformExtent(extent, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return applyTransform(extent, transformFunc);\n}\n\n\n/**\n * Transforms the given point to the destination projection.\n *\n * @param {import(\"./coordinate.js\").Coordinate} point Point.\n * @param {Projection} sourceProjection Source projection.\n * @param {Projection} destinationProjection Destination projection.\n * @return {import(\"./coordinate.js\").Coordinate} Point.\n */\nexport function transformWithProjections(point, sourceProjection, destinationProjection) {\n  const transformFunc = getTransformFromProjections(sourceProjection, destinationProjection);\n  return transformFunc(point);\n}\n\n/**\n * Add transforms to and from EPSG:4326 and EPSG:3857.  This function is called\n * by when this module is executed and should only need to be called again after\n * `clearAllProjections()` is called (e.g. in tests).\n */\nexport function addCommon() {\n  // Add transformations that don't alter coordinates to convert within set of\n  // projections with equal meaning.\n  addEquivalentProjections(EPSG3857_PROJECTIONS);\n  addEquivalentProjections(EPSG4326_PROJECTIONS);\n  // Add transformations to convert EPSG:4326 like coordinates to EPSG:3857 like\n  // coordinates and back.\n  addEquivalentTransforms(EPSG4326_PROJECTIONS, EPSG3857_PROJECTIONS, fromEPSG4326, toEPSG4326);\n}\n\naddCommon();\n","/**\n * @module ol/geom/GeometryType\n */\n\n/**\n * The geometry type. One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, `'Circle'`.\n * @enum {string}\n */\nexport default {\n  POINT: 'Point',\n  LINE_STRING: 'LineString',\n  LINEAR_RING: 'LinearRing',\n  POLYGON: 'Polygon',\n  MULTI_POINT: 'MultiPoint',\n  MULTI_LINE_STRING: 'MultiLineString',\n  MULTI_POLYGON: 'MultiPolygon',\n  GEOMETRY_COLLECTION: 'GeometryCollection',\n  CIRCLE: 'Circle'\n};\n","/**\n * @module ol/events/EventType\n */\n\n/**\n * @enum {string}\n * @const\n */\nexport default {\n  /**\n   * Generic change event. Triggered when the revision counter is increased.\n   * @event module:ol/events/Event~Event#change\n   * @api\n   */\n  CHANGE: 'change',\n\n  CLEAR: 'clear',\n  CONTEXTMENU: 'contextmenu',\n  CLICK: 'click',\n  DBLCLICK: 'dblclick',\n  DRAGENTER: 'dragenter',\n  DRAGOVER: 'dragover',\n  DROP: 'drop',\n  ERROR: 'error',\n  KEYDOWN: 'keydown',\n  KEYPRESS: 'keypress',\n  LOAD: 'load',\n  MOUSEDOWN: 'mousedown',\n  MOUSEMOVE: 'mousemove',\n  MOUSEOUT: 'mouseout',\n  MOUSEUP: 'mouseup',\n  MOUSEWHEEL: 'mousewheel',\n  MSPOINTERDOWN: 'MSPointerDown',\n  RESIZE: 'resize',\n  TOUCHSTART: 'touchstart',\n  TOUCHMOVE: 'touchmove',\n  TOUCHEND: 'touchend',\n  WHEEL: 'wheel'\n};\n","/**\n * @module ol/render/canvas\n */\nimport {getFontFamilies} from '../css.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {clear} from '../obj.js';\nimport LRUCache from '../structs/LRUCache.js';\nimport {create as createTransform} from '../transform.js';\n\n\n/**\n * @typedef {Object} FillState\n * @property {import(\"../colorlike.js\").ColorLike} fillStyle\n */\n\n\n/**\n * @typedef {Object} FillStrokeState\n * @property {import(\"../colorlike.js\").ColorLike} [currentFillStyle]\n * @property {import(\"../colorlike.js\").ColorLike} [currentStrokeStyle]\n * @property {string} [currentLineCap]\n * @property {Array<number>} currentLineDash\n * @property {number} [currentLineDashOffset]\n * @property {string} [currentLineJoin]\n * @property {number} [currentLineWidth]\n * @property {number} [currentMiterLimit]\n * @property {number} [lastStroke]\n * @property {import(\"../colorlike.js\").ColorLike} [fillStyle]\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle]\n * @property {string} [lineCap]\n * @property {Array<number>} lineDash\n * @property {number} [lineDashOffset]\n * @property {string} [lineJoin]\n * @property {number} [lineWidth]\n * @property {number} [miterLimit]\n */\n\n\n/**\n * @typedef {Object} StrokeState\n * @property {string} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {string} lineJoin\n * @property {number} lineWidth\n * @property {number} miterLimit\n * @property {import(\"../colorlike.js\").ColorLike} strokeStyle\n */\n\n\n/**\n * @typedef {Object} TextState\n * @property {string} font\n * @property {string} [textAlign]\n * @property {string} textBaseline\n * @property {string} [placement]\n * @property {number} [maxAngle]\n * @property {boolean} [overflow]\n * @property {import(\"../style/Fill.js\").default} [backgroundFill]\n * @property {import(\"../style/Stroke.js\").default} [backgroundStroke]\n * @property {number} [scale]\n * @property {Array<number>} [padding]\n */\n\n\n/**\n * Container for decluttered replay instructions that need to be rendered or\n * omitted together, i.e. when styles render both an image and text, or for the\n * characters that form text along lines. The basic elements of this array are\n * `[minX, minY, maxX, maxY, count]`, where the first four entries are the\n * rendered extent of the group in pixel space. `count` is the number of styles\n * in the group, i.e. 2 when an image and a text are grouped, or 1 otherwise.\n * In addition to these four elements, declutter instruction arrays (i.e. the\n * arguments to {@link module:ol/render/canvas~drawImage} are appended to the array.\n * @typedef {Array<*>} DeclutterGroup\n */\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultFont = '10px sans-serif';\n\n\n/**\n * @const\n * @type {import(\"../color.js\").Color}\n */\nexport const defaultFillStyle = [0, 0, 0, 1];\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultLineCap = 'round';\n\n\n/**\n * @const\n * @type {Array<number>}\n */\nexport const defaultLineDash = [];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineDashOffset = 0;\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultLineJoin = 'round';\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultMiterLimit = 10;\n\n\n/**\n * @const\n * @type {import(\"../color.js\").Color}\n */\nexport const defaultStrokeStyle = [0, 0, 0, 1];\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultTextAlign = 'center';\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultTextBaseline = 'middle';\n\n\n/**\n * @const\n * @type {Array<number>}\n */\nexport const defaultPadding = [0, 0, 0, 0];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineWidth = 1;\n\n\n/**\n * The label cache for text rendering. To change the default cache size of 2048\n * entries, use {@link module:ol/structs/LRUCache#setSize}.\n * @type {LRUCache<HTMLCanvasElement>}\n * @api\n */\nexport const labelCache = new LRUCache();\n\n\n/**\n * @type {!Object<string, number>}\n */\nexport const checkedFonts = {};\n\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet measureContext = null;\n\n\n/**\n * @type {!Object<string, number>}\n */\nexport const textHeights = {};\n\n\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\nexport const checkFont = (function() {\n  const retries = 60;\n  const checked = checkedFonts;\n  const size = '32px ';\n  const referenceFonts = ['monospace', 'serif'];\n  const len = referenceFonts.length;\n  const text = 'wmytzilWMYTZIL@#/&?$%10\\uF013';\n  let interval, referenceWidth;\n\n  function isAvailable(font) {\n    const context = getMeasureContext();\n    // Check weight ranges according to\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight#Fallback_weights\n    for (let weight = 100; weight <= 700; weight += 300) {\n      const fontWeight = weight + ' ';\n      let available = true;\n      for (let i = 0; i < len; ++i) {\n        const referenceFont = referenceFonts[i];\n        context.font = fontWeight + size + referenceFont;\n        referenceWidth = context.measureText(text).width;\n        if (font != referenceFont) {\n          context.font = fontWeight + size + font + ',' + referenceFont;\n          const width = context.measureText(text).width;\n          // If width and referenceWidth are the same, then the fallback was used\n          // instead of the font we wanted, so the font is not available.\n          available = available && width != referenceWidth;\n        }\n      }\n      if (available) {\n        // Consider font available when it is available in one weight range.\n        //FIXME With this we miss rare corner cases, so we should consider\n        //FIXME checking availability for each requested weight range.\n        return true;\n      }\n    }\n    return false;\n  }\n\n  function check() {\n    let done = true;\n    for (const font in checked) {\n      if (checked[font] < retries) {\n        if (isAvailable(font)) {\n          checked[font] = retries;\n          clear(textHeights);\n          // Make sure that loaded fonts are picked up by Safari\n          measureContext = null;\n          labelCache.clear();\n        } else {\n          ++checked[font];\n          done = false;\n        }\n      }\n    }\n    if (done) {\n      clearInterval(interval);\n      interval = undefined;\n    }\n  }\n\n  return function(fontSpec) {\n    const fontFamilies = getFontFamilies(fontSpec);\n    if (!fontFamilies) {\n      return;\n    }\n    for (let i = 0, ii = fontFamilies.length; i < ii; ++i) {\n      const fontFamily = fontFamilies[i];\n      if (!(fontFamily in checked)) {\n        checked[fontFamily] = retries;\n        if (!isAvailable(fontFamily)) {\n          checked[fontFamily] = 0;\n          if (interval === undefined) {\n            interval = setInterval(check, 32);\n          }\n        }\n      }\n    }\n  };\n})();\n\n\n/**\n * @return {CanvasRenderingContext2D} Measure context.\n */\nfunction getMeasureContext() {\n  if (!measureContext) {\n    measureContext = createCanvasContext2D(1, 1);\n  }\n  return measureContext;\n}\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @return {import(\"../size.js\").Size} Measurement.\n */\nexport const measureTextHeight = (function() {\n  let span;\n  const heights = textHeights;\n  return function(font) {\n    let height = heights[font];\n    if (height == undefined) {\n      if (!span) {\n        span = document.createElement('span');\n        span.textContent = 'M';\n        span.style.margin = span.style.padding = '0 !important';\n        span.style.position = 'absolute !important';\n        span.style.left = '-99999px !important';\n      }\n      span.style.font = font;\n      document.body.appendChild(span);\n      height = heights[font] = span.offsetHeight;\n      document.body.removeChild(span);\n    }\n    return height;\n  };\n})();\n\n\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\nexport function measureTextWidth(font, text) {\n  const measureContext = getMeasureContext();\n  if (font != measureContext.font) {\n    measureContext.font = font;\n  }\n  return measureContext.measureText(text).width;\n}\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\nexport function rotateAtOffset(context, rotation, offsetX, offsetY) {\n  if (rotation !== 0) {\n    context.translate(offsetX, offsetY);\n    context.rotate(rotation);\n    context.translate(-offsetX, -offsetY);\n  }\n}\n\n\nexport const resetTransform = createTransform();\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {import(\"../transform.js\").Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} scale Scale.\n */\nexport function drawImage(context,\n  transform, opacity, image, originX, originY, w, h, x, y, scale) {\n  let alpha;\n  if (opacity != 1) {\n    alpha = context.globalAlpha;\n    context.globalAlpha = alpha * opacity;\n  }\n  if (transform) {\n    context.setTransform.apply(context, transform);\n  }\n\n  context.drawImage(image, originX, originY, w, h, x, y, w * scale, h * scale);\n\n  if (alpha) {\n    context.globalAlpha = alpha;\n  }\n  if (transform) {\n    context.setTransform.apply(context, resetTransform);\n  }\n}\n","/**\n * @module ol/math\n */\nimport {assert} from './asserts.js';\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\n\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport const cosh = (function() {\n  // Wrapped in a iife, to save the overhead of checking for the native\n  // implementation on every invocation.\n  let cosh;\n  if ('cosh' in Math) {\n    // The environment supports the native Math.cosh function, use it\n    cosh = Math.cosh;\n  } else {\n    //  else, use the reference implementation of MDN:\n    cosh = function(x) {\n      const y = /** @type {Math} */ (Math).exp(x);\n      return (y + 1 / y) / 2;\n    };\n  }\n  return cosh;\n}());\n\n\n/**\n * @param {number} x X.\n * @return {number} The smallest power of two greater than or equal to x.\n */\nexport function roundUpToPowerOfTwo(x) {\n  assert(0 < x, 29); // `x` must be greater than `0`\n  return Math.pow(2, Math.ceil(Math.log(x) / Math.LN2));\n}\n\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return squaredDistance(x, y, x1, y1);\n}\n\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n  const n = mat.length;\n\n  for (let i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    let maxRow = i;\n    let maxEl = Math.abs(mat[i][i]);\n    for (let r = i + 1; r < n; r++) {\n      const absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    const tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (let j = i + 1; j < n; j++) {\n      const coef = -mat[j][i] / mat[i][i];\n      for (let k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  const x = new Array(n);\n  for (let l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (let m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n}\n\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return angleInRadians * 180 / Math.PI;\n}\n\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return angleInDegrees * Math.PI / 180;\n}\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n  const r = a % b;\n  return r * b < 0 ? r + b : r;\n}\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n  return a + x * (b - a);\n}\n","/**\n * @module ol/array\n */\n\n\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function=} opt_comparator Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, opt_comparator) {\n  let mid, cmp;\n  const comparator = opt_comparator || numberSafeCompareFunction;\n  let low = 0;\n  let high = haystack.length;\n  let found = false;\n\n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + (high - low >> 1);\n    cmp = +comparator(haystack[mid], needle);\n\n    if (cmp < 0.0) { /* Too low. */\n      low = mid + 1;\n\n    } else { /* Key found or too high */\n      high = mid;\n      found = !cmp;\n    }\n  }\n\n  /* Key not found. */\n  return found ? low : ~low;\n}\n\n\n/**\n * Compare function for array sort that is safe for numbers.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function numberSafeCompareFunction(a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\n\n/**\n * Whether the array contains the given object.\n * @param {Array<*>} arr The array to test for the presence of the element.\n * @param {*} obj The object for which to test.\n * @return {boolean} The object is in the array.\n */\nexport function includes(arr, obj) {\n  return arr.indexOf(obj) >= 0;\n}\n\n\n/**\n * @param {Array<number>} arr Array.\n * @param {number} target Target.\n * @param {number} direction 0 means return the nearest, > 0\n *    means return the largest nearest, < 0 means return the\n *    smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n  const n = arr.length;\n  if (arr[0] <= target) {\n    return 0;\n  } else if (target <= arr[n - 1]) {\n    return n - 1;\n  } else {\n    let i;\n    if (direction > 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] < target) {\n          return i - 1;\n        }\n      }\n    } else if (direction < 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] <= target) {\n          return i;\n        }\n      }\n    } else {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] == target) {\n          return i;\n        } else if (arr[i] < target) {\n          if (arr[i - 1] - target < target - arr[i]) {\n            return i - 1;\n          } else {\n            return i;\n          }\n        }\n      }\n    }\n    return n - 1;\n  }\n}\n\n\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n  while (begin < end) {\n    const tmp = arr[begin];\n    arr[begin] = arr[end];\n    arr[end] = tmp;\n    ++begin;\n    --end;\n  }\n}\n\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n  const extension = Array.isArray(data) ? data : [data];\n  const length = extension.length;\n  for (let i = 0; i < length; i++) {\n    arr[arr.length] = extension[i];\n  }\n}\n\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n  const i = arr.indexOf(obj);\n  const found = i > -1;\n  if (found) {\n    arr.splice(i, 1);\n  }\n  return found;\n}\n\n\n/**\n * @param {Array<VALUE>} arr The array to search in.\n * @param {function(VALUE, number, ?) : boolean} func The function to compare.\n * @template VALUE\n * @return {VALUE|null} The element found or null.\n */\nexport function find(arr, func) {\n  const length = arr.length >>> 0;\n  let value;\n\n  for (let i = 0; i < length; i++) {\n    value = arr[i];\n    if (func(value, i, arr)) {\n      return value;\n    }\n  }\n  return null;\n}\n\n\n/**\n * @param {Array|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n  const len1 = arr1.length;\n  if (len1 !== arr2.length) {\n    return false;\n  }\n  for (let i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * Sort the passed array such that the relative order of equal elements is preverved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n  const length = arr.length;\n  const tmp = Array(arr.length);\n  let i;\n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort(function(a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index;\n  });\n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n}\n\n\n/**\n * @param {Array<*>} arr The array to search in.\n * @param {Function} func Comparison function.\n * @return {number} Return index.\n */\nexport function findIndex(arr, func) {\n  let index;\n  const found = !arr.every(function(el, idx) {\n    index = idx;\n    return !func(el, idx, arr);\n  });\n  return found ? index : -1;\n}\n\n\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function=} opt_func Comparison function.\n * @param {boolean=} opt_strict Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, opt_func, opt_strict) {\n  const compare = opt_func || numberSafeCompareFunction;\n  return arr.every(function(currentVal, index) {\n    if (index === 0) {\n      return true;\n    }\n    const res = compare(arr[index - 1], currentVal);\n    return !(res > 0 || opt_strict && res === 0);\n  });\n}\n","/**\n * @module ol/TileState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  /**\n   * Indicates that tile loading failed\n   * @type {number}\n   */\n  ERROR: 3,\n  EMPTY: 4,\n  ABORT: 5\n};\n","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n  if (!assertion) {\n    throw new AssertionError(errorCode);\n  }\n}\n","/**\n * @module ol/obj\n */\n\n\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n * See https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign.\n *\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\nexport const assign = (typeof Object.assign === 'function') ? Object.assign : function(target, var_sources) {\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = Object(target);\n  for (let i = 1, ii = arguments.length; i < ii; ++i) {\n    const source = arguments[i];\n    if (source !== undefined && source !== null) {\n      for (const key in source) {\n        if (source.hasOwnProperty(key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n};\n\n\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n  for (const property in object) {\n    delete object[property];\n  }\n}\n\n\n/**\n * Get an array of property values from an object.\n * @param {Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\nexport function getValues(object) {\n  const values = [];\n  for (const property in object) {\n    values.push(object[property]);\n  }\n  return values;\n}\n\n\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n  let property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\n","/**\n * @module ol/transform\n */\nimport {assert} from './asserts.js';\n\n\n/**\n * An array representing an affine 2d transformation for use with\n * {@link module:ol/transform} functions. The array has 6 elements.\n * @typedef {!Array<number>} Transform\n */\n\n\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 33 matrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n\n\n/**\n * @private\n * @type {Transform}\n */\nconst tmp_ = new Array(6);\n\n\n/**\n * Create an identity transform.\n * @return {!Transform} Identity transform.\n */\nexport function create() {\n  return [1, 0, 0, 1, 0, 0];\n}\n\n\n/**\n * Resets the given transform to an identity transform.\n * @param {!Transform} transform Transform.\n * @return {!Transform} Transform.\n */\nexport function reset(transform) {\n  return set(transform, 1, 0, 0, 1, 0, 0);\n}\n\n\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!Transform} transform1 Transform parameters of matrix 1.\n * @param {!Transform} transform2 Transform parameters of matrix 2.\n * @return {!Transform} transform1 multiplied with transform2.\n */\nexport function multiply(transform1, transform2) {\n  const a1 = transform1[0];\n  const b1 = transform1[1];\n  const c1 = transform1[2];\n  const d1 = transform1[3];\n  const e1 = transform1[4];\n  const f1 = transform1[5];\n  const a2 = transform2[0];\n  const b2 = transform2[1];\n  const c2 = transform2[2];\n  const d2 = transform2[3];\n  const e2 = transform2[4];\n  const f2 = transform2[5];\n\n  transform1[0] = a1 * a2 + c1 * b2;\n  transform1[1] = b1 * a2 + d1 * b2;\n  transform1[2] = a1 * c2 + c1 * d2;\n  transform1[3] = b1 * c2 + d1 * d2;\n  transform1[4] = a1 * e2 + c1 * f2 + e1;\n  transform1[5] = b1 * e2 + d1 * f2 + f1;\n\n  return transform1;\n}\n\n/**\n * Set the transform components a-f on a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!Transform} Matrix with transform applied.\n */\nexport function set(transform, a, b, c, d, e, f) {\n  transform[0] = a;\n  transform[1] = b;\n  transform[2] = c;\n  transform[3] = d;\n  transform[4] = e;\n  transform[5] = f;\n  return transform;\n}\n\n\n/**\n * Set transform on one matrix from another matrix.\n * @param {!Transform} transform1 Matrix to set transform to.\n * @param {!Transform} transform2 Matrix to set transform from.\n * @return {!Transform} transform1 with transform from transform2 applied.\n */\nexport function setFromArray(transform1, transform2) {\n  transform1[0] = transform2[0];\n  transform1[1] = transform2[1];\n  transform1[2] = transform2[2];\n  transform1[3] = transform2[3];\n  transform1[4] = transform2[4];\n  transform1[5] = transform2[5];\n  return transform1;\n}\n\n\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {Transform} transform The transformation.\n * @param {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} coordinate The coordinate to transform.\n * @return {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} return coordinate so that operations can be\n *     chained together.\n */\nexport function apply(transform, coordinate) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n  coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n  return coordinate;\n}\n\n\n/**\n * Applies rotation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!Transform} The rotated transform.\n */\nexport function rotate(transform, angle) {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  return multiply(transform, set(tmp_, cos, sin, -sin, cos, 0, 0));\n}\n\n\n/**\n * Applies scale to a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scaled transform.\n */\nexport function scale(transform, x, y) {\n  return multiply(transform, set(tmp_, x, 0, 0, y, 0, 0));\n}\n\n\n/**\n * Applies translation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!Transform} The translated transform.\n */\nexport function translate(transform, dx, dy) {\n  return multiply(transform, set(tmp_, 1, 0, 0, 1, dx, dy));\n}\n\n\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!Transform} The composite transform.\n */\nexport function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n  const sin = Math.sin(angle);\n  const cos = Math.cos(angle);\n  transform[0] = sx * cos;\n  transform[1] = sy * sin;\n  transform[2] = -sx * sin;\n  transform[3] = sy * cos;\n  transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n  transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n  return transform;\n}\n\n\n/**\n * Invert the given transform.\n * @param {!Transform} transform Transform.\n * @return {!Transform} Inverse of the transform.\n */\nexport function invert(transform) {\n  const det = determinant(transform);\n  assert(det !== 0, 32); // Transformation matrix cannot be inverted\n\n  const a = transform[0];\n  const b = transform[1];\n  const c = transform[2];\n  const d = transform[3];\n  const e = transform[4];\n  const f = transform[5];\n\n  transform[0] = d / det;\n  transform[1] = -b / det;\n  transform[2] = -c / det;\n  transform[3] = a / det;\n  transform[4] = (c * f - d * e) / det;\n  transform[5] = -(a * f - b * e) / det;\n\n  return transform;\n}\n\n\n/**\n * Returns the determinant of the given matrix.\n * @param {!Transform} mat Matrix.\n * @return {number} Determinant.\n */\nexport function determinant(mat) {\n  return mat[0] * mat[3] - mat[1] * mat[2];\n}\n","/**\n * @module ol/ImageState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3\n};\n","/**\n * @module olcs.util\n */\nconst exports = {};\n\n\n/**\n * Cast to object.\n * @param {Object} param\n * @return {Object}\n */\nexports.obj = function(param) {\n  return param;\n};\n\n\n/**\n * @type {boolean|undefined}\n * @private\n */\nexports.supportsImageRenderingPixelatedResult_ = undefined;\n\n\n/**\n * @type {string|undefined}\n * @private\n */\nexports.imageRenderingValueResult_ = undefined;\n\n\n/**\n * @return {boolean}\n */\nexports.supportsImageRenderingPixelated = function() {\n  if (exports.supportsImageRenderingPixelatedResult_ === undefined) {\n    const canvas = document.createElement('canvas');\n    canvas.setAttribute('style', 'image-rendering: -moz-crisp-edges; image-rendering: pixelated;');\n    // canvas.style.imageRendering will be undefined, null or an\n    // empty string on unsupported browsers.\n    const tmp = canvas.style['imageRendering']; // non standard\n    exports.supportsImageRenderingPixelatedResult_ = !!tmp;\n    if (exports.supportsImageRenderingPixelatedResult_) {\n      exports.imageRenderingValueResult_ = tmp;\n    }\n  }\n  return exports.supportsImageRenderingPixelatedResult_;\n};\n\n\n/**\n * @return {string}\n */\nexports.imageRenderingValue = function() {\n  exports.supportsImageRenderingPixelated();\n  return exports.imageRenderingValueResult_ || '';\n};\n\n/**\n * Return the projection of the source that Cesium should use.\n *\n * @param {ol.source.Source} source Source.\n * @returns {ol.proj.Projection} The projection of the source.\n */\nexports.getSourceProjection = function(source) {\n  return /** @type {ol.proj.Projection} */ (source.get('olcs.projection'))\n    || source.getProjection();\n};\n\n/**\n * @param {ol.Observable} observable\n * @param {string} type\n * @param {Function} listener\n * @return {!ol.events.EventsKey}\n */\nexport function olcsListen(observable, type, listener) {\n  // See https://github.com/openlayers/openlayers/pull/8481\n  // ol.events.listen is internal so we use `on` instead.\n  // And since `on` as a convoluted API (can return an EventsKey or an array of them)\n  // we use a cast here.\n  return /** @type {!ol.events.EventsKey} */ (observable.on(type, listener));\n}\n\n/**\n * Counter for getUid.\n * @type {number}\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {number} The unique ID for the object.\n */\nexport function getUid(obj) {\n  return obj.olcs_uid || (obj.olcs_uid = ++uidCounter_);\n}\n\n/**\n * Sort the passed array such that the relative order of equal elements is preverved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n */\nexport function stableSort(arr, compareFnc) {\n  const length = arr.length;\n  const tmp = Array(arr.length);\n  for (let i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort((a, b) => compareFnc(a.value, b.value) || a.index - b.index);\n  for (let i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n}\n\n/**\n * @param {Node} node The node to remove.\n * @returns {Node} The node that was removed or null.\n */\nexport function removeNode(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n}\n\n/**\n * @param {Cesium.Scene} scene The scene.\n */\nexport function isGroundPolylinePrimitiveSupported(scene) {\n  const obj = Cesium.GroundPolylinePrimitive;\n  return obj && obj.isSupported(scene);\n}\n\nexport default exports;\n","/**\n * @module ol/layer/Tile\n */\nimport LayerType from '../LayerType.js';\nimport Layer from './Layer.js';\nimport TileProperty from './TileProperty.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {import(\"../source/Tile.js\").default} [source] Source for this layer.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n */\n\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @api\n */\nclass TileLayer extends Layer {\n  /**\n   * @param {Options=} opt_options Tile layer options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n\n    const baseOptions = assign({}, options);\n\n    delete baseOptions.preload;\n    delete baseOptions.useInterimTilesOnError;\n    super(baseOptions);\n\n    this.setPreload(options.preload !== undefined ? options.preload : 0);\n    this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined ?\n      options.useInterimTilesOnError : true);\n\n    /**\n    * The layer type.\n    * @protected\n    * @type {import(\"../LayerType.js\").default}\n    */\n    this.type = LayerType.TILE;\n\n  }\n\n  /**\n  * Return the level as number to which we will preload tiles up to.\n  * @return {number} The level to preload tiles up to.\n  * @observable\n  * @api\n  */\n  getPreload() {\n    return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n  }\n\n  /**\n  * Set the level as number to which we will preload tiles up to.\n  * @param {number} preload The level to preload tiles up to.\n  * @observable\n  * @api\n  */\n  setPreload(preload) {\n    this.set(TileProperty.PRELOAD, preload);\n  }\n\n  /**\n  * Whether we use interim tiles on error.\n  * @return {boolean} Use interim tiles on error.\n  * @observable\n  * @api\n  */\n  getUseInterimTilesOnError() {\n    return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n  }\n\n  /**\n  * Set whether we use interim tiles on error.\n  * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n  * @observable\n  * @api\n  */\n  setUseInterimTilesOnError(useInterimTilesOnError) {\n    this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n  }\n}\n\n\n/**\n * Return the associated {@link module:ol/source/Tile tilesource} of the layer.\n * @function\n * @return {import(\"../source/Tile.js\").default} Source.\n * @api\n */\nTileLayer.prototype.getSource;\n\n\nexport default TileLayer;\n","/**\n * @module ol/geom/GeometryLayout\n */\n\n/**\n * The coordinate layout for geometries, indicating whether a 3rd or 4th z ('Z')\n * or measure ('M') coordinate is available. Supported values are `'XY'`,\n * `'XYZ'`, `'XYM'`, `'XYZM'`.\n * @enum {string}\n */\nexport default {\n  XY: 'XY',\n  XYZ: 'XYZ',\n  XYM: 'XYM',\n  XYZM: 'XYZM'\n};\n","/**\n * @module ol/dom\n */\n\n\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number=} opt_width Canvas width.\n * @param {number=} opt_height Canvas height.\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(opt_width, opt_height) {\n  const canvas = /** @type {HTMLCanvasElement} */ (document.createElement('canvas'));\n  if (opt_width) {\n    canvas.width = opt_width;\n  }\n  if (opt_height) {\n    canvas.height = opt_height;\n  }\n  return /** @type {CanvasRenderingContext2D} */ (canvas.getContext('2d'));\n}\n\n\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n  let width = element.offsetWidth;\n  const style = getComputedStyle(element);\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\n  return width;\n}\n\n\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n  let height = element.offsetHeight;\n  const style = getComputedStyle(element);\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\n  return height;\n}\n\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n  const parent = oldNode.parentNode;\n  if (parent) {\n    parent.replaceChild(newNode, oldNode);\n  }\n}\n\n/**\n * @param {Node} node The node to remove.\n * @returns {Node} The node that was removed or null.\n */\nexport function removeNode(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n}\n","/**\n * @module olcs.core.OLImageryProvider\n */\nimport {get as getProjection} from 'ol/proj.js';\nimport olcsUtil from '../util.js';\n\nclass OLImageryProvider /* should not extend Cesium.ImageryProvider */ {\n  /**\n   * Special class derived from Cesium.ImageryProvider\n   * that is connected to the given ol.source.TileImage.\n   * @param {!ol.Map} olMap\n   * @param {!ol.source.TileImage} source\n   * @param {ol.proj.Projection=} opt_fallbackProj Projection to assume if the\n   *                                               projection of the source is not defined.\n   * @constructor\n   * @extends {Cesium.ImageryProvider}\n   */\n  constructor(olMap, source, opt_fallbackProj) {\n    // Do not extend or call super constructor from\n    // Cesium.ImageryProvider since this particular function is a\n    // 'non instanciable interface' which throws on instanciation.\n\n    /**\n     * @type {!ol.source.TileImage}\n     * @private\n     */\n    this.source_ = source;\n\n    /**\n     * @type {?ol.proj.Projection}\n     * @private\n     */\n    this.projection_ = null;\n\n    /**\n     * @type {?ol.proj.Projection}\n     * @private\n     */\n    this.fallbackProj_ = opt_fallbackProj || null;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.ready_ = false;\n\n    /**\n     * @type {?Cesium.TilingScheme}\n     * @private\n     */\n    this.tilingScheme_ = null;\n\n    /**\n     * @type {?Cesium.Rectangle}\n     * @private\n     */\n    this.rectangle_ = null;\n\n    /**\n     * @type {!ol.Map}\n     * @private\n     */\n    this.map_ = olMap;\n\n    const proxy = this.source_.get('olcs.proxy');\n    if (proxy) {\n      if (typeof proxy === 'function') {\n        this.proxy_ = {\n          'getURL': proxy\n        };\n      } else if (typeof proxy === 'string') {\n        this.proxy_ = new Cesium.DefaultProxy(proxy);\n      }\n    }\n\n    this.errorEvent_ = new Cesium.Event();\n\n    this.emptyCanvas_ = document.createElement('canvas');\n    this.emptyCanvas_.width = 1;\n    this.emptyCanvas_.height = 1;\n\n    this.source_.on('change', (e) => {\n      this.handleSourceChanged_();\n    });\n    this.handleSourceChanged_();\n  }\n\n  /**\n   * Checks if the underlying source is ready and cached required data.\n   * @private\n   */\n  handleSourceChanged_(frameState) {\n    if (!this.ready_ && this.source_.getState() == 'ready') {\n      this.projection_ = olcsUtil.getSourceProjection(this.source_) || this.fallbackProj_;\n      if (this.projection_ == getProjection('EPSG:4326')) {\n        this.tilingScheme_ = new Cesium.GeographicTilingScheme();\n      } else if (this.projection_ == getProjection('EPSG:3857')) {\n        this.tilingScheme_ = new Cesium.WebMercatorTilingScheme();\n      } else {\n        return;\n      }\n      this.rectangle_ = this.tilingScheme_.rectangle;\n\n      this.ready_ = true;\n    }\n  }\n\n  /**\n   * Generates the proper attributions for a given position and zoom\n   * level.\n   * @export\n   * @override\n   */\n  getTileCredits(x, y, level) {\n    const extent = this.map_.getView().calculateExtent(this.map_.getSize());\n    const center = this.map_.getView().getCenter();\n    const zoom = this.tilingScheme_ instanceof Cesium.GeographicTilingScheme ? level + 1 : level;\n\n    const frameState = {\n      viewState: {zoom, center},\n      extent,\n    };\n\n    const attributionsFunction = this.source_.getAttributions();\n    if (!attributionsFunction) {\n      return [];\n    }\n    let attributions = attributionsFunction(frameState);\n    if (!Array.isArray(attributions)) {\n      attributions = [attributions];\n    }\n\n    return attributions.map(html => new Cesium.Credit(html, true));\n  }\n\n  /**\n   * @export\n   * @override\n   */\n  requestImage(x, y, level) {\n    const tileUrlFunction = this.source_.getTileUrlFunction();\n    if (tileUrlFunction && this.projection_) {\n\n      // Perform mapping of Cesium tile coordinates to OpenLayers tile coordinates:\n      // 1) Cesium zoom level 0 is OpenLayers zoom level 1 for EPSG:4326\n      const z_ = this.tilingScheme_ instanceof Cesium.GeographicTilingScheme ? level + 1 : level;\n      // 2) OpenLayers tile coordinates increase from bottom to top\n      const y_ = -y - 1;\n\n      let url = tileUrlFunction.call(this.source_,\n          [z_, x, y_], 1, this.projection_);\n      if (this.proxy_) {\n        url = this.proxy_.getURL(url);\n      }\n      return url ? Cesium.ImageryProvider.loadImage(this, url) : this.emptyCanvas_;\n    } else {\n      // return empty canvas to stop Cesium from retrying later\n      return this.emptyCanvas_;\n    }\n  }\n}\n\n// definitions of getters that are required to be present\n// in the Cesium.ImageryProvider instance:\nObject.defineProperties(OLImageryProvider.prototype, {\n  'ready': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.ready_;}\n  },\n\n  'rectangle': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.rectangle_;}\n  },\n\n  'tileWidth': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? (Array.isArray(tg.getTileSize(0)) ? tg.getTileSize(0)[0] : tg.getTileSize(0)) : 256;\n        }\n  },\n\n  'tileHeight': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? (Array.isArray(tg.getTileSize(0)) ? tg.getTileSize(0)[1] : tg.getTileSize(0)) : 256;\n        }\n  },\n\n  'maximumLevel': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? tg.getMaxZoom() : 18;\n        }\n  },\n\n  'minimumLevel': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          // WARNING: Do not use the minimum level (at least until the extent is\n          // properly set). Cesium assumes the minimumLevel to contain only\n          // a few tiles and tries to load them all at once -- this can\n          // freeze and/or crash the browser !\n          return 0;\n          //var tg = this.source_.getTileGrid();\n          //return tg ? tg.getMinZoom() : 0;\n        }\n  },\n\n  'tilingScheme': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.tilingScheme_;}\n  },\n\n  'tileDiscardPolicy': {\n    'get': function() {return undefined;}\n  },\n\n  'errorEvent': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.errorEvent_;}\n  },\n\n  'proxy': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.proxy_;}\n  },\n\n  'hasAlphaChannel': {\n    'get': function() {return true;}\n  },\n\n  'pickFeatures': {\n    'get': function() {return undefined;}\n  }\n});\n\n\nexport default OLImageryProvider;\n","/**\n * @module olcs.core\n */\nimport {linear as linearEasing} from 'ol/easing.js';\nimport olLayerTile from 'ol/layer/Tile.js';\nimport olLayerImage from 'ol/layer/Image.js';\nimport {get as getProjection, transformExtent} from 'ol/proj.js';\nimport olSourceImageStatic from 'ol/source/ImageStatic';\nimport olSourceImageWMS from 'ol/source/ImageWMS.js';\nimport olSourceTileImage from 'ol/source/TileImage.js';\nimport olSourceTileWMS from 'ol/source/TileWMS.js';\nimport {defaultImageLoadFunction} from 'ol/source/Image.js';\nimport olcsCoreOLImageryProvider from './core/OLImageryProvider.js';\nimport olcsUtil from './util.js';\n\n\nconst exports = {};\n\n\n/**\n * @typedef {Object} CesiumUrlDefinition\n * @property {string} url\n * @property {string} subdomains\n */\n\n\n/**\n * Options for rotate around axis core function.\n * @typedef {Object} RotateAroundAxisOption\n * @property {number} [duration]\n * @property {function(number): number} [easing]\n * @property {function(): void} [callback]\n */\n\n\n\n/**\n * @typedef {Object} LayerWithParents\n * @property {import('ol/layer/Base.js').default} layer\n * @property {Array<import('ol/layer/Group.js').default>} parents\n */\n\n\n/**\n * Compute the pixel width and height of a point in meters using the\n * camera frustum.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} target\n * @return {!Cesium.Cartesian2} the pixel size\n * @api\n */\nexports.computePixelSizeAtCoordinate = function(scene, target) {\n  const camera = scene.camera;\n  const canvas = scene.canvas;\n  const frustum = camera.frustum;\n  const distance = Cesium.Cartesian3.magnitude(Cesium.Cartesian3.subtract(\n      camera.position, target, new Cesium.Cartesian3()));\n  const pixelSize = new Cesium.Cartesian2();\n  return frustum.getPixelDimensions(canvas.clientWidth, canvas.clientHeight,\n      distance, pixelSize);\n};\n\n\n/**\n * Compute bounding box around a target point.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} target\n * @param {number} amount Half the side of the box, in pixels.\n * @return {Array<Cesium.Cartographic>} bottom left and top right\n * coordinates of the box\n */\nexports.computeBoundingBoxAtTarget = function(scene, target, amount) {\n  const pixelSize = exports.computePixelSizeAtCoordinate(scene, target);\n  const transform = Cesium.Transforms.eastNorthUpToFixedFrame(target);\n\n  const bottomLeft = Cesium.Matrix4.multiplyByPoint(\n      transform,\n      new Cesium.Cartesian3(-pixelSize.x * amount, -pixelSize.y * amount, 0),\n      new Cesium.Cartesian3());\n\n  const topRight = Cesium.Matrix4.multiplyByPoint(\n      transform,\n      new Cesium.Cartesian3(pixelSize.x * amount, pixelSize.y * amount, 0),\n      new Cesium.Cartesian3());\n\n  return Cesium.Ellipsoid.WGS84.cartesianArrayToCartographicArray(\n      [bottomLeft, topRight]);\n};\n\n\n/**\n *\n * @param {!ol.geom.Geometry} geometry\n * @param {number} height\n * @api\n */\nexports.applyHeightOffsetToGeometry = function(geometry, height) {\n  geometry.applyTransform((input, output, stride) => {\n    console.assert(input === output);\n    if (stride !== undefined && stride >= 3) {\n      for (let i = 0; i < output.length; i += stride) {\n        output[i + 2] = output[i + 2] + height;\n      }\n    }\n    return output;\n  });\n};\n\n\n/**\n * @param {ol.Coordinate} coordinates\n * @param {number=} rotation\n * @param {!Cesium.Cartesian3=} translation\n * @param {!Cesium.Cartesian3=} scale\n * @return {!Cesium.Matrix4}\n * @api\n */\nexports.createMatrixAtCoordinates = function(coordinates, rotation = 0, translation = Cesium.Cartesian3.ZERO, scale = new Cesium.Cartesian3(1, 1, 1)) {\n  const position = exports.ol4326CoordinateToCesiumCartesian(coordinates);\n  const rawMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(position);\n  const quaternion = Cesium.Quaternion.fromAxisAngle(Cesium.Cartesian3.UNIT_Z, -rotation);\n  const rotationMatrix = Cesium.Matrix4.fromTranslationQuaternionRotationScale(translation, quaternion, scale);\n  return Cesium.Matrix4.multiply(rawMatrix, rotationMatrix, new Cesium.Matrix4());\n};\n\n\n/**\n * @param {!Cesium.Camera} camera\n * @param {number} angle\n * @param {!Cesium.Cartesian3} axis\n * @param {!Cesium.Matrix4} transform\n * @param {RotateAroundAxisOption=} opt_options\n * @api\n */\nexports.rotateAroundAxis = function(camera, angle, axis, transform,\n    opt_options) {\n  const clamp = Cesium.Math.clamp;\n  const defaultValue = Cesium.defaultValue;\n\n  const options = opt_options || {};\n  const duration = defaultValue(options.duration, 500); // ms\n  const easing = defaultValue(options.easing, linearEasing);\n  const callback = options.callback;\n\n  let lastProgress = 0;\n  const oldTransform = new Cesium.Matrix4();\n\n  const start = Date.now();\n  const step = function() {\n    const timestamp = Date.now();\n    const timeDifference = timestamp - start;\n    const progress = easing(clamp(timeDifference / duration, 0, 1));\n    console.assert(progress >= lastProgress);\n\n    camera.transform.clone(oldTransform);\n    const stepAngle = (progress - lastProgress) * angle;\n    lastProgress = progress;\n    camera.lookAtTransform(transform);\n    camera.rotate(axis, stepAngle);\n    camera.lookAtTransform(oldTransform);\n\n    if (progress < 1) {\n      window.requestAnimationFrame(step);\n    } else {\n      if (callback) {\n        callback();\n      }\n    }\n  };\n  window.requestAnimationFrame(step);\n};\n\n\n/**\n * @param {!Cesium.Scene} scene\n * @param {number} heading\n * @param {!Cesium.Cartesian3} bottomCenter\n * @param {RotateAroundAxisOption=} opt_options\n * @api\n */\nexports.setHeadingUsingBottomCenter = function(scene, heading,\n    bottomCenter, opt_options) {\n  const camera = scene.camera;\n  // Compute the camera position to zenith quaternion\n  const angleToZenith = exports.computeAngleToZenith(scene, bottomCenter);\n  const axis = camera.right;\n  const quaternion = Cesium.Quaternion.fromAxisAngle(axis, angleToZenith);\n  const rotation = Cesium.Matrix3.fromQuaternion(quaternion);\n\n  // Get the zenith point from the rotation of the position vector\n  const vector = new Cesium.Cartesian3();\n  Cesium.Cartesian3.subtract(camera.position, bottomCenter, vector);\n  const zenith = new Cesium.Cartesian3();\n  Cesium.Matrix3.multiplyByVector(rotation, vector, zenith);\n  Cesium.Cartesian3.add(zenith, bottomCenter, zenith);\n\n  // Actually rotate around the zenith normal\n  const transform = Cesium.Matrix4.fromTranslation(zenith);\n  const rotateAroundAxis = exports.rotateAroundAxis;\n  rotateAroundAxis(camera, heading, zenith, transform, opt_options);\n};\n\n\n/**\n * Get the 3D position of the given pixel of the canvas.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian2} pixel\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickOnTerrainOrEllipsoid = function(scene, pixel) {\n  const ray = scene.camera.getPickRay(pixel);\n  const target = scene.globe.pick(ray, scene);\n  return target || scene.camera.pickEllipsoid(pixel);\n};\n\n\n/**\n * Get the 3D position of the point at the bottom-center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickBottomPoint = function(scene) {\n  const canvas = scene.canvas;\n  const bottom = new Cesium.Cartesian2(\n      canvas.clientWidth / 2, canvas.clientHeight);\n  return exports.pickOnTerrainOrEllipsoid(scene, bottom);\n};\n\n\n/**\n * Get the 3D position of the point at the center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickCenterPoint = function(scene) {\n  const canvas = scene.canvas;\n  const center = new Cesium.Cartesian2(\n      canvas.clientWidth / 2,\n      canvas.clientHeight / 2);\n  return exports.pickOnTerrainOrEllipsoid(scene, center);\n};\n\n\n/**\n * Compute the signed tilt angle on globe, between the opposite of the\n * camera direction and the target normal. Return undefined if there is no\n * intersection of the camera direction with the globe.\n * @param {!Cesium.Scene} scene\n * @return {number|undefined}\n * @api\n */\nexports.computeSignedTiltAngleOnGlobe = function(scene) {\n  const camera = scene.camera;\n  const ray = new Cesium.Ray(camera.position, camera.direction);\n  let target = scene.globe.pick(ray, scene);\n\n  if (!target) {\n    // no tiles in the area were loaded?\n    const ellipsoid = Cesium.Ellipsoid.WGS84;\n    const obj = Cesium.IntersectionTests.rayEllipsoid(ray, ellipsoid);\n    if (obj) {\n      target = Cesium.Ray.getPoint(ray, obj.start);\n    }\n  }\n\n  if (!target) {\n    return undefined;\n  }\n\n  const normal = new Cesium.Cartesian3();\n  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(target, normal);\n\n  const angleBetween = exports.signedAngleBetween;\n  const angle = angleBetween(camera.direction, normal, camera.right) - Math.PI;\n  return Cesium.Math.convertLongitudeRange(angle);\n};\n\n\n/**\n * Compute the ray from the camera to the bottom-center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Ray}\n */\nexports.bottomFovRay = function(scene) {\n  const camera = scene.camera;\n  const fovy2 = camera.frustum.fovy / 2;\n  const direction = camera.direction;\n  const rotation = Cesium.Quaternion.fromAxisAngle(camera.right, fovy2);\n  const matrix = Cesium.Matrix3.fromQuaternion(rotation);\n  const vector = new Cesium.Cartesian3();\n  Cesium.Matrix3.multiplyByVector(matrix, direction, vector);\n  return new Cesium.Ray(camera.position, vector);\n};\n\n\n/**\n * Compute the angle between two Cartesian3.\n * @param {!Cesium.Cartesian3} first\n * @param {!Cesium.Cartesian3} second\n * @param {!Cesium.Cartesian3} normal Normal to test orientation against.\n * @return {number}\n */\nexports.signedAngleBetween = function(first, second, normal) {\n  // We are using the dot for the angle.\n  // Then the cross and the dot for the sign.\n  const a = new Cesium.Cartesian3();\n  const b = new Cesium.Cartesian3();\n  const c = new Cesium.Cartesian3();\n  Cesium.Cartesian3.normalize(first, a);\n  Cesium.Cartesian3.normalize(second, b);\n  Cesium.Cartesian3.cross(a, b, c);\n\n  const cosine = Cesium.Cartesian3.dot(a, b);\n  const sine = Cesium.Cartesian3.magnitude(c);\n\n  // Sign of the vector product and the orientation normal\n  const sign = Cesium.Cartesian3.dot(normal, c);\n  const angle = Math.atan2(sine, cosine);\n  return sign >= 0 ? angle : -angle;\n};\n\n\n/**\n * Compute the rotation angle around a given point, needed to reach the\n * zenith position.\n * At a zenith position, the camera direction is going througth the earth\n * center and the frustrum bottom ray is going through the chosen pivot\n * point.\n * The bottom-center of the screen is a good candidate for the pivot point.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} pivot Point around which the camera rotates.\n * @return {number}\n * @api\n */\nexports.computeAngleToZenith = function(scene, pivot) {\n  // This angle is the sum of the angles 'fy' and 'a', which are defined\n  // using the pivot point and its surface normal.\n  //        Zenith |    camera\n  //           \\   |   /\n  //            \\fy|  /\n  //             \\ |a/\n  //              \\|/pivot\n  const camera = scene.camera;\n  const fy = camera.frustum.fovy / 2;\n  const ray = exports.bottomFovRay(scene);\n  const direction = Cesium.Cartesian3.clone(ray.direction);\n  Cesium.Cartesian3.negate(direction, direction);\n\n  const normal = new Cesium.Cartesian3();\n  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(pivot, normal);\n\n  const left = new Cesium.Cartesian3();\n  Cesium.Cartesian3.negate(camera.right, left);\n\n  const a = exports.signedAngleBetween(normal, direction, left);\n  return a + fy;\n};\n\n\n/**\n * Convert an OpenLayers extent to a Cesium rectangle.\n * @param {ol.Extent} extent Extent.\n * @param {ol.ProjectionLike} projection Extent projection.\n * @return {Cesium.Rectangle} The corresponding Cesium rectangle.\n * @api\n */\nexports.extentToRectangle = function(extent, projection) {\n  if (extent && projection) {\n    const ext = transformExtent(extent, projection, 'EPSG:4326');\n    return Cesium.Rectangle.fromDegrees(ext[0], ext[1], ext[2], ext[3]);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Creates Cesium.ImageryLayer best corresponding to the given ol.layer.Layer.\n * Only supports raster layers and static images\n * @param {!ol.Map} olMap\n * @param {!ol.layer.Base} olLayer\n * @param {!ol.proj.Projection} viewProj Projection of the view.\n * @return {?Cesium.ImageryLayer} null if not possible (or supported)\n * @api\n */\nexports.tileLayerToImageryLayer = function(olMap, olLayer, viewProj) {\n\n  if (!(olLayer instanceof olLayerTile) && !(olLayer instanceof olLayerImage)) {\n    return null;\n  }\n\n  let provider = null;\n  let source = olLayer.getSource();\n\n  // Convert ImageWMS to TileWMS\n  if (source instanceof olSourceImageWMS && source.getUrl() &&\n    source.getImageLoadFunction() === defaultImageLoadFunction) {\n    const sourceProps = {\n      'olcs.proxy': source.get('olcs.proxy'),\n      'olcs.extent': source.get('olcs.extent'),\n      'olcs.projection': source.get('olcs.projection'),\n      'olcs.imagesource': source\n    };\n    source = new olSourceTileWMS({\n      url: source.getUrl(),\n      attributions: source.getAttributions(),\n      projection: source.getProjection(),\n      params: source.getParams()\n    });\n    source.setProperties(sourceProps);\n  }\n\n  if (source instanceof olSourceTileImage) {\n    let projection = olcsUtil.getSourceProjection(source);\n\n    if (!projection) {\n      // if not explicit, assume the same projection as view\n      projection = viewProj;\n    }\n\n    if (exports.isCesiumProjection(projection)) {\n      provider = new olcsCoreOLImageryProvider(olMap, source, viewProj);\n    }\n    // Projection not supported by Cesium\n    else {\n      return null;\n    }\n\n  } else if (source instanceof olSourceImageStatic) {\n    let projection = olcsUtil.getSourceProjection(source);\n\n    if (!projection) {\n      projection = viewProj;\n    }\n\n    if (exports.isCesiumProjection(projection)) {\n      provider = new Cesium.SingleTileImageryProvider({\n        url: source.getUrl(),\n        rectangle: new Cesium.Rectangle.fromDegrees(\n            source.getImageExtent()[0],\n            source.getImageExtent()[1],\n            source.getImageExtent()[2],\n            source.getImageExtent()[3]\n        )\n      });\n    }\n    // Projection not supported by Cesium\n    else {\n      return null;\n    }\n  } else {\n    // sources other than TileImage|ImageStatic are currently not supported\n    return null;\n  }\n\n  // the provider is always non-null if we got this far\n\n  const layerOptions = {};\n\n  const forcedExtent = /** @type {ol.Extent} */ (olLayer.get('olcs.extent'));\n  const ext = forcedExtent || olLayer.getExtent();\n  if (ext) {\n    layerOptions.rectangle = exports.extentToRectangle(ext, viewProj);\n  }\n\n  const cesiumLayer = new Cesium.ImageryLayer(provider, layerOptions);\n  return cesiumLayer;\n};\n\n\n/**\n * Synchronizes the layer rendering properties (opacity, visible)\n * to the given Cesium ImageryLayer.\n * @param {olcsx.LayerWithParents} olLayerWithParents\n * @param {!Cesium.ImageryLayer} csLayer\n * @api\n */\nexports.updateCesiumLayerProperties = function(olLayerWithParents, csLayer) {\n  let opacity = 1;\n  let visible = true;\n  [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayer) => {\n    const layerOpacity = olLayer.getOpacity();\n    if (layerOpacity !== undefined) {\n      opacity *= layerOpacity;\n    }\n    const layerVisible = olLayer.getVisible();\n    if (layerVisible !== undefined) {\n      visible &= layerVisible;\n    }\n  });\n  csLayer.alpha = opacity;\n  csLayer.show = visible;\n};\n\n\n/**\n * Convert a 2D or 3D OpenLayers coordinate to Cesium.\n * @param {ol.Coordinate} coordinate Ol3 coordinate.\n * @return {!Cesium.Cartesian3} Cesium cartesian coordinate\n * @api\n */\nexports.ol4326CoordinateToCesiumCartesian = function(coordinate) {\n  const coo = coordinate;\n  return coo.length > 2 ?\n    Cesium.Cartesian3.fromDegrees(coo[0], coo[1], coo[2]) :\n    Cesium.Cartesian3.fromDegrees(coo[0], coo[1]);\n};\n\n\n/**\n * Convert an array of 2D or 3D OpenLayers coordinates to Cesium.\n * @param {Array.<!ol.Coordinate>} coordinates Ol3 coordinates.\n * @return {!Array.<Cesium.Cartesian3>} Cesium cartesian coordinates\n * @api\n */\nexports.ol4326CoordinateArrayToCsCartesians = function(coordinates) {\n  console.assert(coordinates !== null);\n  const toCartesian = exports.ol4326CoordinateToCesiumCartesian;\n  const cartesians = [];\n  for (let i = 0; i < coordinates.length; ++i) {\n    cartesians.push(toCartesian(coordinates[i]));\n  }\n  return cartesians;\n};\n\n\n/**\n * Reproject an OpenLayers geometry to EPSG:4326 if needed.\n * The geometry will be cloned only when original projection is not EPSG:4326\n * and the properties will be shallow copied.\n * @param {!T} geometry\n * @param {!ol.ProjectionLike} projection\n * @return {!T}\n * @template T\n * @api\n */\nexports.olGeometryCloneTo4326 = function(geometry, projection) {\n  console.assert(projection);\n\n  const proj4326 = getProjection('EPSG:4326');\n  const proj = getProjection(projection);\n  if (proj !== proj4326) {\n    const properties = geometry.getProperties();\n    geometry = geometry.clone();\n    geometry.transform(proj, proj4326);\n    geometry.setProperties(properties);\n  }\n  return geometry;\n};\n\n\n/**\n * Convert an OpenLayers color to Cesium.\n * @param {ol.Color|CanvasGradient|CanvasPattern|string} olColor\n * @return {!Cesium.Color}\n * @api\n */\nexports.convertColorToCesium = function(olColor) {\n  olColor = olColor || 'black';\n  if (Array.isArray(olColor)) {\n    return new Cesium.Color(\n        Cesium.Color.byteToFloat(olColor[0]),\n        Cesium.Color.byteToFloat(olColor[1]),\n        Cesium.Color.byteToFloat(olColor[2]),\n        olColor[3]\n    );\n  } else if (typeof olColor == 'string') {\n    return Cesium.Color.fromCssColorString(olColor);\n  } else if (olColor instanceof CanvasPattern || olColor instanceof CanvasGradient) {\n    // Render the CanvasPattern/CanvasGradient into a canvas that will be sent to Cesium as material\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    canvas.width = canvas.height = 256;\n    ctx.fillStyle = olColor;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    return new Cesium.ImageMaterialProperty({\n      image: canvas\n    });\n  }\n  console.assert(false, 'impossible');\n};\n\n\n/**\n * Convert an OpenLayers url to Cesium.\n * @param {string} url\n * @return {!CesiumUrlDefinition}\n * @api\n */\nexports.convertUrlToCesium = function(url) {\n  let subdomains = '';\n  const re = /\\{(\\d|[a-z])-(\\d|[a-z])\\}/;\n  const match = re.exec(url);\n  if (match) {\n    url = url.replace(re, '{s}');\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      subdomains += String.fromCharCode(charCode);\n    }\n  }\n  return {\n    url,\n    subdomains\n  };\n};\n\n\n/**\n * Animate the return to a top-down view from the zenith.\n * The camera is rotated to orient to the North.\n * @param {!ol.Map} map\n * @param {!Cesium.Scene} scene\n * @return {Promise<undefined>}\n * @api\n */\nexports.resetToNorthZenith = function(map, scene) {\n  return new Promise((resolve, reject) => {\n    const camera = scene.camera;\n    const pivot = exports.pickBottomPoint(scene);\n    if (!pivot) {\n      reject('Could not get bottom pivot');\n      return;\n    }\n\n    const currentHeading = map.getView().getRotation();\n    if (currentHeading === undefined) {\n      reject('The view is not initialized');\n      return;\n    }\n    const angle = exports.computeAngleToZenith(scene, pivot);\n\n    // Point to North\n    exports.setHeadingUsingBottomCenter(scene, currentHeading, pivot);\n\n    // Go to zenith\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const options = {\n      callback: () => {\n        const view = map.getView();\n        exports.normalizeView(view);\n        resolve();\n      }\n    };\n    exports.rotateAroundAxis(camera, -angle, axis, transform, options);\n  });\n};\n\n\n/**\n * @param {!Cesium.Scene} scene\n * @param {number} angle in radian\n * @return {Promise<undefined>}\n * @api\n */\nexports.rotateAroundBottomCenter = function(scene, angle) {\n  return new Promise((resolve, reject) => {\n    const camera = scene.camera;\n    const pivot = exports.pickBottomPoint(scene);\n    if (!pivot) {\n      reject('could not get bottom pivot');\n      return;\n    }\n\n    const options = {callback: resolve};\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const rotateAroundAxis = exports.rotateAroundAxis;\n    rotateAroundAxis(camera, -angle, axis, transform, options);\n  });\n};\n\n\n/**\n * Set the OpenLayers view to a specific rotation and\n * the nearest resolution.\n * @param {ol.View} view\n * @param {number=} angle\n * @api\n */\nexports.normalizeView = function(view, angle = 0) {\n  const resolution = view.getResolution();\n  view.setRotation(angle);\n  view.setResolution(view.constrainResolution(resolution));\n};\n\n/**\n * Check if the given projection is managed by Cesium (WGS84 or Mercator Spheric)\n *\n * @param {ol.proj.Projection} projection Projection to check.\n * @returns {boolean} Whether it's managed by Cesium.\n */\nexports.isCesiumProjection = function(projection) {\n  const is3857 = projection === getProjection('EPSG:3857');\n  const is4326 = projection === getProjection('EPSG:4326');\n  return is3857 || is4326;\n};\n\n\nexport default exports;\n","/**\n * @module ol/centerconstraint\n */\nimport {clamp} from './math.js';\n\n\n/**\n * @typedef {function((import(\"./coordinate.js\").Coordinate|undefined)): (import(\"./coordinate.js\").Coordinate|undefined)} Type\n */\n\n\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @return {Type} The constraint.\n */\nexport function createExtent(extent) {\n  return (\n    /**\n     * @param {import(\"./coordinate.js\").Coordinate=} center Center.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n     */\n    function(center) {\n      if (center) {\n        return [\n          clamp(center[0], extent[0], extent[2]),\n          clamp(center[1], extent[1], extent[3])\n        ];\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate=} center Center.\n * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n */\nexport function none(center) {\n  return center;\n}\n","/**\n * @module ol/ViewProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CENTER: 'center',\n  RESOLUTION: 'resolution',\n  ROTATION: 'rotation'\n};\n","/**\n * @module ol/View\n */\nimport {DEFAULT_TILE_SIZE} from './tilegrid/common.js';\nimport {getUid} from './util.js';\nimport {VOID} from './functions.js';\nimport {createExtent, none as centerNone} from './centerconstraint.js';\nimport BaseObject from './Object.js';\nimport {createSnapToResolutions, createSnapToPower} from './resolutionconstraint.js';\nimport {createSnapToZero, createSnapToN, none as rotationNone, disable} from './rotationconstraint.js';\nimport ViewHint from './ViewHint.js';\nimport ViewProperty from './ViewProperty.js';\nimport {linearFindNearest} from './array.js';\nimport {assert} from './asserts.js';\nimport {add as addCoordinate, rotate as rotateCoordinate, equals as coordinatesEqual} from './coordinate.js';\nimport {inAndOut} from './easing.js';\nimport {getForViewAndSize, getCenter, getHeight, getWidth, isEmpty} from './extent.js';\nimport GeometryType from './geom/GeometryType.js';\nimport {fromExtent as polygonFromExtent} from './geom/Polygon.js';\nimport {clamp, modulo} from './math.js';\nimport {assign} from './obj.js';\nimport {createProjection, METERS_PER_UNIT} from './proj.js';\nimport Units from './proj/Units.js';\n\n\n/**\n * An animation configuration\n *\n * @typedef {Object} Animation\n * @property {import(\"./coordinate.js\").Coordinate} [sourceCenter]\n * @property {import(\"./coordinate.js\").Coordinate} [targetCenter]\n * @property {number} [sourceResolution]\n * @property {number} [targetResolution]\n * @property {number} [sourceRotation]\n * @property {number} [targetRotation]\n * @property {import(\"./coordinate.js\").Coordinate} [anchor]\n * @property {number} start\n * @property {number} duration\n * @property {boolean} complete\n * @property {function(number):number} easing\n * @property {function(boolean)} callback\n */\n\n\n/**\n * @typedef {Object} Constraints\n * @property {import(\"./centerconstraint.js\").Type} center\n * @property {import(\"./resolutionconstraint.js\").Type} resolution\n * @property {import(\"./rotationconstraint.js\").Type} rotation\n */\n\n\n/**\n * @typedef {Object} FitOptions\n * @property {import(\"./size.js\").Size} [size] The size in pixels of the box to fit\n * the extent into. Default is the current size of the first map in the DOM that\n * uses this view, or `[100, 100]` if no such map is found.\n * @property {!Array<number>} [padding=[0, 0, 0, 0]] Padding (in pixels) to be\n * cleared inside the view. Values in the array are top, right, bottom and left\n * padding.\n * @property {boolean} [constrainResolution=true] Constrain the resolution.\n * @property {boolean} [nearest=false] If `constrainResolution` is `true`, get\n * the nearest extent instead of the closest that actually fits the view.\n * @property {number} [minResolution=0] Minimum resolution that we zoom to.\n * @property {number} [maxZoom] Maximum zoom level that we zoom to. If\n * `minResolution` is given, this property is ignored.\n * @property {number} [duration] The duration of the animation in milliseconds.\n * By default, there is no animation to the target extent.\n * @property {function(number):number} [easing] The easing function used during\n * the animation (defaults to {@link module:ol/easing~inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n * @property {function(boolean)} [callback] Function called when the view is in\n * its final position. The callback will be called with `true` if the animation\n * series completed on its own or `false` if it was cancelled.\n */\n\n\n/**\n * @typedef {Object} ViewOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The initial center for\n * the view. The coordinate system for the center is specified with the\n * `projection` option. Layer sources will not be fetched if this is not set,\n * but the center can be set later with {@link #setCenter}.\n * @property {boolean|number} [constrainRotation=true] Rotation constraint.\n * `false` means no constraint. `true` means no constraint, but snap to zero\n * near zero. A number constrains the rotation to that number of values. For\n * example, `4` will constrain the rotation to 0, 90, 180, and 270 degrees.\n * @property {boolean} [enableRotation=true] Enable rotation.\n * If `false`, a rotation constraint that always sets the rotation to zero is\n * used. The `constrainRotation` option has no effect if `enableRotation` is\n * `false`.\n * @property {import(\"./extent.js\").Extent} [extent] The extent that constrains the\n * center, in other words, center cannot be set outside this extent.\n * @property {number} [maxResolution] The maximum resolution used to determine\n * the resolution constraint. It is used together with `minResolution` (or\n * `maxZoom`) and `zoomFactor`. If unspecified it is calculated in such a way\n * that the projection's validity extent fits in a 256x256 px tile. If the\n * projection is Spherical Mercator (the default) then `maxResolution` defaults\n * to `40075016.68557849 / 256 = 156543.03392804097`.\n * @property {number} [minResolution] The minimum resolution used to determine\n * the resolution constraint.  It is used together with `maxResolution` (or\n * `minZoom`) and `zoomFactor`.  If unspecified it is calculated assuming 29\n * zoom levels (with a factor of 2). If the projection is Spherical Mercator\n * (the default) then `minResolution` defaults to\n * `40075016.68557849 / 256 / Math.pow(2, 28) = 0.0005831682455839253`.\n * @property {number} [maxZoom=28] The maximum zoom level used to determine the\n * resolution constraint. It is used together with `minZoom` (or\n * `maxResolution`) and `zoomFactor`.  Note that if `minResolution` is also\n * provided, it is given precedence over `maxZoom`.\n * @property {number} [minZoom=0] The minimum zoom level used to determine the\n * resolution constraint. It is used together with `maxZoom` (or\n * `minResolution`) and `zoomFactor`.  Note that if `maxResolution` is also\n * provided, it is given precedence over `minZoom`.\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857'] The\n * projection. The default is Spherical Mercator.\n * @property {number} [resolution] The initial resolution for the view. The\n * units are `projection` units per pixel (e.g. meters per pixel). An\n * alternative to setting this is to set `zoom`. Layer sources will not be\n * fetched if neither this nor `zoom` are defined, but they can be set later\n * with {@link #setZoom} or {@link #setResolution}.\n * @property {Array<number>} [resolutions] Resolutions to determine the\n * resolution constraint. If set the `maxResolution`, `minResolution`,\n * `minZoom`, `maxZoom`, and `zoomFactor` options are ignored.\n * @property {number} [rotation=0] The initial rotation for the view in radians\n * (positive rotation clockwise, 0 means North).\n * @property {number} [zoom] Only used if `resolution` is not defined. Zoom\n * level used to calculate the initial resolution for the view. The initial\n * resolution is determined using the {@link #constrainResolution} method.\n * @property {number} [zoomFactor=2] The zoom factor used to determine the\n * resolution constraint.\n */\n\n\n/**\n * @typedef {Object} AnimationOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The center of the view at the end of\n * the animation.\n * @property {number} [zoom] The zoom level of the view at the end of the\n * animation. This takes precedence over `resolution`.\n * @property {number} [resolution] The resolution of the view at the end\n * of the animation.  If `zoom` is also provided, this option will be ignored.\n * @property {number} [rotation] The rotation of the view at the end of\n * the animation.\n * @property {import(\"./coordinate.js\").Coordinate} [anchor] Optional anchor to remained fixed\n * during a rotation or resolution animation.\n * @property {number} [duration=1000] The duration of the animation in milliseconds.\n * @property {function(number):number} [easing] The easing function used\n * during the animation (defaults to {@link module:ol/easing~inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n */\n\n\n/**\n * @typedef {Object} State\n * @property {import(\"./coordinate.js\").Coordinate} center\n * @property {import(\"./proj/Projection.js\").default} projection\n * @property {number} resolution\n * @property {number} rotation\n * @property {number} zoom\n */\n\n\n/**\n * Default min zoom level for the map view.\n * @type {number}\n */\nconst DEFAULT_MIN_ZOOM = 0;\n\n\n/**\n * @classdesc\n * A View object represents a simple 2D view of the map.\n *\n * This is the object to act upon to change the center, resolution,\n * and rotation of the map.\n *\n * ### The view states\n *\n * An View is determined by three states: `center`, `resolution`,\n * and `rotation`. Each state has a corresponding getter and setter, e.g.\n * `getCenter` and `setCenter` for the `center` state.\n *\n * An View has a `projection`. The projection determines the\n * coordinate system of the center, and its units determine the units of the\n * resolution (projection units per pixel). The default projection is\n * Spherical Mercator (EPSG:3857).\n *\n * ### The constraints\n *\n * `setCenter`, `setResolution` and `setRotation` can be used to change the\n * states of the view. Any value can be passed to the setters. And the value\n * that is passed to a setter will effectively be the value set in the view,\n * and returned by the corresponding getter.\n *\n * But a View object also has a *resolution constraint*, a\n * *rotation constraint* and a *center constraint*.\n *\n * As said above, no constraints are applied when the setters are used to set\n * new states for the view. Applying constraints is done explicitly through\n * the use of the `constrain*` functions (`constrainResolution` and\n * `constrainRotation` and `constrainCenter`).\n *\n * The main users of the constraints are the interactions and the\n * controls. For example, double-clicking on the map changes the view to\n * the \"next\" resolution. And releasing the fingers after pinch-zooming\n * snaps to the closest resolution (with an animation).\n *\n * The *resolution constraint* snaps to specific resolutions. It is\n * determined by the following options: `resolutions`, `maxResolution`,\n * `maxZoom`, and `zoomFactor`. If `resolutions` is set, the other three\n * options are ignored. See documentation for each option for more\n * information.\n *\n * The *rotation constraint* snaps to specific angles. It is determined\n * by the following options: `enableRotation` and `constrainRotation`.\n * By default the rotation value is snapped to zero when approaching the\n * horizontal.\n *\n * The *center constraint* is determined by the `extent` option. By\n * default the center is not constrained at all.\n *\n  * @api\n */\nclass View extends BaseObject {\n\n  /**\n   * @param {ViewOptions=} opt_options View options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = assign({}, opt_options);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.hints_ = [0, 0];\n\n    /**\n     * @private\n     * @type {Array<Array<Animation>>}\n     */\n    this.animations_ = [];\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.updateAnimationKey_;\n\n    this.updateAnimations_ = this.updateAnimations_.bind(this);\n\n    /**\n     * @private\n     * @const\n     * @type {import(\"./proj/Projection.js\").default}\n     */\n    this.projection_ = createProjection(options.projection, 'EPSG:3857');\n\n    this.applyOptions_(options);\n  }\n\n  /**\n   * Set up the view with the given options.\n   * @param {ViewOptions} options View options.\n   */\n  applyOptions_(options) {\n\n    /**\n     * @type {Object<string, *>}\n     */\n    const properties = {};\n    properties[ViewProperty.CENTER] = options.center !== undefined ?\n      options.center : null;\n\n    const resolutionConstraintInfo = createResolutionConstraint(options);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxResolution_ = resolutionConstraintInfo.maxResolution;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minResolution_ = resolutionConstraintInfo.minResolution;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.zoomFactor_ = resolutionConstraintInfo.zoomFactor;\n\n    /**\n     * @private\n     * @type {Array<number>|undefined}\n     */\n    this.resolutions_ = options.resolutions;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minZoom_ = resolutionConstraintInfo.minZoom;\n\n    const centerConstraint = createCenterConstraint(options);\n    const resolutionConstraint = resolutionConstraintInfo.constraint;\n    const rotationConstraint = createRotationConstraint(options);\n\n    /**\n     * @private\n     * @type {Constraints}\n     */\n    this.constraints_ = {\n      center: centerConstraint,\n      resolution: resolutionConstraint,\n      rotation: rotationConstraint\n    };\n\n    if (options.resolution !== undefined) {\n      properties[ViewProperty.RESOLUTION] = options.resolution;\n    } else if (options.zoom !== undefined) {\n      properties[ViewProperty.RESOLUTION] = this.constrainResolution(\n        this.maxResolution_, options.zoom - this.minZoom_);\n\n      if (this.resolutions_) { // in case map zoom is out of min/max zoom range\n        properties[ViewProperty.RESOLUTION] = clamp(\n          Number(this.getResolution() || properties[ViewProperty.RESOLUTION]),\n          this.minResolution_, this.maxResolution_);\n      }\n    }\n    properties[ViewProperty.ROTATION] = options.rotation !== undefined ? options.rotation : 0;\n    this.setProperties(properties);\n\n    /**\n     * @private\n     * @type {ViewOptions}\n     */\n    this.options_ = options;\n\n  }\n\n  /**\n   * Get an updated version of the view options used to construct the view.  The\n   * current resolution (or zoom), center, and rotation are applied to any stored\n   * options.  The provided options can be used to apply new min/max zoom or\n   * resolution limits.\n   * @param {ViewOptions} newOptions New options to be applied.\n   * @return {ViewOptions} New options updated with the current view state.\n   */\n  getUpdatedOptions_(newOptions) {\n    const options = assign({}, this.options_);\n\n    // preserve resolution (or zoom)\n    if (options.resolution !== undefined) {\n      options.resolution = this.getResolution();\n    } else {\n      options.zoom = this.getZoom();\n    }\n\n    // preserve center\n    options.center = this.getCenter();\n\n    // preserve rotation\n    options.rotation = this.getRotation();\n\n    return assign({}, options, newOptions);\n  }\n\n  /**\n   * Animate the view.  The view's center, zoom (or resolution), and rotation\n   * can be animated for smooth transitions between view states.  For example,\n   * to animate the view to a new zoom level:\n   *\n   *     view.animate({zoom: view.getZoom() + 1});\n   *\n   * By default, the animation lasts one second and uses in-and-out easing.  You\n   * can customize this behavior by including `duration` (in milliseconds) and\n   * `easing` options (see {@link module:ol/easing}).\n   *\n   * To chain together multiple animations, call the method with multiple\n   * animation objects.  For example, to first zoom and then pan:\n   *\n   *     view.animate({zoom: 10}, {center: [0, 0]});\n   *\n   * If you provide a function as the last argument to the animate method, it\n   * will get called at the end of an animation series.  The callback will be\n   * called with `true` if the animation series completed on its own or `false`\n   * if it was cancelled.\n   *\n   * Animations are cancelled by user interactions (e.g. dragging the map) or by\n   * calling `view.setCenter()`, `view.setResolution()`, or `view.setRotation()`\n   * (or another method that calls one of these).\n   *\n   * @param {...(AnimationOptions|function(boolean))} var_args Animation\n   *     options.  Multiple animations can be run in series by passing multiple\n   *     options objects.  To run multiple animations in parallel, call the method\n   *     multiple times.  An optional callback can be provided as a final\n   *     argument.  The callback will be called with a boolean indicating whether\n   *     the animation completed without being cancelled.\n   * @api\n   */\n  animate(var_args) {\n    let animationCount = arguments.length;\n    let callback;\n    if (animationCount > 1 && typeof arguments[animationCount - 1] === 'function') {\n      callback = arguments[animationCount - 1];\n      --animationCount;\n    }\n    if (!this.isDef()) {\n      // if view properties are not yet set, shortcut to the final state\n      const state = arguments[animationCount - 1];\n      if (state.center) {\n        this.setCenter(state.center);\n      }\n      if (state.zoom !== undefined) {\n        this.setZoom(state.zoom);\n      }\n      if (state.rotation !== undefined) {\n        this.setRotation(state.rotation);\n      }\n      if (callback) {\n        animationCallback(callback, true);\n      }\n      return;\n    }\n    let start = Date.now();\n    let center = this.getCenter().slice();\n    let resolution = this.getResolution();\n    let rotation = this.getRotation();\n    const series = [];\n    for (let i = 0; i < animationCount; ++i) {\n      const options = /** @type {AnimationOptions} */ (arguments[i]);\n\n      const animation = /** @type {Animation} */ ({\n        start: start,\n        complete: false,\n        anchor: options.anchor,\n        duration: options.duration !== undefined ? options.duration : 1000,\n        easing: options.easing || inAndOut\n      });\n\n      if (options.center) {\n        animation.sourceCenter = center;\n        animation.targetCenter = options.center;\n        center = animation.targetCenter;\n      }\n\n      if (options.zoom !== undefined) {\n        animation.sourceResolution = resolution;\n        animation.targetResolution = this.constrainResolution(\n          this.maxResolution_, options.zoom - this.minZoom_, 0);\n        resolution = animation.targetResolution;\n      } else if (options.resolution) {\n        animation.sourceResolution = resolution;\n        animation.targetResolution = options.resolution;\n        resolution = animation.targetResolution;\n      }\n\n      if (options.rotation !== undefined) {\n        animation.sourceRotation = rotation;\n        const delta = modulo(options.rotation - rotation + Math.PI, 2 * Math.PI) - Math.PI;\n        animation.targetRotation = rotation + delta;\n        rotation = animation.targetRotation;\n      }\n\n      animation.callback = callback;\n\n      // check if animation is a no-op\n      if (isNoopAnimation(animation)) {\n        animation.complete = true;\n        // we still push it onto the series for callback handling\n      } else {\n        start += animation.duration;\n      }\n      series.push(animation);\n    }\n    this.animations_.push(series);\n    this.setHint(ViewHint.ANIMATING, 1);\n    this.updateAnimations_();\n  }\n\n  /**\n   * Determine if the view is being animated.\n   * @return {boolean} The view is being animated.\n   * @api\n   */\n  getAnimating() {\n    return this.hints_[ViewHint.ANIMATING] > 0;\n  }\n\n  /**\n   * Determine if the user is interacting with the view, such as panning or zooming.\n   * @return {boolean} The view is being interacted with.\n   * @api\n   */\n  getInteracting() {\n    return this.hints_[ViewHint.INTERACTING] > 0;\n  }\n\n  /**\n   * Cancel any ongoing animations.\n   * @api\n   */\n  cancelAnimations() {\n    this.setHint(ViewHint.ANIMATING, -this.hints_[ViewHint.ANIMATING]);\n    for (let i = 0, ii = this.animations_.length; i < ii; ++i) {\n      const series = this.animations_[i];\n      if (series[0].callback) {\n        animationCallback(series[0].callback, false);\n      }\n    }\n    this.animations_.length = 0;\n  }\n\n  /**\n   * Update all animations.\n   */\n  updateAnimations_() {\n    if (this.updateAnimationKey_ !== undefined) {\n      cancelAnimationFrame(this.updateAnimationKey_);\n      this.updateAnimationKey_ = undefined;\n    }\n    if (!this.getAnimating()) {\n      return;\n    }\n    const now = Date.now();\n    let more = false;\n    for (let i = this.animations_.length - 1; i >= 0; --i) {\n      const series = this.animations_[i];\n      let seriesComplete = true;\n      for (let j = 0, jj = series.length; j < jj; ++j) {\n        const animation = series[j];\n        if (animation.complete) {\n          continue;\n        }\n        const elapsed = now - animation.start;\n        let fraction = animation.duration > 0 ? elapsed / animation.duration : 1;\n        if (fraction >= 1) {\n          animation.complete = true;\n          fraction = 1;\n        } else {\n          seriesComplete = false;\n        }\n        const progress = animation.easing(fraction);\n        if (animation.sourceCenter) {\n          const x0 = animation.sourceCenter[0];\n          const y0 = animation.sourceCenter[1];\n          const x1 = animation.targetCenter[0];\n          const y1 = animation.targetCenter[1];\n          const x = x0 + progress * (x1 - x0);\n          const y = y0 + progress * (y1 - y0);\n          this.set(ViewProperty.CENTER, [x, y]);\n        }\n        if (animation.sourceResolution && animation.targetResolution) {\n          const resolution = progress === 1 ?\n            animation.targetResolution :\n            animation.sourceResolution + progress * (animation.targetResolution - animation.sourceResolution);\n          if (animation.anchor) {\n            this.set(ViewProperty.CENTER,\n              this.calculateCenterZoom(resolution, animation.anchor));\n          }\n          this.set(ViewProperty.RESOLUTION, resolution);\n        }\n        if (animation.sourceRotation !== undefined && animation.targetRotation !== undefined) {\n          const rotation = progress === 1 ?\n            modulo(animation.targetRotation + Math.PI, 2 * Math.PI) - Math.PI :\n            animation.sourceRotation + progress * (animation.targetRotation - animation.sourceRotation);\n          if (animation.anchor) {\n            this.set(ViewProperty.CENTER,\n              this.calculateCenterRotate(rotation, animation.anchor));\n          }\n          this.set(ViewProperty.ROTATION, rotation);\n        }\n        more = true;\n        if (!animation.complete) {\n          break;\n        }\n      }\n      if (seriesComplete) {\n        this.animations_[i] = null;\n        this.setHint(ViewHint.ANIMATING, -1);\n        const callback = series[0].callback;\n        if (callback) {\n          animationCallback(callback, true);\n        }\n      }\n    }\n    // prune completed series\n    this.animations_ = this.animations_.filter(Boolean);\n    if (more && this.updateAnimationKey_ === undefined) {\n      this.updateAnimationKey_ = requestAnimationFrame(this.updateAnimations_);\n    }\n  }\n\n  /**\n   * @param {number} rotation Target rotation.\n   * @param {import(\"./coordinate.js\").Coordinate} anchor Rotation anchor.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for rotation and anchor.\n   */\n  calculateCenterRotate(rotation, anchor) {\n    let center;\n    const currentCenter = this.getCenter();\n    if (currentCenter !== undefined) {\n      center = [currentCenter[0] - anchor[0], currentCenter[1] - anchor[1]];\n      rotateCoordinate(center, rotation - this.getRotation());\n      addCoordinate(center, anchor);\n    }\n    return center;\n  }\n\n  /**\n   * @param {number} resolution Target resolution.\n   * @param {import(\"./coordinate.js\").Coordinate} anchor Zoom anchor.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for resolution and anchor.\n   */\n  calculateCenterZoom(resolution, anchor) {\n    let center;\n    const currentCenter = this.getCenter();\n    const currentResolution = this.getResolution();\n    if (currentCenter !== undefined && currentResolution !== undefined) {\n      const x = anchor[0] - resolution * (anchor[0] - currentCenter[0]) / currentResolution;\n      const y = anchor[1] - resolution * (anchor[1] - currentCenter[1]) / currentResolution;\n      center = [x, y];\n    }\n    return center;\n  }\n\n  /**\n   * @private\n   * @return {import(\"./size.js\").Size} Viewport size or `[100, 100]` when no viewport is found.\n   */\n  getSizeFromViewport_() {\n    const size = [100, 100];\n    const selector = '.ol-viewport[data-view=\"' + getUid(this) + '\"]';\n    const element = document.querySelector(selector);\n    if (element) {\n      const metrics = getComputedStyle(element);\n      size[0] = parseInt(metrics.width, 10);\n      size[1] = parseInt(metrics.height, 10);\n    }\n    return size;\n  }\n\n  /**\n   * Get the constrained center of this view.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} center Center.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Constrained center.\n   * @api\n   */\n  constrainCenter(center) {\n    return this.constraints_.center(center);\n  }\n\n  /**\n   * Get the constrained resolution of this view.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number=} opt_delta Delta. Default is `0`.\n   * @param {number=} opt_direction Direction. Default is `0`.\n   * @return {number|undefined} Constrained resolution.\n   * @api\n   */\n  constrainResolution(resolution, opt_delta, opt_direction) {\n    const delta = opt_delta || 0;\n    const direction = opt_direction || 0;\n    return this.constraints_.resolution(resolution, delta, direction);\n  }\n\n  /**\n   * Get the constrained rotation of this view.\n   * @param {number|undefined} rotation Rotation.\n   * @param {number=} opt_delta Delta. Default is `0`.\n   * @return {number|undefined} Constrained rotation.\n   * @api\n   */\n  constrainRotation(rotation, opt_delta) {\n    const delta = opt_delta || 0;\n    return this.constraints_.rotation(rotation, delta);\n  }\n\n  /**\n   * Get the view center.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n   * @observable\n   * @api\n   */\n  getCenter() {\n    return (\n      /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(ViewProperty.CENTER))\n    );\n  }\n\n  /**\n   * @return {Constraints} Constraints.\n   */\n  getConstraints() {\n    return this.constraints_;\n  }\n\n  /**\n   * @param {Array<number>=} opt_hints Destination array.\n   * @return {Array<number>} Hint.\n   */\n  getHints(opt_hints) {\n    if (opt_hints !== undefined) {\n      opt_hints[0] = this.hints_[0];\n      opt_hints[1] = this.hints_[1];\n      return opt_hints;\n    } else {\n      return this.hints_.slice();\n    }\n  }\n\n  /**\n   * Calculate the extent for the current view state and the passed size.\n   * The size is the pixel dimensions of the box into which the calculated extent\n   * should fit. In most cases you want to get the extent of the entire map,\n   * that is `map.getSize()`.\n   * @param {import(\"./size.js\").Size=} opt_size Box pixel size. If not provided, the size of the\n   * first map that uses this view will be used.\n   * @return {import(\"./extent.js\").Extent} Extent.\n   * @api\n   */\n  calculateExtent(opt_size) {\n    const size = opt_size || this.getSizeFromViewport_();\n    const center = /** @type {!import(\"./coordinate.js\").Coordinate} */ (this.getCenter());\n    assert(center, 1); // The view center is not defined\n    const resolution = /** @type {!number} */ (this.getResolution());\n    assert(resolution !== undefined, 2); // The view resolution is not defined\n    const rotation = /** @type {!number} */ (this.getRotation());\n    assert(rotation !== undefined, 3); // The view rotation is not defined\n\n    return getForViewAndSize(center, resolution, rotation, size);\n  }\n\n  /**\n   * Get the maximum resolution of the view.\n   * @return {number} The maximum resolution of the view.\n   * @api\n   */\n  getMaxResolution() {\n    return this.maxResolution_;\n  }\n\n  /**\n   * Get the minimum resolution of the view.\n   * @return {number} The minimum resolution of the view.\n   * @api\n   */\n  getMinResolution() {\n    return this.minResolution_;\n  }\n\n  /**\n   * Get the maximum zoom level for the view.\n   * @return {number} The maximum zoom level.\n   * @api\n   */\n  getMaxZoom() {\n    return /** @type {number} */ (this.getZoomForResolution(this.minResolution_));\n  }\n\n  /**\n   * Set a new maximum zoom level for the view.\n   * @param {number} zoom The maximum zoom level.\n   * @api\n   */\n  setMaxZoom(zoom) {\n    this.applyOptions_(this.getUpdatedOptions_({maxZoom: zoom}));\n  }\n\n  /**\n   * Get the minimum zoom level for the view.\n   * @return {number} The minimum zoom level.\n   * @api\n   */\n  getMinZoom() {\n    return /** @type {number} */ (this.getZoomForResolution(this.maxResolution_));\n  }\n\n  /**\n   * Set a new minimum zoom level for the view.\n   * @param {number} zoom The minimum zoom level.\n   * @api\n   */\n  setMinZoom(zoom) {\n    this.applyOptions_(this.getUpdatedOptions_({minZoom: zoom}));\n  }\n\n  /**\n   * Get the view projection.\n   * @return {import(\"./proj/Projection.js\").default} The projection of the view.\n   * @api\n   */\n  getProjection() {\n    return this.projection_;\n  }\n\n  /**\n   * Get the view resolution.\n   * @return {number|undefined} The resolution of the view.\n   * @observable\n   * @api\n   */\n  getResolution() {\n    return /** @type {number|undefined} */ (this.get(ViewProperty.RESOLUTION));\n  }\n\n  /**\n   * Get the resolutions for the view. This returns the array of resolutions\n   * passed to the constructor of the View, or undefined if none were given.\n   * @return {Array<number>|undefined} The resolutions of the view.\n   * @api\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * Get the resolution for a provided extent (in map units) and size (in pixels).\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {import(\"./size.js\").Size=} opt_size Box pixel size.\n   * @return {number} The resolution at which the provided extent will render at\n   *     the given size.\n   * @api\n   */\n  getResolutionForExtent(extent, opt_size) {\n    const size = opt_size || this.getSizeFromViewport_();\n    const xResolution = getWidth(extent) / size[0];\n    const yResolution = getHeight(extent) / size[1];\n    return Math.max(xResolution, yResolution);\n  }\n\n  /**\n   * Return a function that returns a value between 0 and 1 for a\n   * resolution. Exponential scaling is assumed.\n   * @param {number=} opt_power Power.\n   * @return {function(number): number} Resolution for value function.\n   */\n  getResolutionForValueFunction(opt_power) {\n    const power = opt_power || 2;\n    const maxResolution = this.maxResolution_;\n    const minResolution = this.minResolution_;\n    const max = Math.log(maxResolution / minResolution) / Math.log(power);\n    return (\n      /**\n       * @param {number} value Value.\n       * @return {number} Resolution.\n       */\n      function(value) {\n        const resolution = maxResolution / Math.pow(power, value * max);\n        return resolution;\n      });\n  }\n\n  /**\n   * Get the view rotation.\n   * @return {number} The rotation of the view in radians.\n   * @observable\n   * @api\n   */\n  getRotation() {\n    return /** @type {number} */ (this.get(ViewProperty.ROTATION));\n  }\n\n  /**\n   * Return a function that returns a resolution for a value between\n   * 0 and 1. Exponential scaling is assumed.\n   * @param {number=} opt_power Power.\n   * @return {function(number): number} Value for resolution function.\n   */\n  getValueForResolutionFunction(opt_power) {\n    const power = opt_power || 2;\n    const maxResolution = this.maxResolution_;\n    const minResolution = this.minResolution_;\n    const max = Math.log(maxResolution / minResolution) / Math.log(power);\n    return (\n      /**\n       * @param {number} resolution Resolution.\n       * @return {number} Value.\n       */\n      function(resolution) {\n        const value = (Math.log(maxResolution / resolution) / Math.log(power)) / max;\n        return value;\n      });\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio for center rounding.\n   * @return {State} View state.\n   */\n  getState(pixelRatio) {\n    const center = /** @type {import(\"./coordinate.js\").Coordinate} */ (this.getCenter());\n    const projection = this.getProjection();\n    const resolution = /** @type {number} */ (this.getResolution());\n    const pixelResolution = resolution / pixelRatio;\n    const rotation = this.getRotation();\n    return (\n      /** @type {State} */ ({\n        center: [\n          Math.round(center[0] / pixelResolution) * pixelResolution,\n          Math.round(center[1] / pixelResolution) * pixelResolution\n        ],\n        projection: projection !== undefined ? projection : null,\n        resolution: resolution,\n        rotation: rotation,\n        zoom: this.getZoom()\n      })\n    );\n  }\n\n  /**\n   * Get the current zoom level.  If you configured your view with a resolutions\n   * array (this is rare), this method may return non-integer zoom levels (so\n   * the zoom level is not safe to use as an index into a resolutions array).\n   * @return {number|undefined} Zoom.\n   * @api\n   */\n  getZoom() {\n    let zoom;\n    const resolution = this.getResolution();\n    if (resolution !== undefined) {\n      zoom = this.getZoomForResolution(resolution);\n    }\n    return zoom;\n  }\n\n  /**\n   * Get the zoom level for a resolution.\n   * @param {number} resolution The resolution.\n   * @return {number|undefined} The zoom level for the provided resolution.\n   * @api\n   */\n  getZoomForResolution(resolution) {\n    let offset = this.minZoom_ || 0;\n    let max, zoomFactor;\n    if (this.resolutions_) {\n      const nearest = linearFindNearest(this.resolutions_, resolution, 1);\n      offset = nearest;\n      max = this.resolutions_[nearest];\n      if (nearest == this.resolutions_.length - 1) {\n        zoomFactor = 2;\n      } else {\n        zoomFactor = max / this.resolutions_[nearest + 1];\n      }\n    } else {\n      max = this.maxResolution_;\n      zoomFactor = this.zoomFactor_;\n    }\n    return offset + Math.log(max / resolution) / Math.log(zoomFactor);\n  }\n\n  /**\n   * Get the resolution for a zoom level.\n   * @param {number} zoom Zoom level.\n   * @return {number} The view resolution for the provided zoom level.\n   * @api\n   */\n  getResolutionForZoom(zoom) {\n    return /** @type {number} */ (this.constrainResolution(\n      this.maxResolution_, zoom - this.minZoom_, 0));\n  }\n\n  /**\n   * Fit the given geometry or extent based on the given map size and border.\n   * The size is pixel dimensions of the box to fit the extent into.\n   * In most cases you will want to use the map size, that is `map.getSize()`.\n   * Takes care of the map angle.\n   * @param {import(\"./geom/SimpleGeometry.js\").default|import(\"./extent.js\").Extent} geometryOrExtent The geometry or\n   *     extent to fit the view to.\n   * @param {FitOptions=} opt_options Options.\n   * @api\n   */\n  fit(geometryOrExtent, opt_options) {\n    const options = opt_options || {};\n    let size = options.size;\n    if (!size) {\n      size = this.getSizeFromViewport_();\n    }\n    /** @type {import(\"./geom/SimpleGeometry.js\").default} */\n    let geometry;\n    assert(Array.isArray(geometryOrExtent) || typeof /** @type {?} */ (geometryOrExtent).getSimplifiedGeometry === 'function',\n      24); // Invalid extent or geometry provided as `geometry`\n    if (Array.isArray(geometryOrExtent)) {\n      assert(!isEmpty(geometryOrExtent),\n        25); // Cannot fit empty extent provided as `geometry`\n      geometry = polygonFromExtent(geometryOrExtent);\n    } else if (geometryOrExtent.getType() === GeometryType.CIRCLE) {\n      geometryOrExtent = geometryOrExtent.getExtent();\n      geometry = polygonFromExtent(geometryOrExtent);\n      geometry.rotate(this.getRotation(), getCenter(geometryOrExtent));\n    } else {\n      geometry = geometryOrExtent;\n    }\n\n    const padding = options.padding !== undefined ? options.padding : [0, 0, 0, 0];\n    const constrainResolution = options.constrainResolution !== undefined ?\n      options.constrainResolution : true;\n    const nearest = options.nearest !== undefined ? options.nearest : false;\n    let minResolution;\n    if (options.minResolution !== undefined) {\n      minResolution = options.minResolution;\n    } else if (options.maxZoom !== undefined) {\n      minResolution = this.constrainResolution(\n        this.maxResolution_, options.maxZoom - this.minZoom_, 0);\n    } else {\n      minResolution = 0;\n    }\n    const coords = geometry.getFlatCoordinates();\n\n    // calculate rotated extent\n    const rotation = this.getRotation();\n    const cosAngle = Math.cos(-rotation);\n    let sinAngle = Math.sin(-rotation);\n    let minRotX = +Infinity;\n    let minRotY = +Infinity;\n    let maxRotX = -Infinity;\n    let maxRotY = -Infinity;\n    const stride = geometry.getStride();\n    for (let i = 0, ii = coords.length; i < ii; i += stride) {\n      const rotX = coords[i] * cosAngle - coords[i + 1] * sinAngle;\n      const rotY = coords[i] * sinAngle + coords[i + 1] * cosAngle;\n      minRotX = Math.min(minRotX, rotX);\n      minRotY = Math.min(minRotY, rotY);\n      maxRotX = Math.max(maxRotX, rotX);\n      maxRotY = Math.max(maxRotY, rotY);\n    }\n\n    // calculate resolution\n    let resolution = this.getResolutionForExtent(\n      [minRotX, minRotY, maxRotX, maxRotY],\n      [size[0] - padding[1] - padding[3], size[1] - padding[0] - padding[2]]);\n    resolution = isNaN(resolution) ? minResolution :\n      Math.max(resolution, minResolution);\n    if (constrainResolution) {\n      let constrainedResolution = this.constrainResolution(resolution, 0, 0);\n      if (!nearest && constrainedResolution < resolution) {\n        constrainedResolution = this.constrainResolution(\n          constrainedResolution, -1, 0);\n      }\n      resolution = constrainedResolution;\n    }\n\n    // calculate center\n    sinAngle = -sinAngle; // go back to original rotation\n    let centerRotX = (minRotX + maxRotX) / 2;\n    let centerRotY = (minRotY + maxRotY) / 2;\n    centerRotX += (padding[1] - padding[3]) / 2 * resolution;\n    centerRotY += (padding[0] - padding[2]) / 2 * resolution;\n    const centerX = centerRotX * cosAngle - centerRotY * sinAngle;\n    const centerY = centerRotY * cosAngle + centerRotX * sinAngle;\n    const center = [centerX, centerY];\n    const callback = options.callback ? options.callback : VOID;\n\n    if (options.duration !== undefined) {\n      this.animate({\n        resolution: resolution,\n        center: center,\n        duration: options.duration,\n        easing: options.easing\n      }, callback);\n    } else {\n      this.setResolution(resolution);\n      this.setCenter(center);\n      animationCallback(callback, true);\n    }\n  }\n\n  /**\n   * Center on coordinate and view position.\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"./size.js\").Size} size Box pixel size.\n   * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n   * @api\n   */\n  centerOn(coordinate, size, position) {\n    // calculate rotated position\n    const rotation = this.getRotation();\n    const cosAngle = Math.cos(-rotation);\n    let sinAngle = Math.sin(-rotation);\n    let rotX = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n    let rotY = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n    const resolution = this.getResolution();\n    rotX += (size[0] / 2 - position[0]) * resolution;\n    rotY += (position[1] - size[1] / 2) * resolution;\n\n    // go back to original angle\n    sinAngle = -sinAngle; // go back to original rotation\n    const centerX = rotX * cosAngle - rotY * sinAngle;\n    const centerY = rotY * cosAngle + rotX * sinAngle;\n\n    this.setCenter([centerX, centerY]);\n  }\n\n  /**\n   * @return {boolean} Is defined.\n   */\n  isDef() {\n    return !!this.getCenter() && this.getResolution() !== undefined;\n  }\n\n  /**\n   * Rotate the view around a given coordinate.\n   * @param {number} rotation New rotation value for the view.\n   * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The rotation center.\n   * @api\n   */\n  rotate(rotation, opt_anchor) {\n    if (opt_anchor !== undefined) {\n      const center = this.calculateCenterRotate(rotation, opt_anchor);\n      this.setCenter(center);\n    }\n    this.setRotation(rotation);\n  }\n\n  /**\n   * Set the center of the current view.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n   * @observable\n   * @api\n   */\n  setCenter(center) {\n    this.set(ViewProperty.CENTER, center);\n    if (this.getAnimating()) {\n      this.cancelAnimations();\n    }\n  }\n\n  /**\n   * @param {ViewHint} hint Hint.\n   * @param {number} delta Delta.\n   * @return {number} New value.\n   */\n  setHint(hint, delta) {\n    this.hints_[hint] += delta;\n    this.changed();\n    return this.hints_[hint];\n  }\n\n  /**\n   * Set the resolution for this view.\n   * @param {number|undefined} resolution The resolution of the view.\n   * @observable\n   * @api\n   */\n  setResolution(resolution) {\n    this.set(ViewProperty.RESOLUTION, resolution);\n    if (this.getAnimating()) {\n      this.cancelAnimations();\n    }\n  }\n\n  /**\n   * Set the rotation for this view.\n   * @param {number} rotation The rotation of the view in radians.\n   * @observable\n   * @api\n   */\n  setRotation(rotation) {\n    this.set(ViewProperty.ROTATION, rotation);\n    if (this.getAnimating()) {\n      this.cancelAnimations();\n    }\n  }\n\n  /**\n   * Zoom to a specific zoom level.\n   * @param {number} zoom Zoom level.\n   * @api\n   */\n  setZoom(zoom) {\n    this.setResolution(this.getResolutionForZoom(zoom));\n  }\n}\n\n\n/**\n * @param {Function} callback Callback.\n * @param {*} returnValue Return value.\n */\nfunction animationCallback(callback, returnValue) {\n  setTimeout(function() {\n    callback(returnValue);\n  }, 0);\n}\n\n\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./centerconstraint.js\").Type} The constraint.\n */\nexport function createCenterConstraint(options) {\n  if (options.extent !== undefined) {\n    return createExtent(options.extent);\n  } else {\n    return centerNone;\n  }\n}\n\n\n/**\n * @param {ViewOptions} options View options.\n * @return {{constraint: import(\"./resolutionconstraint.js\").Type, maxResolution: number,\n *     minResolution: number, minZoom: number, zoomFactor: number}} The constraint.\n */\nexport function createResolutionConstraint(options) {\n  let resolutionConstraint;\n  let maxResolution;\n  let minResolution;\n\n  // TODO: move these to be ol constants\n  // see https://github.com/openlayers/openlayers/issues/2076\n  const defaultMaxZoom = 28;\n  const defaultZoomFactor = 2;\n\n  let minZoom = options.minZoom !== undefined ?\n    options.minZoom : DEFAULT_MIN_ZOOM;\n\n  let maxZoom = options.maxZoom !== undefined ?\n    options.maxZoom : defaultMaxZoom;\n\n  const zoomFactor = options.zoomFactor !== undefined ?\n    options.zoomFactor : defaultZoomFactor;\n\n  if (options.resolutions !== undefined) {\n    const resolutions = options.resolutions;\n    maxResolution = resolutions[minZoom];\n    minResolution = resolutions[maxZoom] !== undefined ?\n      resolutions[maxZoom] : resolutions[resolutions.length - 1];\n    resolutionConstraint = createSnapToResolutions(\n      resolutions);\n  } else {\n    // calculate the default min and max resolution\n    const projection = createProjection(options.projection, 'EPSG:3857');\n    const extent = projection.getExtent();\n    const size = !extent ?\n      // use an extent that can fit the whole world if need be\n      360 * METERS_PER_UNIT[Units.DEGREES] /\n            projection.getMetersPerUnit() :\n      Math.max(getWidth(extent), getHeight(extent));\n\n    const defaultMaxResolution = size / DEFAULT_TILE_SIZE / Math.pow(\n      defaultZoomFactor, DEFAULT_MIN_ZOOM);\n\n    const defaultMinResolution = defaultMaxResolution / Math.pow(\n      defaultZoomFactor, defaultMaxZoom - DEFAULT_MIN_ZOOM);\n\n    // user provided maxResolution takes precedence\n    maxResolution = options.maxResolution;\n    if (maxResolution !== undefined) {\n      minZoom = 0;\n    } else {\n      maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom);\n    }\n\n    // user provided minResolution takes precedence\n    minResolution = options.minResolution;\n    if (minResolution === undefined) {\n      if (options.maxZoom !== undefined) {\n        if (options.maxResolution !== undefined) {\n          minResolution = maxResolution / Math.pow(zoomFactor, maxZoom);\n        } else {\n          minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom);\n        }\n      } else {\n        minResolution = defaultMinResolution;\n      }\n    }\n\n    // given discrete zoom levels, minResolution may be different than provided\n    maxZoom = minZoom + Math.floor(\n      Math.log(maxResolution / minResolution) / Math.log(zoomFactor));\n    minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom);\n\n    resolutionConstraint = createSnapToPower(\n      zoomFactor, maxResolution, maxZoom - minZoom);\n  }\n  return {constraint: resolutionConstraint, maxResolution: maxResolution,\n    minResolution: minResolution, minZoom: minZoom, zoomFactor: zoomFactor};\n}\n\n\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./rotationconstraint.js\").Type} Rotation constraint.\n */\nexport function createRotationConstraint(options) {\n  const enableRotation = options.enableRotation !== undefined ?\n    options.enableRotation : true;\n  if (enableRotation) {\n    const constrainRotation = options.constrainRotation;\n    if (constrainRotation === undefined || constrainRotation === true) {\n      return createSnapToZero();\n    } else if (constrainRotation === false) {\n      return rotationNone;\n    } else if (typeof constrainRotation === 'number') {\n      return createSnapToN(constrainRotation);\n    } else {\n      return rotationNone;\n    }\n  } else {\n    return disable;\n  }\n}\n\n\n/**\n * Determine if an animation involves no view change.\n * @param {Animation} animation The animation.\n * @return {boolean} The animation involves no view change.\n */\nexport function isNoopAnimation(animation) {\n  if (animation.sourceCenter && animation.targetCenter) {\n    if (!coordinatesEqual(animation.sourceCenter, animation.targetCenter)) {\n      return false;\n    }\n  }\n  if (animation.sourceResolution !== animation.targetResolution) {\n    return false;\n  }\n  if (animation.sourceRotation !== animation.targetRotation) {\n    return false;\n  }\n  return true;\n}\n\nexport default View;\n","/**\n * @module ol/resolutionconstraint\n */\nimport {linearFindNearest} from './array.js';\nimport {clamp} from './math.js';\n\n\n/**\n * @typedef {function((number|undefined), number, number): (number|undefined)} Type\n */\n\n\n/**\n * @param {Array<number>} resolutions Resolutions.\n * @return {Type} Zoom function.\n */\nexport function createSnapToResolutions(resolutions) {\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} delta Delta.\n     * @param {number} direction Direction.\n     * @return {number|undefined} Resolution.\n     */\n    function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        let z = linearFindNearest(resolutions, resolution, direction);\n        z = clamp(z + delta, 0, resolutions.length - 1);\n        const index = Math.floor(z);\n        if (z != index && index < resolutions.length - 1) {\n          const power = resolutions[index] / resolutions[index + 1];\n          return resolutions[index] / Math.pow(power, z - index);\n        } else {\n          return resolutions[index];\n        }\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n\n\n/**\n * @param {number} power Power.\n * @param {number} maxResolution Maximum resolution.\n * @param {number=} opt_maxLevel Maximum level.\n * @return {Type} Zoom function.\n */\nexport function createSnapToPower(power, maxResolution, opt_maxLevel) {\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} delta Delta.\n     * @param {number} direction Direction.\n     * @return {number|undefined} Resolution.\n     */\n    function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        const offset = -direction / 2 + 0.5;\n        const oldLevel = Math.floor(\n          Math.log(maxResolution / resolution) / Math.log(power) + offset);\n        let newLevel = Math.max(oldLevel + delta, 0);\n        if (opt_maxLevel !== undefined) {\n          newLevel = Math.min(newLevel, opt_maxLevel);\n        }\n        return maxResolution / Math.pow(power, newLevel);\n      } else {\n        return undefined;\n      }\n    });\n}\n","/**\n * @module ol/style/Style\n */\n\n/**\n * Feature styles.\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *\n *  var fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)'\n *  });\n *  var stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25\n *  });\n *  var styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5\n *      }),\n *      fill: fill,\n *      stroke: stroke\n *    })\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *  import GeometryType from 'ol/geom/GeometryType';\n *\n *  var white = [255, 255, 255, 1];\n *  var blue = [0, 153, 255, 1];\n *  var width = 3;\n *  styles[GeometryType.POLYGON] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5]\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POLYGON] =\n *      styles[GeometryType.POLYGON];\n *  styles[GeometryType.LINE_STRING] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2\n *      })\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_LINE_STRING] =\n *      styles[GeometryType.LINE_STRING];\n *  styles[GeometryType.POINT] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2\n *        })\n *      }),\n *      zIndex: Infinity\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POINT] =\n *      styles[GeometryType.POINT];\n *  styles[GeometryType.GEOMETRY_COLLECTION] =\n *      styles[GeometryType.POLYGON].concat(\n *          styles[GeometryType.LINE_STRING],\n *          styles[GeometryType.POINT]\n *      );\n * ```\n */\nimport {assert} from '../asserts.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport CircleStyle from './Circle.js';\nimport Fill from './Fill.js';\nimport Stroke from './Stroke.js';\n\n\n/**\n * A function that takes an {@link module:ol/Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style} or an array of them. This way e.g. a\n * vector layer can be styled.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike, number):(Style|Array<Style>)} StyleFunction\n */\n\n/**\n * A {@link Style}, an array of {@link Style}, or a {@link StyleFunction}.\n * @typedef {Style|Array<Style>|StyleFunction} StyleLike\n */\n\n/**\n * A function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike):\n *     (import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined)} GeometryFunction\n */\n\n\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((import(\"../coordinate.js\").Coordinate|Array<import(\"../coordinate.js\").Coordinate>|Array<Array<import(\"../coordinate.js\").Coordinate>>),import(\"../render.js\").State)}\n * RenderFunction\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {string|import(\"../geom/Geometry.js\").default|GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {import(\"./Image.js\").default} [image] Image style.\n * @property {RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Text.js\").default} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n * @api\n */\nclass Style {\n  /**\n   * @param {Options=} opt_options Style options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n     */\n    this.geometry_ = null;\n\n    /**\n     * @private\n     * @type {!GeometryFunction}\n     */\n    this.geometryFunction_ = defaultGeometryFunction;\n\n    if (options.geometry !== undefined) {\n      this.setGeometry(options.geometry);\n    }\n\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n    this.fill_ = options.fill !== undefined ? options.fill : null;\n\n    /**\n       * @private\n       * @type {import(\"./Image.js\").default}\n       */\n    this.image_ = options.image !== undefined ? options.image : null;\n\n    /**\n     * @private\n     * @type {RenderFunction|null}\n     */\n    this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n     * @private\n     * @type {import(\"./Text.js\").default}\n     */\n    this.text_ = options.text !== undefined ? options.text : null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.zIndex_ = options.zIndex;\n\n  }\n\n  /**\n   * Clones the style.\n   * @return {Style} The cloned style.\n   * @api\n   */\n  clone() {\n    let geometry = this.getGeometry();\n    if (geometry && typeof geometry === 'object') {\n      geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (geometry).clone();\n    }\n    return new Style({\n      geometry: geometry,\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      image: this.getImage() ? this.getImage().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      text: this.getText() ? this.getText().clone() : undefined,\n      zIndex: this.getZIndex()\n    });\n  }\n\n  /**\n   * Get the custom renderer function that was configured with\n   * {@link #setRenderer} or the `renderer` constructor option.\n   * @return {RenderFunction|null} Custom renderer function.\n   * @api\n   */\n  getRenderer() {\n    return this.renderer_;\n  }\n\n  /**\n   * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n   * and `image` options of the style will be ignored.\n   * @param {RenderFunction|null} renderer Custom renderer function.\n   * @api\n   */\n  setRenderer(renderer) {\n    this.renderer_ = renderer;\n  }\n\n  /**\n   * Get the geometry to be rendered.\n   * @return {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n   * Feature property or geometry or function that returns the geometry that will\n   * be rendered with this style.\n   * @api\n   */\n  getGeometry() {\n    return this.geometry_;\n  }\n\n  /**\n   * Get the function used to generate a geometry for rendering.\n   * @return {!GeometryFunction} Function that is called with a feature\n   * and returns the geometry to render instead of the feature's geometry.\n   * @api\n   */\n  getGeometryFunction() {\n    return this.geometryFunction_;\n  }\n\n  /**\n   * Get the fill style.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n   * Set the fill style.\n   * @param {import(\"./Fill.js\").default} fill Fill style.\n   * @api\n   */\n  setFill(fill) {\n    this.fill_ = fill;\n  }\n\n  /**\n   * Get the image style.\n   * @return {import(\"./Image.js\").default} Image style.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Set the image style.\n   * @param {import(\"./Image.js\").default} image Image style.\n   * @api\n   */\n  setImage(image) {\n    this.image_ = image;\n  }\n\n  /**\n   * Get the stroke style.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n   * Set the stroke style.\n   * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n   * @api\n   */\n  setStroke(stroke) {\n    this.stroke_ = stroke;\n  }\n\n  /**\n   * Get the text style.\n   * @return {import(\"./Text.js\").default} Text style.\n   * @api\n   */\n  getText() {\n    return this.text_;\n  }\n\n  /**\n   * Set the text style.\n   * @param {import(\"./Text.js\").default} text Text style.\n   * @api\n   */\n  setText(text) {\n    this.text_ = text;\n  }\n\n  /**\n   * Get the z-index for the style.\n   * @return {number|undefined} ZIndex.\n   * @api\n   */\n  getZIndex() {\n    return this.zIndex_;\n  }\n\n  /**\n   * Set a geometry that is rendered instead of the feature's geometry.\n   *\n   * @param {string|import(\"../geom/Geometry.js\").default|GeometryFunction} geometry\n   *     Feature property or geometry or function returning a geometry to render\n   *     for this style.\n   * @api\n   */\n  setGeometry(geometry) {\n    if (typeof geometry === 'function') {\n      this.geometryFunction_ = geometry;\n    } else if (typeof geometry === 'string') {\n      this.geometryFunction_ = function(feature) {\n        return (\n          /** @type {import(\"../geom/Geometry.js\").default} */ (feature.get(geometry))\n        );\n      };\n    } else if (!geometry) {\n      this.geometryFunction_ = defaultGeometryFunction;\n    } else if (geometry !== undefined) {\n      this.geometryFunction_ = function() {\n        return (\n          /** @type {import(\"../geom/Geometry.js\").default} */ (geometry)\n        );\n      };\n    }\n    this.geometry_ = geometry;\n  }\n\n  /**\n   * Set the z-index.\n   *\n   * @param {number|undefined} zIndex ZIndex.\n   * @api\n   */\n  setZIndex(zIndex) {\n    this.zIndex_ = zIndex;\n  }\n}\n\n\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of Style or single style objects wrapped in a\n * new style function.\n * @param {StyleFunction|Array<Style>|Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {StyleFunction} A style function.\n */\nexport function toFunction(obj) {\n  let styleFunction;\n\n  if (typeof obj === 'function') {\n    styleFunction = obj;\n  } else {\n    /**\n     * @type {Array<Style>}\n     */\n    let styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      assert(typeof /** @type {?} */ (obj).getZIndex === 'function',\n        41); // Expected an `Style` or an array of `Style`\n      const style = /** @type {Style} */ (obj);\n      styles = [style];\n    }\n    styleFunction = function() {\n      return styles;\n    };\n  }\n  return styleFunction;\n}\n\n\n/**\n * @type {Array<Style>}\n */\nlet defaultStyles = null;\n\n\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array<Style>} Style.\n */\nexport function createDefaultStyle(feature, resolution) {\n  // We don't use an immediately-invoked function\n  // and a closure so we don't get an error at script evaluation time in\n  // browsers that do not support Canvas. (import(\"./Circle.js\").CircleStyle does\n  // canvas.getContext('2d') at construction time, which will cause an.error\n  // in such browsers.)\n  if (!defaultStyles) {\n    const fill = new Fill({\n      color: 'rgba(255,255,255,0.4)'\n    });\n    const stroke = new Stroke({\n      color: '#3399CC',\n      width: 1.25\n    });\n    defaultStyles = [\n      new Style({\n        image: new CircleStyle({\n          fill: fill,\n          stroke: stroke,\n          radius: 5\n        }),\n        fill: fill,\n        stroke: stroke\n      })\n    ];\n  }\n  return defaultStyles;\n}\n\n\n/**\n * Default styles for editing features.\n * @return {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} Styles\n */\nexport function createEditingStyle() {\n  /** @type {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} */\n  const styles = {};\n  const white = [255, 255, 255, 1];\n  const blue = [0, 153, 255, 1];\n  const width = 3;\n  styles[GeometryType.POLYGON] = [\n    new Style({\n      fill: new Fill({\n        color: [255, 255, 255, 0.5]\n      })\n    })\n  ];\n  styles[GeometryType.MULTI_POLYGON] =\n      styles[GeometryType.POLYGON];\n\n  styles[GeometryType.LINE_STRING] = [\n    new Style({\n      stroke: new Stroke({\n        color: white,\n        width: width + 2\n      })\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: blue,\n        width: width\n      })\n    })\n  ];\n  styles[GeometryType.MULTI_LINE_STRING] =\n      styles[GeometryType.LINE_STRING];\n\n  styles[GeometryType.CIRCLE] =\n      styles[GeometryType.POLYGON].concat(\n        styles[GeometryType.LINE_STRING]\n      );\n\n\n  styles[GeometryType.POINT] = [\n    new Style({\n      image: new CircleStyle({\n        radius: width * 2,\n        fill: new Fill({\n          color: blue\n        }),\n        stroke: new Stroke({\n          color: white,\n          width: width / 2\n        })\n      }),\n      zIndex: Infinity\n    })\n  ];\n  styles[GeometryType.MULTI_POINT] =\n      styles[GeometryType.POINT];\n\n  styles[GeometryType.GEOMETRY_COLLECTION] =\n      styles[GeometryType.POLYGON].concat(\n        styles[GeometryType.LINE_STRING],\n        styles[GeometryType.POINT]\n      );\n\n  return styles;\n}\n\n\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature to get the geometry for.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined} Geometry to render.\n */\nfunction defaultGeometryFunction(feature) {\n  return feature.getGeometry();\n}\n\nexport default Style;\n","/**\n * @module ol/ViewHint\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  ANIMATING: 0,\n  INTERACTING: 1\n};\n","/**\n * @module ol/style/Stroke\n */\nimport {getUid} from '../util.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {string} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {string} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [lineDash] Line dash pattern. Default is `undefined` (no dash).\n * Please note that Internet Explorer 10 and lower do not support the `setLineDash` method on\n * the `CanvasRenderingContext2D` and therefore this option will have no visual effect in these browsers.\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n\n\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n * @api\n */\nclass Stroke {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n     */\n    this.color_ = options.color !== undefined ? options.color : null;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.lineCap_ = options.lineCap;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lineDashOffset_ = options.lineDashOffset;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.lineJoin_ = options.lineJoin;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.miterLimit_ = options.miterLimit;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.width_ = options.width;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Clones the style.\n   * @return {Stroke} The cloned style.\n   * @api\n   */\n  clone() {\n    const color = this.getColor();\n    return new Stroke({\n      color: Array.isArray(color) ? color.slice() : color || undefined,\n      lineCap: this.getLineCap(),\n      lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n      lineDashOffset: this.getLineDashOffset(),\n      lineJoin: this.getLineJoin(),\n      miterLimit: this.getMiterLimit(),\n      width: this.getWidth()\n    });\n  }\n\n  /**\n   * Get the stroke color.\n   * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Get the line cap type for the stroke.\n   * @return {string|undefined} Line cap.\n   * @api\n   */\n  getLineCap() {\n    return this.lineCap_;\n  }\n\n  /**\n   * Get the line dash style for the stroke.\n   * @return {Array<number>} Line dash.\n   * @api\n   */\n  getLineDash() {\n    return this.lineDash_;\n  }\n\n  /**\n   * Get the line dash offset for the stroke.\n   * @return {number|undefined} Line dash offset.\n   * @api\n   */\n  getLineDashOffset() {\n    return this.lineDashOffset_;\n  }\n\n  /**\n   * Get the line join type for the stroke.\n   * @return {string|undefined} Line join.\n   * @api\n   */\n  getLineJoin() {\n    return this.lineJoin_;\n  }\n\n  /**\n   * Get the miter limit for the stroke.\n   * @return {number|undefined} Miter limit.\n   * @api\n   */\n  getMiterLimit() {\n    return this.miterLimit_;\n  }\n\n  /**\n   * Get the stroke width.\n   * @return {number|undefined} Width.\n   * @api\n   */\n  getWidth() {\n    return this.width_;\n  }\n\n  /**\n   * Set the color.\n   *\n   * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n   * @api\n   */\n  setColor(color) {\n    this.color_ = color;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the line cap.\n   *\n   * @param {string|undefined} lineCap Line cap.\n   * @api\n   */\n  setLineCap(lineCap) {\n    this.lineCap_ = lineCap;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the line dash.\n   *\n   * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n   * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n   * property will have no visual effect in these browsers.\n   *\n   * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n   *\n   * @param {Array<number>} lineDash Line dash.\n   * @api\n   */\n  setLineDash(lineDash) {\n    this.lineDash_ = lineDash;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the line dash offset.\n   *\n   * @param {number|undefined} lineDashOffset Line dash offset.\n   * @api\n   */\n  setLineDashOffset(lineDashOffset) {\n    this.lineDashOffset_ = lineDashOffset;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the line join.\n   *\n   * @param {string|undefined} lineJoin Line join.\n   * @api\n   */\n  setLineJoin(lineJoin) {\n    this.lineJoin_ = lineJoin;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the miter limit.\n   *\n   * @param {number|undefined} miterLimit Miter limit.\n   * @api\n   */\n  setMiterLimit(miterLimit) {\n    this.miterLimit_ = miterLimit;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the width.\n   *\n   * @param {number|undefined} width Width.\n   * @api\n   */\n  setWidth(width) {\n    this.width_ = width;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * @return {string} The checksum.\n   */\n  getChecksum() {\n    if (this.checksum_ === undefined) {\n      this.checksum_ = 's';\n      if (this.color_) {\n        if (typeof this.color_ === 'string') {\n          this.checksum_ += this.color_;\n        } else {\n          this.checksum_ += getUid(this.color_);\n        }\n      } else {\n        this.checksum_ += '-';\n      }\n      this.checksum_ += ',' +\n          (this.lineCap_ !== undefined ?\n            this.lineCap_.toString() : '-') + ',' +\n          (this.lineDash_ ?\n            this.lineDash_.toString() : '-') + ',' +\n          (this.lineDashOffset_ !== undefined ?\n            this.lineDashOffset_ : '-') + ',' +\n          (this.lineJoin_ !== undefined ?\n            this.lineJoin_ : '-') + ',' +\n          (this.miterLimit_ !== undefined ?\n            this.miterLimit_.toString() : '-') + ',' +\n          (this.width_ !== undefined ?\n            this.width_.toString() : '-');\n    }\n\n    return this.checksum_;\n  }\n}\n\nexport default Stroke;\n","/**\n * @module ol/source/OSM\n */\n\nimport XYZ from './XYZ.js';\n\n\n/**\n * The attribution containing a link to the OpenStreetMap Copyright and License\n * page.\n * @const\n * @type {string}\n * @api\n */\nexport const ATTRIBUTION = '&#169; ' +\n      '<a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> ' +\n      'contributors.';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {number} [maxZoom=19] Max zoom.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {number} [reprojectionErrorThreshold=1.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url='https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png'] URL template.\n * Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source for the OpenStreetMap tile server.\n * @api\n */\nclass OSM extends XYZ {\n  /**\n   * @param {Options=} [opt_options] Open Street Map options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    let attributions;\n    if (options.attributions !== undefined) {\n      attributions = options.attributions;\n    } else {\n      attributions = [ATTRIBUTION];\n    }\n\n    const crossOrigin = options.crossOrigin !== undefined ?\n      options.crossOrigin : 'anonymous';\n\n    const url = options.url !== undefined ?\n      options.url : 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n    super({\n      attributions: attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: crossOrigin,\n      opaque: options.opaque !== undefined ? options.opaque : true,\n      maxZoom: options.maxZoom !== undefined ? options.maxZoom : 19,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileLoadFunction: options.tileLoadFunction,\n      url: url,\n      wrapX: options.wrapX,\n      attributionsCollapsible: false\n    });\n\n  }\n\n}\n\nexport default OSM;\n","/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map event.\n */\nclass MapEvent extends Event {\n\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./PluggableMap.js\").default} map Map.\n   * @param {?import(\"./PluggableMap.js\").FrameState=} opt_frameState Frame state.\n   */\n  constructor(type, map, opt_frameState) {\n\n    super(type);\n\n    /**\n     * The map where the event occurred.\n     * @type {import(\"./PluggableMap.js\").default}\n     * @api\n     */\n    this.map = map;\n\n    /**\n     * The frame state at the time of the event.\n     * @type {?import(\"./PluggableMap.js\").FrameState}\n     * @api\n     */\n    this.frameState = opt_frameState !== undefined ? opt_frameState : null;\n\n  }\n\n}\n\nexport default MapEvent;\n","/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map browser event.\n */\nclass MapBrowserEvent extends MapEvent {\n\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./PluggableMap.js\").default} map Map.\n   * @param {Event} browserEvent Browser event.\n   * @param {boolean=} opt_dragging Is the map currently being dragged?\n   * @param {?import(\"./PluggableMap.js\").FrameState=} opt_frameState Frame state.\n   */\n  constructor(type, map, browserEvent, opt_dragging, opt_frameState) {\n\n    super(type, map, opt_frameState);\n\n    /**\n     * The original browser event.\n     * @const\n     * @type {Event}\n     * @api\n     */\n    this.originalEvent = browserEvent;\n\n    /**\n     * The map pixel relative to the viewport corresponding to the original browser event.\n     * @type {import(\"./pixel.js\").Pixel}\n     * @api\n     */\n    this.pixel = map.getEventPixel(browserEvent);\n\n    /**\n     * The coordinate in view projection corresponding to the original browser event.\n     * @type {import(\"./coordinate.js\").Coordinate}\n     * @api\n     */\n    this.coordinate = map.getCoordinateFromPixel(this.pixel);\n\n    /**\n     * Indicates if the map is currently being dragged. Only set for\n     * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n     *\n     * @type {boolean}\n     * @api\n     */\n    this.dragging = opt_dragging !== undefined ? opt_dragging : false;\n\n  }\n\n  /**\n   * Prevents the default browser action.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n   * @override\n   * @api\n   */\n  preventDefault() {\n    super.preventDefault();\n    this.originalEvent.preventDefault();\n  }\n\n  /**\n   * Prevents further propagation of the current event.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n   * @override\n   * @api\n   */\n  stopPropagation() {\n    super.stopPropagation();\n    this.originalEvent.stopPropagation();\n  }\n}\n\n\nexport default MapBrowserEvent;\n","/**\n * @module ol/MapBrowserPointerEvent\n */\nimport MapBrowserEvent from './MapBrowserEvent.js';\n\nclass MapBrowserPointerEvent extends MapBrowserEvent {\n\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./PluggableMap.js\").default} map Map.\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer event.\n   * @param {boolean=} opt_dragging Is the map currently being dragged?\n   * @param {?import(\"./PluggableMap.js\").FrameState=} opt_frameState Frame state.\n   */\n  constructor(type, map, pointerEvent, opt_dragging, opt_frameState) {\n\n    super(type, map, pointerEvent.originalEvent, opt_dragging, opt_frameState);\n\n    /**\n     * @const\n     * @type {import(\"./pointer/PointerEvent.js\").default}\n     */\n    this.pointerEvent = pointerEvent;\n\n  }\n\n}\n\nexport default MapBrowserPointerEvent;\n","/**\n * @module ol/pointer/EventType\n */\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n  POINTERMOVE: 'pointermove',\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel'\n};\n","/**\n * @module ol/pointer/EventSource\n */\n\nclass EventSource {\n\n  /**\n   * @param {import(\"./PointerEventHandler.js\").default} dispatcher Event handler.\n   * @param {!Object<string, function(Event)>} mapping Event mapping.\n   */\n  constructor(dispatcher, mapping) {\n\n    /**\n     * @type {import(\"./PointerEventHandler.js\").default}\n     */\n    this.dispatcher = dispatcher;\n\n    /**\n     * @private\n     * @const\n     * @type {!Object<string, function(Event)>}\n     */\n    this.mapping_ = mapping;\n  }\n\n  /**\n   * List of events supported by this source.\n   * @return {Array<string>} Event names\n   */\n  getEvents() {\n    return Object.keys(this.mapping_);\n  }\n\n  /**\n   * Returns the handler that should handle a given event type.\n   * @param {string} eventType The event type.\n   * @return {function(Event)} Handler\n   */\n  getHandlerForEvent(eventType) {\n    return this.mapping_[eventType];\n  }\n\n}\n\nexport default EventSource;\n","/**\n * @module ol/pointer/MouseSource\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport EventSource from './EventSource.js';\n\n\n/**\n * @type {number}\n */\nexport const POINTER_ID = 1;\n\n\n/**\n * @type {string}\n */\nexport const POINTER_TYPE = 'mouse';\n\n\n/**\n * Radius around touchend that swallows mouse events.\n *\n * @type {number}\n */\nconst DEDUP_DIST = 25;\n\n/**\n * Handler for `mousedown`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mousedown(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    // TODO(dfreedman) workaround for some elements not sending mouseup\n    // http://crbug/149091\n    if (POINTER_ID.toString() in this.pointerMap) {\n      this.cancel(inEvent);\n    }\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.pointerMap[POINTER_ID.toString()] = inEvent;\n    this.dispatcher.down(e, inEvent);\n  }\n}\n\n/**\n * Handler for `mousemove`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mousemove(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.move(e, inEvent);\n  }\n}\n\n/**\n * Handler for `mouseup`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mouseup(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const p = this.pointerMap[POINTER_ID.toString()];\n\n    if (p && p.button === inEvent.button) {\n      const e = prepareEvent(inEvent, this.dispatcher);\n      this.dispatcher.up(e, inEvent);\n      this.cleanupMouse();\n    }\n  }\n}\n\n/**\n * Handler for `mouseover`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mouseover(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.enterOver(e, inEvent);\n  }\n}\n\n/**\n * Handler for `mouseout`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mouseout(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.leaveOut(e, inEvent);\n  }\n}\n\n\nclass MouseSource extends EventSource {\n\n  /**\n   * @param {import(\"./PointerEventHandler.js\").default} dispatcher Event handler.\n   */\n  constructor(dispatcher) {\n    const mapping = {\n      'mousedown': mousedown,\n      'mousemove': mousemove,\n      'mouseup': mouseup,\n      'mouseover': mouseover,\n      'mouseout': mouseout\n    };\n    super(dispatcher, mapping);\n\n    /**\n     * @const\n     * @type {!Object<string, Event|Object>}\n     */\n    this.pointerMap = dispatcher.pointerMap;\n\n    /**\n     * @const\n     * @type {Array<import(\"../pixel.js\").Pixel>}\n     */\n    this.lastTouches = [];\n  }\n\n  /**\n   * Detect if a mouse event was simulated from a touch by\n   * checking if previously there was a touch event at the\n   * same position.\n   *\n   * FIXME - Known problem with the native Android browser on\n   * Samsung GT-I9100 (Android 4.1.2):\n   * In case the page is scrolled, this function does not work\n   * correctly when a canvas is used (WebGL or canvas renderer).\n   * Mouse listeners on canvas elements (for this browser), create\n   * two mouse events: One 'good' and one 'bad' one (on other browsers or\n   * when a div is used, there is only one event). For the 'bad' one,\n   * clientX/clientY and also pageX/pageY are wrong when the page\n   * is scrolled. Because of that, this function can not detect if\n   * the events were simulated from a touch event. As result, a\n   * pointer event at a wrong position is dispatched, which confuses\n   * the map interactions.\n   * It is unclear, how one can get the correct position for the event\n   * or detect that the positions are invalid.\n   *\n   * @private\n   * @param {MouseEvent} inEvent The in event.\n   * @return {boolean} True, if the event was generated by a touch.\n   */\n  isEventSimulatedFromTouch_(inEvent) {\n    const lts = this.lastTouches;\n    const x = inEvent.clientX;\n    const y = inEvent.clientY;\n    for (let i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n      // simulated mouse events will be swallowed near a primary touchend\n      const dx = Math.abs(x - t[0]);\n      const dy = Math.abs(y - t[1]);\n      if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Dispatches a `pointercancel` event.\n   *\n   * @param {Event} inEvent The in event.\n   */\n  cancel(inEvent) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.cancel(e, inEvent);\n    this.cleanupMouse();\n  }\n\n  /**\n   * Remove the mouse from the list of active pointers.\n   */\n  cleanupMouse() {\n    delete this.pointerMap[POINTER_ID.toString()];\n  }\n}\n\n\n/**\n * Creates a copy of the original event that will be used\n * for the fake pointer event.\n *\n * @param {Event} inEvent The in event.\n * @param {import(\"./PointerEventHandler.js\").default} dispatcher Event handler.\n * @return {Object} The copied event.\n */\nexport function prepareEvent(inEvent, dispatcher) {\n  const e = dispatcher.cloneEvent(inEvent, inEvent);\n\n  // forward mouse preventDefault\n  const pd = e.preventDefault;\n  e.preventDefault = function() {\n    inEvent.preventDefault();\n    pd();\n  };\n\n  e.pointerId = POINTER_ID;\n  e.isPrimary = true;\n  e.pointerType = POINTER_TYPE;\n\n  return e;\n}\n\n\nexport default MouseSource;\n","/**\n * @module ol/pointer/MsSource\n */\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport EventSource from './EventSource.js';\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst POINTER_TYPES = [\n  '',\n  'unavailable',\n  'touch',\n  'pen',\n  'mouse'\n];\n\n/**\n * Handler for `msPointerDown`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerDown(inEvent) {\n  this.pointerMap[inEvent.pointerId.toString()] = inEvent;\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.down(e, inEvent);\n}\n\n/**\n * Handler for `msPointerMove`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerMove(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.move(e, inEvent);\n}\n\n/**\n * Handler for `msPointerUp`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerUp(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.up(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n}\n\n/**\n * Handler for `msPointerOut`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerOut(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.leaveOut(e, inEvent);\n}\n\n/**\n * Handler for `msPointerOver`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerOver(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.enterOver(e, inEvent);\n}\n\n/**\n * Handler for `msPointerCancel`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerCancel(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.cancel(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n}\n\n/**\n * Handler for `msLostPointerCapture`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msLostPointerCapture(inEvent) {\n  const e = this.dispatcher.makeEvent('lostpointercapture', inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n}\n\n/**\n * Handler for `msGotPointerCapture`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msGotPointerCapture(inEvent) {\n  const e = this.dispatcher.makeEvent('gotpointercapture', inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n}\n\nclass MsSource extends EventSource {\n\n  /**\n   * @param {import(\"./PointerEventHandler.js\").default} dispatcher Event handler.\n   */\n  constructor(dispatcher) {\n    const mapping = {\n      'MSPointerDown': msPointerDown,\n      'MSPointerMove': msPointerMove,\n      'MSPointerUp': msPointerUp,\n      'MSPointerOut': msPointerOut,\n      'MSPointerOver': msPointerOver,\n      'MSPointerCancel': msPointerCancel,\n      'MSGotPointerCapture': msGotPointerCapture,\n      'MSLostPointerCapture': msLostPointerCapture\n    };\n    super(dispatcher, mapping);\n\n    /**\n     * @const\n     * @type {!Object<string, MSPointerEvent|Object>}\n     */\n    this.pointerMap = dispatcher.pointerMap;\n  }\n\n  /**\n   * Creates a copy of the original event that will be used\n   * for the fake pointer event.\n   *\n   * @private\n   * @param {MSPointerEvent} inEvent The in event.\n   * @return {Object} The copied event.\n   */\n  prepareEvent_(inEvent) {\n    /** @type {MSPointerEvent|Object} */\n    let e = inEvent;\n    if (typeof inEvent.pointerType === 'number') {\n      e = this.dispatcher.cloneEvent(inEvent, inEvent);\n      e.pointerType = POINTER_TYPES[inEvent.pointerType];\n    }\n\n    return e;\n  }\n\n  /**\n   * Remove this pointer from the list of active pointers.\n   * @param {number} pointerId Pointer identifier.\n   */\n  cleanup(pointerId) {\n    delete this.pointerMap[pointerId.toString()];\n  }\n\n}\n\nexport default MsSource;\n","/**\n * @module ol/pointer/NativeSource\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport EventSource from './EventSource.js';\n\n/**\n * Handler for `pointerdown`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerDown(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointermove`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerMove(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointerup`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerUp(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointerout`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerOut(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointerover`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerOver(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointercancel`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerCancel(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `lostpointercapture`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction lostPointerCapture(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `gotpointercapture`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction gotPointerCapture(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\nclass NativeSource extends EventSource {\n\n  /**\n   * @param {import(\"./PointerEventHandler.js\").default} dispatcher Event handler.\n   */\n  constructor(dispatcher) {\n    const mapping = {\n      'pointerdown': pointerDown,\n      'pointermove': pointerMove,\n      'pointerup': pointerUp,\n      'pointerout': pointerOut,\n      'pointerover': pointerOver,\n      'pointercancel': pointerCancel,\n      'gotpointercapture': gotPointerCapture,\n      'lostpointercapture': lostPointerCapture\n    };\n    super(dispatcher, mapping);\n  }\n\n}\n\nexport default NativeSource;\n","/**\n * @module ol/pointer/PointerEvent\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport _Event from '../events/Event.js';\n\n\n/**\n * Is the `buttons` property supported?\n * @type {boolean}\n */\nlet HAS_BUTTONS = false;\n\n\nclass PointerEvent extends _Event {\n\n  /**\n   * A class for pointer events.\n   *\n   * This class is used as an abstraction for mouse events,\n   * touch events and even native pointer events.\n   *\n   * @param {string} type The type of the event to create.\n   * @param {Event} originalEvent The event.\n   * @param {Object<string, ?>=} opt_eventDict An optional dictionary of\n   *    initial event properties.\n   */\n  constructor(type, originalEvent, opt_eventDict) {\n    super(type);\n\n    /**\n     * @const\n     * @type {Event}\n     */\n    this.originalEvent = originalEvent;\n\n    const eventDict = opt_eventDict ? opt_eventDict : {};\n\n    /**\n     * @type {number}\n     */\n    this.buttons = getButtons(eventDict);\n\n    /**\n     * @type {number}\n     */\n    this.pressure = getPressure(eventDict, this.buttons);\n\n    // MouseEvent related properties\n\n    /**\n     * @type {boolean}\n     */\n    this.bubbles = 'bubbles' in eventDict ? eventDict['bubbles'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.cancelable = 'cancelable' in eventDict ? eventDict['cancelable'] : false;\n\n    /**\n     * @type {Object}\n     */\n    this.view = 'view' in eventDict ? eventDict['view'] : null;\n\n    /**\n     * @type {number}\n     */\n    this.detail = 'detail' in eventDict ? eventDict['detail'] : null;\n\n    /**\n     * @type {number}\n     */\n    this.screenX = 'screenX' in eventDict ? eventDict['screenX'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.screenY = 'screenY' in eventDict ? eventDict['screenY'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.clientX = 'clientX' in eventDict ? eventDict['clientX'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.clientY = 'clientY' in eventDict ? eventDict['clientY'] : 0;\n\n    /**\n     * @type {boolean}\n     */\n    this.ctrlKey = 'ctrlKey' in eventDict ? eventDict['ctrlKey'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.altKey = 'altKey' in eventDict ? eventDict['altKey'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.shiftKey = 'shiftKey' in eventDict ? eventDict['shiftKey'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.metaKey = 'metaKey' in eventDict ? eventDict['metaKey'] : false;\n\n    /**\n     * @type {number}\n     */\n    this.button = 'button' in eventDict ? eventDict['button'] : 0;\n\n    /**\n     * @type {Node}\n     */\n    this.relatedTarget = 'relatedTarget' in eventDict ?\n      eventDict['relatedTarget'] : null;\n\n    // PointerEvent related properties\n\n    /**\n     * @const\n     * @type {number}\n     */\n    this.pointerId = 'pointerId' in eventDict ? eventDict['pointerId'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.width = 'width' in eventDict ? eventDict['width'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.height = 'height' in eventDict ? eventDict['height'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.tiltX = 'tiltX' in eventDict ? eventDict['tiltX'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.tiltY = 'tiltY' in eventDict ? eventDict['tiltY'] : 0;\n\n    /**\n     * @type {string}\n     */\n    this.pointerType = 'pointerType' in eventDict ? eventDict['pointerType'] : '';\n\n    /**\n     * @type {number}\n     */\n    this.hwTimestamp = 'hwTimestamp' in eventDict ? eventDict['hwTimestamp'] : 0;\n\n    /**\n     * @type {boolean}\n     */\n    this.isPrimary = 'isPrimary' in eventDict ? eventDict['isPrimary'] : false;\n\n    // keep the semantics of preventDefault\n    if (originalEvent.preventDefault) {\n      this.preventDefault = function() {\n        originalEvent.preventDefault();\n      };\n    }\n  }\n\n}\n\n\n/**\n * @param {Object<string, ?>} eventDict The event dictionary.\n * @return {number} Button indicator.\n */\nfunction getButtons(eventDict) {\n  // According to the w3c spec,\n  // http://www.w3.org/TR/DOM-Level-3-Events/#events-MouseEvent-button\n  // MouseEvent.button == 0 can mean either no mouse button depressed, or the\n  // left mouse button depressed.\n  //\n  // As of now, the only way to distinguish between the two states of\n  // MouseEvent.button is by using the deprecated MouseEvent.which property, as\n  // this maps mouse buttons to positive integers > 0, and uses 0 to mean that\n  // no mouse button is held.\n  //\n  // MouseEvent.which is derived from MouseEvent.button at MouseEvent creation,\n  // but initMouseEvent does not expose an argument with which to set\n  // MouseEvent.which. Calling initMouseEvent with a buttonArg of 0 will set\n  // MouseEvent.button == 0 and MouseEvent.which == 1, breaking the expectations\n  // of app developers.\n  //\n  // The only way to propagate the correct state of MouseEvent.which and\n  // MouseEvent.button to a new MouseEvent.button == 0 and MouseEvent.which == 0\n  // is to call initMouseEvent with a buttonArg value of -1.\n  //\n  // This is fixed with DOM Level 4's use of buttons\n  let buttons;\n  if (eventDict.buttons || HAS_BUTTONS) {\n    buttons = eventDict.buttons;\n  } else {\n    switch (eventDict.which) {\n      case 1: buttons = 1; break;\n      case 2: buttons = 4; break;\n      case 3: buttons = 2; break;\n      default: buttons = 0;\n    }\n  }\n  return buttons;\n}\n\n\n/**\n * @param {Object<string, ?>} eventDict The event dictionary.\n * @param {number} buttons Button indicator.\n * @return {number} The pressure.\n */\nfunction getPressure(eventDict, buttons) {\n  // Spec requires that pointers without pressure specified use 0.5 for down\n  // state and 0 for up state.\n  let pressure = 0;\n  if (eventDict.pressure) {\n    pressure = eventDict.pressure;\n  } else {\n    pressure = buttons ? 0.5 : 0;\n  }\n  return pressure;\n}\n\n\n/**\n * Checks if the `buttons` property is supported.\n */\n(function() {\n  try {\n    const ev = new MouseEvent('click', {buttons: 1});\n    HAS_BUTTONS = ev.buttons === 1;\n  } catch (e) {\n    // pass\n  }\n})();\n\nexport default PointerEvent;\n","/**\n * @module ol/pointer/TouchSource\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {remove} from '../array.js';\nimport EventSource from './EventSource.js';\nimport {POINTER_ID} from './MouseSource.js';\n\n\n/**\n * @type {number}\n */\nconst CLICK_COUNT_TIMEOUT = 200;\n\n/**\n * @type {string}\n */\nconst POINTER_TYPE = 'touch';\n\n/**\n * Handler for `touchstart`, triggers `pointerover`,\n * `pointerenter` and `pointerdown` events.\n *\n * @this {TouchSource}\n * @param {TouchEvent} inEvent The in event.\n */\nfunction touchstart(inEvent) {\n  this.vacuumTouches_(inEvent);\n  this.setPrimaryTouch_(inEvent.changedTouches[0]);\n  this.dedupSynthMouse_(inEvent);\n  this.clickCount_++;\n  this.processTouches_(inEvent, this.overDown_);\n}\n\n/**\n * Handler for `touchmove`.\n *\n * @this {TouchSource}\n * @param {TouchEvent} inEvent The in event.\n */\nfunction touchmove(inEvent) {\n  this.processTouches_(inEvent, this.moveOverOut_);\n}\n\n/**\n * Handler for `touchend`, triggers `pointerup`,\n * `pointerout` and `pointerleave` events.\n *\n * @this {TouchSource}\n * @param {TouchEvent} inEvent The event.\n */\nfunction touchend(inEvent) {\n  this.dedupSynthMouse_(inEvent);\n  this.processTouches_(inEvent, this.upOut_);\n}\n\n/**\n * Handler for `touchcancel`, triggers `pointercancel`,\n * `pointerout` and `pointerleave` events.\n *\n * @this {TouchSource}\n * @param {TouchEvent} inEvent The in event.\n */\nfunction touchcancel(inEvent) {\n  this.processTouches_(inEvent, this.cancelOut_);\n}\n\n\nclass TouchSource extends EventSource {\n\n  /**\n   * @param {import(\"./PointerEventHandler.js\").default} dispatcher The event handler.\n   * @param {import(\"./MouseSource.js\").default} mouseSource Mouse source.\n   */\n  constructor(dispatcher, mouseSource) {\n    const mapping = {\n      'touchstart': touchstart,\n      'touchmove': touchmove,\n      'touchend': touchend,\n      'touchcancel': touchcancel\n    };\n    super(dispatcher, mapping);\n\n    /**\n     * @const\n     * @type {!Object<string, Event|Object>}\n     */\n    this.pointerMap = dispatcher.pointerMap;\n\n    /**\n     * @const\n     * @type {import(\"./MouseSource.js\").default}\n     */\n    this.mouseSource = mouseSource;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.firstTouchId_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.clickCount_ = 0;\n\n    /**\n     * @private\n     * @type {?}\n     */\n    this.resetId_;\n\n    /**\n     * Mouse event timeout: This should be long enough to\n     * ignore compat mouse events made by touch.\n     * @private\n     * @type {number}\n     */\n    this.dedupTimeout_ = 2500;\n  }\n\n  /**\n   * @private\n   * @param {Touch} inTouch The in touch.\n   * @return {boolean} True, if this is the primary touch.\n   */\n  isPrimaryTouch_(inTouch) {\n    return this.firstTouchId_ === inTouch.identifier;\n  }\n\n  /**\n   * Set primary touch if there are no pointers, or the only pointer is the mouse.\n   * @param {Touch} inTouch The in touch.\n   * @private\n   */\n  setPrimaryTouch_(inTouch) {\n    const count = Object.keys(this.pointerMap).length;\n    if (count === 0 || (count === 1 && POINTER_ID.toString() in this.pointerMap)) {\n      this.firstTouchId_ = inTouch.identifier;\n      this.cancelResetClickCount_();\n    }\n  }\n\n  /**\n   * @private\n   * @param {PointerEvent} inPointer The in pointer object.\n   */\n  removePrimaryPointer_(inPointer) {\n    if (inPointer.isPrimary) {\n      this.firstTouchId_ = undefined;\n      this.resetClickCount_();\n    }\n  }\n\n  /**\n   * @private\n   */\n  resetClickCount_() {\n    this.resetId_ = setTimeout(\n      this.resetClickCountHandler_.bind(this),\n      CLICK_COUNT_TIMEOUT);\n  }\n\n  /**\n   * @private\n   */\n  resetClickCountHandler_() {\n    this.clickCount_ = 0;\n    this.resetId_ = undefined;\n  }\n\n  /**\n   * @private\n   */\n  cancelResetClickCount_() {\n    if (this.resetId_ !== undefined) {\n      clearTimeout(this.resetId_);\n    }\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent Browser event\n   * @param {Touch} inTouch Touch event\n   * @return {PointerEvent} A pointer object.\n   */\n  touchToPointer_(browserEvent, inTouch) {\n    const e = this.dispatcher.cloneEvent(browserEvent, inTouch);\n    // Spec specifies that pointerId 1 is reserved for Mouse.\n    // Touch identifiers can start at 0.\n    // Add 2 to the touch identifier for compatibility.\n    e.pointerId = inTouch.identifier + 2;\n    // TODO: check if this is necessary?\n    //e.target = findTarget(e);\n    e.bubbles = true;\n    e.cancelable = true;\n    e.detail = this.clickCount_;\n    e.button = 0;\n    e.buttons = 1;\n    e.width = inTouch.radiusX || 0;\n    e.height = inTouch.radiusY || 0;\n    e.pressure = inTouch.force || 0.5;\n    e.isPrimary = this.isPrimaryTouch_(inTouch);\n    e.pointerType = POINTER_TYPE;\n\n    // make sure that the properties that are different for\n    // each `Touch` object are not copied from the BrowserEvent object\n    e.clientX = inTouch.clientX;\n    e.clientY = inTouch.clientY;\n    e.screenX = inTouch.screenX;\n    e.screenY = inTouch.screenY;\n\n    return e;\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} inEvent Touch event\n   * @param {function(TouchEvent, PointerEvent)} inFunction In function.\n   */\n  processTouches_(inEvent, inFunction) {\n    const touches = Array.prototype.slice.call(inEvent.changedTouches);\n    const count = touches.length;\n    function preventDefault() {\n      inEvent.preventDefault();\n    }\n    for (let i = 0; i < count; ++i) {\n      const pointer = this.touchToPointer_(inEvent, touches[i]);\n      // forward touch preventDefaults\n      pointer.preventDefault = preventDefault;\n      inFunction.call(this, inEvent, pointer);\n    }\n  }\n\n  /**\n   * @private\n   * @param {TouchList} touchList The touch list.\n   * @param {number} searchId Search identifier.\n   * @return {boolean} True, if the `Touch` with the given id is in the list.\n   */\n  findTouch_(touchList, searchId) {\n    const l = touchList.length;\n    for (let i = 0; i < l; i++) {\n      const touch = touchList[i];\n      if (touch.identifier === searchId) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * In some instances, a touchstart can happen without a touchend. This\n   * leaves the pointermap in a broken state.\n   * Therefore, on every touchstart, we remove the touches that did not fire a\n   * touchend event.\n   * To keep state globally consistent, we fire a pointercancel for\n   * this \"abandoned\" touch\n   *\n   * @private\n   * @param {TouchEvent} inEvent The in event.\n   */\n  vacuumTouches_(inEvent) {\n    const touchList = inEvent.touches;\n    // pointerMap.getCount() should be < touchList.length here,\n    // as the touchstart has not been processed yet.\n    const keys = Object.keys(this.pointerMap);\n    const count = keys.length;\n    if (count >= touchList.length) {\n      const d = [];\n      for (let i = 0; i < count; ++i) {\n        const key = Number(keys[i]);\n        const value = this.pointerMap[key];\n        // Never remove pointerId == 1, which is mouse.\n        // Touch identifiers are 2 smaller than their pointerId, which is the\n        // index in pointermap.\n        if (key != POINTER_ID && !this.findTouch_(touchList, key - 2)) {\n          d.push(value.out);\n        }\n      }\n      for (let i = 0; i < d.length; ++i) {\n        this.cancelOut_(inEvent, d[i]);\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent The event.\n   * @param {PointerEvent} inPointer The in pointer object.\n   */\n  overDown_(browserEvent, inPointer) {\n    this.pointerMap[inPointer.pointerId] = {\n      target: inPointer.target,\n      out: inPointer,\n      outTarget: inPointer.target\n    };\n    this.dispatcher.over(inPointer, browserEvent);\n    this.dispatcher.enter(inPointer, browserEvent);\n    this.dispatcher.down(inPointer, browserEvent);\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent The event.\n   * @param {PointerEvent} inPointer The in pointer.\n   */\n  moveOverOut_(browserEvent, inPointer) {\n    const event = inPointer;\n    const pointer = this.pointerMap[event.pointerId];\n    // a finger drifted off the screen, ignore it\n    if (!pointer) {\n      return;\n    }\n    const outEvent = pointer.out;\n    const outTarget = pointer.outTarget;\n    this.dispatcher.move(event, browserEvent);\n    if (outEvent && outTarget !== event.target) {\n      outEvent.relatedTarget = event.target;\n      /** @type {Object} */ (event).relatedTarget = outTarget;\n      // recover from retargeting by shadow\n      outEvent.target = outTarget;\n      if (event.target) {\n        this.dispatcher.leaveOut(outEvent, browserEvent);\n        this.dispatcher.enterOver(event, browserEvent);\n      } else {\n        // clean up case when finger leaves the screen\n        /** @type {Object} */ (event).target = outTarget;\n        /** @type {Object} */ (event).relatedTarget = null;\n        this.cancelOut_(browserEvent, event);\n      }\n    }\n    pointer.out = event;\n    pointer.outTarget = event.target;\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent An event.\n   * @param {PointerEvent} inPointer The inPointer object.\n   */\n  upOut_(browserEvent, inPointer) {\n    this.dispatcher.up(inPointer, browserEvent);\n    this.dispatcher.out(inPointer, browserEvent);\n    this.dispatcher.leave(inPointer, browserEvent);\n    this.cleanUpPointer_(inPointer);\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent The event.\n   * @param {PointerEvent} inPointer The in pointer.\n   */\n  cancelOut_(browserEvent, inPointer) {\n    this.dispatcher.cancel(inPointer, browserEvent);\n    this.dispatcher.out(inPointer, browserEvent);\n    this.dispatcher.leave(inPointer, browserEvent);\n    this.cleanUpPointer_(inPointer);\n  }\n\n  /**\n   * @private\n   * @param {PointerEvent} inPointer The inPointer object.\n   */\n  cleanUpPointer_(inPointer) {\n    delete this.pointerMap[inPointer.pointerId];\n    this.removePrimaryPointer_(inPointer);\n  }\n\n  /**\n   * Prevent synth mouse events from creating pointer events.\n   *\n   * @private\n   * @param {TouchEvent} inEvent The in event.\n   */\n  dedupSynthMouse_(inEvent) {\n    const lts = this.mouseSource.lastTouches;\n    const t = inEvent.changedTouches[0];\n    // only the primary finger will synth mouse events\n    if (this.isPrimaryTouch_(t)) {\n      // remember x/y of last touch\n      const lt = [t.clientX, t.clientY];\n      lts.push(lt);\n\n      setTimeout(function() {\n        // remove touch after timeout\n        remove(lts, lt);\n      }, this.dedupTimeout_);\n    }\n  }\n}\n\nexport default TouchSource;\n","/**\n * @module ol/pointer/PointerEventHandler\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {listen, unlisten} from '../events.js';\nimport EventTarget from '../events/Target.js';\nimport {POINTER, MSPOINTER, TOUCH} from '../has.js';\nimport PointerEventType from './EventType.js';\nimport MouseSource, {prepareEvent as prepareMouseEvent} from './MouseSource.js';\nimport MsSource from './MsSource.js';\nimport NativeSource from './NativeSource.js';\nimport PointerEvent from './PointerEvent.js';\nimport TouchSource from './TouchSource.js';\n\n\n/**\n * Properties to copy when cloning an event, with default values.\n * @type {Array<Array>}\n */\nconst CLONE_PROPS = [\n  // MouseEvent\n  ['bubbles', false],\n  ['cancelable', false],\n  ['view', null],\n  ['detail', null],\n  ['screenX', 0],\n  ['screenY', 0],\n  ['clientX', 0],\n  ['clientY', 0],\n  ['ctrlKey', false],\n  ['altKey', false],\n  ['shiftKey', false],\n  ['metaKey', false],\n  ['button', 0],\n  ['relatedTarget', null],\n  // DOM Level 3\n  ['buttons', 0],\n  // PointerEvent\n  ['pointerId', 0],\n  ['width', 0],\n  ['height', 0],\n  ['pressure', 0],\n  ['tiltX', 0],\n  ['tiltY', 0],\n  ['pointerType', ''],\n  ['hwTimestamp', 0],\n  ['isPrimary', false],\n  // event instance\n  ['type', ''],\n  ['target', null],\n  ['currentTarget', null],\n  ['which', 0]\n];\n\n\nclass PointerEventHandler extends EventTarget {\n\n  /**\n   * @param {Element|HTMLDocument} element Viewport element.\n   */\n  constructor(element) {\n    super();\n\n    /**\n     * @const\n     * @private\n     * @type {Element|HTMLDocument}\n     */\n    this.element_ = element;\n\n    /**\n     * @const\n     * @type {!Object<string, Event|Object>}\n     */\n    this.pointerMap = {};\n\n    /**\n     * @type {Object<string, function(Event)>}\n     * @private\n     */\n    this.eventMap_ = {};\n\n    /**\n     * @type {Array<import(\"./EventSource.js\").default>}\n     * @private\n     */\n    this.eventSourceList_ = [];\n\n    this.registerSources();\n  }\n\n  /**\n   * Set up the event sources (mouse, touch and native pointers)\n   * that generate pointer events.\n   */\n  registerSources() {\n    if (POINTER) {\n      this.registerSource('native', new NativeSource(this));\n    } else if (MSPOINTER) {\n      this.registerSource('ms', new MsSource(this));\n    } else {\n      const mouseSource = new MouseSource(this);\n      this.registerSource('mouse', mouseSource);\n\n      if (TOUCH) {\n        this.registerSource('touch', new TouchSource(this, mouseSource));\n      }\n    }\n\n    // register events on the viewport element\n    this.register_();\n  }\n\n  /**\n   * Add a new event source that will generate pointer events.\n   *\n   * @param {string} name A name for the event source\n   * @param {import(\"./EventSource.js\").default} source The source event.\n   */\n  registerSource(name, source) {\n    const s = source;\n    const newEvents = s.getEvents();\n\n    if (newEvents) {\n      newEvents.forEach(function(e) {\n        const handler = s.getHandlerForEvent(e);\n\n        if (handler) {\n          this.eventMap_[e] = handler.bind(s);\n        }\n      }.bind(this));\n      this.eventSourceList_.push(s);\n    }\n  }\n\n  /**\n   * Set up the events for all registered event sources.\n   * @private\n   */\n  register_() {\n    const l = this.eventSourceList_.length;\n    for (let i = 0; i < l; i++) {\n      const eventSource = this.eventSourceList_[i];\n      this.addEvents_(eventSource.getEvents());\n    }\n  }\n\n  /**\n   * Remove all registered events.\n   * @private\n   */\n  unregister_() {\n    const l = this.eventSourceList_.length;\n    for (let i = 0; i < l; i++) {\n      const eventSource = this.eventSourceList_[i];\n      this.removeEvents_(eventSource.getEvents());\n    }\n  }\n\n  /**\n   * Calls the right handler for a new event.\n   * @private\n   * @param {Event} inEvent Browser event.\n   */\n  eventHandler_(inEvent) {\n    const type = inEvent.type;\n    const handler = this.eventMap_[type];\n    if (handler) {\n      handler(inEvent);\n    }\n  }\n\n  /**\n   * Setup listeners for the given events.\n   * @private\n   * @param {Array<string>} events List of events.\n   */\n  addEvents_(events) {\n    events.forEach(function(eventName) {\n      listen(this.element_, eventName, this.eventHandler_, this);\n    }.bind(this));\n  }\n\n  /**\n   * Unregister listeners for the given events.\n   * @private\n   * @param {Array<string>} events List of events.\n   */\n  removeEvents_(events) {\n    events.forEach(function(e) {\n      unlisten(this.element_, e, this.eventHandler_, this);\n    }.bind(this));\n  }\n\n  /**\n   * Returns a snapshot of inEvent, with writable properties.\n   *\n   * @param {Event} event Browser event.\n   * @param {Event|Touch} inEvent An event that contains\n   *    properties to copy.\n   * @return {Object} An object containing shallow copies of\n   *    `inEvent`'s properties.\n   */\n  cloneEvent(event, inEvent) {\n    const eventCopy = {};\n    for (let i = 0, ii = CLONE_PROPS.length; i < ii; i++) {\n      const p = CLONE_PROPS[i][0];\n      eventCopy[p] = event[p] || inEvent[p] || CLONE_PROPS[i][1];\n    }\n\n    return eventCopy;\n  }\n\n  // EVENTS\n\n\n  /**\n   * Triggers a 'pointerdown' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  down(data, event) {\n    this.fireEvent(PointerEventType.POINTERDOWN, data, event);\n  }\n\n  /**\n   * Triggers a 'pointermove' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  move(data, event) {\n    this.fireEvent(PointerEventType.POINTERMOVE, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerup' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  up(data, event) {\n    this.fireEvent(PointerEventType.POINTERUP, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerenter' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  enter(data, event) {\n    data.bubbles = false;\n    this.fireEvent(PointerEventType.POINTERENTER, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerleave' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  leave(data, event) {\n    data.bubbles = false;\n    this.fireEvent(PointerEventType.POINTERLEAVE, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerover' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  over(data, event) {\n    data.bubbles = true;\n    this.fireEvent(PointerEventType.POINTEROVER, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerout' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  out(data, event) {\n    data.bubbles = true;\n    this.fireEvent(PointerEventType.POINTEROUT, data, event);\n  }\n\n  /**\n   * Triggers a 'pointercancel' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  cancel(data, event) {\n    this.fireEvent(PointerEventType.POINTERCANCEL, data, event);\n  }\n\n  /**\n   * Triggers a combination of 'pointerout' and 'pointerleave' events.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  leaveOut(data, event) {\n    this.out(data, event);\n    if (!this.contains_(data.target, data.relatedTarget)) {\n      this.leave(data, event);\n    }\n  }\n\n  /**\n   * Triggers a combination of 'pointerover' and 'pointerevents' events.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  enterOver(data, event) {\n    this.over(data, event);\n    if (!this.contains_(data.target, data.relatedTarget)) {\n      this.enter(data, event);\n    }\n  }\n\n  /**\n   * @private\n   * @param {Element} container The container element.\n   * @param {Element} contained The contained element.\n   * @return {boolean} Returns true if the container element\n   *   contains the other element.\n   */\n  contains_(container, contained) {\n    if (!container || !contained) {\n      return false;\n    }\n    return container.contains(contained);\n  }\n\n  // EVENT CREATION AND TRACKING\n  /**\n   * Creates a new Event of type `inType`, based on the information in\n   * `data`.\n   *\n   * @param {string} inType A string representing the type of event to create.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   * @return {PointerEvent} A PointerEvent of type `inType`.\n   */\n  makeEvent(inType, data, event) {\n    return new PointerEvent(inType, event, data);\n  }\n\n  /**\n   * Make and dispatch an event in one call.\n   * @param {string} inType A string representing the type of event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  fireEvent(inType, data, event) {\n    const e = this.makeEvent(inType, data, event);\n    this.dispatchEvent(e);\n  }\n\n  /**\n   * Creates a pointer event from a native pointer event\n   * and dispatches this event.\n   * @param {Event} event A platform event with a target.\n   */\n  fireNativeEvent(event) {\n    const e = this.makeEvent(event.type, event, event);\n    this.dispatchEvent(e);\n  }\n\n  /**\n   * Wrap a native mouse event into a pointer event.\n   * This proxy method is required for the legacy IE support.\n   * @param {string} eventType The pointer event type.\n   * @param {Event} event The event.\n   * @return {PointerEvent} The wrapped event.\n   */\n  wrapMouseEvent(eventType, event) {\n    const pointerEvent = this.makeEvent(\n      eventType, prepareMouseEvent(event, this), event);\n    return pointerEvent;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.unregister_();\n    super.disposeInternal();\n  }\n}\n\nexport default PointerEventHandler;\n","/**\n * @module ol/MapBrowserEventHandler\n */\nimport {DEVICE_PIXEL_RATIO} from './has.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapBrowserPointerEvent from './MapBrowserPointerEvent.js';\nimport {listen, unlistenByKey} from './events.js';\nimport EventTarget from './events/Target.js';\nimport PointerEventType from './pointer/EventType.js';\nimport PointerEventHandler from './pointer/PointerEventHandler.js';\n\nclass MapBrowserEventHandler extends EventTarget {\n\n  /**\n   * @param {import(\"./PluggableMap.js\").default} map The map with the viewport to listen to events on.\n   * @param {number=} moveTolerance The minimal distance the pointer must travel to trigger a move.\n   */\n  constructor(map, moveTolerance) {\n\n    super();\n\n    /**\n     * This is the element that we will listen to the real events on.\n     * @type {import(\"./PluggableMap.js\").default}\n     * @private\n     */\n    this.map_ = map;\n\n    /**\n     * @type {any}\n     * @private\n     */\n    this.clickTimeoutId_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.dragging_ = false;\n\n    /**\n     * @type {!Array<import(\"./events.js\").EventsKey>}\n     * @private\n     */\n    this.dragListenerKeys_ = [];\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.moveTolerance_ = moveTolerance ?\n      moveTolerance * DEVICE_PIXEL_RATIO : DEVICE_PIXEL_RATIO;\n\n    /**\n     * The most recent \"down\" type event (or null if none have occurred).\n     * Set on pointerdown.\n     * @type {import(\"./pointer/PointerEvent.js\").default}\n     * @private\n     */\n    this.down_ = null;\n\n    const element = this.map_.getViewport();\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.activePointers_ = 0;\n\n    /**\n     * @type {!Object<number, boolean>}\n     * @private\n     */\n    this.trackedTouches_ = {};\n\n    /**\n     * Event handler which generates pointer events for\n     * the viewport element.\n     *\n     * @type {PointerEventHandler}\n     * @private\n     */\n    this.pointerEventHandler_ = new PointerEventHandler(element);\n\n    /**\n     * Event handler which generates pointer events for\n     * the document (used when dragging).\n     *\n     * @type {PointerEventHandler}\n     * @private\n     */\n    this.documentPointerEventHandler_ = null;\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.pointerdownListenerKey_ = listen(this.pointerEventHandler_,\n      PointerEventType.POINTERDOWN,\n      this.handlePointerDown_, this);\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.relayedListenerKey_ = listen(this.pointerEventHandler_,\n      PointerEventType.POINTERMOVE,\n      this.relayEvent_, this);\n\n  }\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  emulateClick_(pointerEvent) {\n    let newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.CLICK, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n    if (this.clickTimeoutId_ !== undefined) {\n      // double-click\n      clearTimeout(this.clickTimeoutId_);\n      this.clickTimeoutId_ = undefined;\n      newEvent = new MapBrowserPointerEvent(\n        MapBrowserEventType.DBLCLICK, this.map_, pointerEvent);\n      this.dispatchEvent(newEvent);\n    } else {\n      // click\n      this.clickTimeoutId_ = setTimeout(function() {\n        this.clickTimeoutId_ = undefined;\n        const newEvent = new MapBrowserPointerEvent(\n          MapBrowserEventType.SINGLECLICK, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n      }.bind(this), 250);\n    }\n  }\n\n  /**\n   * Keeps track on how many pointers are currently active.\n   *\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  updateActivePointers_(pointerEvent) {\n    const event = pointerEvent;\n\n    if (event.type == MapBrowserEventType.POINTERUP ||\n        event.type == MapBrowserEventType.POINTERCANCEL) {\n      delete this.trackedTouches_[event.pointerId];\n    } else if (event.type == MapBrowserEventType.POINTERDOWN) {\n      this.trackedTouches_[event.pointerId] = true;\n    }\n    this.activePointers_ = Object.keys(this.trackedTouches_).length;\n  }\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerUp_(pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.POINTERUP, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n\n    // We emulate click events on left mouse button click, touch contact, and pen\n    // contact. isMouseActionButton returns true in these cases (evt.button is set\n    // to 0).\n    // See http://www.w3.org/TR/pointerevents/#button-states\n    // We only fire click, singleclick, and doubleclick if nobody has called\n    // event.stopPropagation() or event.preventDefault().\n    if (!newEvent.propagationStopped && !this.dragging_ && this.isMouseActionButton_(pointerEvent)) {\n      this.emulateClick_(this.down_);\n    }\n\n    if (this.activePointers_ === 0) {\n      this.dragListenerKeys_.forEach(unlistenByKey);\n      this.dragListenerKeys_.length = 0;\n      this.dragging_ = false;\n      this.down_ = null;\n      this.documentPointerEventHandler_.dispose();\n      this.documentPointerEventHandler_ = null;\n    }\n  }\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @return {boolean} If the left mouse button was pressed.\n   * @private\n   */\n  isMouseActionButton_(pointerEvent) {\n    return pointerEvent.button === 0;\n  }\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerDown_(pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.POINTERDOWN, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n\n    this.down_ = pointerEvent;\n\n    if (this.dragListenerKeys_.length === 0) {\n      /* Set up a pointer event handler on the `document`,\n       * which is required when the pointer is moved outside\n       * the viewport when dragging.\n       */\n      this.documentPointerEventHandler_ =\n          new PointerEventHandler(document);\n\n      this.dragListenerKeys_.push(\n        listen(this.documentPointerEventHandler_,\n          MapBrowserEventType.POINTERMOVE,\n          this.handlePointerMove_, this),\n        listen(this.documentPointerEventHandler_,\n          MapBrowserEventType.POINTERUP,\n          this.handlePointerUp_, this),\n        /* Note that the listener for `pointercancel is set up on\n         * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n         * the `pointerup` and `pointermove` listeners.\n         *\n         * The reason for this is the following: `TouchSource.vacuumTouches_()`\n         * issues `pointercancel` events, when there was no `touchend` for a\n         * `touchstart`. Now, let's say a first `touchstart` is registered on\n         * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n         * But `documentPointerEventHandler_` doesn't know about the first\n         * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n         * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n         * only registered there.\n         */\n        listen(this.pointerEventHandler_,\n          MapBrowserEventType.POINTERCANCEL,\n          this.handlePointerUp_, this)\n      );\n    }\n  }\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerMove_(pointerEvent) {\n    // Between pointerdown and pointerup, pointermove events are triggered.\n    // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n    // moved a significant distance.\n    if (this.isMoving_(pointerEvent)) {\n      this.dragging_ = true;\n      const newEvent = new MapBrowserPointerEvent(\n        MapBrowserEventType.POINTERDRAG, this.map_, pointerEvent,\n        this.dragging_);\n      this.dispatchEvent(newEvent);\n    }\n\n    // Some native android browser triggers mousemove events during small period\n    // of time. See: https://code.google.com/p/android/issues/detail?id=5491 or\n    // https://code.google.com/p/android/issues/detail?id=19827\n    // ex: Galaxy Tab P3110 + Android 4.1.1\n    pointerEvent.preventDefault();\n  }\n\n  /**\n   * Wrap and relay a pointer event.  Note that this requires that the type\n   * string for the MapBrowserPointerEvent matches the PointerEvent type.\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  relayEvent_(pointerEvent) {\n    const dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n    this.dispatchEvent(new MapBrowserPointerEvent(\n      pointerEvent.type, this.map_, pointerEvent, dragging));\n  }\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @return {boolean} Is moving.\n   * @private\n   */\n  isMoving_(pointerEvent) {\n    return this.dragging_ ||\n        Math.abs(pointerEvent.clientX - this.down_.clientX) > this.moveTolerance_ ||\n        Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.relayedListenerKey_) {\n      unlistenByKey(this.relayedListenerKey_);\n      this.relayedListenerKey_ = null;\n    }\n    if (this.pointerdownListenerKey_) {\n      unlistenByKey(this.pointerdownListenerKey_);\n      this.pointerdownListenerKey_ = null;\n    }\n\n    this.dragListenerKeys_.forEach(unlistenByKey);\n    this.dragListenerKeys_.length = 0;\n\n    if (this.documentPointerEventHandler_) {\n      this.documentPointerEventHandler_.dispose();\n      this.documentPointerEventHandler_ = null;\n    }\n    if (this.pointerEventHandler_) {\n      this.pointerEventHandler_.dispose();\n      this.pointerEventHandler_ = null;\n    }\n    super.disposeInternal();\n  }\n}\n\n\nexport default MapBrowserEventHandler;\n","/**\n * @module ol/MapProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  LAYERGROUP: 'layergroup',\n  SIZE: 'size',\n  TARGET: 'target',\n  VIEW: 'view'\n};\n","/**\n * @module ol/structs/PriorityQueue\n */\nimport {assert} from '../asserts.js';\nimport {clear} from '../obj.js';\n\n\n/**\n * @type {number}\n */\nexport const DROP = Infinity;\n\n\n/**\n * @classdesc\n * Priority queue.\n *\n * The implementation is inspired from the Closure Library's Heap class and\n * Python's heapq module.\n *\n * See http://closure-library.googlecode.com/svn/docs/closure_goog_structs_heap.js.source.html\n * and http://hg.python.org/cpython/file/2.7/Lib/heapq.py.\n *\n * @template T\n */\nclass PriorityQueue {\n\n  /**\n   * @param {function(T): number} priorityFunction Priority function.\n   * @param {function(T): string} keyFunction Key function.\n   */\n  constructor(priorityFunction, keyFunction) {\n\n    /**\n     * @type {function(T): number}\n     * @private\n     */\n    this.priorityFunction_ = priorityFunction;\n\n    /**\n     * @type {function(T): string}\n     * @private\n     */\n    this.keyFunction_ = keyFunction;\n\n    /**\n     * @type {Array<T>}\n     * @private\n     */\n    this.elements_ = [];\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.priorities_ = [];\n\n    /**\n     * @type {!Object<string, boolean>}\n     * @private\n     */\n    this.queuedElements_ = {};\n\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  clear() {\n    this.elements_.length = 0;\n    this.priorities_.length = 0;\n    clear(this.queuedElements_);\n  }\n\n\n  /**\n   * Remove and return the highest-priority element. O(log N).\n   * @return {T} Element.\n   */\n  dequeue() {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const element = elements[0];\n    if (elements.length == 1) {\n      elements.length = 0;\n      priorities.length = 0;\n    } else {\n      elements[0] = elements.pop();\n      priorities[0] = priorities.pop();\n      this.siftUp_(0);\n    }\n    const elementKey = this.keyFunction_(element);\n    delete this.queuedElements_[elementKey];\n    return element;\n  }\n\n\n  /**\n   * Enqueue an element. O(log N).\n   * @param {T} element Element.\n   * @return {boolean} The element was added to the queue.\n   */\n  enqueue(element) {\n    assert(!(this.keyFunction_(element) in this.queuedElements_),\n      31); // Tried to enqueue an `element` that was already added to the queue\n    const priority = this.priorityFunction_(element);\n    if (priority != DROP) {\n      this.elements_.push(element);\n      this.priorities_.push(priority);\n      this.queuedElements_[this.keyFunction_(element)] = true;\n      this.siftDown_(0, this.elements_.length - 1);\n      return true;\n    }\n    return false;\n  }\n\n\n  /**\n   * @return {number} Count.\n   */\n  getCount() {\n    return this.elements_.length;\n  }\n\n\n  /**\n   * Gets the index of the left child of the node at the given index.\n   * @param {number} index The index of the node to get the left child for.\n   * @return {number} The index of the left child.\n   * @private\n   */\n  getLeftChildIndex_(index) {\n    return index * 2 + 1;\n  }\n\n\n  /**\n   * Gets the index of the right child of the node at the given index.\n   * @param {number} index The index of the node to get the right child for.\n   * @return {number} The index of the right child.\n   * @private\n   */\n  getRightChildIndex_(index) {\n    return index * 2 + 2;\n  }\n\n\n  /**\n   * Gets the index of the parent of the node at the given index.\n   * @param {number} index The index of the node to get the parent for.\n   * @return {number} The index of the parent.\n   * @private\n   */\n  getParentIndex_(index) {\n    return (index - 1) >> 1;\n  }\n\n\n  /**\n   * Make this a heap. O(N).\n   * @private\n   */\n  heapify_() {\n    let i;\n    for (i = (this.elements_.length >> 1) - 1; i >= 0; i--) {\n      this.siftUp_(i);\n    }\n  }\n\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return this.elements_.length === 0;\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @return {boolean} Is key queued.\n   */\n  isKeyQueued(key) {\n    return key in this.queuedElements_;\n  }\n\n\n  /**\n   * @param {T} element Element.\n   * @return {boolean} Is queued.\n   */\n  isQueued(element) {\n    return this.isKeyQueued(this.keyFunction_(element));\n  }\n\n\n  /**\n   * @param {number} index The index of the node to move down.\n   * @private\n   */\n  siftUp_(index) {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const count = elements.length;\n    const element = elements[index];\n    const priority = priorities[index];\n    const startIndex = index;\n\n    while (index < (count >> 1)) {\n      const lIndex = this.getLeftChildIndex_(index);\n      const rIndex = this.getRightChildIndex_(index);\n\n      const smallerChildIndex = rIndex < count &&\n          priorities[rIndex] < priorities[lIndex] ?\n        rIndex : lIndex;\n\n      elements[index] = elements[smallerChildIndex];\n      priorities[index] = priorities[smallerChildIndex];\n      index = smallerChildIndex;\n    }\n\n    elements[index] = element;\n    priorities[index] = priority;\n    this.siftDown_(startIndex, index);\n  }\n\n\n  /**\n   * @param {number} startIndex The index of the root.\n   * @param {number} index The index of the node to move up.\n   * @private\n   */\n  siftDown_(startIndex, index) {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const element = elements[index];\n    const priority = priorities[index];\n\n    while (index > startIndex) {\n      const parentIndex = this.getParentIndex_(index);\n      if (priorities[parentIndex] > priority) {\n        elements[index] = elements[parentIndex];\n        priorities[index] = priorities[parentIndex];\n        index = parentIndex;\n      } else {\n        break;\n      }\n    }\n    elements[index] = element;\n    priorities[index] = priority;\n  }\n\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  reprioritize() {\n    const priorityFunction = this.priorityFunction_;\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    let index = 0;\n    const n = elements.length;\n    let element, i, priority;\n    for (i = 0; i < n; ++i) {\n      element = elements[i];\n      priority = priorityFunction(element);\n      if (priority == DROP) {\n        delete this.queuedElements_[this.keyFunction_(element)];\n      } else {\n        priorities[index] = priority;\n        elements[index++] = element;\n      }\n    }\n    elements.length = index;\n    priorities.length = index;\n    this.heapify_();\n  }\n\n}\n\n\nexport default PriorityQueue;\n","/**\n * @module ol/TileQueue\n */\nimport TileState from './TileState.js';\nimport {listen, unlisten} from './events.js';\nimport EventType from './events/EventType.js';\nimport PriorityQueue from './structs/PriorityQueue.js';\n\n\n/**\n * @typedef {function(import(\"./Tile.js\").default, string, import(\"./coordinate.js\").Coordinate, number): number} PriorityFunction\n */\n\n\nclass TileQueue extends PriorityQueue {\n\n  /**\n   * @param {PriorityFunction} tilePriorityFunction Tile priority function.\n   * @param {function(): ?} tileChangeCallback Function called on each tile change event.\n   */\n  constructor(tilePriorityFunction, tileChangeCallback) {\n\n    super(\n      /**\n       * @param {Array} element Element.\n       * @return {number} Priority.\n       */\n      function(element) {\n        return tilePriorityFunction.apply(null, element);\n      },\n      /**\n       * @param {Array} element Element.\n       * @return {string} Key.\n       */\n      function(element) {\n        return (/** @type {import(\"./Tile.js\").default} */ (element[0]).getKey());\n      });\n\n    /**\n     * @private\n     * @type {function(): ?}\n     */\n    this.tileChangeCallback_ = tileChangeCallback;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tilesLoading_ = 0;\n\n    /**\n     * @private\n     * @type {!Object<string,boolean>}\n     */\n    this.tilesLoadingKeys_ = {};\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  enqueue(element) {\n    const added = super.enqueue(element);\n    if (added) {\n      const tile = element[0];\n      listen(tile, EventType.CHANGE, this.handleTileChange, this);\n    }\n    return added;\n  }\n\n  /**\n   * @return {number} Number of tiles loading.\n   */\n  getTilesLoading() {\n    return this.tilesLoading_;\n  }\n\n  /**\n   * @param {import(\"./events/Event.js\").default} event Event.\n   * @protected\n   */\n  handleTileChange(event) {\n    const tile = /** @type {import(\"./Tile.js\").default} */ (event.target);\n    const state = tile.getState();\n    if (state === TileState.LOADED || state === TileState.ERROR ||\n        state === TileState.EMPTY || state === TileState.ABORT) {\n      unlisten(tile, EventType.CHANGE, this.handleTileChange, this);\n      const tileKey = tile.getKey();\n      if (tileKey in this.tilesLoadingKeys_) {\n        delete this.tilesLoadingKeys_[tileKey];\n        --this.tilesLoading_;\n      }\n      this.tileChangeCallback_();\n    }\n  }\n\n  /**\n   * @param {number} maxTotalLoading Maximum number tiles to load simultaneously.\n   * @param {number} maxNewLoads Maximum number of new tiles to load.\n   */\n  loadMoreTiles(maxTotalLoading, maxNewLoads) {\n    let newLoads = 0;\n    let abortedTiles = false;\n    let state, tile, tileKey;\n    while (this.tilesLoading_ < maxTotalLoading && newLoads < maxNewLoads &&\n           this.getCount() > 0) {\n      tile = /** @type {import(\"./Tile.js\").default} */ (this.dequeue()[0]);\n      tileKey = tile.getKey();\n      state = tile.getState();\n      if (state === TileState.ABORT) {\n        abortedTiles = true;\n      } else if (state === TileState.IDLE && !(tileKey in this.tilesLoadingKeys_)) {\n        this.tilesLoadingKeys_[tileKey] = true;\n        ++this.tilesLoading_;\n        ++newLoads;\n        tile.load();\n      }\n    }\n    if (newLoads === 0 && abortedTiles) {\n      // Do not stop the render loop when all wanted tiles were aborted due to\n      // a small, saturated tile cache.\n      this.tileChangeCallback_();\n    }\n  }\n}\n\n\nexport default TileQueue;\n","/**\n * @module ol/PluggableMap\n */\nimport {getUid} from './util.js';\nimport Collection from './Collection.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventHandler from './MapBrowserEventHandler.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapEvent from './MapEvent.js';\nimport MapEventType from './MapEventType.js';\nimport MapProperty from './MapProperty.js';\nimport RenderEventType from './render/EventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport TileQueue from './TileQueue.js';\nimport View from './View.js';\nimport ViewHint from './ViewHint.js';\nimport {assert} from './asserts.js';\nimport {removeNode} from './dom.js';\nimport {listen, unlistenByKey, unlisten} from './events.js';\nimport {stopPropagation} from './events/Event.js';\nimport EventType from './events/EventType.js';\nimport {createEmpty, clone, createOrUpdateEmpty, equals, getForViewAndSize, isEmpty} from './extent.js';\nimport {TRUE} from './functions.js';\nimport {DEVICE_PIXEL_RATIO, TOUCH} from './has.js';\nimport LayerGroup from './layer/Group.js';\nimport {hasArea} from './size.js';\nimport {DROP} from './structs/PriorityQueue.js';\nimport {create as createTransform, apply as applyTransform} from './transform.js';\n\n\n/**\n * State of the current frame. Only `pixelRatio`, `time` and `viewState` should\n * be used in applications.\n * @typedef {Object} FrameState\n * @property {number} pixelRatio The pixel ratio of the frame.\n * @property {number} time The time when rendering of the frame was requested.\n * @property {import(\"./View.js\").State} viewState The state of the current view.\n * @property {boolean} animate\n * @property {import(\"./transform.js\").Transform} coordinateToPixelTransform\n * @property {null|import(\"./extent.js\").Extent} extent\n * @property {import(\"./coordinate.js\").Coordinate} focus\n * @property {number} index\n * @property {Object<string, import(\"./layer/Layer.js\").State>} layerStates\n * @property {Array<import(\"./layer/Layer.js\").State>} layerStatesArray\n * @property {import(\"./transform.js\").Transform} pixelToCoordinateTransform\n * @property {Array<PostRenderFunction>} postRenderFunctions\n * @property {import(\"./size.js\").Size} size\n * @property {!Object<string, boolean>} skippedFeatureUids\n * @property {TileQueue} tileQueue\n * @property {Object<string, Object<string, import(\"./TileRange.js\").default>>} usedTiles\n * @property {Array<number>} viewHints\n * @property {!Object<string, Object<string, boolean>>} wantedTiles\n */\n\n\n/**\n * @typedef {function(PluggableMap, ?FrameState): boolean} PostRenderFunction\n */\n\n\n/**\n * @typedef {Object} AtPixelOptions\n * @property {undefined|function(import(\"./layer/Layer.js\").default): boolean} layerFilter Layer filter\n * function. The filter function will receive one argument, the\n * {@link module:ol/layer/Layer layer-candidate} and it should return a boolean value.\n * Only layers which are visible and for which this function returns `true`\n * will be tested for features. By default, all visible layers will be tested.\n * @property {number} [hitTolerance=0] Hit-detection tolerance in pixels. Pixels\n * inside the radius around the given position will be checked for features. This only\n * works for the canvas renderer and not for WebGL.\n */\n\n\n/**\n * @typedef {Object} MapOptionsInternal\n * @property {Collection<import(\"./control/Control.js\").default>} [controls]\n * @property {Collection<import(\"./interaction/Interaction.js\").default>} [interactions]\n * @property {HTMLElement|Document} keyboardEventTarget\n * @property {Collection<import(\"./Overlay.js\").default>} overlays\n * @property {Object<string, *>} values\n */\n\n\n/**\n * Object literal with config options for the map.\n * @typedef {Object} MapOptions\n * @property {Collection<import(\"./control/Control.js\").default>|Array<import(\"./control/Control.js\").default>} [controls]\n * Controls initially added to the map. If not specified,\n * {@link module:ol/control~defaults} is used.\n * @property {number} [pixelRatio=window.devicePixelRatio] The ratio between\n * physical pixels and device-independent pixels (dips) on the device.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>|Array<import(\"./interaction/Interaction.js\").default>} [interactions]\n * Interactions that are initially added to the map. If not specified,\n * {@link module:ol/interaction~defaults} is used.\n * @property {HTMLElement|Document|string} [keyboardEventTarget] The element to\n * listen to keyboard events on. This determines when the `KeyboardPan` and\n * `KeyboardZoom` interactions trigger. For example, if this option is set to\n * `document` the keyboard interactions will always trigger. If this option is\n * not specified, the element the library listens to keyboard events on is the\n * map target (i.e. the user-provided div for the map). If this is not\n * `document`, the target element needs to be focused for key events to be\n * emitted, requiring that the target element has a `tabindex` attribute.\n * @property {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>|LayerGroup} [layers]\n * Layers. If this is not defined, a map with no layers will be rendered. Note\n * that layers are rendered in the order supplied, so if you want, for example,\n * a vector layer to appear on top of a tile layer, it must come after the tile\n * layer.\n * @property {number} [maxTilesLoading=16] Maximum number tiles to load\n * simultaneously.\n * @property {boolean} [loadTilesWhileAnimating=false] When set to `true`, tiles\n * will be loaded during animations. This may improve the user experience, but\n * can also make animations stutter on devices with slow memory.\n * @property {boolean} [loadTilesWhileInteracting=false] When set to `true`,\n * tiles will be loaded while interacting with the map. This may improve the\n * user experience, but can also make map panning and zooming choppy on devices\n * with slow memory.\n * @property {number} [moveTolerance=1] The minimum distance in pixels the\n * cursor must move to be detected as a map move event instead of a click.\n * Increasing this value can make it easier to click on the map.\n * @property {Collection<import(\"./Overlay.js\").default>|Array<import(\"./Overlay.js\").default>} [overlays]\n * Overlays initially added to the map. By default, no overlays are added.\n * @property {HTMLElement|string} [target] The container for the map, either the\n * element itself or the `id` of the element. If not specified at construction\n * time, {@link module:ol/Map~Map#setTarget} must be called for the map to be\n * rendered.\n * @property {View} [view] The map's view.  No layer sources will be\n * fetched unless this is specified at construction time or through\n * {@link module:ol/Map~Map#setView}.\n */\n\n\n/**\n * @fires import(\"./MapBrowserEvent.js\").MapBrowserEvent\n * @fires import(\"./MapEvent.js\").MapEvent\n * @fires module:ol/render/Event~RenderEvent#postcompose\n * @fires module:ol/render/Event~RenderEvent#precompose\n * @fires module:ol/render/Event~RenderEvent#rendercomplete\n * @api\n */\nclass PluggableMap extends BaseObject {\n\n  /**\n   * @param {MapOptions} options Map options.\n   */\n  constructor(options) {\n\n    super();\n\n    const optionsInternal = createOptionsInternal(options);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxTilesLoading_ = options.maxTilesLoading !== undefined ? options.maxTilesLoading : 16;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.loadTilesWhileAnimating_ =\n        options.loadTilesWhileAnimating !== undefined ?\n          options.loadTilesWhileAnimating : false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.loadTilesWhileInteracting_ =\n        options.loadTilesWhileInteracting !== undefined ?\n          options.loadTilesWhileInteracting : false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = options.pixelRatio !== undefined ?\n      options.pixelRatio : DEVICE_PIXEL_RATIO;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.animationDelayKey_;\n\n    /**\n     * @private\n     */\n    this.animationDelay_ = function() {\n      this.animationDelayKey_ = undefined;\n      this.renderFrame_.call(this, Date.now());\n    }.bind(this);\n\n    /**\n     * @private\n     * @type {import(\"./transform.js\").Transform}\n     */\n    this.coordinateToPixelTransform_ = createTransform();\n\n    /**\n     * @private\n     * @type {import(\"./transform.js\").Transform}\n     */\n    this.pixelToCoordinateTransform_ = createTransform();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.frameIndex_ = 0;\n\n    /**\n     * @private\n     * @type {?FrameState}\n     */\n    this.frameState_ = null;\n\n    /**\n     * The extent at the previous 'moveend' event.\n     * @private\n     * @type {import(\"./extent.js\").Extent}\n     */\n    this.previousExtent_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.viewPropertyListenerKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.viewChangeListenerKey_ = null;\n\n    /**\n     * @private\n     * @type {Array<import(\"./events.js\").EventsKey>}\n     */\n    this.layerGroupPropertyListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.viewport_ = document.createElement('div');\n    this.viewport_.className = 'ol-viewport' + (TOUCH ? ' ol-touch' : '');\n    this.viewport_.style.position = 'relative';\n    this.viewport_.style.overflow = 'hidden';\n    this.viewport_.style.width = '100%';\n    this.viewport_.style.height = '100%';\n    // prevent page zoom on IE >= 10 browsers\n    this.viewport_.style.msTouchAction = 'none';\n    this.viewport_.style.touchAction = 'none';\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.overlayContainer_ = document.createElement('div');\n    this.overlayContainer_.className = 'ol-overlaycontainer';\n    this.viewport_.appendChild(this.overlayContainer_);\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.overlayContainerStopEvent_ = document.createElement('div');\n    this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n    const overlayEvents = [\n      EventType.CLICK,\n      EventType.DBLCLICK,\n      EventType.MOUSEDOWN,\n      EventType.TOUCHSTART,\n      EventType.MSPOINTERDOWN,\n      MapBrowserEventType.POINTERDOWN,\n      EventType.MOUSEWHEEL,\n      EventType.WHEEL\n    ];\n    for (let i = 0, ii = overlayEvents.length; i < ii; ++i) {\n      listen(this.overlayContainerStopEvent_, overlayEvents[i], stopPropagation);\n    }\n    this.viewport_.appendChild(this.overlayContainerStopEvent_);\n\n    /**\n     * @private\n     * @type {MapBrowserEventHandler}\n     */\n    this.mapBrowserEventHandler_ = new MapBrowserEventHandler(this, options.moveTolerance);\n    for (const key in MapBrowserEventType) {\n      listen(this.mapBrowserEventHandler_, MapBrowserEventType[key],\n        this.handleMapBrowserEvent, this);\n    }\n\n    /**\n     * @private\n     * @type {HTMLElement|Document}\n     */\n    this.keyboardEventTarget_ = optionsInternal.keyboardEventTarget;\n\n    /**\n     * @private\n     * @type {Array<import(\"./events.js\").EventsKey>}\n     */\n    this.keyHandlerKeys_ = null;\n\n    listen(this.viewport_, EventType.CONTEXTMENU, this.handleBrowserEvent, this);\n    listen(this.viewport_, EventType.WHEEL, this.handleBrowserEvent, this);\n    listen(this.viewport_, EventType.MOUSEWHEEL, this.handleBrowserEvent, this);\n\n    /**\n     * @type {Collection<import(\"./control/Control.js\").default>}\n     * @protected\n     */\n    this.controls = optionsInternal.controls || new Collection();\n\n    /**\n     * @type {Collection<import(\"./interaction/Interaction.js\").default>}\n     * @protected\n     */\n    this.interactions = optionsInternal.interactions || new Collection();\n\n    /**\n     * @type {Collection<import(\"./Overlay.js\").default>}\n     * @private\n     */\n    this.overlays_ = optionsInternal.overlays;\n\n    /**\n     * A lookup of overlays by id.\n     * @private\n     * @type {Object<string, import(\"./Overlay.js\").default>}\n     */\n    this.overlayIdIndex_ = {};\n\n    /**\n     * @type {import(\"./renderer/Map.js\").default}\n     * @private\n     */\n    this.renderer_ = this.createRenderer();\n\n    /**\n     * @type {function(Event)|undefined}\n     * @private\n     */\n    this.handleResize_;\n\n    /**\n     * @private\n     * @type {import(\"./coordinate.js\").Coordinate}\n     */\n    this.focus_ = null;\n\n    /**\n     * @private\n     * @type {!Array<PostRenderFunction>}\n     */\n    this.postRenderFunctions_ = [];\n\n    /**\n     * @private\n     * @type {TileQueue}\n     */\n    this.tileQueue_ = new TileQueue(\n      this.getTilePriority.bind(this),\n      this.handleTileChange_.bind(this));\n\n    /**\n     * Uids of features to skip at rendering time.\n     * @type {Object<string, boolean>}\n     * @private\n     */\n    this.skippedFeatureUids_ = {};\n\n    listen(\n      this, getChangeEventType(MapProperty.LAYERGROUP),\n      this.handleLayerGroupChanged_, this);\n    listen(this, getChangeEventType(MapProperty.VIEW),\n      this.handleViewChanged_, this);\n    listen(this, getChangeEventType(MapProperty.SIZE),\n      this.handleSizeChanged_, this);\n    listen(this, getChangeEventType(MapProperty.TARGET),\n      this.handleTargetChanged_, this);\n\n    // setProperties will trigger the rendering of the map if the map\n    // is \"defined\" already.\n    this.setProperties(optionsInternal.values);\n\n    this.controls.forEach(\n      /**\n       * @param {import(\"./control/Control.js\").default} control Control.\n       * @this {PluggableMap}\n       */\n      (function(control) {\n        control.setMap(this);\n      }).bind(this));\n\n    listen(this.controls, CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(this);\n      }, this);\n\n    listen(this.controls, CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(null);\n      }, this);\n\n    this.interactions.forEach(\n      /**\n       * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction.\n       * @this {PluggableMap}\n       */\n      (function(interaction) {\n        interaction.setMap(this);\n      }).bind(this));\n\n    listen(this.interactions, CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(this);\n      }, this);\n\n    listen(this.interactions, CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(null);\n      }, this);\n\n    this.overlays_.forEach(this.addOverlayInternal_.bind(this));\n\n    listen(this.overlays_, CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        this.addOverlayInternal_(/** @type {import(\"./Overlay.js\").default} */ (event.element));\n      }, this);\n\n    listen(this.overlays_, CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        const overlay = /** @type {import(\"./Overlay.js\").default} */ (event.element);\n        const id = overlay.getId();\n        if (id !== undefined) {\n          delete this.overlayIdIndex_[id.toString()];\n        }\n        event.element.setMap(null);\n      }, this);\n\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"./renderer/Map.js\").default} The map renderer\n   */\n  createRenderer() {\n    throw new Error('Use a map type that has a createRenderer method');\n  }\n\n  /**\n   * Add the given control to the map.\n   * @param {import(\"./control/Control.js\").default} control Control.\n   * @api\n   */\n  addControl(control) {\n    this.getControls().push(control);\n  }\n\n  /**\n   * Add the given interaction to the map.\n   * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to add.\n   * @api\n   */\n  addInteraction(interaction) {\n    this.getInteractions().push(interaction);\n  }\n\n  /**\n   * Adds the given layer to the top of this map. If you want to add a layer\n   * elsewhere in the stack, use `getLayers()` and the methods available on\n   * {@link module:ol/Collection~Collection}.\n   * @param {import(\"./layer/Base.js\").default} layer Layer.\n   * @api\n   */\n  addLayer(layer) {\n    const layers = this.getLayerGroup().getLayers();\n    layers.push(layer);\n  }\n\n  /**\n   * Add the given overlay to the map.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @api\n   */\n  addOverlay(overlay) {\n    this.getOverlays().push(overlay);\n  }\n\n  /**\n   * This deals with map's overlay collection changes.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @private\n   */\n  addOverlayInternal_(overlay) {\n    const id = overlay.getId();\n    if (id !== undefined) {\n      this.overlayIdIndex_[id.toString()] = overlay;\n    }\n    overlay.setMap(this);\n  }\n\n  /**\n   *\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.mapBrowserEventHandler_.dispose();\n    unlisten(this.viewport_, EventType.CONTEXTMENU, this.handleBrowserEvent, this);\n    unlisten(this.viewport_, EventType.WHEEL, this.handleBrowserEvent, this);\n    unlisten(this.viewport_, EventType.MOUSEWHEEL, this.handleBrowserEvent, this);\n    if (this.handleResize_ !== undefined) {\n      removeEventListener(EventType.RESIZE, this.handleResize_, false);\n      this.handleResize_ = undefined;\n    }\n    if (this.animationDelayKey_) {\n      cancelAnimationFrame(this.animationDelayKey_);\n      this.animationDelayKey_ = undefined;\n    }\n    this.setTarget(null);\n    super.disposeInternal();\n  }\n\n  /**\n   * Detect features that intersect a pixel on the viewport, and execute a\n   * callback with each intersecting feature. Layers included in the detection can\n   * be configured through the `layerFilter` option in `opt_options`.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {function(this: S, import(\"./Feature.js\").FeatureLike,\n   *     import(\"./layer/Layer.js\").default): T} callback Feature callback. The callback will be\n   *     called with two arguments. The first argument is one\n   *     {@link module:ol/Feature feature} or\n   *     {@link module:ol/render/Feature render feature} at the pixel, the second is\n   *     the {@link module:ol/layer/Layer layer} of the feature and will be null for\n   *     unmanaged layers. To stop detection, callback functions can return a\n   *     truthy value.\n   * @param {AtPixelOptions=} opt_options Optional options.\n   * @return {T|undefined} Callback result, i.e. the return value of last\n   * callback execution, or the first truthy callback return value.\n   * @template S,T\n   * @api\n   */\n  forEachFeatureAtPixel(pixel, callback, opt_options) {\n    if (!this.frameState_) {\n      return;\n    }\n    const coordinate = this.getCoordinateFromPixel(pixel);\n    opt_options = opt_options !== undefined ? opt_options :\n      /** @type {AtPixelOptions} */ ({});\n    const hitTolerance = opt_options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    const layerFilter = opt_options.layerFilter !== undefined ?\n      opt_options.layerFilter : TRUE;\n    return this.renderer_.forEachFeatureAtCoordinate(\n      coordinate, this.frameState_, hitTolerance, callback, null,\n      layerFilter, null);\n  }\n\n  /**\n   * Get all features that intersect a pixel on the viewport.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {AtPixelOptions=} opt_options Optional options.\n   * @return {Array<import(\"./Feature.js\").FeatureLike>} The detected features or\n   * `null` if none were found.\n   * @api\n   */\n  getFeaturesAtPixel(pixel, opt_options) {\n    let features = null;\n    this.forEachFeatureAtPixel(pixel, function(feature) {\n      if (!features) {\n        features = [];\n      }\n      features.push(feature);\n    }, opt_options);\n    return features;\n  }\n\n  /**\n   * Detect layers that have a color value at a pixel on the viewport, and\n   * execute a callback with each matching layer. Layers included in the\n   * detection can be configured through `opt_layerFilter`.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {function(this: S, import(\"./layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback\n   *     Layer callback. This callback will receive two arguments: first is the\n   *     {@link module:ol/layer/Layer layer}, second argument is an array representing\n   *     [R, G, B, A] pixel values (0 - 255) and will be `null` for layer types\n   *     that do not currently support this argument. To stop detection, callback\n   *     functions can return a truthy value.\n   * @param {AtPixelOptions=} opt_options Configuration options.\n   * @return {T|undefined} Callback result, i.e. the return value of last\n   * callback execution, or the first truthy callback return value.\n   * @template S,T\n   * @api\n   */\n  forEachLayerAtPixel(pixel, callback, opt_options) {\n    if (!this.frameState_) {\n      return;\n    }\n    const options = opt_options || /** @type {AtPixelOptions} */ ({});\n    const hitTolerance = options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    const layerFilter = options.layerFilter || TRUE;\n    return this.renderer_.forEachLayerAtPixel(\n      pixel, this.frameState_, hitTolerance, callback, null, layerFilter, null);\n  }\n\n  /**\n   * Detect if features intersect a pixel on the viewport. Layers included in the\n   * detection can be configured through `opt_layerFilter`.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {AtPixelOptions=} opt_options Optional options.\n   * @return {boolean} Is there a feature at the given pixel?\n   * @template U\n   * @api\n   */\n  hasFeatureAtPixel(pixel, opt_options) {\n    if (!this.frameState_) {\n      return false;\n    }\n    const coordinate = this.getCoordinateFromPixel(pixel);\n    opt_options = opt_options !== undefined ? opt_options :\n      /** @type {AtPixelOptions} */ ({});\n    const layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n    const hitTolerance = opt_options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    return this.renderer_.hasFeatureAtCoordinate(\n      coordinate, this.frameState_, hitTolerance, layerFilter, null);\n  }\n\n  /**\n   * Returns the coordinate in view projection for a browser event.\n   * @param {Event} event Event.\n   * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n   * @api\n   */\n  getEventCoordinate(event) {\n    return this.getCoordinateFromPixel(this.getEventPixel(event));\n  }\n\n  /**\n   * Returns the map pixel position for a browser event relative to the viewport.\n   * @param {Event|TouchEvent} event Event.\n   * @return {import(\"./pixel.js\").Pixel} Pixel.\n   * @api\n   */\n  getEventPixel(event) {\n    const viewportPosition = this.viewport_.getBoundingClientRect();\n    const eventPosition = 'changedTouches' in event ?\n      /** @type {TouchEvent} */ (event).changedTouches[0] :\n      /** @type {MouseEvent} */ (event);\n\n    return [\n      eventPosition.clientX - viewportPosition.left,\n      eventPosition.clientY - viewportPosition.top\n    ];\n  }\n\n  /**\n   * Get the target in which this map is rendered.\n   * Note that this returns what is entered as an option or in setTarget:\n   * if that was an element, it returns an element; if a string, it returns that.\n   * @return {HTMLElement|string|undefined} The Element or id of the Element that the\n   *     map is rendered in.\n   * @observable\n   * @api\n   */\n  getTarget() {\n    return /** @type {HTMLElement|string|undefined} */ (this.get(MapProperty.TARGET));\n  }\n\n  /**\n   * Get the DOM element into which this map is rendered. In contrast to\n   * `getTarget` this method always return an `Element`, or `null` if the\n   * map has no target.\n   * @return {HTMLElement} The element that the map is rendered in.\n   * @api\n   */\n  getTargetElement() {\n    const target = this.getTarget();\n    if (target !== undefined) {\n      return typeof target === 'string' ? document.getElementById(target) : target;\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Get the coordinate for a given pixel.  This returns a coordinate in the\n   * map view projection.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n   * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n   * @api\n   */\n  getCoordinateFromPixel(pixel) {\n    const frameState = this.frameState_;\n    if (!frameState) {\n      return null;\n    } else {\n      return applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n    }\n  }\n\n  /**\n   * Get the map controls. Modifying this collection changes the controls\n   * associated with the map.\n   * @return {Collection<import(\"./control/Control.js\").default>} Controls.\n   * @api\n   */\n  getControls() {\n    return this.controls;\n  }\n\n  /**\n   * Get the map overlays. Modifying this collection changes the overlays\n   * associated with the map.\n   * @return {Collection<import(\"./Overlay.js\").default>} Overlays.\n   * @api\n   */\n  getOverlays() {\n    return this.overlays_;\n  }\n\n  /**\n   * Get an overlay by its identifier (the value returned by overlay.getId()).\n   * Note that the index treats string and numeric identifiers as the same. So\n   * `map.getOverlayById(2)` will return an overlay with id `'2'` or `2`.\n   * @param {string|number} id Overlay identifier.\n   * @return {import(\"./Overlay.js\").default} Overlay.\n   * @api\n   */\n  getOverlayById(id) {\n    const overlay = this.overlayIdIndex_[id.toString()];\n    return overlay !== undefined ? overlay : null;\n  }\n\n  /**\n   * Get the map interactions. Modifying this collection changes the interactions\n   * associated with the map.\n   *\n   * Interactions are used for e.g. pan, zoom and rotate.\n   * @return {Collection<import(\"./interaction/Interaction.js\").default>} Interactions.\n   * @api\n   */\n  getInteractions() {\n    return this.interactions;\n  }\n\n  /**\n   * Get the layergroup associated with this map.\n   * @return {LayerGroup} A layer group containing the layers in this map.\n   * @observable\n   * @api\n   */\n  getLayerGroup() {\n    return (\n      /** @type {LayerGroup} */ (this.get(MapProperty.LAYERGROUP))\n    );\n  }\n\n  /**\n   * Get the collection of layers associated with this map.\n   * @return {!Collection<import(\"./layer/Base.js\").default>} Layers.\n   * @api\n   */\n  getLayers() {\n    const layers = this.getLayerGroup().getLayers();\n    return layers;\n  }\n\n  /**\n   * Get the pixel for a coordinate.  This takes a coordinate in the map view\n   * projection and returns the corresponding pixel.\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n   * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n   * @api\n   */\n  getPixelFromCoordinate(coordinate) {\n    const frameState = this.frameState_;\n    if (!frameState) {\n      return null;\n    } else {\n      return applyTransform(frameState.coordinateToPixelTransform, coordinate.slice(0, 2));\n    }\n  }\n\n  /**\n   * Get the map renderer.\n   * @return {import(\"./renderer/Map.js\").default} Renderer\n   */\n  getRenderer() {\n    return this.renderer_;\n  }\n\n  /**\n   * Get the size of this map.\n   * @return {import(\"./size.js\").Size|undefined} The size in pixels of the map in the DOM.\n   * @observable\n   * @api\n   */\n  getSize() {\n    return (\n      /** @type {import(\"./size.js\").Size|undefined} */ (this.get(MapProperty.SIZE))\n    );\n  }\n\n  /**\n   * Get the view associated with this map. A view manages properties such as\n   * center and resolution.\n   * @return {View} The view that controls this map.\n   * @observable\n   * @api\n   */\n  getView() {\n    return (\n      /** @type {View} */ (this.get(MapProperty.VIEW))\n    );\n  }\n\n  /**\n   * Get the element that serves as the map viewport.\n   * @return {HTMLElement} Viewport.\n   * @api\n   */\n  getViewport() {\n    return this.viewport_;\n  }\n\n  /**\n   * Get the element that serves as the container for overlays.  Elements added to\n   * this container will let mousedown and touchstart events through to the map,\n   * so clicks and gestures on an overlay will trigger {@link module:ol/MapBrowserEvent~MapBrowserEvent}\n   * events.\n   * @return {!HTMLElement} The map's overlay container.\n   */\n  getOverlayContainer() {\n    return this.overlayContainer_;\n  }\n\n  /**\n   * Get the element that serves as a container for overlays that don't allow\n   * event propagation. Elements added to this container won't let mousedown and\n   * touchstart events through to the map, so clicks and gestures on an overlay\n   * don't trigger any {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n   * @return {!HTMLElement} The map's overlay container that stops events.\n   */\n  getOverlayContainerStopEvent() {\n    return this.overlayContainerStopEvent_;\n  }\n\n  /**\n   * @param {import(\"./Tile.js\").default} tile Tile.\n   * @param {string} tileSourceKey Tile source key.\n   * @param {import(\"./coordinate.js\").Coordinate} tileCenter Tile center.\n   * @param {number} tileResolution Tile resolution.\n   * @return {number} Tile priority.\n   */\n  getTilePriority(tile, tileSourceKey, tileCenter, tileResolution) {\n    // Filter out tiles at higher zoom levels than the current zoom level, or that\n    // are outside the visible extent.\n    const frameState = this.frameState_;\n    if (!frameState || !(tileSourceKey in frameState.wantedTiles)) {\n      return DROP;\n    }\n    if (!frameState.wantedTiles[tileSourceKey][tile.getKey()]) {\n      return DROP;\n    }\n    // Prioritize the highest zoom level tiles closest to the focus.\n    // Tiles at higher zoom levels are prioritized using Math.log(tileResolution).\n    // Within a zoom level, tiles are prioritized by the distance in pixels\n    // between the center of the tile and the focus.  The factor of 65536 means\n    // that the prioritization should behave as desired for tiles up to\n    // 65536 * Math.log(2) = 45426 pixels from the focus.\n    const deltaX = tileCenter[0] - frameState.focus[0];\n    const deltaY = tileCenter[1] - frameState.focus[1];\n    return 65536 * Math.log(tileResolution) +\n        Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution;\n  }\n\n  /**\n   * @param {Event} browserEvent Browser event.\n   * @param {string=} opt_type Type.\n   */\n  handleBrowserEvent(browserEvent, opt_type) {\n    const type = opt_type || browserEvent.type;\n    const mapBrowserEvent = new MapBrowserEvent(type, this, browserEvent);\n    this.handleMapBrowserEvent(mapBrowserEvent);\n  }\n\n  /**\n   * @param {MapBrowserEvent} mapBrowserEvent The event to handle.\n   */\n  handleMapBrowserEvent(mapBrowserEvent) {\n    if (!this.frameState_) {\n      // With no view defined, we cannot translate pixels into geographical\n      // coordinates so interactions cannot be used.\n      return;\n    }\n    this.focus_ = mapBrowserEvent.coordinate;\n    mapBrowserEvent.frameState = this.frameState_;\n    const interactionsArray = this.getInteractions().getArray();\n    if (this.dispatchEvent(mapBrowserEvent) !== false) {\n      for (let i = interactionsArray.length - 1; i >= 0; i--) {\n        const interaction = interactionsArray[i];\n        if (!interaction.getActive()) {\n          continue;\n        }\n        const cont = interaction.handleEvent(mapBrowserEvent);\n        if (!cont) {\n          break;\n        }\n      }\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handlePostRender() {\n\n    const frameState = this.frameState_;\n\n    // Manage the tile queue\n    // Image loads are expensive and a limited resource, so try to use them\n    // efficiently:\n    // * When the view is static we allow a large number of parallel tile loads\n    //   to complete the frame as quickly as possible.\n    // * When animating or interacting, image loads can cause janks, so we reduce\n    //   the maximum number of loads per frame and limit the number of parallel\n    //   tile loads to remain reactive to view changes and to reduce the chance of\n    //   loading tiles that will quickly disappear from view.\n    const tileQueue = this.tileQueue_;\n    if (!tileQueue.isEmpty()) {\n      let maxTotalLoading = this.maxTilesLoading_;\n      let maxNewLoads = maxTotalLoading;\n      if (frameState) {\n        const hints = frameState.viewHints;\n        if (hints[ViewHint.ANIMATING]) {\n          maxTotalLoading = this.loadTilesWhileAnimating_ ? 8 : 0;\n          maxNewLoads = 2;\n        }\n        if (hints[ViewHint.INTERACTING]) {\n          maxTotalLoading = this.loadTilesWhileInteracting_ ? 8 : 0;\n          maxNewLoads = 2;\n        }\n      }\n      if (tileQueue.getTilesLoading() < maxTotalLoading) {\n        tileQueue.reprioritize(); // FIXME only call if view has changed\n        tileQueue.loadMoreTiles(maxTotalLoading, maxNewLoads);\n      }\n    }\n    if (frameState && this.hasListener(RenderEventType.RENDERCOMPLETE) && !frameState.animate &&\n        !this.tileQueue_.getTilesLoading() && !getLoading(this.getLayers().getArray())) {\n      this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE, frameState);\n    }\n\n    const postRenderFunctions = this.postRenderFunctions_;\n    for (let i = 0, ii = postRenderFunctions.length; i < ii; ++i) {\n      postRenderFunctions[i](this, frameState);\n    }\n    postRenderFunctions.length = 0;\n  }\n\n  /**\n   * @private\n   */\n  handleSizeChanged_() {\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleTargetChanged_() {\n    // target may be undefined, null, a string or an Element.\n    // If it's a string we convert it to an Element before proceeding.\n    // If it's not now an Element we remove the viewport from the DOM.\n    // If it's an Element we append the viewport element to it.\n\n    let targetElement;\n    if (this.getTarget()) {\n      targetElement = this.getTargetElement();\n    }\n\n    if (this.keyHandlerKeys_) {\n      for (let i = 0, ii = this.keyHandlerKeys_.length; i < ii; ++i) {\n        unlistenByKey(this.keyHandlerKeys_[i]);\n      }\n      this.keyHandlerKeys_ = null;\n    }\n\n    if (!targetElement) {\n      this.renderer_.removeLayerRenderers();\n      removeNode(this.viewport_);\n      if (this.handleResize_ !== undefined) {\n        removeEventListener(EventType.RESIZE, this.handleResize_, false);\n        this.handleResize_ = undefined;\n      }\n    } else {\n      targetElement.appendChild(this.viewport_);\n\n      const keyboardEventTarget = !this.keyboardEventTarget_ ?\n        targetElement : this.keyboardEventTarget_;\n      this.keyHandlerKeys_ = [\n        listen(keyboardEventTarget, EventType.KEYDOWN, this.handleBrowserEvent, this),\n        listen(keyboardEventTarget, EventType.KEYPRESS, this.handleBrowserEvent, this)\n      ];\n\n      if (!this.handleResize_) {\n        this.handleResize_ = this.updateSize.bind(this);\n        addEventListener(EventType.RESIZE, this.handleResize_, false);\n      }\n    }\n\n    this.updateSize();\n    // updateSize calls setSize, so no need to call this.render\n    // ourselves here.\n  }\n\n  /**\n   * @private\n   */\n  handleTileChange_() {\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleViewPropertyChanged_() {\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleViewChanged_() {\n    if (this.viewPropertyListenerKey_) {\n      unlistenByKey(this.viewPropertyListenerKey_);\n      this.viewPropertyListenerKey_ = null;\n    }\n    if (this.viewChangeListenerKey_) {\n      unlistenByKey(this.viewChangeListenerKey_);\n      this.viewChangeListenerKey_ = null;\n    }\n    const view = this.getView();\n    if (view) {\n      this.viewport_.setAttribute('data-view', getUid(view));\n      this.viewPropertyListenerKey_ = listen(\n        view, ObjectEventType.PROPERTYCHANGE,\n        this.handleViewPropertyChanged_, this);\n      this.viewChangeListenerKey_ = listen(\n        view, EventType.CHANGE,\n        this.handleViewPropertyChanged_, this);\n    }\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleLayerGroupChanged_() {\n    if (this.layerGroupPropertyListenerKeys_) {\n      this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey);\n      this.layerGroupPropertyListenerKeys_ = null;\n    }\n    const layerGroup = this.getLayerGroup();\n    if (layerGroup) {\n      this.layerGroupPropertyListenerKeys_ = [\n        listen(\n          layerGroup, ObjectEventType.PROPERTYCHANGE,\n          this.render, this),\n        listen(\n          layerGroup, EventType.CHANGE,\n          this.render, this)\n      ];\n    }\n    this.render();\n  }\n\n  /**\n   * @return {boolean} Is rendered.\n   */\n  isRendered() {\n    return !!this.frameState_;\n  }\n\n  /**\n   * Requests an immediate render in a synchronous manner.\n   * @api\n   */\n  renderSync() {\n    if (this.animationDelayKey_) {\n      cancelAnimationFrame(this.animationDelayKey_);\n    }\n    this.animationDelay_();\n  }\n\n  /**\n   * Request a map rendering (at the next animation frame).\n   * @api\n   */\n  render() {\n    if (this.animationDelayKey_ === undefined) {\n      this.animationDelayKey_ = requestAnimationFrame(this.animationDelay_);\n    }\n  }\n\n  /**\n   * Remove the given control from the map.\n   * @param {import(\"./control/Control.js\").default} control Control.\n   * @return {import(\"./control/Control.js\").default|undefined} The removed control (or undefined\n   *     if the control was not found).\n   * @api\n   */\n  removeControl(control) {\n    return this.getControls().remove(control);\n  }\n\n  /**\n   * Remove the given interaction from the map.\n   * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to remove.\n   * @return {import(\"./interaction/Interaction.js\").default|undefined} The removed interaction (or\n   *     undefined if the interaction was not found).\n   * @api\n   */\n  removeInteraction(interaction) {\n    return this.getInteractions().remove(interaction);\n  }\n\n  /**\n   * Removes the given layer from the map.\n   * @param {import(\"./layer/Base.js\").default} layer Layer.\n   * @return {import(\"./layer/Base.js\").default|undefined} The removed layer (or undefined if the\n   *     layer was not found).\n   * @api\n   */\n  removeLayer(layer) {\n    const layers = this.getLayerGroup().getLayers();\n    return layers.remove(layer);\n  }\n\n  /**\n   * Remove the given overlay from the map.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @return {import(\"./Overlay.js\").default|undefined} The removed overlay (or undefined\n   *     if the overlay was not found).\n   * @api\n   */\n  removeOverlay(overlay) {\n    return this.getOverlays().remove(overlay);\n  }\n\n  /**\n   * @param {number} time Time.\n   * @private\n   */\n  renderFrame_(time) {\n    let viewState;\n\n    const size = this.getSize();\n    const view = this.getView();\n    const extent = createEmpty();\n    const previousFrameState = this.frameState_;\n    /** @type {?FrameState} */\n    let frameState = null;\n    if (size !== undefined && hasArea(size) && view && view.isDef()) {\n      const viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);\n      const layerStatesArray = this.getLayerGroup().getLayerStatesArray();\n      const layerStates = {};\n      for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n        layerStates[getUid(layerStatesArray[i].layer)] = layerStatesArray[i];\n      }\n      viewState = view.getState(this.pixelRatio_);\n      frameState = /** @type {FrameState} */ ({\n        animate: false,\n        coordinateToPixelTransform: this.coordinateToPixelTransform_,\n        extent: extent,\n        focus: this.focus_ ? this.focus_ : viewState.center,\n        index: this.frameIndex_++,\n        layerStates: layerStates,\n        layerStatesArray: layerStatesArray,\n        pixelRatio: this.pixelRatio_,\n        pixelToCoordinateTransform: this.pixelToCoordinateTransform_,\n        postRenderFunctions: [],\n        size: size,\n        skippedFeatureUids: this.skippedFeatureUids_,\n        tileQueue: this.tileQueue_,\n        time: time,\n        usedTiles: {},\n        viewState: viewState,\n        viewHints: viewHints,\n        wantedTiles: {}\n      });\n    }\n\n    if (frameState) {\n      frameState.extent = getForViewAndSize(viewState.center,\n        viewState.resolution, viewState.rotation, frameState.size, extent);\n    }\n\n    this.frameState_ = frameState;\n    this.renderer_.renderFrame(frameState);\n\n    if (frameState) {\n      if (frameState.animate) {\n        this.render();\n      }\n      Array.prototype.push.apply(this.postRenderFunctions_, frameState.postRenderFunctions);\n\n      if (previousFrameState) {\n        const moveStart = !this.previousExtent_ ||\n                    (!isEmpty(this.previousExtent_) &&\n                    !equals(frameState.extent, this.previousExtent_));\n        if (moveStart) {\n          this.dispatchEvent(\n            new MapEvent(MapEventType.MOVESTART, this, previousFrameState));\n          this.previousExtent_ = createOrUpdateEmpty(this.previousExtent_);\n        }\n      }\n\n      const idle = this.previousExtent_ &&\n          !frameState.viewHints[ViewHint.ANIMATING] &&\n          !frameState.viewHints[ViewHint.INTERACTING] &&\n          !equals(frameState.extent, this.previousExtent_);\n\n      if (idle) {\n        this.dispatchEvent(new MapEvent(MapEventType.MOVEEND, this, frameState));\n        clone(frameState.extent, this.previousExtent_);\n      }\n    }\n\n    this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER, this, frameState));\n\n    setTimeout(this.handlePostRender.bind(this), 0);\n\n  }\n\n  /**\n   * Sets the layergroup of this map.\n   * @param {LayerGroup} layerGroup A layer group containing the layers in this map.\n   * @observable\n   * @api\n   */\n  setLayerGroup(layerGroup) {\n    this.set(MapProperty.LAYERGROUP, layerGroup);\n  }\n\n  /**\n   * Set the size of this map.\n   * @param {import(\"./size.js\").Size|undefined} size The size in pixels of the map in the DOM.\n   * @observable\n   * @api\n   */\n  setSize(size) {\n    this.set(MapProperty.SIZE, size);\n  }\n\n  /**\n   * Set the target element to render this map into.\n   * @param {HTMLElement|string|undefined} target The Element or id of the Element\n   *     that the map is rendered in.\n   * @observable\n   * @api\n   */\n  setTarget(target) {\n    this.set(MapProperty.TARGET, target);\n  }\n\n  /**\n   * Set the view for this map.\n   * @param {View} view The view that controls this map.\n   * @observable\n   * @api\n   */\n  setView(view) {\n    this.set(MapProperty.VIEW, view);\n  }\n\n  /**\n   * @param {import(\"./Feature.js\").default} feature Feature.\n   */\n  skipFeature(feature) {\n    this.skippedFeatureUids_[getUid(feature)] = true;\n    this.render();\n  }\n\n  /**\n   * Force a recalculation of the map viewport size.  This should be called when\n   * third-party code changes the size of the map viewport.\n   * @api\n   */\n  updateSize() {\n    const targetElement = this.getTargetElement();\n\n    if (!targetElement) {\n      this.setSize(undefined);\n    } else {\n      const computedStyle = getComputedStyle(targetElement);\n      this.setSize([\n        targetElement.offsetWidth -\n            parseFloat(computedStyle['borderLeftWidth']) -\n            parseFloat(computedStyle['paddingLeft']) -\n            parseFloat(computedStyle['paddingRight']) -\n            parseFloat(computedStyle['borderRightWidth']),\n        targetElement.offsetHeight -\n            parseFloat(computedStyle['borderTopWidth']) -\n            parseFloat(computedStyle['paddingTop']) -\n            parseFloat(computedStyle['paddingBottom']) -\n            parseFloat(computedStyle['borderBottomWidth'])\n      ]);\n    }\n  }\n\n  /**\n   * @param {import(\"./Feature.js\").default} feature Feature.\n   */\n  unskipFeature(feature) {\n    delete this.skippedFeatureUids_[getUid(feature)];\n    this.render();\n  }\n}\n\n\n/**\n * @param {MapOptions} options Map options.\n * @return {MapOptionsInternal} Internal map options.\n */\nfunction createOptionsInternal(options) {\n\n  /**\n   * @type {HTMLElement|Document}\n   */\n  let keyboardEventTarget = null;\n  if (options.keyboardEventTarget !== undefined) {\n    keyboardEventTarget = typeof options.keyboardEventTarget === 'string' ?\n      document.getElementById(options.keyboardEventTarget) :\n      options.keyboardEventTarget;\n  }\n\n  /**\n   * @type {Object<string, *>}\n   */\n  const values = {};\n\n  const layerGroup = options.layers && typeof /** @type {?} */ (options.layers).getLayers === 'function' ?\n    /** @type {LayerGroup} */ (options.layers) : new LayerGroup({layers: /** @type {Collection} */ (options.layers)});\n  values[MapProperty.LAYERGROUP] = layerGroup;\n\n  values[MapProperty.TARGET] = options.target;\n\n  values[MapProperty.VIEW] = options.view !== undefined ?\n    options.view : new View();\n\n  let controls;\n  if (options.controls !== undefined) {\n    if (Array.isArray(options.controls)) {\n      controls = new Collection(options.controls.slice());\n    } else {\n      assert(typeof /** @type {?} */ (options.controls).getArray === 'function',\n        47); // Expected `controls` to be an array or an `import(\"./Collection.js\").Collection`\n      controls = /** @type {Collection} */ (options.controls);\n    }\n  }\n\n  let interactions;\n  if (options.interactions !== undefined) {\n    if (Array.isArray(options.interactions)) {\n      interactions = new Collection(options.interactions.slice());\n    } else {\n      assert(typeof /** @type {?} */ (options.interactions).getArray === 'function',\n        48); // Expected `interactions` to be an array or an `import(\"./Collection.js\").Collection`\n      interactions = /** @type {Collection} */ (options.interactions);\n    }\n  }\n\n  let overlays;\n  if (options.overlays !== undefined) {\n    if (Array.isArray(options.overlays)) {\n      overlays = new Collection(options.overlays.slice());\n    } else {\n      assert(typeof /** @type {?} */ (options.overlays).getArray === 'function',\n        49); // Expected `overlays` to be an array or an `import(\"./Collection.js\").Collection`\n      overlays = options.overlays;\n    }\n  } else {\n    overlays = new Collection();\n  }\n\n  return {\n    controls: controls,\n    interactions: interactions,\n    keyboardEventTarget: keyboardEventTarget,\n    overlays: overlays,\n    values: values\n  };\n\n}\nexport default PluggableMap;\n\n/**\n * @param  {Array<import(\"./layer/Base.js\").default>} layers Layers.\n * @return {boolean} Layers have sources that are still loading.\n */\nfunction getLoading(layers) {\n  for (let i = 0, ii = layers.length; i < ii; ++i) {\n    const layer = layers[i];\n    if (typeof /** @type {?} */ (layer).getLayers === 'function') {\n      return getLoading(/** @type {LayerGroup} */ (layer).getLayers().getArray());\n    } else {\n      const source = /** @type {import(\"./layer/Layer.js\").default} */ (\n        layer).getSource();\n      if (source && source.loading) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n","/**\n * @module ol/ImageCanvas\n */\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\n\n\n/**\n * A function that is called to trigger asynchronous canvas drawing.  It is\n * called with a \"done\" callback that should be called when drawing is done.\n * If any error occurs during drawing, the \"done\" callback should be called with\n * that error.\n *\n * @typedef {function(function(Error=))} Loader\n */\n\n\nclass ImageCanvas extends ImageBase {\n\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {HTMLCanvasElement} canvas Canvas.\n   * @param {Loader=} opt_loader Optional loader function to\n   *     support asynchronous canvas drawing.\n   */\n  constructor(extent, resolution, pixelRatio, canvas, opt_loader) {\n\n    const state = opt_loader !== undefined ? ImageState.IDLE : ImageState.LOADED;\n\n    super(extent, resolution, pixelRatio, state);\n\n    /**\n     * Optional canvas loader function.\n     * @type {?Loader}\n     * @private\n     */\n    this.loader_ = opt_loader !== undefined ? opt_loader : null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = canvas;\n\n    /**\n     * @private\n     * @type {Error}\n     */\n    this.error_ = null;\n\n  }\n\n  /**\n   * Get any error associated with asynchronous rendering.\n   * @return {Error} Any error that occurred during rendering.\n   */\n  getError() {\n    return this.error_;\n  }\n\n  /**\n   * Handle async drawing complete.\n   * @param {Error=} err Any error during drawing.\n   * @private\n   */\n  handleLoad_(err) {\n    if (err) {\n      this.error_ = err;\n      this.state = ImageState.ERROR;\n    } else {\n      this.state = ImageState.LOADED;\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {\n    if (this.state == ImageState.IDLE) {\n      this.state = ImageState.LOADING;\n      this.changed();\n      this.loader_(this.handleLoad_.bind(this));\n    }\n  }\n\n  /**\n   * @return {HTMLCanvasElement} Canvas element.\n   */\n  getImage() {\n    return this.canvas_;\n  }\n}\n\n\nexport default ImageCanvas;\n","/**\n * @module ol/render/Event\n */\n\nimport Event from '../events/Event.js';\n\nclass RenderEvent extends Event {\n\n  /**\n   * @param {import(\"./EventType.js\").default} type Type.\n   * @param {import(\"./VectorContext.js\").default=} opt_vectorContext Vector context.\n   * @param {import(\"../PluggableMap.js\").FrameState=} opt_frameState Frame state.\n   * @param {?CanvasRenderingContext2D=} opt_context Context.\n   * @param {?import(\"../webgl/Context.js\").default=} opt_glContext WebGL Context.\n   */\n  constructor(type, opt_vectorContext, opt_frameState, opt_context, opt_glContext) {\n\n    super(type);\n\n    /**\n     * For canvas, this is an instance of {@link module:ol/render/canvas/Immediate}.\n     * @type {import(\"./VectorContext.js\").default|undefined}\n     * @api\n     */\n    this.vectorContext = opt_vectorContext;\n\n    /**\n     * An object representing the current render frame state.\n     * @type {import(\"../PluggableMap.js\").FrameState|undefined}\n     * @api\n     */\n    this.frameState = opt_frameState;\n\n    /**\n     * Canvas context. Only available when a Canvas renderer is used, null\n     * otherwise.\n     * @type {CanvasRenderingContext2D|null|undefined}\n     * @api\n     */\n    this.context = opt_context;\n\n    /**\n     * WebGL context. Only available when a WebGL renderer is used, null\n     * otherwise.\n     * @type {import(\"../webgl/Context.js\").default|null|undefined}\n     * @api\n     */\n    this.glContext = opt_glContext;\n\n  }\n\n}\n\nexport default RenderEvent;\n","/**\n * @module ol/render/VectorContext\n */\n\n/**\n * @classdesc\n * Context for drawing geometries.  A vector context is available on render\n * events and does not need to be constructed directly.\n * @api\n */\nclass VectorContext {\n  /**\n   * Render a geometry with a custom renderer.\n   *\n   * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   * @param {Function} renderer Renderer.\n   */\n  drawCustom(geometry, feature, renderer) {}\n\n  /**\n   * Render a geometry.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry The geometry to render.\n   */\n  drawGeometry(geometry) {}\n\n  /**\n   * Set the rendering style.\n   *\n   * @param {import(\"../style/Style.js\").default} style The rendering style.\n   */\n  setStyle(style) {}\n\n  /**\n   * @param {import(\"../geom/Circle.js\").default} circleGeometry Circle geometry.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   */\n  drawCircle(circleGeometry, feature) {}\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"../style/Style.js\").default} style Style.\n   */\n  drawFeature(feature, style) {}\n\n  /**\n   * @param {import(\"../geom/GeometryCollection.js\").default} geometryCollectionGeometry Geometry collection.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   */\n  drawGeometryCollection(geometryCollectionGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/LineString.js\").default|import(\"./Feature.js\").default} lineStringGeometry Line string geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   */\n  drawLineString(lineStringGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/MultiLineString.js\").default|import(\"./Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   */\n  drawMultiLineString(multiLineStringGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/MultiPoint.js\").default|import(\"./Feature.js\").default} multiPointGeometry MultiPoint geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   */\n  drawMultiPoint(multiPointGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/MultiPolygon.js\").default} multiPolygonGeometry MultiPolygon geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   */\n  drawMultiPolygon(multiPolygonGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/Point.js\").default|import(\"./Feature.js\").default} pointGeometry Point geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   */\n  drawPoint(pointGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/Polygon.js\").default|import(\"./Feature.js\").default} polygonGeometry Polygon geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   */\n  drawPolygon(polygonGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/Geometry.js\").default|import(\"./Feature.js\").default} geometry Geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   */\n  drawText(geometry, feature) {}\n\n  /**\n   * @param {import(\"../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../style/Stroke.js\").default} strokeStyle Stroke style.\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {}\n\n  /**\n   * @param {import(\"../style/Image.js\").default} imageStyle Image style.\n   * @param {import(\"./canvas.js\").DeclutterGroup=} opt_declutterGroup Declutter.\n   */\n  setImageStyle(imageStyle, opt_declutterGroup) {}\n\n  /**\n   * @param {import(\"../style/Text.js\").default} textStyle Text style.\n   * @param {import(\"./canvas.js\").DeclutterGroup=} opt_declutterGroup Declutter.\n   */\n  setTextStyle(textStyle, opt_declutterGroup) {}\n}\n\nexport default VectorContext;\n","/**\n * @module ol/render/canvas/Immediate\n */\n// FIXME test, especially polygons with holes and multipolygons\n// FIXME need to handle large thick features (where pixel size matters)\n// FIXME add offset and end to ol/geom/flat/transform~transform2D?\n\nimport {equals} from '../../array.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {intersects} from '../../extent.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {transformGeom2D} from '../../geom/SimpleGeometry.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport VectorContext from '../VectorContext.js';\nimport {defaultTextAlign, defaultFillStyle, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline, defaultFont} from '../canvas.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @classdesc\n * A concrete subclass of {@link module:ol/render/VectorContext} that implements\n * direct rendering of features and geometries to an HTML5 Canvas context.\n * Instances of this class are created internally by the library and\n * provided to application code as vectorContext member of the\n * {@link module:ol/render/Event~RenderEvent} object associated with postcompose, precompose and\n * render events emitted by layers and maps.\n */\nclass CanvasImmediateRenderer extends VectorContext {\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../extent.js\").Extent} extent Extent.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   */\n  constructor(context, pixelRatio, extent, transform, viewRotation) {\n    super();\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context_ = context;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.extent_ = extent;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.transform_ = transform;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.viewRotation_ = viewRotation;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.contextFillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.contextStrokeState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").TextState}\n     */\n    this.contextTextState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.fillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.strokeState_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageAnchorX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageAnchorY_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageHeight_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOpacity_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOriginX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOriginY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.imageRotateWithView_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageRotation_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageScale_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageWidth_ = 0;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.text_ = '';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.textRotateWithView_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textRotation_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textScale_ = 0;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.textFillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.textStrokeState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").TextState}\n     */\n    this.textState_ = null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.pixelCoordinates_ = [];\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.tmpLocalTransform_ = createTransform();\n\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n  drawImages_(flatCoordinates, offset, end, stride) {\n    if (!this.image_) {\n      return;\n    }\n    const pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, 2, this.transform_,\n      this.pixelCoordinates_);\n    const context = this.context_;\n    const localTransform = this.tmpLocalTransform_;\n    const alpha = context.globalAlpha;\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha * this.imageOpacity_;\n    }\n    let rotation = this.imageRotation_;\n    if (this.imageRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n    for (let i = 0, ii = pixelCoordinates.length; i < ii; i += 2) {\n      const x = pixelCoordinates[i] - this.imageAnchorX_;\n      const y = pixelCoordinates[i + 1] - this.imageAnchorY_;\n      if (rotation !== 0 || this.imageScale_ != 1) {\n        const centerX = x + this.imageAnchorX_;\n        const centerY = y + this.imageAnchorY_;\n        composeTransform(localTransform,\n          centerX, centerY,\n          this.imageScale_, this.imageScale_,\n          rotation,\n          -centerX, -centerY);\n        context.setTransform.apply(context, localTransform);\n      }\n      context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_,\n        this.imageWidth_, this.imageHeight_, x, y,\n        this.imageWidth_, this.imageHeight_);\n    }\n    if (rotation !== 0 || this.imageScale_ != 1) {\n      context.setTransform(1, 0, 0, 1, 0, 0);\n    }\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha;\n    }\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n  drawText_(flatCoordinates, offset, end, stride) {\n    if (!this.textState_ || this.text_ === '') {\n      return;\n    }\n    if (this.textFillState_) {\n      this.setContextFillState_(this.textFillState_);\n    }\n    if (this.textStrokeState_) {\n      this.setContextStrokeState_(this.textStrokeState_);\n    }\n    this.setContextTextState_(this.textState_);\n    const pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, stride, this.transform_,\n      this.pixelCoordinates_);\n    const context = this.context_;\n    let rotation = this.textRotation_;\n    if (this.textRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n    for (; offset < end; offset += stride) {\n      const x = pixelCoordinates[offset] + this.textOffsetX_;\n      const y = pixelCoordinates[offset + 1] + this.textOffsetY_;\n      if (rotation !== 0 || this.textScale_ != 1) {\n        const localTransform = composeTransform(this.tmpLocalTransform_,\n          x, y,\n          this.textScale_, this.textScale_,\n          rotation,\n          -x, -y);\n        context.setTransform.apply(context, localTransform);\n      }\n      if (this.textStrokeState_) {\n        context.strokeText(this.text_, x, y);\n      }\n      if (this.textFillState_) {\n        context.fillText(this.text_, x, y);\n      }\n    }\n    if (rotation !== 0 || this.textScale_ != 1) {\n      context.setTransform(1, 0, 0, 1, 0, 0);\n    }\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} close Close.\n   * @private\n   * @return {number} end End.\n   */\n  moveToLineTo_(flatCoordinates, offset, end, stride, close) {\n    const context = this.context_;\n    const pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, stride, this.transform_,\n      this.pixelCoordinates_);\n    context.moveTo(pixelCoordinates[0], pixelCoordinates[1]);\n    let length = pixelCoordinates.length;\n    if (close) {\n      length -= 2;\n    }\n    for (let i = 2; i < length; i += 2) {\n      context.lineTo(pixelCoordinates[i], pixelCoordinates[i + 1]);\n    }\n    if (close) {\n      context.closePath();\n    }\n    return end;\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n  drawRings_(flatCoordinates, offset, ends, stride) {\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, true);\n    }\n    return offset;\n  }\n\n  /**\n   * Render a circle geometry into the canvas.  Rendering is immediate and uses\n   * the current fill and stroke styles.\n   *\n   * @param {import(\"../../geom/Circle.js\").default} geometry Circle geometry.\n   * @override\n   * @api\n   */\n  drawCircle(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.fillState_ || this.strokeState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const pixelCoordinates = transformGeom2D(\n        geometry, this.transform_, this.pixelCoordinates_);\n      const dx = pixelCoordinates[2] - pixelCoordinates[0];\n      const dy = pixelCoordinates[3] - pixelCoordinates[1];\n      const radius = Math.sqrt(dx * dx + dy * dy);\n      const context = this.context_;\n      context.beginPath();\n      context.arc(\n        pixelCoordinates[0], pixelCoordinates[1], radius, 0, 2 * Math.PI);\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      this.drawText_(geometry.getCenter(), 0, 2, 2);\n    }\n  }\n\n  /**\n   * Set the rendering style.  Note that since this is an immediate rendering API,\n   * any `zIndex` on the provided style will be ignored.\n   *\n   * @param {import(\"../../style/Style.js\").default} style The rendering style.\n   * @override\n   * @api\n   */\n  setStyle(style) {\n    this.setFillStrokeStyle(style.getFill(), style.getStroke());\n    this.setImageStyle(style.getImage());\n    this.setTextStyle(style.getText());\n  }\n\n  /**\n   * Render a geometry into the canvas.  Call\n   * {@link module:ol/render/canvas/Immediate#setStyle} first to set the rendering style.\n   *\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry The geometry to render.\n   * @override\n   * @api\n   */\n  drawGeometry(geometry) {\n    const type = geometry.getType();\n    switch (type) {\n      case GeometryType.POINT:\n        this.drawPoint(/** @type {import(\"../../geom/Point.js\").default} */ (geometry));\n        break;\n      case GeometryType.LINE_STRING:\n        this.drawLineString(/** @type {import(\"../../geom/LineString.js\").default} */ (geometry));\n        break;\n      case GeometryType.POLYGON:\n        this.drawPolygon(/** @type {import(\"../../geom/Polygon.js\").default} */ (geometry));\n        break;\n      case GeometryType.MULTI_POINT:\n        this.drawMultiPoint(/** @type {import(\"../../geom/MultiPoint.js\").default} */ (geometry));\n        break;\n      case GeometryType.MULTI_LINE_STRING:\n        this.drawMultiLineString(/** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry));\n        break;\n      case GeometryType.MULTI_POLYGON:\n        this.drawMultiPolygon(/** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry));\n        break;\n      case GeometryType.GEOMETRY_COLLECTION:\n        this.drawGeometryCollection(/** @type {import(\"../../geom/GeometryCollection.js\").default} */ (geometry));\n        break;\n      case GeometryType.CIRCLE:\n        this.drawCircle(/** @type {import(\"../../geom/Circle.js\").default} */ (geometry));\n        break;\n      default:\n    }\n  }\n\n  /**\n   * Render a feature into the canvas.  Note that any `zIndex` on the provided\n   * style will be ignored - features are rendered immediately in the order that\n   * this method is called.  If you need `zIndex` support, you should be using an\n   * {@link module:ol/layer/Vector~VectorLayer} instead.\n   *\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   * @param {import(\"../../style/Style.js\").default} style Style.\n   * @override\n   * @api\n   */\n  drawFeature(feature, style) {\n    const geometry = style.getGeometryFunction()(feature);\n    if (!geometry || !intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    this.setStyle(style);\n    this.drawGeometry(geometry);\n  }\n\n  /**\n   * Render a GeometryCollection to the canvas.  Rendering is immediate and\n   * uses the current styles appropriate for each geometry in the collection.\n   *\n   * @param {import(\"../../geom/GeometryCollection.js\").default} geometry Geometry collection.\n   * @override\n   */\n  drawGeometryCollection(geometry) {\n    const geometries = geometry.getGeometriesArray();\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      this.drawGeometry(geometries[i]);\n    }\n  }\n\n  /**\n   * Render a Point geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/Point.js\").default|import(\"../Feature.js\").default} geometry Point geometry.\n   * @override\n   */\n  drawPoint(geometry) {\n    const flatCoordinates = geometry.getFlatCoordinates();\n    const stride = geometry.getStride();\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  }\n\n  /**\n   * Render a MultiPoint geometry  into the canvas.  Rendering is immediate and\n   * uses the current style.\n   *\n   * @param {import(\"../../geom/MultiPoint.js\").default|import(\"../Feature.js\").default} geometry MultiPoint geometry.\n   * @override\n   */\n  drawMultiPoint(geometry) {\n    const flatCoordinates = geometry.getFlatCoordinates();\n    const stride = geometry.getStride();\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  }\n\n  /**\n   * Render a LineString into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} geometry LineString geometry.\n   * @override\n   */\n  drawLineString(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      const context = this.context_;\n      const flatCoordinates = geometry.getFlatCoordinates();\n      context.beginPath();\n      this.moveToLineTo_(flatCoordinates, 0, flatCoordinates.length,\n        geometry.getStride(), false);\n      context.stroke();\n    }\n    if (this.text_ !== '') {\n      const flatMidpoint = geometry.getFlatMidpoint();\n      this.drawText_(flatMidpoint, 0, 2, 2);\n    }\n  }\n\n  /**\n   * Render a MultiLineString geometry into the canvas.  Rendering is immediate\n   * and uses the current style.\n   *\n   * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} geometry MultiLineString geometry.\n   * @override\n   */\n  drawMultiLineString(geometry) {\n    const geometryExtent = geometry.getExtent();\n    if (!intersects(this.extent_, geometryExtent)) {\n      return;\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      const context = this.context_;\n      const flatCoordinates = geometry.getFlatCoordinates();\n      let offset = 0;\n      const ends = /** @type {Array<number>} */ (geometry.getEnds());\n      const stride = geometry.getStride();\n      context.beginPath();\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, false);\n      }\n      context.stroke();\n    }\n    if (this.text_ !== '') {\n      const flatMidpoints = geometry.getFlatMidpoints();\n      this.drawText_(flatMidpoints, 0, flatMidpoints.length, 2);\n    }\n  }\n\n  /**\n   * Render a Polygon geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/Polygon.js\").default|import(\"../Feature.js\").default} geometry Polygon geometry.\n   * @override\n   */\n  drawPolygon(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const context = this.context_;\n      context.beginPath();\n      this.drawRings_(geometry.getOrientedFlatCoordinates(),\n        0, /** @type {Array<number>} */ (geometry.getEnds()), geometry.getStride());\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      const flatInteriorPoint = geometry.getFlatInteriorPoint();\n      this.drawText_(flatInteriorPoint, 0, 2, 2);\n    }\n  }\n\n  /**\n   * Render MultiPolygon geometry into the canvas.  Rendering is immediate and\n   * uses the current style.\n   * @param {import(\"../../geom/MultiPolygon.js\").default} geometry MultiPolygon geometry.\n   * @override\n   */\n  drawMultiPolygon(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const context = this.context_;\n      const flatCoordinates = geometry.getOrientedFlatCoordinates();\n      let offset = 0;\n      const endss = geometry.getEndss();\n      const stride = geometry.getStride();\n      context.beginPath();\n      for (let i = 0, ii = endss.length; i < ii; ++i) {\n        const ends = endss[i];\n        offset = this.drawRings_(flatCoordinates, offset, ends, stride);\n      }\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      const flatInteriorPoints = geometry.getFlatInteriorPoints();\n      this.drawText_(flatInteriorPoints, 0, flatInteriorPoints.length, 2);\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillState} fillState Fill state.\n   * @private\n   */\n  setContextFillState_(fillState) {\n    const context = this.context_;\n    const contextFillState = this.contextFillState_;\n    if (!contextFillState) {\n      context.fillStyle = fillState.fillStyle;\n      this.contextFillState_ = {\n        fillStyle: fillState.fillStyle\n      };\n    } else {\n      if (contextFillState.fillStyle != fillState.fillStyle) {\n        contextFillState.fillStyle = context.fillStyle = fillState.fillStyle;\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").StrokeState} strokeState Stroke state.\n   * @private\n   */\n  setContextStrokeState_(strokeState) {\n    const context = this.context_;\n    const contextStrokeState = this.contextStrokeState_;\n    if (!contextStrokeState) {\n      context.lineCap = /** @type {CanvasLineCap} */ (strokeState.lineCap);\n      if (CANVAS_LINE_DASH) {\n        context.setLineDash(strokeState.lineDash);\n        context.lineDashOffset = strokeState.lineDashOffset;\n      }\n      context.lineJoin = /** @type {CanvasLineJoin} */ (strokeState.lineJoin);\n      context.lineWidth = strokeState.lineWidth;\n      context.miterLimit = strokeState.miterLimit;\n      context.strokeStyle = strokeState.strokeStyle;\n      this.contextStrokeState_ = {\n        lineCap: strokeState.lineCap,\n        lineDash: strokeState.lineDash,\n        lineDashOffset: strokeState.lineDashOffset,\n        lineJoin: strokeState.lineJoin,\n        lineWidth: strokeState.lineWidth,\n        miterLimit: strokeState.miterLimit,\n        strokeStyle: strokeState.strokeStyle\n      };\n    } else {\n      if (contextStrokeState.lineCap != strokeState.lineCap) {\n        contextStrokeState.lineCap = context.lineCap = /** @type {CanvasLineCap} */ (strokeState.lineCap);\n      }\n      if (CANVAS_LINE_DASH) {\n        if (!equals(contextStrokeState.lineDash, strokeState.lineDash)) {\n          context.setLineDash(contextStrokeState.lineDash = strokeState.lineDash);\n        }\n        if (contextStrokeState.lineDashOffset != strokeState.lineDashOffset) {\n          contextStrokeState.lineDashOffset = context.lineDashOffset =\n              strokeState.lineDashOffset;\n        }\n      }\n      if (contextStrokeState.lineJoin != strokeState.lineJoin) {\n        contextStrokeState.lineJoin = context.lineJoin = /** @type {CanvasLineJoin} */ (strokeState.lineJoin);\n      }\n      if (contextStrokeState.lineWidth != strokeState.lineWidth) {\n        contextStrokeState.lineWidth = context.lineWidth = strokeState.lineWidth;\n      }\n      if (contextStrokeState.miterLimit != strokeState.miterLimit) {\n        contextStrokeState.miterLimit = context.miterLimit =\n            strokeState.miterLimit;\n      }\n      if (contextStrokeState.strokeStyle != strokeState.strokeStyle) {\n        contextStrokeState.strokeStyle = context.strokeStyle =\n            strokeState.strokeStyle;\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").TextState} textState Text state.\n   * @private\n   */\n  setContextTextState_(textState) {\n    const context = this.context_;\n    const contextTextState = this.contextTextState_;\n    const textAlign = textState.textAlign ?\n      textState.textAlign : defaultTextAlign;\n    if (!contextTextState) {\n      context.font = textState.font;\n      context.textAlign = /** @type {CanvasTextAlign} */ (textAlign);\n      context.textBaseline = /** @type {CanvasTextBaseline} */ (textState.textBaseline);\n      this.contextTextState_ = {\n        font: textState.font,\n        textAlign: textAlign,\n        textBaseline: textState.textBaseline\n      };\n    } else {\n      if (contextTextState.font != textState.font) {\n        contextTextState.font = context.font = textState.font;\n      }\n      if (contextTextState.textAlign != textAlign) {\n        contextTextState.textAlign = context.textAlign = /** @type {CanvasTextAlign} */ (textAlign);\n      }\n      if (contextTextState.textBaseline != textState.textBaseline) {\n        contextTextState.textBaseline = context.textBaseline =\n          /** @type {CanvasTextBaseline} */ (textState.textBaseline);\n      }\n    }\n  }\n\n  /**\n   * Set the fill and stroke style for subsequent draw operations.  To clear\n   * either fill or stroke styles, pass null for the appropriate parameter.\n   *\n   * @param {import(\"../../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../../style/Stroke.js\").default} strokeStyle Stroke style.\n   * @override\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {\n    if (!fillStyle) {\n      this.fillState_ = null;\n    } else {\n      const fillStyleColor = fillStyle.getColor();\n      this.fillState_ = {\n        fillStyle: asColorLike(fillStyleColor ?\n          fillStyleColor : defaultFillStyle)\n      };\n    }\n    if (!strokeStyle) {\n      this.strokeState_ = null;\n    } else {\n      const strokeStyleColor = strokeStyle.getColor();\n      const strokeStyleLineCap = strokeStyle.getLineCap();\n      const strokeStyleLineDash = strokeStyle.getLineDash();\n      const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      const strokeStyleLineJoin = strokeStyle.getLineJoin();\n      const strokeStyleWidth = strokeStyle.getWidth();\n      const strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      this.strokeState_ = {\n        lineCap: strokeStyleLineCap !== undefined ?\n          strokeStyleLineCap : defaultLineCap,\n        lineDash: strokeStyleLineDash ?\n          strokeStyleLineDash : defaultLineDash,\n        lineDashOffset: strokeStyleLineDashOffset ?\n          strokeStyleLineDashOffset : defaultLineDashOffset,\n        lineJoin: strokeStyleLineJoin !== undefined ?\n          strokeStyleLineJoin : defaultLineJoin,\n        lineWidth: this.pixelRatio_ * (strokeStyleWidth !== undefined ?\n          strokeStyleWidth : defaultLineWidth),\n        miterLimit: strokeStyleMiterLimit !== undefined ?\n          strokeStyleMiterLimit : defaultMiterLimit,\n        strokeStyle: asColorLike(strokeStyleColor ?\n          strokeStyleColor : defaultStrokeStyle)\n      };\n    }\n  }\n\n  /**\n   * Set the image style for subsequent draw operations.  Pass null to remove\n   * the image style.\n   *\n   * @param {import(\"../../style/Image.js\").default} imageStyle Image style.\n   * @override\n   */\n  setImageStyle(imageStyle) {\n    if (!imageStyle) {\n      this.image_ = null;\n    } else {\n      const imageAnchor = imageStyle.getAnchor();\n      // FIXME pixel ratio\n      const imageImage = imageStyle.getImage(1);\n      const imageOrigin = imageStyle.getOrigin();\n      const imageSize = imageStyle.getSize();\n      this.imageAnchorX_ = imageAnchor[0];\n      this.imageAnchorY_ = imageAnchor[1];\n      this.imageHeight_ = imageSize[1];\n      this.image_ = imageImage;\n      this.imageOpacity_ = imageStyle.getOpacity();\n      this.imageOriginX_ = imageOrigin[0];\n      this.imageOriginY_ = imageOrigin[1];\n      this.imageRotateWithView_ = imageStyle.getRotateWithView();\n      this.imageRotation_ = imageStyle.getRotation();\n      this.imageScale_ = imageStyle.getScale() * this.pixelRatio_;\n      this.imageWidth_ = imageSize[0];\n    }\n  }\n\n  /**\n   * Set the text style for subsequent draw operations.  Pass null to\n   * remove the text style.\n   *\n   * @param {import(\"../../style/Text.js\").default} textStyle Text style.\n   * @override\n   */\n  setTextStyle(textStyle) {\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      const textFillStyle = textStyle.getFill();\n      if (!textFillStyle) {\n        this.textFillState_ = null;\n      } else {\n        const textFillStyleColor = textFillStyle.getColor();\n        this.textFillState_ = {\n          fillStyle: asColorLike(textFillStyleColor ?\n            textFillStyleColor : defaultFillStyle)\n        };\n      }\n      const textStrokeStyle = textStyle.getStroke();\n      if (!textStrokeStyle) {\n        this.textStrokeState_ = null;\n      } else {\n        const textStrokeStyleColor = textStrokeStyle.getColor();\n        const textStrokeStyleLineCap = textStrokeStyle.getLineCap();\n        const textStrokeStyleLineDash = textStrokeStyle.getLineDash();\n        const textStrokeStyleLineDashOffset = textStrokeStyle.getLineDashOffset();\n        const textStrokeStyleLineJoin = textStrokeStyle.getLineJoin();\n        const textStrokeStyleWidth = textStrokeStyle.getWidth();\n        const textStrokeStyleMiterLimit = textStrokeStyle.getMiterLimit();\n        this.textStrokeState_ = {\n          lineCap: textStrokeStyleLineCap !== undefined ?\n            textStrokeStyleLineCap : defaultLineCap,\n          lineDash: textStrokeStyleLineDash ?\n            textStrokeStyleLineDash : defaultLineDash,\n          lineDashOffset: textStrokeStyleLineDashOffset ?\n            textStrokeStyleLineDashOffset : defaultLineDashOffset,\n          lineJoin: textStrokeStyleLineJoin !== undefined ?\n            textStrokeStyleLineJoin : defaultLineJoin,\n          lineWidth: textStrokeStyleWidth !== undefined ?\n            textStrokeStyleWidth : defaultLineWidth,\n          miterLimit: textStrokeStyleMiterLimit !== undefined ?\n            textStrokeStyleMiterLimit : defaultMiterLimit,\n          strokeStyle: asColorLike(textStrokeStyleColor ?\n            textStrokeStyleColor : defaultStrokeStyle)\n        };\n      }\n      const textFont = textStyle.getFont();\n      const textOffsetX = textStyle.getOffsetX();\n      const textOffsetY = textStyle.getOffsetY();\n      const textRotateWithView = textStyle.getRotateWithView();\n      const textRotation = textStyle.getRotation();\n      const textScale = textStyle.getScale();\n      const textText = textStyle.getText();\n      const textTextAlign = textStyle.getTextAlign();\n      const textTextBaseline = textStyle.getTextBaseline();\n      this.textState_ = {\n        font: textFont !== undefined ?\n          textFont : defaultFont,\n        textAlign: textTextAlign !== undefined ?\n          textTextAlign : defaultTextAlign,\n        textBaseline: textTextBaseline !== undefined ?\n          textTextBaseline : defaultTextBaseline\n      };\n      this.text_ = textText !== undefined ? textText : '';\n      this.textOffsetX_ =\n          textOffsetX !== undefined ? (this.pixelRatio_ * textOffsetX) : 0;\n      this.textOffsetY_ =\n          textOffsetY !== undefined ? (this.pixelRatio_ * textOffsetY) : 0;\n      this.textRotateWithView_ = textRotateWithView !== undefined ? textRotateWithView : false;\n      this.textRotation_ = textRotation !== undefined ? textRotation : 0;\n      this.textScale_ = this.pixelRatio_ * (textScale !== undefined ?\n        textScale : 1);\n    }\n  }\n}\n\n\nexport default CanvasImmediateRenderer;\n","/**\n * @module ol/renderer/Map\n */\nimport {abstract, getUid} from '../util.js';\nimport Disposable from '../Disposable.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getWidth} from '../extent.js';\nimport {TRUE} from '../functions.js';\nimport {visibleAtResolution} from '../layer/Layer.js';\nimport {shared as iconImageCache} from '../style/IconImageCache.js';\nimport {compose as composeTransform, invert as invertTransform, setFromArray as transformSetFromArray} from '../transform.js';\n\n/**\n * @abstract\n */\nclass MapRenderer extends Disposable {\n\n  /**\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  constructor(map) {\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").default}\n     */\n    this.map_ = map;\n\n    /**\n     * @private\n     * @type {!Object<string, import(\"./Layer.js\").default>}\n     */\n    this.layerRenderers_ = {};\n\n    /**\n     * @private\n     * @type {Object<string, import(\"../events.js\").EventsKey>}\n     */\n    this.layerRendererListeners_ = {};\n\n    /**\n     * @private\n     * @type {Array<typeof import(\"./Layer.js\").default>}\n     */\n    this.layerRendererConstructors_ = [];\n\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../render/EventType.js\").default} type Event type.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  dispatchRenderEvent(type, frameState) {\n    abstract();\n  }\n\n  /**\n   * Register layer renderer constructors.\n   * @param {Array<typeof import(\"./Layer.js\").default>} constructors Layer renderers.\n   */\n  registerLayerRenderers(constructors) {\n    this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_, constructors);\n  }\n\n  /**\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n   * @protected\n   */\n  calculateMatrices2D(frameState) {\n    const viewState = frameState.viewState;\n    const coordinateToPixelTransform = frameState.coordinateToPixelTransform;\n    const pixelToCoordinateTransform = frameState.pixelToCoordinateTransform;\n\n    composeTransform(coordinateToPixelTransform,\n      frameState.size[0] / 2, frameState.size[1] / 2,\n      1 / viewState.resolution, -1 / viewState.resolution,\n      -viewState.rotation,\n      -viewState.center[0], -viewState.center[1]);\n\n    invertTransform(\n      transformSetFromArray(pixelToCoordinateTransform, coordinateToPixelTransform));\n  }\n\n  /**\n   * Removes all layer renderers.\n   */\n  removeLayerRenderers() {\n    for (const key in this.layerRenderers_) {\n      this.removeLayerRendererByKey_(key).dispose();\n    }\n  }\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(this: S, import(\"../Feature.js\").FeatureLike,\n   *     import(\"../layer/Layer.js\").default): T} callback Feature callback.\n   * @param {S} thisArg Value to use as `this` when executing `callback`.\n   * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n   *     function, only layers which are visible and for which this function\n   *     returns `true` will be tested for features.  By default, all visible\n   *     layers will be tested.\n   * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n   * @return {T|undefined} Callback result.\n   * @template S,T,U\n   */\n  forEachFeatureAtCoordinate(\n    coordinate,\n    frameState,\n    hitTolerance,\n    callback,\n    thisArg,\n    layerFilter,\n    thisArg2\n  ) {\n    let result;\n    const viewState = frameState.viewState;\n    const viewResolution = viewState.resolution;\n\n    /**\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     * @param {import(\"../layer/Layer.js\").default} layer Layer.\n     * @return {?} Callback result.\n     */\n    function forEachFeatureAtCoordinate(feature, layer) {\n      const managed = frameState.layerStates[getUid(layer)].managed;\n      if (!(getUid(feature) in frameState.skippedFeatureUids && !managed)) {\n        return callback.call(thisArg, feature, managed ? layer : null);\n      }\n    }\n\n    const projection = viewState.projection;\n\n    let translatedCoordinate = coordinate;\n    if (projection.canWrapX()) {\n      const projectionExtent = projection.getExtent();\n      const worldWidth = getWidth(projectionExtent);\n      const x = coordinate[0];\n      if (x < projectionExtent[0] || x > projectionExtent[2]) {\n        const worldsAway = Math.ceil((projectionExtent[0] - x) / worldWidth);\n        translatedCoordinate = [x + worldWidth * worldsAway, coordinate[1]];\n      }\n    }\n\n    const layerStates = frameState.layerStatesArray;\n    const numLayers = layerStates.length;\n    let i;\n    for (i = numLayers - 1; i >= 0; --i) {\n      const layerState = layerStates[i];\n      const layer = layerState.layer;\n      if (visibleAtResolution(layerState, viewResolution) && layerFilter.call(thisArg2, layer)) {\n        const layerRenderer = this.getLayerRenderer(layer);\n        const source = /** @type {import(\"../layer/Layer.js\").default} */ (layer).getSource();\n        if (source) {\n          result = layerRenderer.forEachFeatureAtCoordinate(\n            source.getWrapX() ? translatedCoordinate : coordinate,\n            frameState, hitTolerance, forEachFeatureAtCoordinate);\n        }\n        if (result) {\n          return result;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(this: S, import(\"../layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n   *     callback.\n   * @param {S} thisArg Value to use as `this` when executing `callback`.\n   * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n   *     function, only layers which are visible and for which this function\n   *     returns `true` will be tested for features.  By default, all visible\n   *     layers will be tested.\n   * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n   * @return {T|undefined} Callback result.\n   * @template S,T,U\n   */\n  forEachLayerAtPixel(pixel, frameState, hitTolerance, callback, thisArg, layerFilter, thisArg2) {\n    return abstract();\n  }\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n   *     function, only layers which are visible and for which this function\n   *     returns `true` will be tested for features.  By default, all visible\n   *     layers will be tested.\n   * @param {U} thisArg Value to use as `this` when executing `layerFilter`.\n   * @return {boolean} Is there a feature at the given coordinate?\n   * @template U\n   */\n  hasFeatureAtCoordinate(coordinate, frameState, hitTolerance, layerFilter, thisArg) {\n    const hasFeature = this.forEachFeatureAtCoordinate(\n      coordinate, frameState, hitTolerance, TRUE, this, layerFilter, thisArg);\n\n    return hasFeature !== undefined;\n  }\n\n  /**\n   * @param {import(\"../layer/Base.js\").default} layer Layer.\n   * @protected\n   * @return {import(\"./Layer.js\").default} Layer renderer.\n   */\n  getLayerRenderer(layer) {\n    const layerKey = getUid(layer);\n    if (layerKey in this.layerRenderers_) {\n      return this.layerRenderers_[layerKey];\n    } else {\n      let renderer;\n      for (let i = 0, ii = this.layerRendererConstructors_.length; i < ii; ++i) {\n        const candidate = this.layerRendererConstructors_[i];\n        if (candidate['handles'](layer)) {\n          renderer = candidate['create'](this, layer);\n          break;\n        }\n      }\n      if (renderer) {\n        this.layerRenderers_[layerKey] = renderer;\n        this.layerRendererListeners_[layerKey] = listen(renderer,\n          EventType.CHANGE, this.handleLayerRendererChange_, this);\n      } else {\n        throw new Error('Unable to create renderer for layer: ' + layer.getType());\n      }\n      return renderer;\n    }\n  }\n\n  /**\n   * @param {string} layerKey Layer key.\n   * @protected\n   * @return {import(\"./Layer.js\").default} Layer renderer.\n   */\n  getLayerRendererByKey(layerKey) {\n    return this.layerRenderers_[layerKey];\n  }\n\n  /**\n   * @protected\n   * @return {Object<string, import(\"./Layer.js\").default>} Layer renderers.\n   */\n  getLayerRenderers() {\n    return this.layerRenderers_;\n  }\n\n  /**\n   * @return {import(\"../PluggableMap.js\").default} Map.\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Handle changes in a layer renderer.\n   * @private\n   */\n  handleLayerRendererChange_() {\n    this.map_.render();\n  }\n\n  /**\n   * @param {string} layerKey Layer key.\n   * @return {import(\"./Layer.js\").default} Layer renderer.\n   * @private\n   */\n  removeLayerRendererByKey_(layerKey) {\n    const layerRenderer = this.layerRenderers_[layerKey];\n    delete this.layerRenderers_[layerKey];\n\n    unlistenByKey(this.layerRendererListeners_[layerKey]);\n    delete this.layerRendererListeners_[layerKey];\n\n    return layerRenderer;\n  }\n\n  /**\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n  removeUnusedLayerRenderers_(map, frameState) {\n    for (const layerKey in this.layerRenderers_) {\n      if (!frameState || !(layerKey in frameState.layerStates)) {\n        this.removeLayerRendererByKey_(layerKey).dispose();\n      }\n    }\n  }\n\n  /**\n   * Render.\n   * @abstract\n   * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  renderFrame(frameState) {\n    abstract();\n  }\n\n  /**\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n  scheduleExpireIconCache(frameState) {\n    frameState.postRenderFunctions.push(/** @type {import(\"../PluggableMap.js\").PostRenderFunction} */ (expireIconCache));\n  }\n\n  /**\n   * @param {!import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n  scheduleRemoveUnusedLayerRenderers(frameState) {\n    for (const layerKey in this.layerRenderers_) {\n      if (!(layerKey in frameState.layerStates)) {\n        frameState.postRenderFunctions.push(\n          /** @type {import(\"../PluggableMap.js\").PostRenderFunction} */ (this.removeUnusedLayerRenderers_.bind(this))\n        );\n        return;\n      }\n    }\n  }\n}\n\n\n/**\n * @param {import(\"../PluggableMap.js\").default} map Map.\n * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n */\nfunction expireIconCache(map, frameState) {\n  iconImageCache.expire();\n}\n\n\n/**\n * @param {import(\"../layer/Layer.js\").State} state1 First layer state.\n * @param {import(\"../layer/Layer.js\").State} state2 Second layer state.\n * @return {number} The zIndex difference.\n */\nexport function sortByZIndex(state1, state2) {\n  return state1.zIndex - state2.zIndex;\n}\nexport default MapRenderer;\n","/**\n * @module ol/renderer/canvas/Map\n */\nimport {create as createTransform, apply as applyTransform, compose as composeTransform} from '../../transform.js';\nimport {includes, stableSort} from '../../array.js';\nimport {CLASS_UNSELECTABLE} from '../../css.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {visibleAtResolution} from '../../layer/Layer.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {rotateAtOffset} from '../../render/canvas.js';\nimport CanvasImmediateRenderer from '../../render/canvas/Immediate.js';\nimport MapRenderer, {sortByZIndex} from '../Map.js';\nimport SourceState from '../../source/State.js';\n\n\n/**\n * @type {Array<typeof import(\"../Layer.js\").default>}\n */\nexport const layerRendererConstructors = [];\n\n/**\n * @classdesc\n * Canvas map renderer.\n * @api\n */\nclass CanvasMapRenderer extends MapRenderer {\n\n  /**\n   * @param {import(\"../../PluggableMap.js\").default} map Map.\n   */\n  constructor(map) {\n    super(map);\n\n    const container = map.getViewport();\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context_ = createCanvasContext2D();\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = this.context_.canvas;\n\n    this.canvas_.style.width = '100%';\n    this.canvas_.style.height = '100%';\n    this.canvas_.style.display = 'block';\n    this.canvas_.className = CLASS_UNSELECTABLE;\n    container.insertBefore(this.canvas_, container.childNodes[0] || null);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = true;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.transform_ = createTransform();\n\n  }\n\n  /**\n   * @param {import(\"../../render/EventType.js\").default} type Event type.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  dispatchRenderEvent(type, frameState) {\n    const map = this.getMap();\n    const context = this.context_;\n    if (map.hasListener(type)) {\n      const extent = frameState.extent;\n      const pixelRatio = frameState.pixelRatio;\n      const viewState = frameState.viewState;\n      const rotation = viewState.rotation;\n\n      const transform = this.getTransform(frameState);\n\n      const vectorContext = new CanvasImmediateRenderer(context, pixelRatio,\n        extent, transform, rotation);\n      const composeEvent = new RenderEvent(type, vectorContext,\n        frameState, context, null);\n      map.dispatchEvent(composeEvent);\n    }\n  }\n\n  /**\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   * @return {!import(\"../../transform.js\").Transform} Transform.\n   */\n  getTransform(frameState) {\n    const viewState = frameState.viewState;\n    const dx1 = this.canvas_.width / 2;\n    const dy1 = this.canvas_.height / 2;\n    const sx = frameState.pixelRatio / viewState.resolution;\n    const sy = -sx;\n    const angle = -viewState.rotation;\n    const dx2 = -viewState.center[0];\n    const dy2 = -viewState.center[1];\n    return composeTransform(this.transform_, dx1, dy1, sx, sy, angle, dx2, dy2);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  renderFrame(frameState) {\n\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.canvas_.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    const context = this.context_;\n    const pixelRatio = frameState.pixelRatio;\n    const width = Math.round(frameState.size[0] * pixelRatio);\n    const height = Math.round(frameState.size[1] * pixelRatio);\n    if (this.canvas_.width != width || this.canvas_.height != height) {\n      this.canvas_.width = width;\n      this.canvas_.height = height;\n    } else {\n      context.clearRect(0, 0, width, height);\n    }\n\n    const rotation = frameState.viewState.rotation;\n\n    this.calculateMatrices2D(frameState);\n\n    this.dispatchRenderEvent(RenderEventType.PRECOMPOSE, frameState);\n\n    const layerStatesArray = frameState.layerStatesArray;\n    stableSort(layerStatesArray, sortByZIndex);\n\n    if (rotation) {\n      context.save();\n      rotateAtOffset(context, rotation, width / 2, height / 2);\n    }\n\n    const viewResolution = frameState.viewState.resolution;\n    let i, ii;\n    for (i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      const layerState = layerStatesArray[i];\n      const layer = layerState.layer;\n      const layerRenderer = /** @type {import(\"./Layer.js\").default} */ (this.getLayerRenderer(layer));\n      if (!visibleAtResolution(layerState, viewResolution) ||\n          layerState.sourceState != SourceState.READY) {\n        continue;\n      }\n      if (layerRenderer.prepareFrame(frameState, layerState)) {\n        layerRenderer.composeFrame(frameState, layerState, context);\n      }\n    }\n\n    if (rotation) {\n      context.restore();\n    }\n\n    this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE, frameState);\n\n    if (!this.renderedVisible_) {\n      this.canvas_.style.display = '';\n      this.renderedVisible_ = true;\n    }\n\n    this.scheduleRemoveUnusedLayerRenderers(frameState);\n    this.scheduleExpireIconCache(frameState);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachLayerAtPixel(pixel, frameState, hitTolerance, callback, thisArg, layerFilter, thisArg2) {\n    let result;\n    const viewState = frameState.viewState;\n    const viewResolution = viewState.resolution;\n\n    const layerStates = frameState.layerStatesArray;\n    const numLayers = layerStates.length;\n\n    const coordinate = applyTransform(\n      frameState.pixelToCoordinateTransform, pixel.slice());\n\n    let i;\n    for (i = numLayers - 1; i >= 0; --i) {\n      const layerState = layerStates[i];\n      const layer = layerState.layer;\n      if (visibleAtResolution(layerState, viewResolution) && layerFilter.call(thisArg2, layer)) {\n        const layerRenderer = /** @type {import(\"./Layer.js\").default} */ (this.getLayerRenderer(layer));\n        result = layerRenderer.forEachLayerAtCoordinate(\n          coordinate, frameState, hitTolerance, callback, thisArg);\n        if (result) {\n          return result;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  registerLayerRenderers(constructors) {\n    super.registerLayerRenderers(constructors);\n    for (let i = 0, ii = constructors.length; i < ii; ++i) {\n      const ctor = constructors[i];\n      if (!includes(layerRendererConstructors, ctor)) {\n        layerRendererConstructors.push(ctor);\n      }\n    }\n  }\n}\n\n\nexport default CanvasMapRenderer;\n","/**\n * @module ol/renderer/canvas/Layer\n */\nimport {abstract} from '../../util.js';\nimport {getBottomLeft, getBottomRight, getTopLeft, getTopRight} from '../../extent.js';\nimport {TRUE} from '../../functions.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {rotateAtOffset} from '../../render/canvas.js';\nimport CanvasImmediateRenderer from '../../render/canvas/Immediate.js';\nimport LayerRenderer from '../Layer.js';\nimport {create as createTransform, apply as applyTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @abstract\n */\nclass CanvasLayerRenderer extends LayerRenderer {\n\n  /**\n   * @param {import(\"../../layer/Layer.js\").default} layer Layer.\n   */\n  constructor(layer) {\n\n    super(layer);\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.renderedResolution;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.transform_ = createTransform();\n\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../extent.js\").Extent} extent Clip extent.\n   * @protected\n   */\n  clip(context, frameState, extent) {\n    const pixelRatio = frameState.pixelRatio;\n    const width = frameState.size[0] * pixelRatio;\n    const height = frameState.size[1] * pixelRatio;\n    const rotation = frameState.viewState.rotation;\n    const topLeft = getTopLeft(extent);\n    const topRight = getTopRight(extent);\n    const bottomRight = getBottomRight(extent);\n    const bottomLeft = getBottomLeft(extent);\n\n    applyTransform(frameState.coordinateToPixelTransform, topLeft);\n    applyTransform(frameState.coordinateToPixelTransform, topRight);\n    applyTransform(frameState.coordinateToPixelTransform, bottomRight);\n    applyTransform(frameState.coordinateToPixelTransform, bottomLeft);\n\n    context.save();\n    rotateAtOffset(context, -rotation, width / 2, height / 2);\n    context.beginPath();\n    context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio);\n    context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio);\n    context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio);\n    context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio);\n    context.clip();\n    rotateAtOffset(context, rotation, width / 2, height / 2);\n  }\n\n  /**\n   * @param {import(\"../../render/EventType.js\").default} type Event type.\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../transform.js\").Transform=} opt_transform Transform.\n   * @private\n   */\n  dispatchComposeEvent_(type, context, frameState, opt_transform) {\n    const layer = this.getLayer();\n    if (layer.hasListener(type)) {\n      const width = frameState.size[0] * frameState.pixelRatio;\n      const height = frameState.size[1] * frameState.pixelRatio;\n      const rotation = frameState.viewState.rotation;\n      rotateAtOffset(context, -rotation, width / 2, height / 2);\n      const transform = opt_transform !== undefined ?\n        opt_transform : this.getTransform(frameState, 0);\n      const render = new CanvasImmediateRenderer(\n        context, frameState.pixelRatio, frameState.extent, transform,\n        frameState.viewState.rotation);\n      const composeEvent = new RenderEvent(type, render, frameState,\n        context, null);\n      layer.dispatchEvent(composeEvent);\n      rotateAtOffset(context, rotation, width / 2, height / 2);\n    }\n  }\n\n  /**\n   * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(this: S, import(\"../../layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n   *     callback.\n   * @param {S} thisArg Value to use as `this` when executing `callback`.\n   * @return {T|undefined} Callback result.\n   * @template S,T,U\n   */\n  forEachLayerAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg) {\n    const hasFeature = this.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, TRUE);\n\n    if (hasFeature) {\n      return callback.call(thisArg, this.getLayer(), null);\n    } else {\n      return undefined;\n    }\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../layer/Layer.js\").State} layerState Layer state.\n   * @param {import(\"../../transform.js\").Transform=} opt_transform Transform.\n   * @protected\n   */\n  postCompose(context, frameState, layerState, opt_transform) {\n    this.dispatchComposeEvent_(RenderEventType.POSTCOMPOSE, context, frameState, opt_transform);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../transform.js\").Transform=} opt_transform Transform.\n   * @protected\n   */\n  preCompose(context, frameState, opt_transform) {\n    this.dispatchComposeEvent_(RenderEventType.PRECOMPOSE, context, frameState, opt_transform);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../transform.js\").Transform=} opt_transform Transform.\n   * @protected\n   */\n  dispatchRenderEvent(context, frameState, opt_transform) {\n    this.dispatchComposeEvent_(RenderEventType.RENDER, context, frameState, opt_transform);\n  }\n\n  /**\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {number} offsetX Offset on the x-axis in view coordinates.\n   * @protected\n   * @return {!import(\"../../transform.js\").Transform} Transform.\n   */\n  getTransform(frameState, offsetX) {\n    const viewState = frameState.viewState;\n    const pixelRatio = frameState.pixelRatio;\n    const dx1 = pixelRatio * frameState.size[0] / 2;\n    const dy1 = pixelRatio * frameState.size[1] / 2;\n    const sx = pixelRatio / viewState.resolution;\n    const sy = -sx;\n    const angle = -viewState.rotation;\n    const dx2 = -viewState.center[0] + offsetX;\n    const dy2 = -viewState.center[1];\n    return composeTransform(this.transform_, dx1, dy1, sx, sy, angle, dx2, dy2);\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../layer/Layer.js\").State} layerState Layer state.\n   * @param {CanvasRenderingContext2D} context Context.\n   */\n  composeFrame(frameState, layerState, context) {\n    abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../layer/Layer.js\").State} layerState Layer state.\n   * @return {boolean} whether composeFrame should be called.\n   */\n  prepareFrame(frameState, layerState) {\n    return abstract();\n  }\n}\n\nexport default CanvasLayerRenderer;\n","/**\n * @module ol/renderer/Layer\n */\nimport {getUid} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport Observable from '../Observable.js';\nimport TileState from '../TileState.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport SourceState from '../source/State.js';\n\nclass LayerRenderer extends Observable {\n\n  /**\n   * @param {import(\"../layer/Layer.js\").default} layer Layer.\n   */\n  constructor(layer) {\n\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../layer/Layer.js\").default}\n     */\n    this.layer_ = layer;\n\n  }\n\n  /**\n   * Create a function that adds loaded tiles to the tile lookup.\n   * @param {import(\"../source/Tile.js\").default} source Tile source.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection of the tiles.\n   * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n   * @return {function(number, import(\"../TileRange.js\").default):boolean} A function that can be\n   *     called with a zoom level and a tile range to add loaded tiles to the lookup.\n   * @protected\n   */\n  createLoadedTileFinder(source, projection, tiles) {\n    return (\n      /**\n       * @param {number} zoom Zoom level.\n       * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n       * @return {boolean} The tile range is fully loaded.\n       */\n      function(zoom, tileRange) {\n        /**\n         * @param {import(\"../Tile.js\").default} tile Tile.\n         */\n        function callback(tile) {\n          if (!tiles[zoom]) {\n            tiles[zoom] = {};\n          }\n          tiles[zoom][tile.tileCoord.toString()] = tile;\n        }\n        return source.forEachLoadedTile(projection, zoom, tileRange, callback);\n      }\n    );\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default): T} callback Feature callback.\n   * @return {T|void} Callback result.\n   * @template T\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback) {}\n\n  /**\n   * @return {import(\"../layer/Layer.js\").default} Layer.\n   */\n  getLayer() {\n    return this.layer_;\n  }\n\n  /**\n   * Handle changes in image state.\n   * @param {import(\"../events/Event.js\").default} event Image change event.\n   * @private\n   */\n  handleImageChange_(event) {\n    const image = /** @type {import(\"../Image.js\").default} */ (event.target);\n    if (image.getState() === ImageState.LOADED) {\n      this.renderIfReadyAndVisible();\n    }\n  }\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {boolean} Is there a feature at the given coordinate?\n   */\n  hasFeatureAtCoordinate(coordinate, frameState) {\n    return false;\n  }\n\n  /**\n   * Load the image if not already loaded, and register the image change\n   * listener if needed.\n   * @param {import(\"../ImageBase.js\").default} image Image.\n   * @return {boolean} `true` if the image is already loaded, `false` otherwise.\n   * @protected\n   */\n  loadImage(image) {\n    let imageState = image.getState();\n    if (imageState != ImageState.LOADED && imageState != ImageState.ERROR) {\n      listen(image, EventType.CHANGE, this.handleImageChange_, this);\n    }\n    if (imageState == ImageState.IDLE) {\n      image.load();\n      imageState = image.getState();\n    }\n    return imageState == ImageState.LOADED;\n  }\n\n  /**\n   * @protected\n   */\n  renderIfReadyAndVisible() {\n    const layer = this.getLayer();\n    if (layer.getVisible() && layer.getSourceState() == SourceState.READY) {\n      this.changed();\n    }\n  }\n\n  /**\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../source/Tile.js\").default} tileSource Tile source.\n   * @protected\n   */\n  scheduleExpireCache(frameState, tileSource) {\n    if (tileSource.canExpireCache()) {\n      /**\n       * @param {import(\"../source/Tile.js\").default} tileSource Tile source.\n       * @param {import(\"../PluggableMap.js\").default} map Map.\n       * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n       */\n      const postRenderFunction = function(tileSource, map, frameState) {\n        const tileSourceKey = getUid(tileSource);\n        if (tileSourceKey in frameState.usedTiles) {\n          tileSource.expireCache(frameState.viewState.projection,\n            frameState.usedTiles[tileSourceKey]);\n        }\n      }.bind(null, tileSource);\n\n      frameState.postRenderFunctions.push(\n        /** @type {import(\"../PluggableMap.js\").PostRenderFunction} */ (postRenderFunction)\n      );\n    }\n  }\n\n  /**\n   * @param {!Object<string, !Object<string, import(\"../TileRange.js\").default>>} usedTiles Used tiles.\n   * @param {import(\"../source/Tile.js\").default} tileSource Tile source.\n   * @param {number} z Z.\n   * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n   * @protected\n   */\n  updateUsedTiles(usedTiles, tileSource, z, tileRange) {\n    // FIXME should we use tilesToDrawByZ instead?\n    const tileSourceKey = getUid(tileSource);\n    const zKey = z.toString();\n    if (tileSourceKey in usedTiles) {\n      if (zKey in usedTiles[tileSourceKey]) {\n        usedTiles[tileSourceKey][zKey].extend(tileRange);\n      } else {\n        usedTiles[tileSourceKey][zKey] = tileRange;\n      }\n    } else {\n      usedTiles[tileSourceKey] = {};\n      usedTiles[tileSourceKey][zKey] = tileRange;\n    }\n  }\n\n  /**\n   * Manage tile pyramid.\n   * This function performs a number of functions related to the tiles at the\n   * current zoom and lower zoom levels:\n   * - registers idle tiles in frameState.wantedTiles so that they are not\n   *   discarded by the tile queue\n   * - enqueues missing tiles\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../source/Tile.js\").default} tileSource Tile source.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} currentZ Current Z.\n   * @param {number} preload Load low resolution tiles up to 'preload' levels.\n   * @param {function(this: T, import(\"../Tile.js\").default)=} opt_tileCallback Tile callback.\n   * @param {T=} opt_this Object to use as `this` in `opt_tileCallback`.\n   * @protected\n   * @template T\n   */\n  manageTilePyramid(\n    frameState,\n    tileSource,\n    tileGrid,\n    pixelRatio,\n    projection,\n    extent,\n    currentZ,\n    preload,\n    opt_tileCallback,\n    opt_this\n  ) {\n    const tileSourceKey = getUid(tileSource);\n    if (!(tileSourceKey in frameState.wantedTiles)) {\n      frameState.wantedTiles[tileSourceKey] = {};\n    }\n    const wantedTiles = frameState.wantedTiles[tileSourceKey];\n    const tileQueue = frameState.tileQueue;\n    const minZoom = tileGrid.getMinZoom();\n    let tile, tileRange, tileResolution, x, y, z;\n    for (z = minZoom; z <= currentZ; ++z) {\n      tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z, tileRange);\n      tileResolution = tileGrid.getResolution(z);\n      for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n        for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n          if (currentZ - z <= preload) {\n            tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n            if (tile.getState() == TileState.IDLE) {\n              wantedTiles[tile.getKey()] = true;\n              if (!tileQueue.isKeyQueued(tile.getKey())) {\n                tileQueue.enqueue([tile, tileSourceKey,\n                  tileGrid.getTileCoordCenter(tile.tileCoord), tileResolution]);\n              }\n            }\n            if (opt_tileCallback !== undefined) {\n              opt_tileCallback.call(opt_this, tile);\n            }\n          } else {\n            tileSource.useTile(z, x, y, projection);\n          }\n        }\n      }\n    }\n  }\n}\n\nexport default LayerRenderer;\n","/**\n * @module ol/renderer/canvas/IntermediateCanvas\n */\nimport {abstract} from '../../util.js';\nimport {scale as scaleCoordinate} from '../../coordinate.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {containsExtent, intersects} from '../../extent.js';\nimport CanvasLayerRenderer from './Layer.js';\nimport {create as createTransform, apply as applyTransform} from '../../transform.js';\n\n/**\n * @abstract\n */\nclass IntermediateCanvasRenderer extends CanvasLayerRenderer {\n\n  /**\n   * @param {import(\"../../layer/Layer.js\").default} layer Layer.\n   */\n  constructor(layer) {\n\n    super(layer);\n\n    /**\n     * @protected\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.coordinateToCanvasPixelTransform = createTransform();\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.hitCanvasContext_ = null;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  composeFrame(frameState, layerState, context) {\n\n    this.preCompose(context, frameState);\n\n    const image = this.getImage();\n    if (image) {\n\n      // clipped rendering if layer extent is set\n      const extent = layerState.extent;\n      const clipped = extent !== undefined &&\n          !containsExtent(extent, frameState.extent) &&\n          intersects(extent, frameState.extent);\n      if (clipped) {\n        this.clip(context, frameState, /** @type {import(\"../../extent.js\").Extent} */ (extent));\n      }\n\n      const imageTransform = this.getImageTransform();\n      // for performance reasons, context.save / context.restore is not used\n      // to save and restore the transformation matrix and the opacity.\n      // see http://jsperf.com/context-save-restore-versus-variable\n      const alpha = context.globalAlpha;\n      context.globalAlpha = layerState.opacity;\n\n      // for performance reasons, context.setTransform is only used\n      // when the view is rotated. see http://jsperf.com/canvas-transform\n      const dx = imageTransform[4];\n      const dy = imageTransform[5];\n      const dw = image.width * imageTransform[0];\n      const dh = image.height * imageTransform[3];\n      if (dw >= 0.5 && dh >= 0.5) {\n        context.drawImage(image, 0, 0, +image.width, +image.height,\n          Math.round(dx), Math.round(dy), Math.round(dw), Math.round(dh));\n      }\n      context.globalAlpha = alpha;\n\n      if (clipped) {\n        context.restore();\n      }\n    }\n\n    this.postCompose(context, frameState, layerState);\n  }\n\n  /**\n   * @abstract\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Canvas.\n   */\n  getImage() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {!import(\"../../transform.js\").Transform} Image transform.\n   */\n  getImageTransform() {\n    return abstract();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachLayerAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg) {\n    if (!this.getImage()) {\n      return undefined;\n    }\n\n    const pixel = applyTransform(this.coordinateToCanvasPixelTransform, coordinate.slice());\n    scaleCoordinate(pixel, frameState.viewState.resolution / this.renderedResolution);\n\n    if (!this.hitCanvasContext_) {\n      this.hitCanvasContext_ = createCanvasContext2D(1, 1);\n    }\n\n    this.hitCanvasContext_.clearRect(0, 0, 1, 1);\n    this.hitCanvasContext_.drawImage(this.getImage(), pixel[0], pixel[1], 1, 1, 0, 0, 1, 1);\n\n    const imageData = this.hitCanvasContext_.getImageData(0, 0, 1, 1).data;\n    if (imageData[3] > 0) {\n      return callback.call(thisArg, this.getLayer(), imageData);\n    } else {\n      return undefined;\n    }\n  }\n}\n\n\nexport default IntermediateCanvasRenderer;\n","/**\n * @module ol/renderer/canvas/ImageLayer\n */\nimport {ENABLE_RASTER_REPROJECTION} from '../../reproj/common.js';\nimport ImageCanvas from '../../ImageCanvas.js';\nimport LayerType from '../../LayerType.js';\nimport ViewHint from '../../ViewHint.js';\nimport {equals} from '../../array.js';\nimport {getHeight, getIntersection, getWidth, isEmpty} from '../../extent.js';\nimport VectorRenderType from '../../layer/VectorRenderType.js';\nimport {assign} from '../../obj.js';\nimport {layerRendererConstructors} from './Map.js';\nimport IntermediateCanvasRenderer from './IntermediateCanvas.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @classdesc\n * Canvas renderer for image layers.\n * @api\n */\nclass CanvasImageLayerRenderer extends IntermediateCanvasRenderer {\n\n  /**\n   * @param {import(\"../../layer/Image.js\").default|import(\"../../layer/Vector.js\").default} imageLayer Image or vector layer.\n   */\n  constructor(imageLayer) {\n\n    super(imageLayer);\n\n    /**\n     * @private\n     * @type {?import(\"../../ImageBase.js\").default}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.imageTransform_ = createTransform();\n\n    /**\n     * @type {!Array<string>}\n     */\n    this.skippedFeatures_ = [];\n\n    /**\n     * @private\n     * @type {import(\"./VectorLayer.js\").default}\n     */\n    this.vectorRenderer_ = null;\n\n    if (imageLayer.getType() === LayerType.VECTOR) {\n      for (let i = 0, ii = layerRendererConstructors.length; i < ii; ++i) {\n        const ctor = layerRendererConstructors[i];\n        if (ctor !== CanvasImageLayerRenderer && ctor['handles'](imageLayer)) {\n          this.vectorRenderer_ = /** @type {import(\"./VectorLayer.js\").default} */ (new ctor(imageLayer));\n          break;\n        }\n      }\n    }\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.vectorRenderer_) {\n      this.vectorRenderer_.dispose();\n    }\n    super.disposeInternal();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImage() {\n    return !this.image_ ? null : this.image_.getImage();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageTransform() {\n    return this.imageTransform_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState, layerState) {\n\n    const pixelRatio = frameState.pixelRatio;\n    const size = frameState.size;\n    const viewState = frameState.viewState;\n    const viewCenter = viewState.center;\n    const viewResolution = viewState.resolution;\n\n    let image;\n    const imageLayer = /** @type {import(\"../../layer/Image.js\").default} */ (this.getLayer());\n    const imageSource = /** @type {import(\"../../source/Image.js\").default} */ (imageLayer.getSource());\n\n    const hints = frameState.viewHints;\n\n    const vectorRenderer = this.vectorRenderer_;\n    let renderedExtent = frameState.extent;\n    if (!vectorRenderer && layerState.extent !== undefined) {\n      renderedExtent = getIntersection(renderedExtent, layerState.extent);\n    }\n\n    if (!hints[ViewHint.ANIMATING] && !hints[ViewHint.INTERACTING] &&\n        !isEmpty(renderedExtent)) {\n      let projection = viewState.projection;\n      if (!ENABLE_RASTER_REPROJECTION) {\n        const sourceProjection = imageSource.getProjection();\n        if (sourceProjection) {\n          projection = sourceProjection;\n        }\n      }\n      let skippedFeatures = this.skippedFeatures_;\n      if (vectorRenderer) {\n        const context = vectorRenderer.context;\n        const imageFrameState = /** @type {import(\"../../PluggableMap.js\").FrameState} */ (assign({}, frameState, {\n          size: [\n            getWidth(renderedExtent) / viewResolution,\n            getHeight(renderedExtent) / viewResolution\n          ],\n          viewState: /** @type {import(\"../../View.js\").State} */ (assign({}, frameState.viewState, {\n            rotation: 0\n          }))\n        }));\n        const newSkippedFeatures = Object.keys(imageFrameState.skippedFeatureUids).sort();\n        image = new ImageCanvas(renderedExtent, viewResolution, pixelRatio, context.canvas, function(callback) {\n          if (vectorRenderer.prepareFrame(imageFrameState, layerState) &&\n              (vectorRenderer.replayGroupChanged ||\n              !equals(skippedFeatures, newSkippedFeatures))) {\n            context.canvas.width = imageFrameState.size[0] * pixelRatio;\n            context.canvas.height = imageFrameState.size[1] * pixelRatio;\n            vectorRenderer.compose(context, imageFrameState, layerState);\n            skippedFeatures = newSkippedFeatures;\n            callback();\n          }\n        });\n      } else {\n        image = imageSource.getImage(\n          renderedExtent, viewResolution, pixelRatio, projection);\n      }\n      if (image && this.loadImage(image)) {\n        this.image_ = image;\n        this.skippedFeatures_ = skippedFeatures;\n      }\n    }\n\n    if (this.image_) {\n      image = this.image_;\n      const imageExtent = image.getExtent();\n      const imageResolution = image.getResolution();\n      const imagePixelRatio = image.getPixelRatio();\n      const scale = pixelRatio * imageResolution /\n          (viewResolution * imagePixelRatio);\n      const transform = composeTransform(this.imageTransform_,\n        pixelRatio * size[0] / 2, pixelRatio * size[1] / 2,\n        scale, scale,\n        0,\n        imagePixelRatio * (imageExtent[0] - viewCenter[0]) / imageResolution,\n        imagePixelRatio * (viewCenter[1] - imageExtent[3]) / imageResolution);\n      composeTransform(this.coordinateToCanvasPixelTransform,\n        pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5],\n        pixelRatio / viewResolution, -pixelRatio / viewResolution,\n        0,\n        -viewCenter[0], -viewCenter[1]);\n\n      this.renderedResolution = imageResolution * pixelRatio / imagePixelRatio;\n    }\n\n    return !!this.image_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback) {\n    if (this.vectorRenderer_) {\n      return this.vectorRenderer_.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback);\n    } else {\n      return super.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback);\n    }\n  }\n}\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {import(\"../../layer/Layer.js\").default} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasImageLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.IMAGE ||\n    layer.getType() === LayerType.VECTOR &&\n    /** @type {import(\"../../layer/Vector.js\").default} */ (layer).getRenderMode() === VectorRenderType.IMAGE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {import(\"../Map.js\").default} mapRenderer The map renderer.\n * @param {import(\"../../layer/Layer.js\").default} layer The layer to be rendererd.\n * @return {CanvasImageLayerRenderer} The layer renderer.\n */\nCanvasImageLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasImageLayerRenderer(/** @type {import(\"../../layer/Image.js\").default} */ (layer));\n};\n\n\nexport default CanvasImageLayerRenderer;\n","/**\n * @module ol/renderer/canvas/TileLayer\n */\nimport {getUid} from '../../util.js';\nimport LayerType from '../../LayerType.js';\nimport TileRange from '../../TileRange.js';\nimport TileState from '../../TileState.js';\nimport ViewHint from '../../ViewHint.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {containsExtent, createEmpty, equals, getIntersection, isEmpty} from '../../extent.js';\nimport IntermediateCanvasRenderer from './IntermediateCanvas.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @classdesc\n * Canvas renderer for tile layers.\n * @api\n */\nclass CanvasTileLayerRenderer extends IntermediateCanvasRenderer {\n\n  /**\n   * @param {import(\"../../layer/Tile.js\").default|import(\"../../layer/VectorTile.js\").default} tileLayer Tile layer.\n   * @param {boolean=} opt_noContext Skip the context creation.\n   */\n  constructor(tileLayer, opt_noContext) {\n\n    super(tileLayer);\n\n    /**\n     * @protected\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context = opt_noContext ? null : createCanvasContext2D();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.oversampling_;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.renderedExtent_ = null;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.renderedRevision;\n\n    /**\n     * @protected\n     * @type {!Array<import(\"../../Tile.js\").default>}\n     */\n    this.renderedTiles = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.newTiles_ = false;\n\n    /**\n     * @protected\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.tmpExtent = createEmpty();\n\n    /**\n     * @private\n     * @type {import(\"../../TileRange.js\").default}\n     */\n    this.tmpTileRange_ = new TileRange(0, 0, 0, 0);\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.imageTransform_ = createTransform();\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.zDirection = 0;\n\n  }\n\n  /**\n   * @private\n   * @param {import(\"../../Tile.js\").default} tile Tile.\n   * @return {boolean} Tile is drawable.\n   */\n  isDrawableTile_(tile) {\n    const tileLayer = /** @type {import(\"../../layer/Tile.js\").default} */ (this.getLayer());\n    const tileState = tile.getState();\n    const useInterimTilesOnError = tileLayer.getUseInterimTilesOnError();\n    return tileState == TileState.LOADED ||\n        tileState == TileState.EMPTY ||\n        tileState == TileState.ERROR && !useInterimTilesOnError;\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n   * @return {!import(\"../../Tile.js\").default} Tile.\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    const tileLayer = /** @type {import(\"../../layer/Tile.js\").default} */ (this.getLayer());\n    const tileSource = /** @type {import(\"../../source/Tile.js\").default} */ (tileLayer.getSource());\n    let tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n    if (tile.getState() == TileState.ERROR) {\n      if (!tileLayer.getUseInterimTilesOnError()) {\n        // When useInterimTilesOnError is false, we consider the error tile as loaded.\n        tile.setState(TileState.LOADED);\n      } else if (tileLayer.getPreload() > 0) {\n        // Preloaded tiles for lower resolutions might have finished loading.\n        this.newTiles_ = true;\n      }\n    }\n    if (!this.isDrawableTile_(tile)) {\n      tile = tile.getInterimTile();\n    }\n    return tile;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState, layerState) {\n\n    const pixelRatio = frameState.pixelRatio;\n    const size = frameState.size;\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const viewResolution = viewState.resolution;\n    const viewCenter = viewState.center;\n\n    const tileLayer = /** @type {import(\"../../layer/Tile.js\").default} */ (this.getLayer());\n    const tileSource = /** @type {import(\"../../source/Tile.js\").default} */ (tileLayer.getSource());\n    const sourceRevision = tileSource.getRevision();\n    const tileGrid = tileSource.getTileGridForProjection(projection);\n    const z = tileGrid.getZForResolution(viewResolution, this.zDirection);\n    const tileResolution = tileGrid.getResolution(z);\n    let oversampling = Math.round(viewResolution / tileResolution) || 1;\n    let extent = frameState.extent;\n\n    if (layerState.extent !== undefined) {\n      extent = getIntersection(extent, layerState.extent);\n    }\n    if (isEmpty(extent)) {\n      // Return false to prevent the rendering of the layer.\n      return false;\n    }\n\n    const tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n    const imageExtent = tileGrid.getTileRangeExtent(z, tileRange);\n\n    const tilePixelRatio = tileSource.getTilePixelRatio(pixelRatio);\n\n    /**\n     * @type {Object<number, Object<string, import(\"../../Tile.js\").default>>}\n     */\n    const tilesToDrawByZ = {};\n    tilesToDrawByZ[z] = {};\n\n    const findLoadedTiles = this.createLoadedTileFinder(\n      tileSource, projection, tilesToDrawByZ);\n\n    const hints = frameState.viewHints;\n    const animatingOrInteracting = hints[ViewHint.ANIMATING] || hints[ViewHint.INTERACTING];\n\n    const tmpExtent = this.tmpExtent;\n    const tmpTileRange = this.tmpTileRange_;\n    this.newTiles_ = false;\n    let tile, x, y;\n    for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        if (Date.now() - frameState.time > 16 && animatingOrInteracting) {\n          continue;\n        }\n        tile = this.getTile(z, x, y, pixelRatio, projection);\n        if (this.isDrawableTile_(tile)) {\n          const uid = getUid(this);\n          if (tile.getState() == TileState.LOADED) {\n            tilesToDrawByZ[z][tile.tileCoord.toString()] = tile;\n            const inTransition = tile.inTransition(uid);\n            if (!this.newTiles_ && (inTransition || this.renderedTiles.indexOf(tile) === -1)) {\n              this.newTiles_ = true;\n            }\n          }\n          if (tile.getAlpha(uid, frameState.time) === 1) {\n            // don't look for alt tiles if alpha is 1\n            continue;\n          }\n        }\n\n        const childTileRange = tileGrid.getTileCoordChildTileRange(\n          tile.tileCoord, tmpTileRange, tmpExtent);\n        let covered = false;\n        if (childTileRange) {\n          covered = findLoadedTiles(z + 1, childTileRange);\n        }\n        if (!covered) {\n          tileGrid.forEachTileCoordParentTileRange(\n            tile.tileCoord, findLoadedTiles, null, tmpTileRange, tmpExtent);\n        }\n\n      }\n    }\n\n    const renderedResolution = tileResolution * pixelRatio / tilePixelRatio * oversampling;\n    if (!(this.renderedResolution && Date.now() - frameState.time > 16 && animatingOrInteracting) && (\n      this.newTiles_ ||\n          !(this.renderedExtent_ && containsExtent(this.renderedExtent_, extent)) ||\n          this.renderedRevision != sourceRevision ||\n          oversampling != this.oversampling_ ||\n          !animatingOrInteracting && renderedResolution != this.renderedResolution\n    )) {\n\n      const context = this.context;\n      if (context) {\n        const tilePixelSize = tileSource.getTilePixelSize(z, pixelRatio, projection);\n        const width = Math.round(tileRange.getWidth() * tilePixelSize[0] / oversampling);\n        const height = Math.round(tileRange.getHeight() * tilePixelSize[1] / oversampling);\n        const canvas = context.canvas;\n        if (canvas.width != width || canvas.height != height) {\n          this.oversampling_ = oversampling;\n          canvas.width = width;\n          canvas.height = height;\n        } else {\n          if (this.renderedExtent_ && !equals(imageExtent, this.renderedExtent_)) {\n            context.clearRect(0, 0, width, height);\n          }\n          oversampling = this.oversampling_;\n        }\n      }\n\n      this.renderedTiles.length = 0;\n      /** @type {Array<number>} */\n      const zs = Object.keys(tilesToDrawByZ).map(Number);\n      zs.sort(function(a, b) {\n        if (a === z) {\n          return 1;\n        } else if (b === z) {\n          return -1;\n        } else {\n          return a > b ? 1 : a < b ? -1 : 0;\n        }\n      });\n      let currentResolution, currentScale, currentTilePixelSize, currentZ, i, ii;\n      let tileExtent, tileGutter, tilesToDraw, w, h;\n      for (i = 0, ii = zs.length; i < ii; ++i) {\n        currentZ = zs[i];\n        currentTilePixelSize = tileSource.getTilePixelSize(currentZ, pixelRatio, projection);\n        currentResolution = tileGrid.getResolution(currentZ);\n        currentScale = currentResolution / tileResolution;\n        tileGutter = tilePixelRatio * tileSource.getGutterForProjection(projection);\n        tilesToDraw = tilesToDrawByZ[currentZ];\n        for (const tileCoordKey in tilesToDraw) {\n          tile = tilesToDraw[tileCoordKey];\n          tileExtent = tileGrid.getTileCoordExtent(tile.getTileCoord(), tmpExtent);\n          x = (tileExtent[0] - imageExtent[0]) / tileResolution * tilePixelRatio / oversampling;\n          y = (imageExtent[3] - tileExtent[3]) / tileResolution * tilePixelRatio / oversampling;\n          w = currentTilePixelSize[0] * currentScale / oversampling;\n          h = currentTilePixelSize[1] * currentScale / oversampling;\n          this.drawTileImage(tile, frameState, layerState, x, y, w, h, tileGutter, z === currentZ);\n          this.renderedTiles.push(tile);\n        }\n      }\n\n      this.renderedRevision = sourceRevision;\n      this.renderedResolution = tileResolution * pixelRatio / tilePixelRatio * oversampling;\n      this.renderedExtent_ = imageExtent;\n    }\n\n    const scale = this.renderedResolution / viewResolution;\n    const transform = composeTransform(this.imageTransform_,\n      pixelRatio * size[0] / 2, pixelRatio * size[1] / 2,\n      scale, scale,\n      0,\n      (this.renderedExtent_[0] - viewCenter[0]) / this.renderedResolution * pixelRatio,\n      (viewCenter[1] - this.renderedExtent_[3]) / this.renderedResolution * pixelRatio);\n    composeTransform(this.coordinateToCanvasPixelTransform,\n      pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5],\n      pixelRatio / viewResolution, -pixelRatio / viewResolution,\n      0,\n      -viewCenter[0], -viewCenter[1]);\n\n\n    this.updateUsedTiles(frameState.usedTiles, tileSource, z, tileRange);\n    this.manageTilePyramid(frameState, tileSource, tileGrid, pixelRatio,\n      projection, extent, z, tileLayer.getPreload());\n    this.scheduleExpireCache(frameState, tileSource);\n\n    return this.renderedTiles.length > 0;\n  }\n\n  /**\n   * @param {import(\"../../Tile.js\").default} tile Tile.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../layer/Layer.js\").State} layerState Layer state.\n   * @param {number} x Left of the tile.\n   * @param {number} y Top of the tile.\n   * @param {number} w Width of the tile.\n   * @param {number} h Height of the tile.\n   * @param {number} gutter Tile gutter.\n   * @param {boolean} transition Apply an alpha transition.\n   */\n  drawTileImage(tile, frameState, layerState, x, y, w, h, gutter, transition) {\n    const image = this.getTileImage(tile);\n    if (!image) {\n      return;\n    }\n    const uid = getUid(this);\n    const alpha = transition ? tile.getAlpha(uid, frameState.time) : 1;\n    const tileLayer = /** @type {import(\"../../layer/Tile.js\").default} */ (this.getLayer());\n    const tileSource = /** @type {import(\"../../source/Tile.js\").default} */ (tileLayer.getSource());\n    if (alpha === 1 && !tileSource.getOpaque(frameState.viewState.projection)) {\n      this.context.clearRect(x, y, w, h);\n    }\n    const alphaChanged = alpha !== this.context.globalAlpha;\n    if (alphaChanged) {\n      this.context.save();\n      this.context.globalAlpha = alpha;\n    }\n    this.context.drawImage(image, gutter, gutter,\n      image.width - 2 * gutter, image.height - 2 * gutter, x, y, w, h);\n\n    if (alphaChanged) {\n      this.context.restore();\n    }\n    if (alpha !== 1) {\n      frameState.animate = true;\n    } else if (transition) {\n      tile.endTransition(uid);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImage() {\n    const context = this.context;\n    return context ? context.canvas : null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageTransform() {\n    return this.imageTransform_;\n  }\n\n  /**\n   * Get the image from a tile.\n   * @param {import(\"../../Tile.js\").default} tile Tile.\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @protected\n   */\n  getTileImage(tile) {\n    return /** @type {import(\"../../ImageTile.js\").default} */ (tile).getImage();\n  }\n}\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {import(\"../../layer/Layer.js\").default} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasTileLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.TILE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {import(\"../Map.js\").default} mapRenderer The map renderer.\n * @param {import(\"../../layer/Layer.js\").default} layer The layer to be rendererd.\n * @return {CanvasTileLayerRenderer} The layer renderer.\n */\nCanvasTileLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasTileLayerRenderer(/** @type {import(\"../../layer/Tile.js\").default} */ (layer));\n};\n\n\n/**\n * @function\n * @return {import(\"../../layer/Tile.js\").default|import(\"../../layer/VectorTile.js\").default}\n */\nCanvasTileLayerRenderer.prototype.getLayer;\n\n\nexport default CanvasTileLayerRenderer;\n","/**\n * @module ol/render/ReplayGroup\n */\nimport {abstract} from '../util.js';\n\n/**\n * Base class for replay groups.\n */\nclass ReplayGroup {\n  /**\n   * @abstract\n   * @param {number|undefined} zIndex Z index.\n   * @param {import(\"./ReplayType.js\").default} replayType Replay type.\n   * @return {import(\"./VectorContext.js\").default} Replay.\n   */\n  getReplay(zIndex, replayType) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {boolean} group Group with previous replay\n   * @return {Array<*>} The resulting instruction group\n   */\n  addDeclutter(group) {\n    return abstract();\n  }\n}\n\nexport default ReplayGroup;\n","/**\n * @module ol/render/ReplayType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CIRCLE: 'Circle',\n  DEFAULT: 'Default',\n  IMAGE: 'Image',\n  LINE_STRING: 'LineString',\n  POLYGON: 'Polygon',\n  TEXT: 'Text'\n};\n","/**\n * @module ol/geom/flat/textpath\n */\nimport {lerp} from '../../math.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Path to put text on.\n * @param {number} offset Start offset of the `flatCoordinates`.\n * @param {number} end End offset of the `flatCoordinates`.\n * @param {number} stride Stride.\n * @param {string} text Text to place on the path.\n * @param {function(string):number} measure Measure function returning the\n * width of the character passed as 1st argument.\n * @param {number} startM m along the path where the text starts.\n * @param {number} maxAngle Max angle between adjacent chars in radians.\n * @return {Array<Array<*>>} The result array of null if `maxAngle` was\n * exceeded. Entries of the array are x, y, anchorX, angle, chunk.\n */\nexport function drawTextOnPath(\n  flatCoordinates, offset, end, stride, text, measure, startM, maxAngle) {\n  const result = [];\n\n  // Keep text upright\n  const reverse = flatCoordinates[offset] > flatCoordinates[end - stride];\n\n  const numChars = text.length;\n\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  offset += stride;\n  let x2 = flatCoordinates[offset];\n  let y2 = flatCoordinates[offset + 1];\n  let segmentM = 0;\n  let segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n\n  let chunk = '';\n  let chunkLength = 0;\n  let data, index, previousAngle;\n  for (let i = 0; i < numChars; ++i) {\n    index = reverse ? numChars - i - 1 : i;\n    const char = text.charAt(index);\n    chunk = reverse ? char + chunk : chunk + char;\n    const charLength = measure(chunk) - chunkLength;\n    chunkLength += charLength;\n    const charM = startM + charLength / 2;\n    while (offset < end - stride && segmentM + segmentLength < charM) {\n      x1 = x2;\n      y1 = y2;\n      offset += stride;\n      x2 = flatCoordinates[offset];\n      y2 = flatCoordinates[offset + 1];\n      segmentM += segmentLength;\n      segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    }\n    const segmentPos = charM - segmentM;\n    let angle = Math.atan2(y2 - y1, x2 - x1);\n    if (reverse) {\n      angle += angle > 0 ? -Math.PI : Math.PI;\n    }\n    if (previousAngle !== undefined) {\n      let delta = angle - previousAngle;\n      delta += (delta > Math.PI) ? -2 * Math.PI : (delta < -Math.PI) ? 2 * Math.PI : 0;\n      if (Math.abs(delta) > maxAngle) {\n        return null;\n      }\n    }\n    const interpolate = segmentPos / segmentLength;\n    const x = lerp(x1, x2, interpolate);\n    const y = lerp(y1, y2, interpolate);\n    if (previousAngle == angle) {\n      if (reverse) {\n        data[0] = x;\n        data[1] = y;\n        data[2] = charLength / 2;\n      }\n      data[4] = chunk;\n    } else {\n      chunk = char;\n      chunkLength = charLength;\n      data = [x, y, charLength / 2, angle, chunk];\n      if (reverse) {\n        result.unshift(data);\n      } else {\n        result.push(data);\n      }\n      previousAngle = angle;\n    }\n    startM += charLength;\n  }\n  return result;\n}\n","/**\n * @module ol/render/canvas/Instruction\n */\n\n/**\n * @enum {number}\n */\nconst Instruction = {\n  BEGIN_GEOMETRY: 0,\n  BEGIN_PATH: 1,\n  CIRCLE: 2,\n  CLOSE_PATH: 3,\n  CUSTOM: 4,\n  DRAW_CHARS: 5,\n  DRAW_IMAGE: 6,\n  END_GEOMETRY: 7,\n  FILL: 8,\n  MOVE_TO_LINE_TO: 9,\n  SET_FILL_STYLE: 10,\n  SET_STROKE_STYLE: 11,\n  STROKE: 12\n};\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const fillInstruction = [Instruction.FILL];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const strokeInstruction = [Instruction.STROKE];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const beginPathInstruction = [Instruction.BEGIN_PATH];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const closePathInstruction = [Instruction.CLOSE_PATH];\n\n\nexport default Instruction;\n","/**\n * @module ol/render/replay\n */\nimport ReplayType from './ReplayType.js';\n\n\n/**\n * @const\n * @type {Array<ReplayType>}\n */\nexport const ORDER = [\n  ReplayType.POLYGON,\n  ReplayType.CIRCLE,\n  ReplayType.LINE_STRING,\n  ReplayType.IMAGE,\n  ReplayType.TEXT,\n  ReplayType.DEFAULT\n];\n\n/**\n * @const\n * @enum {number}\n */\nexport const TEXT_ALIGN = {};\nTEXT_ALIGN['left'] = 0;\nTEXT_ALIGN['end'] = 0;\nTEXT_ALIGN['center'] = 0.5;\nTEXT_ALIGN['right'] = 1;\nTEXT_ALIGN['start'] = 1;\nTEXT_ALIGN['top'] = 0;\nTEXT_ALIGN['middle'] = 0.5;\nTEXT_ALIGN['hanging'] = 0.2;\nTEXT_ALIGN['alphabetic'] = 0.8;\nTEXT_ALIGN['ideographic'] = 0.8;\nTEXT_ALIGN['bottom'] = 1;\n","/**\n * @module ol/render/canvas/Replay\n */\nimport {getUid} from '../../util.js';\nimport {equals, reverseSubArray} from '../../array.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {buffer, clone, coordinateRelationship, createEmpty, createOrUpdate,\n  createOrUpdateEmpty, extend, extendCoordinate, intersects} from '../../extent.js';\nimport Relationship from '../../extent/Relationship.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {inflateCoordinates, inflateCoordinatesArray, inflateMultiCoordinatesArray} from '../../geom/flat/inflate.js';\nimport {lineStringLength} from '../../geom/flat/length.js';\nimport {drawTextOnPath} from '../../geom/flat/textpath.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport {isEmpty} from '../../obj.js';\nimport VectorContext from '../VectorContext.js';\nimport {drawImage, resetTransform, defaultPadding, defaultFillStyle, defaultStrokeStyle,\n  defaultMiterLimit, defaultLineWidth, defaultLineJoin, defaultLineDashOffset,\n  defaultLineDash, defaultLineCap} from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\nimport {TEXT_ALIGN} from '../replay.js';\nimport {\n  create as createTransform,\n  compose as composeTransform,\n  apply as applyTransform,\n  setFromArray as transformSetFromArray\n} from '../../transform.js';\n\n\n/**\n * @type {import(\"../../extent.js\").Extent}\n */\nconst tmpExtent = createEmpty();\n\n\n/**\n * @type {!import(\"../../transform.js\").Transform}\n */\nconst tmpTransform = createTransform();\n\n\nclass CanvasReplay extends VectorContext {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super();\n\n    /**\n     * @type {?}\n     */\n    this.declutterTree = declutterTree;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.tolerance = tolerance;\n\n    /**\n     * @protected\n     * @const\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent = maxExtent;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.overlaps = overlaps;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.pixelRatio = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.maxLineWidth = 0;\n\n    /**\n     * @protected\n     * @const\n     * @type {number}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.alignFill_;\n\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n    this.beginGeometryInstruction1_ = null;\n\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n    this.beginGeometryInstruction2_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.bufferedMaxExtent_ = null;\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.instructions = [];\n\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n    this.coordinates = [];\n\n    /**\n     * @private\n     * @type {!Object<number,import(\"../../coordinate.js\").Coordinate|Array<import(\"../../coordinate.js\").Coordinate>|Array<Array<import(\"../../coordinate.js\").Coordinate>>>}\n     */\n    this.coordinateCache_ = {};\n\n    /**\n     * @private\n     * @type {!import(\"../../transform.js\").Transform}\n     */\n    this.renderedTransform_ = createTransform();\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.hitDetectionInstructions = [];\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.pixelCoordinates_ = null;\n\n    /**\n     * @protected\n     * @type {import(\"../canvas.js\").FillStrokeState}\n     */\n    this.state = /** @type {import(\"../canvas.js\").FillStrokeState} */ ({});\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.viewRotation_ = 0;\n\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../coordinate.js\").Coordinate} p1 1st point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p2 2nd point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p3 3rd point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p4 4th point of the background box.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   */\n  replayTextBackground_(context, p1, p2, p3, p4, fillInstruction, strokeInstruction) {\n    context.beginPath();\n    context.moveTo.apply(context, p1);\n    context.lineTo.apply(context, p2);\n    context.lineTo.apply(context, p3);\n    context.lineTo.apply(context, p4);\n    context.lineTo.apply(context, p1);\n    if (fillInstruction) {\n      this.alignFill_ = /** @type {boolean} */ (fillInstruction[2]);\n      this.fill_(context);\n    }\n    if (strokeInstruction) {\n      this.setStrokeStyle_(context, /** @type {Array<*>} */ (strokeInstruction));\n      context.stroke();\n    }\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n   * @param {number} anchorX Anchor X.\n   * @param {number} anchorY Anchor Y.\n   * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n   * @param {number} height Height.\n   * @param {number} opacity Opacity.\n   * @param {number} originX Origin X.\n   * @param {number} originY Origin Y.\n   * @param {number} rotation Rotation.\n   * @param {number} scale Scale.\n   * @param {boolean} snapToPixel Snap to pixel.\n   * @param {number} width Width.\n   * @param {Array<number>} padding Padding.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   */\n  replayImage_(\n    context,\n    x,\n    y,\n    image,\n    anchorX,\n    anchorY,\n    declutterGroup,\n    height,\n    opacity,\n    originX,\n    originY,\n    rotation,\n    scale,\n    snapToPixel,\n    width,\n    padding,\n    fillInstruction,\n    strokeInstruction\n  ) {\n    const fillStroke = fillInstruction || strokeInstruction;\n    anchorX *= scale;\n    anchorY *= scale;\n    x -= anchorX;\n    y -= anchorY;\n\n    const w = (width + originX > image.width) ? image.width - originX : width;\n    const h = (height + originY > image.height) ? image.height - originY : height;\n    const boxW = padding[3] + w * scale + padding[1];\n    const boxH = padding[0] + h * scale + padding[2];\n    const boxX = x - padding[3];\n    const boxY = y - padding[0];\n\n    /** @type {import(\"../../coordinate.js\").Coordinate} */\n    let p1;\n    /** @type {import(\"../../coordinate.js\").Coordinate} */\n    let p2;\n    /** @type {import(\"../../coordinate.js\").Coordinate} */\n    let p3;\n    /** @type {import(\"../../coordinate.js\").Coordinate} */\n    let p4;\n    if (fillStroke || rotation !== 0) {\n      p1 = [boxX, boxY];\n      p2 = [boxX + boxW, boxY];\n      p3 = [boxX + boxW, boxY + boxH];\n      p4 = [boxX, boxY + boxH];\n    }\n\n    let transform = null;\n    if (rotation !== 0) {\n      const centerX = x + anchorX;\n      const centerY = y + anchorY;\n      transform = composeTransform(tmpTransform, centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n\n      createOrUpdateEmpty(tmpExtent);\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p1));\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p2));\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p3));\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p4));\n    } else {\n      createOrUpdate(boxX, boxY, boxX + boxW, boxY + boxH, tmpExtent);\n    }\n    const canvas = context.canvas;\n    const strokePadding = strokeInstruction ? (strokeInstruction[2] * scale / 2) : 0;\n    const intersects =\n        tmpExtent[0] - strokePadding <= canvas.width && tmpExtent[2] + strokePadding >= 0 &&\n        tmpExtent[1] - strokePadding <= canvas.height && tmpExtent[3] + strokePadding >= 0;\n\n    if (snapToPixel) {\n      x = Math.round(x);\n      y = Math.round(y);\n    }\n\n    if (declutterGroup) {\n      if (!intersects && declutterGroup[4] == 1) {\n        return;\n      }\n      extend(declutterGroup, tmpExtent);\n      const declutterArgs = intersects ?\n        [context, transform ? transform.slice(0) : null, opacity, image, originX, originY, w, h, x, y, scale] :\n        null;\n      if (declutterArgs && fillStroke) {\n        declutterArgs.push(fillInstruction, strokeInstruction, p1, p2, p3, p4);\n      }\n      declutterGroup.push(declutterArgs);\n    } else if (intersects) {\n      if (fillStroke) {\n        this.replayTextBackground_(context, p1, p2, p3, p4,\n          /** @type {Array<*>} */ (fillInstruction),\n          /** @type {Array<*>} */ (strokeInstruction));\n      }\n      drawImage(context, transform, opacity, image, originX, originY, w, h, x, y, scale);\n    }\n  }\n\n  /**\n   * @protected\n   * @param {Array<number>} dashArray Dash array.\n   * @return {Array<number>} Dash array with pixel ratio applied\n   */\n  applyPixelRatio(dashArray) {\n    const pixelRatio = this.pixelRatio;\n    return pixelRatio == 1 ? dashArray : dashArray.map(function(dash) {\n      return dash * pixelRatio;\n    });\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} closed Last input coordinate equals first.\n   * @param {boolean} skipFirst Skip first coordinate.\n   * @protected\n   * @return {number} My end.\n   */\n  appendFlatCoordinates(flatCoordinates, offset, end, stride, closed, skipFirst) {\n\n    let myEnd = this.coordinates.length;\n    const extent = this.getBufferedMaxExtent();\n    if (skipFirst) {\n      offset += stride;\n    }\n    const lastCoord = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n    const nextCoord = [NaN, NaN];\n    let skipped = true;\n\n    let i, lastRel, nextRel;\n    for (i = offset + stride; i < end; i += stride) {\n      nextCoord[0] = flatCoordinates[i];\n      nextCoord[1] = flatCoordinates[i + 1];\n      nextRel = coordinateRelationship(extent, nextCoord);\n      if (nextRel !== lastRel) {\n        if (skipped) {\n          this.coordinates[myEnd++] = lastCoord[0];\n          this.coordinates[myEnd++] = lastCoord[1];\n        }\n        this.coordinates[myEnd++] = nextCoord[0];\n        this.coordinates[myEnd++] = nextCoord[1];\n        skipped = false;\n      } else if (nextRel === Relationship.INTERSECTING) {\n        this.coordinates[myEnd++] = nextCoord[0];\n        this.coordinates[myEnd++] = nextCoord[1];\n        skipped = false;\n      } else {\n        skipped = true;\n      }\n      lastCoord[0] = nextCoord[0];\n      lastCoord[1] = nextCoord[1];\n      lastRel = nextRel;\n    }\n\n    // Last coordinate equals first or only one point to append:\n    if ((closed && skipped) || i === offset + stride) {\n      this.coordinates[myEnd++] = lastCoord[0];\n      this.coordinates[myEnd++] = lastCoord[1];\n    }\n    return myEnd;\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @param {Array<number>} replayEnds Replay ends.\n   * @return {number} Offset.\n   */\n  drawCustomCoordinates_(flatCoordinates, offset, ends, stride, replayEnds) {\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const replayEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n      replayEnds.push(replayEnd);\n      offset = end;\n    }\n    return offset;\n  }\n\n  /**\n   * @inheritDoc.\n   */\n  drawCustom(geometry, feature, renderer) {\n    this.beginGeometry(geometry, feature);\n    const type = geometry.getType();\n    const stride = geometry.getStride();\n    const replayBegin = this.coordinates.length;\n    let flatCoordinates, replayEnd, replayEnds, replayEndss;\n    let offset;\n    if (type == GeometryType.MULTI_POLYGON) {\n      geometry = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry);\n      flatCoordinates = geometry.getOrientedFlatCoordinates();\n      replayEndss = [];\n      const endss = geometry.getEndss();\n      offset = 0;\n      for (let i = 0, ii = endss.length; i < ii; ++i) {\n        const myEnds = [];\n        offset = this.drawCustomCoordinates_(flatCoordinates, offset, endss[i], stride, myEnds);\n        replayEndss.push(myEnds);\n      }\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEndss, geometry, renderer, inflateMultiCoordinatesArray]);\n    } else if (type == GeometryType.POLYGON || type == GeometryType.MULTI_LINE_STRING) {\n      replayEnds = [];\n      flatCoordinates = (type == GeometryType.POLYGON) ?\n        /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getOrientedFlatCoordinates() :\n        geometry.getFlatCoordinates();\n      offset = this.drawCustomCoordinates_(flatCoordinates, 0,\n        /** @type {import(\"../../geom/Polygon.js\").default|import(\"../../geom/MultiLineString.js\").default} */ (geometry).getEnds(),\n        stride, replayEnds);\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEnds, geometry, renderer, inflateCoordinatesArray]);\n    } else if (type == GeometryType.LINE_STRING || type == GeometryType.MULTI_POINT) {\n      flatCoordinates = geometry.getFlatCoordinates();\n      replayEnd = this.appendFlatCoordinates(\n        flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEnd, geometry, renderer, inflateCoordinates]);\n    } else if (type == GeometryType.POINT) {\n      flatCoordinates = geometry.getFlatCoordinates();\n      this.coordinates.push(flatCoordinates[0], flatCoordinates[1]);\n      replayEnd = this.coordinates.length;\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEnd, geometry, renderer]);\n    }\n    this.endGeometry(geometry, feature);\n  }\n\n  /**\n   * @protected\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   * @param {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} feature Feature.\n   */\n  beginGeometry(geometry, feature) {\n    this.beginGeometryInstruction1_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0];\n    this.instructions.push(this.beginGeometryInstruction1_);\n    this.beginGeometryInstruction2_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0];\n    this.hitDetectionInstructions.push(this.beginGeometryInstruction2_);\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  finish() {}\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   */\n  fill_(context) {\n    if (this.alignFill_) {\n      const origin = applyTransform(this.renderedTransform_, [0, 0]);\n      const repeatSize = 512 * this.pixelRatio;\n      context.translate(origin[0] % repeatSize, origin[1] % repeatSize);\n      context.rotate(this.viewRotation_);\n    }\n    context.fill();\n    if (this.alignFill_) {\n      context.setTransform.apply(context, resetTransform);\n    }\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {Array<*>} instruction Instruction.\n   */\n  setStrokeStyle_(context, instruction) {\n    context.strokeStyle = /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n    context.lineWidth = /** @type {number} */ (instruction[2]);\n    context.lineCap = /** @type {CanvasLineCap} */ (instruction[3]);\n    context.lineJoin = /** @type {CanvasLineJoin} */ (instruction[4]);\n    context.miterLimit = /** @type {number} */ (instruction[5]);\n    if (CANVAS_LINE_DASH) {\n      context.lineDashOffset = /** @type {number} */ (instruction[7]);\n      context.setLineDash(/** @type {Array<number>} */ (instruction[6]));\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n   * @param {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} feature Feature.\n   */\n  renderDeclutter_(declutterGroup, feature) {\n    if (declutterGroup && declutterGroup.length > 5) {\n      const groupCount = declutterGroup[4];\n      if (groupCount == 1 || groupCount == declutterGroup.length - 5) {\n        /** @type {import(\"../../structs/RBush.js\").Entry} */\n        const box = {\n          minX: /** @type {number} */ (declutterGroup[0]),\n          minY: /** @type {number} */ (declutterGroup[1]),\n          maxX: /** @type {number} */ (declutterGroup[2]),\n          maxY: /** @type {number} */ (declutterGroup[3]),\n          value: feature\n        };\n        if (!this.declutterTree.collides(box)) {\n          this.declutterTree.insert(box);\n          for (let j = 5, jj = declutterGroup.length; j < jj; ++j) {\n            const declutterData = /** @type {Array} */ (declutterGroup[j]);\n            if (declutterData) {\n              if (declutterData.length > 11) {\n                this.replayTextBackground_(declutterData[0],\n                  declutterData[13], declutterData[14], declutterData[15], declutterData[16],\n                  declutterData[11], declutterData[12]);\n              }\n              drawImage.apply(undefined, declutterData);\n            }\n          }\n        }\n        declutterGroup.length = 5;\n        createOrUpdateEmpty(declutterGroup);\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features\n   *     to skip.\n   * @param {Array<*>} instructions Instructions array.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   * @param {function((import(\"../../Feature.js\").default|import(\"../Feature.js\").default)): T|undefined} featureCallback Feature callback.\n   * @param {import(\"../../extent.js\").Extent=} opt_hitExtent Only check features that intersect this\n   *     extent.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  replay_(\n    context,\n    transform,\n    skippedFeaturesHash,\n    instructions,\n    snapToPixel,\n    featureCallback,\n    opt_hitExtent\n  ) {\n    /** @type {Array<number>} */\n    let pixelCoordinates;\n    if (this.pixelCoordinates_ && equals(transform, this.renderedTransform_)) {\n      pixelCoordinates = this.pixelCoordinates_;\n    } else {\n      if (!this.pixelCoordinates_) {\n        this.pixelCoordinates_ = [];\n      }\n      pixelCoordinates = transform2D(\n        this.coordinates, 0, this.coordinates.length, 2,\n        transform, this.pixelCoordinates_);\n      transformSetFromArray(this.renderedTransform_, transform);\n    }\n    const skipFeatures = !isEmpty(skippedFeaturesHash);\n    let i = 0; // instruction index\n    const ii = instructions.length; // end of instructions\n    let d = 0; // data index\n    let dd; // end of per-instruction data\n    let anchorX, anchorY, prevX, prevY, roundX, roundY, declutterGroup, image;\n    let pendingFill = 0;\n    let pendingStroke = 0;\n    let lastFillInstruction = null;\n    let lastStrokeInstruction = null;\n    const coordinateCache = this.coordinateCache_;\n    const viewRotation = this.viewRotation_;\n\n    const state = /** @type {import(\"../../render.js\").State} */ ({\n      context: context,\n      pixelRatio: this.pixelRatio,\n      resolution: this.resolution,\n      rotation: viewRotation\n    });\n\n    // When the batch size gets too big, performance decreases. 200 is a good\n    // balance between batch size and number of fill/stroke instructions.\n    const batchSize = this.instructions != instructions || this.overlaps ? 0 : 200;\n    let /** @type {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} */ feature;\n    let x, y;\n    while (i < ii) {\n      const instruction = instructions[i];\n      const type = /** @type {CanvasInstruction} */ (instruction[0]);\n      switch (type) {\n        case CanvasInstruction.BEGIN_GEOMETRY:\n          feature = /** @type {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} */ (instruction[1]);\n          if ((skipFeatures && skippedFeaturesHash[getUid(feature)]) || !feature.getGeometry()) {\n            i = /** @type {number} */ (instruction[2]);\n          } else if (opt_hitExtent !== undefined && !intersects(\n            opt_hitExtent, feature.getGeometry().getExtent())) {\n            i = /** @type {number} */ (instruction[2]) + 1;\n          } else {\n            ++i;\n          }\n          break;\n        case CanvasInstruction.BEGIN_PATH:\n          if (pendingFill > batchSize) {\n            this.fill_(context);\n            pendingFill = 0;\n          }\n          if (pendingStroke > batchSize) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n          if (!pendingFill && !pendingStroke) {\n            context.beginPath();\n            prevX = prevY = NaN;\n          }\n          ++i;\n          break;\n        case CanvasInstruction.CIRCLE:\n          d = /** @type {number} */ (instruction[1]);\n          const x1 = pixelCoordinates[d];\n          const y1 = pixelCoordinates[d + 1];\n          const x2 = pixelCoordinates[d + 2];\n          const y2 = pixelCoordinates[d + 3];\n          const dx = x2 - x1;\n          const dy = y2 - y1;\n          const r = Math.sqrt(dx * dx + dy * dy);\n          context.moveTo(x1 + r, y1);\n          context.arc(x1, y1, r, 0, 2 * Math.PI, true);\n          ++i;\n          break;\n        case CanvasInstruction.CLOSE_PATH:\n          context.closePath();\n          ++i;\n          break;\n        case CanvasInstruction.CUSTOM:\n          d = /** @type {number} */ (instruction[1]);\n          dd = instruction[2];\n          const geometry = /** @type {import(\"../../geom/SimpleGeometry.js\").default} */ (instruction[3]);\n          const renderer = instruction[4];\n          const fn = instruction.length == 6 ? instruction[5] : undefined;\n          state.geometry = geometry;\n          state.feature = feature;\n          if (!(i in coordinateCache)) {\n            coordinateCache[i] = [];\n          }\n          const coords = coordinateCache[i];\n          if (fn) {\n            fn(pixelCoordinates, d, dd, 2, coords);\n          } else {\n            coords[0] = pixelCoordinates[d];\n            coords[1] = pixelCoordinates[d + 1];\n            coords.length = 2;\n          }\n          renderer(coords, state);\n          ++i;\n          break;\n        case CanvasInstruction.DRAW_IMAGE:\n          d = /** @type {number} */ (instruction[1]);\n          dd = /** @type {number} */ (instruction[2]);\n          image = /** @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} */\n              (instruction[3]);\n          // Remaining arguments in DRAW_IMAGE are in alphabetical order\n          anchorX = /** @type {number} */ (instruction[4]);\n          anchorY = /** @type {number} */ (instruction[5]);\n          declutterGroup = featureCallback ? null : /** @type {import(\"../canvas.js\").DeclutterGroup} */ (instruction[6]);\n          const height = /** @type {number} */ (instruction[7]);\n          const opacity = /** @type {number} */ (instruction[8]);\n          const originX = /** @type {number} */ (instruction[9]);\n          const originY = /** @type {number} */ (instruction[10]);\n          const rotateWithView = /** @type {boolean} */ (instruction[11]);\n          let rotation = /** @type {number} */ (instruction[12]);\n          const scale = /** @type {number} */ (instruction[13]);\n          const width = /** @type {number} */ (instruction[14]);\n\n          let padding, backgroundFill, backgroundStroke;\n          if (instruction.length > 16) {\n            padding = /** @type {Array<number>} */ (instruction[15]);\n            backgroundFill = /** @type {boolean} */ (instruction[16]);\n            backgroundStroke = /** @type {boolean} */ (instruction[17]);\n          } else {\n            padding = defaultPadding;\n            backgroundFill = backgroundStroke = false;\n          }\n\n          if (rotateWithView) {\n            rotation += viewRotation;\n          }\n          for (; d < dd; d += 2) {\n            this.replayImage_(context,\n              pixelCoordinates[d], pixelCoordinates[d + 1], image, anchorX, anchorY,\n              declutterGroup, height, opacity, originX, originY, rotation, scale,\n              snapToPixel, width, padding,\n              backgroundFill ? /** @type {Array<*>} */ (lastFillInstruction) : null,\n              backgroundStroke ? /** @type {Array<*>} */ (lastStrokeInstruction) : null);\n          }\n          this.renderDeclutter_(declutterGroup, feature);\n          ++i;\n          break;\n        case CanvasInstruction.DRAW_CHARS:\n          const begin = /** @type {number} */ (instruction[1]);\n          const end = /** @type {number} */ (instruction[2]);\n          const baseline = /** @type {number} */ (instruction[3]);\n          declutterGroup = featureCallback ? null : /** @type {import(\"../canvas.js\").DeclutterGroup} */ (instruction[4]);\n          const overflow = /** @type {number} */ (instruction[5]);\n          const fillKey = /** @type {string} */ (instruction[6]);\n          const maxAngle = /** @type {number} */ (instruction[7]);\n          const measure = /** @type {function(string):number} */ (instruction[8]);\n          const offsetY = /** @type {number} */ (instruction[9]);\n          const strokeKey = /** @type {string} */ (instruction[10]);\n          const strokeWidth = /** @type {number} */ (instruction[11]);\n          const text = /** @type {string} */ (instruction[12]);\n          const textKey = /** @type {string} */ (instruction[13]);\n          const textScale = /** @type {number} */ (instruction[14]);\n\n          const pathLength = lineStringLength(pixelCoordinates, begin, end, 2);\n          const textLength = measure(text);\n          if (overflow || textLength <= pathLength) {\n            /** @type {import(\"./TextReplay.js\").default} */\n            const textReplay = /** @type {?} */ (this);\n            const textAlign = textReplay.textStates[textKey].textAlign;\n            const startM = (pathLength - textLength) * TEXT_ALIGN[textAlign];\n            const parts = drawTextOnPath(\n              pixelCoordinates, begin, end, 2, text, measure, startM, maxAngle);\n            if (parts) {\n              let c, cc, chars, label, part;\n              if (strokeKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n                  chars = /** @type {string} */ (part[4]);\n                  label = textReplay.getImage(chars, textKey, '', strokeKey);\n                  anchorX = /** @type {number} */ (part[2]) + strokeWidth;\n                  anchorY = baseline * label.height + (0.5 - baseline) * 2 * strokeWidth - offsetY;\n                  this.replayImage_(context,\n                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label,\n                    anchorX, anchorY, declutterGroup, label.height, 1, 0, 0,\n                    /** @type {number} */ (part[3]), textScale, false, label.width,\n                    defaultPadding, null, null);\n                }\n              }\n              if (fillKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n                  chars = /** @type {string} */ (part[4]);\n                  label = textReplay.getImage(chars, textKey, fillKey, '');\n                  anchorX = /** @type {number} */ (part[2]);\n                  anchorY = baseline * label.height - offsetY;\n                  this.replayImage_(context,\n                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label,\n                    anchorX, anchorY, declutterGroup, label.height, 1, 0, 0,\n                    /** @type {number} */ (part[3]), textScale, false, label.width,\n                    defaultPadding, null, null);\n                }\n              }\n            }\n          }\n          this.renderDeclutter_(declutterGroup, feature);\n          ++i;\n          break;\n        case CanvasInstruction.END_GEOMETRY:\n          if (featureCallback !== undefined) {\n            feature = /** @type {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} */ (instruction[1]);\n            const result = featureCallback(feature);\n            if (result) {\n              return result;\n            }\n          }\n          ++i;\n          break;\n        case CanvasInstruction.FILL:\n          if (batchSize) {\n            pendingFill++;\n          } else {\n            this.fill_(context);\n          }\n          ++i;\n          break;\n        case CanvasInstruction.MOVE_TO_LINE_TO:\n          d = /** @type {number} */ (instruction[1]);\n          dd = /** @type {number} */ (instruction[2]);\n          x = pixelCoordinates[d];\n          y = pixelCoordinates[d + 1];\n          roundX = (x + 0.5) | 0;\n          roundY = (y + 0.5) | 0;\n          if (roundX !== prevX || roundY !== prevY) {\n            context.moveTo(x, y);\n            prevX = roundX;\n            prevY = roundY;\n          }\n          for (d += 2; d < dd; d += 2) {\n            x = pixelCoordinates[d];\n            y = pixelCoordinates[d + 1];\n            roundX = (x + 0.5) | 0;\n            roundY = (y + 0.5) | 0;\n            if (d == dd - 2 || roundX !== prevX || roundY !== prevY) {\n              context.lineTo(x, y);\n              prevX = roundX;\n              prevY = roundY;\n            }\n          }\n          ++i;\n          break;\n        case CanvasInstruction.SET_FILL_STYLE:\n          lastFillInstruction = instruction;\n          this.alignFill_ = instruction[2];\n\n          if (pendingFill) {\n            this.fill_(context);\n            pendingFill = 0;\n            if (pendingStroke) {\n              context.stroke();\n              pendingStroke = 0;\n            }\n          }\n\n          context.fillStyle = /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n          ++i;\n          break;\n        case CanvasInstruction.SET_STROKE_STYLE:\n          lastStrokeInstruction = instruction;\n          if (pendingStroke) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n          this.setStrokeStyle_(context, /** @type {Array<*>} */ (instruction));\n          ++i;\n          break;\n        case CanvasInstruction.STROKE:\n          if (batchSize) {\n            pendingStroke++;\n          } else {\n            context.stroke();\n          }\n          ++i;\n          break;\n        default:\n          ++i; // consume the instruction anyway, to avoid an infinite loop\n          break;\n      }\n    }\n    if (pendingFill) {\n      this.fill_(context);\n    }\n    if (pendingStroke) {\n      context.stroke();\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features\n   *     to skip.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   */\n  replay(context, transform, viewRotation, skippedFeaturesHash, snapToPixel) {\n    this.viewRotation_ = viewRotation;\n    this.replay_(context, transform,\n      skippedFeaturesHash, this.instructions, snapToPixel, undefined, undefined);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features\n   *     to skip.\n   * @param {function((import(\"../../Feature.js\").default|import(\"../Feature.js\").default)): T=} opt_featureCallback\n   *     Feature callback.\n   * @param {import(\"../../extent.js\").Extent=} opt_hitExtent Only check features that intersect this\n   *     extent.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  replayHitDetection(\n    context,\n    transform,\n    viewRotation,\n    skippedFeaturesHash,\n    opt_featureCallback,\n    opt_hitExtent\n  ) {\n    this.viewRotation_ = viewRotation;\n    return this.replay_(context, transform, skippedFeaturesHash,\n      this.hitDetectionInstructions, true, opt_featureCallback, opt_hitExtent);\n  }\n\n  /**\n   * Reverse the hit detection instructions.\n   */\n  reverseHitDetectionInstructions() {\n    const hitDetectionInstructions = this.hitDetectionInstructions;\n    // step 1 - reverse array\n    hitDetectionInstructions.reverse();\n    // step 2 - reverse instructions within geometry blocks\n    let i;\n    const n = hitDetectionInstructions.length;\n    let instruction;\n    let type;\n    let begin = -1;\n    for (i = 0; i < n; ++i) {\n      instruction = hitDetectionInstructions[i];\n      type = /** @type {CanvasInstruction} */ (instruction[0]);\n      if (type == CanvasInstruction.END_GEOMETRY) {\n        begin = i;\n      } else if (type == CanvasInstruction.BEGIN_GEOMETRY) {\n        instruction[2] = i;\n        reverseSubArray(this.hitDetectionInstructions, begin, i);\n        begin = -1;\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {\n    const state = this.state;\n    if (fillStyle) {\n      const fillStyleColor = fillStyle.getColor();\n      state.fillStyle = asColorLike(fillStyleColor ?\n        fillStyleColor : defaultFillStyle);\n    } else {\n      state.fillStyle = undefined;\n    }\n    if (strokeStyle) {\n      const strokeStyleColor = strokeStyle.getColor();\n      state.strokeStyle = asColorLike(strokeStyleColor ?\n        strokeStyleColor : defaultStrokeStyle);\n      const strokeStyleLineCap = strokeStyle.getLineCap();\n      state.lineCap = strokeStyleLineCap !== undefined ?\n        strokeStyleLineCap : defaultLineCap;\n      const strokeStyleLineDash = strokeStyle.getLineDash();\n      state.lineDash = strokeStyleLineDash ?\n        strokeStyleLineDash.slice() : defaultLineDash;\n      const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      state.lineDashOffset = strokeStyleLineDashOffset ?\n        strokeStyleLineDashOffset : defaultLineDashOffset;\n      const strokeStyleLineJoin = strokeStyle.getLineJoin();\n      state.lineJoin = strokeStyleLineJoin !== undefined ?\n        strokeStyleLineJoin : defaultLineJoin;\n      const strokeStyleWidth = strokeStyle.getWidth();\n      state.lineWidth = strokeStyleWidth !== undefined ?\n        strokeStyleWidth : defaultLineWidth;\n      const strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      state.miterLimit = strokeStyleMiterLimit !== undefined ?\n        strokeStyleMiterLimit : defaultMiterLimit;\n\n      if (state.lineWidth > this.maxLineWidth) {\n        this.maxLineWidth = state.lineWidth;\n        // invalidate the buffered max extent cache\n        this.bufferedMaxExtent_ = null;\n      }\n    } else {\n      state.strokeStyle = undefined;\n      state.lineCap = undefined;\n      state.lineDash = null;\n      state.lineDashOffset = undefined;\n      state.lineJoin = undefined;\n      state.lineWidth = undefined;\n      state.miterLimit = undefined;\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   * @return {Array<*>} Fill instruction.\n   */\n  createFill(state, geometry) {\n    const fillStyle = state.fillStyle;\n    /** @type {Array<*>} */\n    const fillInstruction = [CanvasInstruction.SET_FILL_STYLE, fillStyle];\n    if (typeof fillStyle !== 'string') {\n      // Fill is a pattern or gradient - align it!\n      fillInstruction.push(true);\n    }\n    return fillInstruction;\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   */\n  applyStroke(state) {\n    this.instructions.push(this.createStroke(state));\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @return {Array<*>} Stroke instruction.\n   */\n  createStroke(state) {\n    return [\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth * this.pixelRatio, state.lineCap,\n      state.lineJoin, state.miterLimit,\n      this.applyPixelRatio(state.lineDash), state.lineDashOffset * this.pixelRatio\n    ];\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {function(this:CanvasReplay, import(\"../canvas.js\").FillStrokeState, (import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default)):Array<*>} createFill Create fill.\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   */\n  updateFillStyle(state, createFill, geometry) {\n    const fillStyle = state.fillStyle;\n    if (typeof fillStyle !== 'string' || state.currentFillStyle != fillStyle) {\n      if (fillStyle !== undefined) {\n        this.instructions.push(createFill.call(this, state, geometry));\n      }\n      state.currentFillStyle = fillStyle;\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {function(this:CanvasReplay, import(\"../canvas.js\").FillStrokeState)} applyStroke Apply stroke.\n   */\n  updateStrokeStyle(state, applyStroke) {\n    const strokeStyle = state.strokeStyle;\n    const lineCap = state.lineCap;\n    const lineDash = state.lineDash;\n    const lineDashOffset = state.lineDashOffset;\n    const lineJoin = state.lineJoin;\n    const lineWidth = state.lineWidth;\n    const miterLimit = state.miterLimit;\n    if (state.currentStrokeStyle != strokeStyle ||\n        state.currentLineCap != lineCap ||\n        (lineDash != state.currentLineDash && !equals(state.currentLineDash, lineDash)) ||\n        state.currentLineDashOffset != lineDashOffset ||\n        state.currentLineJoin != lineJoin ||\n        state.currentLineWidth != lineWidth ||\n        state.currentMiterLimit != miterLimit) {\n      if (strokeStyle !== undefined) {\n        applyStroke.call(this, state);\n      }\n      state.currentStrokeStyle = strokeStyle;\n      state.currentLineCap = lineCap;\n      state.currentLineDash = lineDash;\n      state.currentLineDashOffset = lineDashOffset;\n      state.currentLineJoin = lineJoin;\n      state.currentLineWidth = lineWidth;\n      state.currentMiterLimit = miterLimit;\n    }\n  }\n\n  /**\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   * @param {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} feature Feature.\n   */\n  endGeometry(geometry, feature) {\n    this.beginGeometryInstruction1_[2] = this.instructions.length;\n    this.beginGeometryInstruction1_ = null;\n    this.beginGeometryInstruction2_[2] = this.hitDetectionInstructions.length;\n    this.beginGeometryInstruction2_ = null;\n    const endGeometryInstruction = [CanvasInstruction.END_GEOMETRY, feature];\n    this.instructions.push(endGeometryInstruction);\n    this.hitDetectionInstructions.push(endGeometryInstruction);\n  }\n\n  /**\n   * Get the buffered rendering extent.  Rendering will be clipped to the extent\n   * provided to the constructor.  To account for symbolizers that may intersect\n   * this extent, we calculate a buffered extent (e.g. based on stroke width).\n   * @return {import(\"../../extent.js\").Extent} The buffered rendering extent.\n   * @protected\n   */\n  getBufferedMaxExtent() {\n    if (!this.bufferedMaxExtent_) {\n      this.bufferedMaxExtent_ = clone(this.maxExtent);\n      if (this.maxLineWidth > 0) {\n        const width = this.resolution * (this.maxLineWidth + 1) / 2;\n        buffer(this.bufferedMaxExtent_, width, this.bufferedMaxExtent_);\n      }\n    }\n    return this.bufferedMaxExtent_;\n  }\n}\n\n\nexport default CanvasReplay;\n","/**\n * @module ol/render/canvas/ImageReplay\n */\nimport CanvasInstruction from './Instruction.js';\nimport CanvasReplay from './Replay.js';\n\nclass CanvasImageReplay extends CanvasReplay {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterGroup}\n     */\n    this.declutterGroup_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.anchorX_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.anchorY_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.height_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.opacity_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.originX_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.originY_ = undefined;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.rotateWithView_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.scale_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.width_ = undefined;\n\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} My end.\n   */\n  drawCoordinates_(flatCoordinates, offset, end, stride) {\n    return this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawPoint(pointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n    this.beginGeometry(pointGeometry, feature);\n    const flatCoordinates = pointGeometry.getFlatCoordinates();\n    const stride = pointGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    const myEnd = this.drawCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n    this.instructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_ * this.pixelRatio, this.width_\n    ]);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_, this.width_\n    ]);\n    this.endGeometry(pointGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawMultiPoint(multiPointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n    this.beginGeometry(multiPointGeometry, feature);\n    const flatCoordinates = multiPointGeometry.getFlatCoordinates();\n    const stride = multiPointGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    const myEnd = this.drawCoordinates_(\n      flatCoordinates, 0, flatCoordinates.length, stride);\n    this.instructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_ * this.pixelRatio, this.width_\n    ]);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_, this.width_\n    ]);\n    this.endGeometry(multiPointGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  finish() {\n    this.reverseHitDetectionInstructions();\n    // FIXME this doesn't really protect us against further calls to draw*Geometry\n    this.anchorX_ = undefined;\n    this.anchorY_ = undefined;\n    this.hitDetectionImage_ = null;\n    this.image_ = null;\n    this.height_ = undefined;\n    this.scale_ = undefined;\n    this.opacity_ = undefined;\n    this.originX_ = undefined;\n    this.originY_ = undefined;\n    this.rotateWithView_ = undefined;\n    this.rotation_ = undefined;\n    this.width_ = undefined;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setImageStyle(imageStyle, declutterGroup) {\n    const anchor = imageStyle.getAnchor();\n    const size = imageStyle.getSize();\n    const hitDetectionImage = imageStyle.getHitDetectionImage(1);\n    const image = imageStyle.getImage(1);\n    const origin = imageStyle.getOrigin();\n    this.anchorX_ = anchor[0];\n    this.anchorY_ = anchor[1];\n    this.declutterGroup_ = /** @type {import(\"../canvas.js\").DeclutterGroup} */ (declutterGroup);\n    this.hitDetectionImage_ = hitDetectionImage;\n    this.image_ = image;\n    this.height_ = size[1];\n    this.opacity_ = imageStyle.getOpacity();\n    this.originX_ = origin[0];\n    this.originY_ = origin[1];\n    this.rotateWithView_ = imageStyle.getRotateWithView();\n    this.rotation_ = imageStyle.getRotation();\n    this.scale_ = imageStyle.getScale();\n    this.width_ = size[0];\n  }\n}\n\n\nexport default CanvasImageReplay;\n","/**\n * @module ol/render/canvas/LineStringReplay\n */\nimport CanvasInstruction, {strokeInstruction, beginPathInstruction} from './Instruction.js';\nimport CanvasReplay from './Replay.js';\n\nclass CanvasLineStringReplay extends CanvasReplay {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} end.\n   */\n  drawFlatCoordinates_(flatCoordinates, offset, end, stride) {\n    const myBegin = this.coordinates.length;\n    const myEnd = this.appendFlatCoordinates(\n      flatCoordinates, offset, end, stride, false, false);\n    const moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n    this.instructions.push(moveToLineToInstruction);\n    this.hitDetectionInstructions.push(moveToLineToInstruction);\n    return end;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawLineString(lineStringGeometry, feature) {\n    const state = this.state;\n    const strokeStyle = state.strokeStyle;\n    const lineWidth = state.lineWidth;\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(lineStringGeometry, feature);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ], beginPathInstruction);\n    const flatCoordinates = lineStringGeometry.getFlatCoordinates();\n    const stride = lineStringGeometry.getStride();\n    this.drawFlatCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(lineStringGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawMultiLineString(multiLineStringGeometry, feature) {\n    const state = this.state;\n    const strokeStyle = state.strokeStyle;\n    const lineWidth = state.lineWidth;\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(multiLineStringGeometry, feature);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ], beginPathInstruction);\n    const ends = multiLineStringGeometry.getEnds();\n    const flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n    const stride = multiLineStringGeometry.getStride();\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinates_(flatCoordinates, offset, ends[i], stride);\n    }\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(multiLineStringGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  finish() {\n    const state = this.state;\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n    }\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n  }\n\n  /**\n   * @inheritDoc.\n   */\n  applyStroke(state) {\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n      state.lastStroke = this.coordinates.length;\n    }\n    state.lastStroke = 0;\n    super.applyStroke(state);\n    this.instructions.push(beginPathInstruction);\n  }\n}\n\n\nexport default CanvasLineStringReplay;\n","/**\n * @module ol/render/canvas/PolygonReplay\n */\nimport {asString} from '../../color.js';\nimport {snap} from '../../geom/flat/simplify.js';\nimport {defaultFillStyle} from '../canvas.js';\nimport CanvasInstruction, {\n  fillInstruction, strokeInstruction, beginPathInstruction, closePathInstruction\n} from './Instruction.js';\nimport CanvasReplay from './Replay.js';\n\n\nclass CanvasPolygonReplay extends CanvasReplay {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n  drawFlatCoordinatess_(flatCoordinates, offset, ends, stride) {\n    const state = this.state;\n    const fill = state.fillStyle !== undefined;\n    const stroke = state.strokeStyle != undefined;\n    const numEnds = ends.length;\n    this.instructions.push(beginPathInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction);\n    for (let i = 0; i < numEnds; ++i) {\n      const end = ends[i];\n      const myBegin = this.coordinates.length;\n      const myEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, true, !stroke);\n      const moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n      this.instructions.push(moveToLineToInstruction);\n      this.hitDetectionInstructions.push(moveToLineToInstruction);\n      if (stroke) {\n        // Performance optimization: only call closePath() when we have a stroke.\n        // Otherwise the ring is closed already (see appendFlatCoordinates above).\n        this.instructions.push(closePathInstruction);\n        this.hitDetectionInstructions.push(closePathInstruction);\n      }\n      offset = end;\n    }\n    if (fill) {\n      this.instructions.push(fillInstruction);\n      this.hitDetectionInstructions.push(fillInstruction);\n    }\n    if (stroke) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n    return offset;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawCircle(circleGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_(circleGeometry);\n    this.beginGeometry(circleGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        asString(defaultFillStyle)\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    const flatCoordinates = circleGeometry.getFlatCoordinates();\n    const stride = circleGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    this.appendFlatCoordinates(\n      flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n    const circleInstruction = [CanvasInstruction.CIRCLE, myBegin];\n    this.instructions.push(beginPathInstruction, circleInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction, circleInstruction);\n    this.hitDetectionInstructions.push(fillInstruction);\n    if (state.fillStyle !== undefined) {\n      this.instructions.push(fillInstruction);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n    this.endGeometry(circleGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawPolygon(polygonGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_(polygonGeometry);\n    this.beginGeometry(polygonGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        asString(defaultFillStyle)\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    const ends = polygonGeometry.getEnds();\n    const flatCoordinates = polygonGeometry.getOrientedFlatCoordinates();\n    const stride = polygonGeometry.getStride();\n    this.drawFlatCoordinatess_(flatCoordinates, 0, ends, stride);\n    this.endGeometry(polygonGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawMultiPolygon(multiPolygonGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_(multiPolygonGeometry);\n    this.beginGeometry(multiPolygonGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        asString(defaultFillStyle)\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    const endss = multiPolygonGeometry.getEndss();\n    const flatCoordinates = multiPolygonGeometry.getOrientedFlatCoordinates();\n    const stride = multiPolygonGeometry.getStride();\n    let offset = 0;\n    for (let i = 0, ii = endss.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinatess_(flatCoordinates, offset, endss[i], stride);\n    }\n    this.endGeometry(multiPolygonGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  finish() {\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n    // We want to preserve topology when drawing polygons.  Polygons are\n    // simplified using quantization and point elimination. However, we might\n    // have received a mix of quantized and non-quantized geometries, so ensure\n    // that all are quantized by quantizing all coordinates in the batch.\n    const tolerance = this.tolerance;\n    if (tolerance !== 0) {\n      const coordinates = this.coordinates;\n      for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = snap(coordinates[i], tolerance);\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   */\n  setFillStrokeStyles_(geometry) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    if (fillStyle !== undefined) {\n      this.updateFillStyle(state, this.createFill, geometry);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.updateStrokeStyle(state, this.applyStroke);\n    }\n  }\n}\n\n\nexport default CanvasPolygonReplay;\n","/**\n * @module ol/geom/flat/straightchunk\n */\n\n\n/**\n * @param {number} maxAngle Maximum acceptable angle delta between segments.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Array<number>} Start and end of the first suitable chunk of the\n * given `flatCoordinates`.\n */\nexport function matchingChunk(maxAngle, flatCoordinates, offset, end, stride) {\n  let chunkStart = offset;\n  let chunkEnd = offset;\n  let chunkM = 0;\n  let m = 0;\n  let start = offset;\n  let acos, i, m12, m23, x1, y1, x12, y12, x23, y23;\n  for (i = offset; i < end; i += stride) {\n    const x2 = flatCoordinates[i];\n    const y2 = flatCoordinates[i + 1];\n    if (x1 !== undefined) {\n      x23 = x2 - x1;\n      y23 = y2 - y1;\n      m23 = Math.sqrt(x23 * x23 + y23 * y23);\n      if (x12 !== undefined) {\n        m += m12;\n        acos = Math.acos((x12 * x23 + y12 * y23) / (m12 * m23));\n        if (acos > maxAngle) {\n          if (m > chunkM) {\n            chunkM = m;\n            chunkStart = start;\n            chunkEnd = i;\n          }\n          m = 0;\n          start = i - stride;\n        }\n      }\n      m12 = m23;\n      x12 = x23;\n      y12 = y23;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  m += m23;\n  return m > chunkM ? [start, i] : [chunkStart, chunkEnd];\n}\n","/**\n * @module ol/render/canvas/TextReplay\n */\nimport {getUid} from '../../util.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {intersects} from '../../extent.js';\nimport {matchingChunk} from '../../geom/flat/straightchunk.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport {labelCache, measureTextWidth, defaultTextAlign, measureTextHeight, defaultPadding, defaultLineCap, defaultLineDashOffset, defaultLineDash, defaultLineJoin, defaultFillStyle, checkFont, defaultFont, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline} from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\nimport CanvasReplay from './Replay.js';\nimport {TEXT_ALIGN} from '../replay.js';\nimport TextPlacement from '../../style/TextPlacement.js';\n\nclass CanvasTextReplay extends CanvasReplay {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterGroup}\n     */\n    this.declutterGroup_;\n\n    /**\n     * @private\n     * @type {Array<HTMLCanvasElement>}\n     */\n    this.labels_ = null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.text_ = '';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.textRotateWithView_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textRotation_ = 0;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.textFillState_ = null;\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").FillState>}\n     */\n    this.fillStates = {};\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.textStrokeState_ = null;\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n     */\n    this.strokeStates = {};\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").TextState}\n     */\n    this.textState_ = /** @type {import(\"../canvas.js\").TextState} */ ({});\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").TextState>}\n     */\n    this.textStates = {};\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.textKey_ = '';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.fillKey_ = '';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.strokeKey_ = '';\n\n    /**\n     * @private\n     * @type {Object<string, Object<string, number>>}\n     */\n    this.widths_ = {};\n\n    labelCache.prune();\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawText(geometry, feature) {\n    const fillState = this.textFillState_;\n    const strokeState = this.textStrokeState_;\n    const textState = this.textState_;\n    if (this.text_ === '' || !textState || (!fillState && !strokeState)) {\n      return;\n    }\n\n    let begin = this.coordinates.length;\n\n    const geometryType = geometry.getType();\n    let flatCoordinates = null;\n    let end = 2;\n    let stride = 2;\n    let i, ii;\n\n    if (textState.placement === TextPlacement.LINE) {\n      if (!intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\n        return;\n      }\n      let ends;\n      flatCoordinates = geometry.getFlatCoordinates();\n      stride = geometry.getStride();\n      if (geometryType == GeometryType.LINE_STRING) {\n        ends = [flatCoordinates.length];\n      } else if (geometryType == GeometryType.MULTI_LINE_STRING) {\n        ends = geometry.getEnds();\n      } else if (geometryType == GeometryType.POLYGON) {\n        ends = geometry.getEnds().slice(0, 1);\n      } else if (geometryType == GeometryType.MULTI_POLYGON) {\n        const endss = geometry.getEndss();\n        ends = [];\n        for (i = 0, ii = endss.length; i < ii; ++i) {\n          ends.push(endss[i][0]);\n        }\n      }\n      this.beginGeometry(geometry, feature);\n      const textAlign = textState.textAlign;\n      let flatOffset = 0;\n      let flatEnd;\n      for (let o = 0, oo = ends.length; o < oo; ++o) {\n        if (textAlign == undefined) {\n          const range = matchingChunk(textState.maxAngle, flatCoordinates, flatOffset, ends[o], stride);\n          flatOffset = range[0];\n          flatEnd = range[1];\n        } else {\n          flatEnd = ends[o];\n        }\n        for (i = flatOffset; i < flatEnd; i += stride) {\n          this.coordinates.push(flatCoordinates[i], flatCoordinates[i + 1]);\n        }\n        end = this.coordinates.length;\n        flatOffset = ends[o];\n        this.drawChars_(begin, end, this.declutterGroup_);\n        begin = end;\n      }\n      this.endGeometry(geometry, feature);\n\n    } else {\n      const label = this.getImage(this.text_, this.textKey_, this.fillKey_, this.strokeKey_);\n      const width = label.width / this.pixelRatio;\n      switch (geometryType) {\n        case GeometryType.POINT:\n        case GeometryType.MULTI_POINT:\n          flatCoordinates = geometry.getFlatCoordinates();\n          end = flatCoordinates.length;\n          break;\n        case GeometryType.LINE_STRING:\n          flatCoordinates = /** @type {import(\"../../geom/LineString.js\").default} */ (geometry).getFlatMidpoint();\n          break;\n        case GeometryType.CIRCLE:\n          flatCoordinates = /** @type {import(\"../../geom/Circle.js\").default} */ (geometry).getCenter();\n          break;\n        case GeometryType.MULTI_LINE_STRING:\n          flatCoordinates = /** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry).getFlatMidpoints();\n          end = flatCoordinates.length;\n          break;\n        case GeometryType.POLYGON:\n          flatCoordinates = /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getFlatInteriorPoint();\n          if (!textState.overflow && flatCoordinates[2] / this.resolution < width) {\n            return;\n          }\n          stride = 3;\n          break;\n        case GeometryType.MULTI_POLYGON:\n          const interiorPoints = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry).getFlatInteriorPoints();\n          flatCoordinates = [];\n          for (i = 0, ii = interiorPoints.length; i < ii; i += 3) {\n            if (textState.overflow || interiorPoints[i + 2] / this.resolution >= width) {\n              flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\n            }\n          }\n          end = flatCoordinates.length;\n          if (end == 0) {\n            return;\n          }\n          break;\n        default:\n      }\n      end = this.appendFlatCoordinates(flatCoordinates, 0, end, stride, false, false);\n      if (textState.backgroundFill || textState.backgroundStroke) {\n        this.setFillStrokeStyle(textState.backgroundFill, textState.backgroundStroke);\n        if (textState.backgroundFill) {\n          this.updateFillStyle(this.state, this.createFill, geometry);\n          this.hitDetectionInstructions.push(this.createFill(this.state, geometry));\n        }\n        if (textState.backgroundStroke) {\n          this.updateStrokeStyle(this.state, this.applyStroke);\n          this.hitDetectionInstructions.push(this.createStroke(this.state));\n        }\n      }\n      this.beginGeometry(geometry, feature);\n      this.drawTextImage_(label, begin, end);\n      this.endGeometry(geometry, feature);\n    }\n  }\n\n  /**\n   * @param {string} text Text.\n   * @param {string} textKey Text style key.\n   * @param {string} fillKey Fill style key.\n   * @param {string} strokeKey Stroke style key.\n   * @return {HTMLCanvasElement} Image.\n   */\n  getImage(text, textKey, fillKey, strokeKey) {\n    let label;\n    const key = strokeKey + textKey + text + fillKey + this.pixelRatio;\n\n    if (!labelCache.containsKey(key)) {\n      const strokeState = strokeKey ? this.strokeStates[strokeKey] || this.textStrokeState_ : null;\n      const fillState = fillKey ? this.fillStates[fillKey] || this.textFillState_ : null;\n      const textState = this.textStates[textKey] || this.textState_;\n      const pixelRatio = this.pixelRatio;\n      const scale = textState.scale * pixelRatio;\n      const align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n      const strokeWidth = strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n      const lines = text.split('\\n');\n      const numLines = lines.length;\n      const widths = [];\n      const width = measureTextWidths(textState.font, lines, widths);\n      const lineHeight = measureTextHeight(textState.font);\n      const height = lineHeight * numLines;\n      const renderWidth = (width + strokeWidth);\n      const context = createCanvasContext2D(\n        Math.ceil(renderWidth * scale),\n        Math.ceil((height + strokeWidth) * scale));\n      label = context.canvas;\n      labelCache.set(key, label);\n      if (scale != 1) {\n        context.scale(scale, scale);\n      }\n      context.font = textState.font;\n      if (strokeKey) {\n        context.strokeStyle = strokeState.strokeStyle;\n        context.lineWidth = strokeWidth;\n        context.lineCap = /** @type {CanvasLineCap} */ (strokeState.lineCap);\n        context.lineJoin = /** @type {CanvasLineJoin} */ (strokeState.lineJoin);\n        context.miterLimit = strokeState.miterLimit;\n        if (CANVAS_LINE_DASH && strokeState.lineDash.length) {\n          context.setLineDash(strokeState.lineDash);\n          context.lineDashOffset = strokeState.lineDashOffset;\n        }\n      }\n      if (fillKey) {\n        context.fillStyle = fillState.fillStyle;\n      }\n      context.textBaseline = 'middle';\n      context.textAlign = 'center';\n      const leftRight = (0.5 - align);\n      const x = align * label.width / scale + leftRight * strokeWidth;\n      let i;\n      if (strokeKey) {\n        for (i = 0; i < numLines; ++i) {\n          context.strokeText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n        }\n      }\n      if (fillKey) {\n        for (i = 0; i < numLines; ++i) {\n          context.fillText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n        }\n      }\n    }\n    return labelCache.get(key);\n  }\n\n  /**\n   * @private\n   * @param {HTMLCanvasElement} label Label.\n   * @param {number} begin Begin.\n   * @param {number} end End.\n   */\n  drawTextImage_(label, begin, end) {\n    const textState = this.textState_;\n    const strokeState = this.textStrokeState_;\n    const pixelRatio = this.pixelRatio;\n    const align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n    const baseline = TEXT_ALIGN[textState.textBaseline];\n    const strokeWidth = strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n    const anchorX = align * label.width / pixelRatio + 2 * (0.5 - align) * strokeWidth;\n    const anchorY = baseline * label.height / pixelRatio + 2 * (0.5 - baseline) * strokeWidth;\n    this.instructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n      label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\n      this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\n      1, label.width,\n      textState.padding == defaultPadding ?\n        defaultPadding : textState.padding.map(function(p) {\n          return p * pixelRatio;\n        }),\n      !!textState.backgroundFill, !!textState.backgroundStroke\n    ]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n      label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\n      this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\n      1 / pixelRatio, label.width, textState.padding,\n      !!textState.backgroundFill, !!textState.backgroundStroke\n    ]);\n  }\n\n  /**\n   * @private\n   * @param {number} begin Begin.\n   * @param {number} end End.\n   * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n   */\n  drawChars_(begin, end, declutterGroup) {\n    const strokeState = this.textStrokeState_;\n    const textState = this.textState_;\n    const fillState = this.textFillState_;\n\n    const strokeKey = this.strokeKey_;\n    if (strokeState) {\n      if (!(strokeKey in this.strokeStates)) {\n        this.strokeStates[strokeKey] = /** @type {import(\"../canvas.js\").StrokeState} */ ({\n          strokeStyle: strokeState.strokeStyle,\n          lineCap: strokeState.lineCap,\n          lineDashOffset: strokeState.lineDashOffset,\n          lineWidth: strokeState.lineWidth,\n          lineJoin: strokeState.lineJoin,\n          miterLimit: strokeState.miterLimit,\n          lineDash: strokeState.lineDash\n        });\n      }\n    }\n    const textKey = this.textKey_;\n    if (!(this.textKey_ in this.textStates)) {\n      this.textStates[this.textKey_] = /** @type {import(\"../canvas.js\").TextState} */ ({\n        font: textState.font,\n        textAlign: textState.textAlign || defaultTextAlign,\n        scale: textState.scale\n      });\n    }\n    const fillKey = this.fillKey_;\n    if (fillState) {\n      if (!(fillKey in this.fillStates)) {\n        this.fillStates[fillKey] = /** @type {import(\"../canvas.js\").FillState} */ ({\n          fillStyle: fillState.fillStyle\n        });\n      }\n    }\n\n    const pixelRatio = this.pixelRatio;\n    const baseline = TEXT_ALIGN[textState.textBaseline];\n\n    const offsetY = this.textOffsetY_ * pixelRatio;\n    const text = this.text_;\n    const font = textState.font;\n    const textScale = textState.scale;\n    const strokeWidth = strokeState ? strokeState.lineWidth * textScale / 2 : 0;\n    let widths = this.widths_[font];\n    if (!widths) {\n      this.widths_[font] = widths = {};\n    }\n    this.instructions.push([CanvasInstruction.DRAW_CHARS,\n      begin, end, baseline, declutterGroup,\n      textState.overflow, fillKey, textState.maxAngle,\n      function(text) {\n        let width = widths[text];\n        if (!width) {\n          width = widths[text] = measureTextWidth(font, text);\n        }\n        return width * textScale * pixelRatio;\n      },\n      offsetY, strokeKey, strokeWidth * pixelRatio, text, textKey, 1\n    ]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_CHARS,\n      begin, end, baseline, declutterGroup,\n      textState.overflow, fillKey, textState.maxAngle,\n      function(text) {\n        let width = widths[text];\n        if (!width) {\n          width = widths[text] = measureTextWidth(font, text);\n        }\n        return width * textScale;\n      },\n      offsetY, strokeKey, strokeWidth, text, textKey, 1 / pixelRatio\n    ]);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setTextStyle(textStyle, declutterGroup) {\n    let textState, fillState, strokeState;\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      this.declutterGroup_ = /** @type {import(\"../canvas.js\").DeclutterGroup} */ (declutterGroup);\n\n      const textFillStyle = textStyle.getFill();\n      if (!textFillStyle) {\n        fillState = this.textFillState_ = null;\n      } else {\n        fillState = this.textFillState_;\n        if (!fillState) {\n          fillState = this.textFillState_ = /** @type {import(\"../canvas.js\").FillState} */ ({});\n        }\n        fillState.fillStyle = asColorLike(\n          textFillStyle.getColor() || defaultFillStyle);\n      }\n\n      const textStrokeStyle = textStyle.getStroke();\n      if (!textStrokeStyle) {\n        strokeState = this.textStrokeState_ = null;\n      } else {\n        strokeState = this.textStrokeState_;\n        if (!strokeState) {\n          strokeState = this.textStrokeState_ = /** @type {import(\"../canvas.js\").StrokeState} */ ({});\n        }\n        const lineDash = textStrokeStyle.getLineDash();\n        const lineDashOffset = textStrokeStyle.getLineDashOffset();\n        const lineWidth = textStrokeStyle.getWidth();\n        const miterLimit = textStrokeStyle.getMiterLimit();\n        strokeState.lineCap = textStrokeStyle.getLineCap() || defaultLineCap;\n        strokeState.lineDash = lineDash ? lineDash.slice() : defaultLineDash;\n        strokeState.lineDashOffset =\n            lineDashOffset === undefined ? defaultLineDashOffset : lineDashOffset;\n        strokeState.lineJoin = textStrokeStyle.getLineJoin() || defaultLineJoin;\n        strokeState.lineWidth =\n            lineWidth === undefined ? defaultLineWidth : lineWidth;\n        strokeState.miterLimit =\n            miterLimit === undefined ? defaultMiterLimit : miterLimit;\n        strokeState.strokeStyle = asColorLike(\n          textStrokeStyle.getColor() || defaultStrokeStyle);\n      }\n\n      textState = this.textState_;\n      const font = textStyle.getFont() || defaultFont;\n      checkFont(font);\n      const textScale = textStyle.getScale();\n      textState.overflow = textStyle.getOverflow();\n      textState.font = font;\n      textState.maxAngle = textStyle.getMaxAngle();\n      textState.placement = textStyle.getPlacement();\n      textState.textAlign = textStyle.getTextAlign();\n      textState.textBaseline = textStyle.getTextBaseline() || defaultTextBaseline;\n      textState.backgroundFill = textStyle.getBackgroundFill();\n      textState.backgroundStroke = textStyle.getBackgroundStroke();\n      textState.padding = textStyle.getPadding() || defaultPadding;\n      textState.scale = textScale === undefined ? 1 : textScale;\n\n      const textOffsetX = textStyle.getOffsetX();\n      const textOffsetY = textStyle.getOffsetY();\n      const textRotateWithView = textStyle.getRotateWithView();\n      const textRotation = textStyle.getRotation();\n      this.text_ = textStyle.getText() || '';\n      this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\n      this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\n      this.textRotateWithView_ = textRotateWithView === undefined ? false : textRotateWithView;\n      this.textRotation_ = textRotation === undefined ? 0 : textRotation;\n\n      this.strokeKey_ = strokeState ?\n        (typeof strokeState.strokeStyle == 'string' ? strokeState.strokeStyle : getUid(strokeState.strokeStyle)) +\n        strokeState.lineCap + strokeState.lineDashOffset + '|' + strokeState.lineWidth +\n        strokeState.lineJoin + strokeState.miterLimit + '[' + strokeState.lineDash.join() + ']' :\n        '';\n      this.textKey_ = textState.font + textState.scale + (textState.textAlign || '?');\n      this.fillKey_ = fillState ?\n        (typeof fillState.fillStyle == 'string' ? fillState.fillStyle : ('|' + getUid(fillState.fillStyle))) :\n        '';\n    }\n  }\n}\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @param {Array<string>} lines Lines to measure.\n * @param {Array<number>} widths Array will be populated with the widths of\n * each line.\n * @return {number} Width of the whole text.\n */\nexport function measureTextWidths(font, lines, widths) {\n  const numLines = lines.length;\n  let width = 0;\n  for (let i = 0; i < numLines; ++i) {\n    const currentWidth = measureTextWidth(font, lines[i]);\n    width = Math.max(width, currentWidth);\n    widths.push(currentWidth);\n  }\n  return width;\n}\n\n\nexport default CanvasTextReplay;\n","/**\n * @module ol/render/canvas/ReplayGroup\n */\n\nimport {numberSafeCompareFunction} from '../../array.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {buffer, createEmpty, extendCoordinate} from '../../extent.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {isEmpty} from '../../obj.js';\nimport ReplayGroup from '../ReplayGroup.js';\nimport ReplayType from '../ReplayType.js';\nimport CanvasReplay from './Replay.js';\nimport CanvasImageReplay from './ImageReplay.js';\nimport CanvasLineStringReplay from './LineStringReplay.js';\nimport CanvasPolygonReplay from './PolygonReplay.js';\nimport CanvasTextReplay from './TextReplay.js';\nimport {ORDER} from '../replay.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n\n/**\n * @type {Object<ReplayType, typeof CanvasReplay>}\n */\nconst BATCH_CONSTRUCTORS = {\n  'Circle': CanvasPolygonReplay,\n  'Default': CanvasReplay,\n  'Image': CanvasImageReplay,\n  'LineString': CanvasLineStringReplay,\n  'Polygon': CanvasPolygonReplay,\n  'Text': CanvasTextReplay\n};\n\n\nclass CanvasReplayGroup extends ReplayGroup {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Max extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay group can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree for declutter processing in postrender.\n   * @param {number=} opt_renderBuffer Optional rendering buffer.\n   */\n  constructor(\n    tolerance,\n    maxExtent,\n    resolution,\n    pixelRatio,\n    overlaps,\n    declutterTree,\n    opt_renderBuffer\n  ) {\n    super();\n\n    /**\n     * Declutter tree.\n     * @private\n     */\n    this.declutterTree_ = declutterTree;\n\n    /**\n     * @type {import(\"../canvas.js\").DeclutterGroup}\n     * @private\n     */\n    this.declutterGroup_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tolerance_ = tolerance;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent_ = maxExtent;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overlaps_ = overlaps;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.resolution_ = resolution;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.renderBuffer_ = opt_renderBuffer;\n\n    /**\n     * @private\n     * @type {!Object<string, !Object<ReplayType, CanvasReplay>>}\n     */\n    this.replaysByZIndex_ = {};\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.hitDetectionContext_ = createCanvasContext2D(1, 1);\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.hitDetectionTransform_ = createTransform();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  addDeclutter(group) {\n    let declutter = null;\n    if (this.declutterTree_) {\n      if (group) {\n        declutter = this.declutterGroup_;\n        /** @type {number} */ (declutter[4])++;\n      } else {\n        declutter = this.declutterGroup_ = createEmpty();\n        declutter.push(1);\n      }\n    }\n    return declutter;\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   */\n  clip(context, transform) {\n    const flatClipCoords = this.getClipCoords(transform);\n    context.beginPath();\n    context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n    context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n    context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n    context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n    context.clip();\n  }\n\n  /**\n   * @param {Array<ReplayType>} replays Replays.\n   * @return {boolean} Has replays of the provided types.\n   */\n  hasReplays(replays) {\n    for (const zIndex in this.replaysByZIndex_) {\n      const candidates = this.replaysByZIndex_[zIndex];\n      for (let i = 0, ii = replays.length; i < ii; ++i) {\n        if (replays[i] in candidates) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  finish() {\n    for (const zKey in this.replaysByZIndex_) {\n      const replays = this.replaysByZIndex_[zKey];\n      for (const replayKey in replays) {\n        replays[replayKey].finish();\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {number} rotation Rotation.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features to skip.\n   * @param {function((import(\"../../Feature.js\").default|import(\"../Feature.js\").default)): T} callback Feature callback.\n   * @param {Object<string, import(\"../canvas.js\").DeclutterGroup>} declutterReplays Declutter replays.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  forEachFeatureAtCoordinate(\n    coordinate,\n    resolution,\n    rotation,\n    hitTolerance,\n    skippedFeaturesHash,\n    callback,\n    declutterReplays\n  ) {\n\n    hitTolerance = Math.round(hitTolerance);\n    const contextSize = hitTolerance * 2 + 1;\n    const transform = composeTransform(this.hitDetectionTransform_,\n      hitTolerance + 0.5, hitTolerance + 0.5,\n      1 / resolution, -1 / resolution,\n      -rotation,\n      -coordinate[0], -coordinate[1]);\n    const context = this.hitDetectionContext_;\n\n    if (context.canvas.width !== contextSize || context.canvas.height !== contextSize) {\n      context.canvas.width = contextSize;\n      context.canvas.height = contextSize;\n    } else {\n      context.clearRect(0, 0, contextSize, contextSize);\n    }\n\n    /**\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    let hitExtent;\n    if (this.renderBuffer_ !== undefined) {\n      hitExtent = createEmpty();\n      extendCoordinate(hitExtent, coordinate);\n      buffer(hitExtent, resolution * (this.renderBuffer_ + hitTolerance), hitExtent);\n    }\n\n    const mask = getCircleArray(hitTolerance);\n    let declutteredFeatures;\n    if (this.declutterTree_) {\n      declutteredFeatures = this.declutterTree_.all().map(function(entry) {\n        return entry.value;\n      });\n    }\n\n    let replayType;\n\n    /**\n     * @param {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} feature Feature.\n     * @return {?} Callback result.\n     */\n    function featureCallback(feature) {\n      const imageData = context.getImageData(0, 0, contextSize, contextSize).data;\n      for (let i = 0; i < contextSize; i++) {\n        for (let j = 0; j < contextSize; j++) {\n          if (mask[i][j]) {\n            if (imageData[(j * contextSize + i) * 4 + 3] > 0) {\n              let result;\n              if (!(declutteredFeatures && (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) ||\n                  declutteredFeatures.indexOf(feature) !== -1) {\n                result = callback(feature);\n              }\n              if (result) {\n                return result;\n              } else {\n                context.clearRect(0, 0, contextSize, contextSize);\n                return undefined;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    /** @type {Array<number>} */\n    const zs = Object.keys(this.replaysByZIndex_).map(Number);\n    zs.sort(numberSafeCompareFunction);\n\n    let i, j, replays, replay, result;\n    for (i = zs.length - 1; i >= 0; --i) {\n      const zIndexKey = zs[i].toString();\n      replays = this.replaysByZIndex_[zIndexKey];\n      for (j = ORDER.length - 1; j >= 0; --j) {\n        replayType = ORDER[j];\n        replay = replays[replayType];\n        if (replay !== undefined) {\n          if (declutterReplays &&\n              (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) {\n            const declutter = declutterReplays[zIndexKey];\n            if (!declutter) {\n              declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n            } else {\n              declutter.push(replay, transform.slice(0));\n            }\n          } else {\n            result = replay.replayHitDetection(context, transform, rotation,\n              skippedFeaturesHash, featureCallback, hitExtent);\n            if (result) {\n              return result;\n            }\n          }\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @return {Array<number>} Clip coordinates.\n   */\n  getClipCoords(transform) {\n    const maxExtent = this.maxExtent_;\n    const minX = maxExtent[0];\n    const minY = maxExtent[1];\n    const maxX = maxExtent[2];\n    const maxY = maxExtent[3];\n    const flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n    transform2D(\n      flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n    return flatClipCoords;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getReplay(zIndex, replayType) {\n    const zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n    let replays = this.replaysByZIndex_[zIndexKey];\n    if (replays === undefined) {\n      replays = {};\n      this.replaysByZIndex_[zIndexKey] = replays;\n    }\n    let replay = replays[replayType];\n    if (replay === undefined) {\n      const Constructor = BATCH_CONSTRUCTORS[replayType];\n      replay = new Constructor(this.tolerance_, this.maxExtent_,\n        this.resolution_, this.pixelRatio_, this.overlaps_, this.declutterTree_);\n      replays[replayType] = replay;\n    }\n    return replay;\n  }\n\n  /**\n   * @return {Object<string, Object<ReplayType, CanvasReplay>>} Replays.\n   */\n  getReplays() {\n    return this.replaysByZIndex_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isEmpty() {\n    return isEmpty(this.replaysByZIndex_);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features to skip.\n   * @param {boolean} snapToPixel Snap point symbols and test to integer pixel.\n   * @param {Array<ReplayType>=} opt_replayTypes Ordered replay types to replay.\n   *     Default is {@link module:ol/render/replay~ORDER}\n   * @param {Object<string, import(\"../canvas.js\").DeclutterGroup>=} opt_declutterReplays Declutter replays.\n   */\n  replay(\n    context,\n    transform,\n    viewRotation,\n    skippedFeaturesHash,\n    snapToPixel,\n    opt_replayTypes,\n    opt_declutterReplays\n  ) {\n\n    /** @type {Array<number>} */\n    const zs = Object.keys(this.replaysByZIndex_).map(Number);\n    zs.sort(numberSafeCompareFunction);\n\n    // setup clipping so that the parts of over-simplified geometries are not\n    // visible outside the current extent when panning\n    context.save();\n    this.clip(context, transform);\n\n    const replayTypes = opt_replayTypes ? opt_replayTypes : ORDER;\n    let i, ii, j, jj, replays, replay;\n    for (i = 0, ii = zs.length; i < ii; ++i) {\n      const zIndexKey = zs[i].toString();\n      replays = this.replaysByZIndex_[zIndexKey];\n      for (j = 0, jj = replayTypes.length; j < jj; ++j) {\n        const replayType = replayTypes[j];\n        replay = replays[replayType];\n        if (replay !== undefined) {\n          if (opt_declutterReplays &&\n              (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) {\n            const declutter = opt_declutterReplays[zIndexKey];\n            if (!declutter) {\n              opt_declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n            } else {\n              declutter.push(replay, transform.slice(0));\n            }\n          } else {\n            replay.replay(context, transform, viewRotation, skippedFeaturesHash, snapToPixel);\n          }\n        }\n      }\n    }\n\n    context.restore();\n  }\n}\n\n\n/**\n * This cache is used for storing calculated pixel circles for increasing performance.\n * It is a static property to allow each Replaygroup to access it.\n * @type {Object<number, Array<Array<(boolean|undefined)>>>}\n */\nconst circleArrayCache = {\n  0: [[true]]\n};\n\n\n/**\n * This method fills a row in the array from the given coordinate to the\n * middle with `true`.\n * @param {Array<Array<(boolean|undefined)>>} array The array that will be altered.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n */\nfunction fillCircleArrayRowToMiddle(array, x, y) {\n  let i;\n  const radius = Math.floor(array.length / 2);\n  if (x >= radius) {\n    for (i = radius; i < x; i++) {\n      array[i][y] = true;\n    }\n  } else if (x < radius) {\n    for (i = x + 1; i < radius; i++) {\n      array[i][y] = true;\n    }\n  }\n}\n\n\n/**\n * This methods creates a circle inside a fitting array. Points inside the\n * circle are marked by true, points on the outside are undefined.\n * It uses the midpoint circle algorithm.\n * A cache is used to increase performance.\n * @param {number} radius Radius.\n * @returns {Array<Array<(boolean|undefined)>>} An array with marked circle points.\n */\nexport function getCircleArray(radius) {\n  if (circleArrayCache[radius] !== undefined) {\n    return circleArrayCache[radius];\n  }\n\n  const arraySize = radius * 2 + 1;\n  const arr = new Array(arraySize);\n  for (let i = 0; i < arraySize; i++) {\n    arr[i] = new Array(arraySize);\n  }\n\n  let x = radius;\n  let y = 0;\n  let error = 0;\n\n  while (x >= y) {\n    fillCircleArrayRowToMiddle(arr, radius + x, radius + y);\n    fillCircleArrayRowToMiddle(arr, radius + y, radius + x);\n    fillCircleArrayRowToMiddle(arr, radius - y, radius + x);\n    fillCircleArrayRowToMiddle(arr, radius - x, radius + y);\n    fillCircleArrayRowToMiddle(arr, radius - x, radius - y);\n    fillCircleArrayRowToMiddle(arr, radius - y, radius - x);\n    fillCircleArrayRowToMiddle(arr, radius + y, radius - x);\n    fillCircleArrayRowToMiddle(arr, radius + x, radius - y);\n\n    y++;\n    error += 1 + 2 * y;\n    if (2 * (error - x) + 1 > 0) {\n      x -= 1;\n      error += 1 - 2 * x;\n    }\n  }\n\n  circleArrayCache[radius] = arr;\n  return arr;\n}\n\n\n/**\n * @param {!Object<string, Array<*>>} declutterReplays Declutter replays.\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n */\nexport function replayDeclutter(declutterReplays, context, rotation, snapToPixel) {\n  const zs = Object.keys(declutterReplays).map(Number).sort(numberSafeCompareFunction);\n  const skippedFeatureUids = {};\n  for (let z = 0, zz = zs.length; z < zz; ++z) {\n    const replayData = declutterReplays[zs[z].toString()];\n    for (let i = 0, ii = replayData.length; i < ii;) {\n      const replay = replayData[i++];\n      const transform = replayData[i++];\n      replay.replay(context, transform, rotation, skippedFeatureUids, snapToPixel);\n    }\n  }\n}\n\n\nexport default CanvasReplayGroup;\n","/**\n * @module ol/renderer/vector\n */\nimport {getUid} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport ReplayType from '../render/ReplayType.js';\n\n\n/**\n * Tolerance for geometry simplification in device pixels.\n * @type {number}\n */\nconst SIMPLIFY_TOLERANCE = 0.5;\n\n\n/**\n * @const\n * @type {Object<import(\"../geom/GeometryType.js\").default,\n *                function(import(\"../render/ReplayGroup.js\").default, import(\"../geom/Geometry.js\").default,\n *                         import(\"../style/Style.js\").default, Object)>}\n */\nconst GEOMETRY_RENDERERS = {\n  'Point': renderPointGeometry,\n  'LineString': renderLineStringGeometry,\n  'Polygon': renderPolygonGeometry,\n  'MultiPoint': renderMultiPointGeometry,\n  'MultiLineString': renderMultiLineStringGeometry,\n  'MultiPolygon': renderMultiPolygonGeometry,\n  'GeometryCollection': renderGeometryCollectionGeometry,\n  'Circle': renderCircleGeometry\n};\n\n\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature1 Feature 1.\n * @param {import(\"../Feature.js\").FeatureLike} feature2 Feature 2.\n * @return {number} Order.\n */\nexport function defaultOrder(feature1, feature2) {\n  return parseInt(getUid(feature1), 10) - parseInt(getUid(feature2), 10);\n}\n\n\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Squared pixel tolerance.\n */\nexport function getSquaredTolerance(resolution, pixelRatio) {\n  const tolerance = getTolerance(resolution, pixelRatio);\n  return tolerance * tolerance;\n}\n\n\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Pixel tolerance.\n */\nexport function getTolerance(resolution, pixelRatio) {\n  return SIMPLIFY_TOLERANCE * resolution / pixelRatio;\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Circle.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n */\nfunction renderCircleGeometry(replayGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (fillStyle || strokeStyle) {\n    const circleReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.CIRCLE);\n    circleReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    circleReplay.drawCircle(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {function(this: T, import(\"../events/Event.js\").default)} listener Listener function.\n * @param {T} thisArg Value to use as `this` when executing `listener`.\n * @return {boolean} `true` if style is loading.\n * @template T\n */\nexport function renderFeature(replayGroup, feature, style, squaredTolerance, listener, thisArg) {\n  let loading = false;\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    let imageState = imageStyle.getImageState();\n    if (imageState == ImageState.LOADED || imageState == ImageState.ERROR) {\n      imageStyle.unlistenImageChange(listener, thisArg);\n    } else {\n      if (imageState == ImageState.IDLE) {\n        imageStyle.load();\n      }\n      imageState = imageStyle.getImageState();\n      imageStyle.listenImageChange(listener, thisArg);\n      loading = true;\n    }\n  }\n  renderFeatureInternal(replayGroup, feature, style, squaredTolerance);\n\n  return loading;\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n */\nfunction renderFeatureInternal(replayGroup, feature, style, squaredTolerance) {\n  const geometry = style.getGeometryFunction()(feature);\n  if (!geometry) {\n    return;\n  }\n  const simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n  const renderer = style.getRenderer();\n  if (renderer) {\n    renderGeometry(replayGroup, simplifiedGeometry, style, feature);\n  } else {\n    const geometryRenderer = GEOMETRY_RENDERERS[simplifiedGeometry.getType()];\n    geometryRenderer(replayGroup, simplifiedGeometry, style, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderGeometry(replayGroup, geometry, style, feature) {\n  if (geometry.getType() == GeometryType.GEOMETRY_COLLECTION) {\n    const geometries = /** @type {import(\"../geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      renderGeometry(replayGroup, geometries[i], style, feature);\n    }\n    return;\n  }\n  const replay = replayGroup.getReplay(style.getZIndex(), ReplayType.DEFAULT);\n  replay.drawCustom(/** @type {import(\"../geom/SimpleGeometry.js\").default} */ (geometry), feature, style.getRenderer());\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/GeometryCollection.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n */\nfunction renderGeometryCollectionGeometry(replayGroup, geometry, style, feature) {\n  const geometries = geometry.getGeometriesArray();\n  let i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    const geometryRenderer =\n        GEOMETRY_RENDERERS[geometries[i].getType()];\n    geometryRenderer(replayGroup, geometries[i], style, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/LineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderLineStringGeometry(replayGroup, geometry, style, feature) {\n  const strokeStyle = style.getStroke();\n  if (strokeStyle) {\n    const lineStringReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawLineString(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/MultiLineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderMultiLineStringGeometry(replayGroup, geometry, style, feature) {\n  const strokeStyle = style.getStroke();\n  if (strokeStyle) {\n    const lineStringReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawMultiLineString(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/MultiPolygon.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n */\nfunction renderMultiPolygonGeometry(replayGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (strokeStyle || fillStyle) {\n    const polygonReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawMultiPolygon(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Point.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderPointGeometry(replayGroup, geometry, style, feature) {\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n    const imageReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, replayGroup.addDeclutter(false));\n    imageReplay.drawPoint(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(!!imageStyle));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/MultiPoint.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderMultiPointGeometry(replayGroup, geometry, style, feature) {\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n    const imageReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, replayGroup.addDeclutter(false));\n    imageReplay.drawMultiPoint(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(!!imageStyle));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Polygon.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderPolygonGeometry(replayGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (fillStyle || strokeStyle) {\n    const polygonReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawPolygon(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n","/**\n * @module ol/renderer/canvas/VectorLayer\n */\nimport {getUid} from '../../util.js';\nimport LayerType from '../../LayerType.js';\nimport ViewHint from '../../ViewHint.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {listen, unlisten} from '../../events.js';\nimport EventType from '../../events/EventType.js';\nimport rbush from 'rbush';\nimport {buffer, createEmpty, containsExtent, getWidth} from '../../extent.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {labelCache, rotateAtOffset} from '../../render/canvas.js';\nimport CanvasReplayGroup from '../../render/canvas/ReplayGroup.js';\nimport CanvasLayerRenderer from './Layer.js';\nimport {defaultOrder as defaultRenderOrder, getTolerance as getRenderTolerance, getSquaredTolerance as getSquaredRenderTolerance, renderFeature} from '../vector.js';\n\n/**\n * @classdesc\n * Canvas renderer for vector layers.\n * @api\n */\nclass CanvasVectorLayerRenderer extends CanvasLayerRenderer {\n\n  /**\n   * @param {import(\"../../layer/Vector.js\").default} vectorLayer Vector layer.\n   */\n  constructor(vectorLayer) {\n\n    super(vectorLayer);\n\n    /**\n     * Declutter tree.\n     * @private\n     */\n    this.declutterTree_ = vectorLayer.getDeclutter() ? rbush(9, undefined) : null;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.dirty_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedResolution_ = NaN;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.renderedExtent_ = createEmpty();\n\n    /**\n     * @private\n     * @type {function(import(\"../../Feature.js\").default, import(\"../../Feature.js\").default): number|null}\n     */\n    this.renderedRenderOrder_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../render/canvas/ReplayGroup.js\").default}\n     */\n    this.replayGroup_ = null;\n\n    /**\n     * A new replay group had to be created by `prepareFrame()`\n     * @type {boolean}\n     */\n    this.replayGroupChanged = true;\n\n    /**\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context = createCanvasContext2D();\n\n    listen(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    unlisten(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n    super.disposeInternal();\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../layer/Layer.js\").State} layerState Layer state.\n   */\n  compose(context, frameState, layerState) {\n    const extent = frameState.extent;\n    const pixelRatio = frameState.pixelRatio;\n    const skippedFeatureUids = layerState.managed ?\n      frameState.skippedFeatureUids : {};\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const rotation = viewState.rotation;\n    const projectionExtent = projection.getExtent();\n    const vectorSource = /** @type {import(\"../../source/Vector.js\").default} */ (this.getLayer().getSource());\n\n    let transform = this.getTransform(frameState, 0);\n\n    // clipped rendering if layer extent is set\n    const clipExtent = layerState.extent;\n    const clipped = clipExtent !== undefined;\n    if (clipped) {\n      this.clip(context, frameState, /** @type {import(\"../../extent.js\").Extent} */ (clipExtent));\n    }\n    const replayGroup = this.replayGroup_;\n    if (replayGroup && !replayGroup.isEmpty()) {\n      if (this.declutterTree_) {\n        this.declutterTree_.clear();\n      }\n      const layer = /** @type {import(\"../../layer/Vector.js\").default} */ (this.getLayer());\n      let drawOffsetX = 0;\n      let drawOffsetY = 0;\n      let replayContext;\n      const transparentLayer = layerState.opacity !== 1;\n      const hasRenderListeners = layer.hasListener(RenderEventType.RENDER);\n      if (transparentLayer || hasRenderListeners) {\n        let drawWidth = context.canvas.width;\n        let drawHeight = context.canvas.height;\n        if (rotation) {\n          const drawSize = Math.round(Math.sqrt(drawWidth * drawWidth + drawHeight * drawHeight));\n          drawOffsetX = (drawSize - drawWidth) / 2;\n          drawOffsetY = (drawSize - drawHeight) / 2;\n          drawWidth = drawHeight = drawSize;\n        }\n        // resize and clear\n        this.context.canvas.width = drawWidth;\n        this.context.canvas.height = drawHeight;\n        replayContext = this.context;\n      } else {\n        replayContext = context;\n      }\n\n      const alpha = replayContext.globalAlpha;\n      if (!transparentLayer) {\n        // for performance reasons, context.save / context.restore is not used\n        // to save and restore the transformation matrix and the opacity.\n        // see http://jsperf.com/context-save-restore-versus-variable\n        replayContext.globalAlpha = layerState.opacity;\n      }\n\n      if (replayContext != context) {\n        replayContext.translate(drawOffsetX, drawOffsetY);\n      }\n\n      const viewHints = frameState.viewHints;\n      const snapToPixel = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n      const width = frameState.size[0] * pixelRatio;\n      const height = frameState.size[1] * pixelRatio;\n      rotateAtOffset(replayContext, -rotation,\n        width / 2, height / 2);\n      replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids, snapToPixel);\n      if (vectorSource.getWrapX() && projection.canWrapX() &&\n          !containsExtent(projectionExtent, extent)) {\n        let startX = extent[0];\n        const worldWidth = getWidth(projectionExtent);\n        let world = 0;\n        let offsetX;\n        while (startX < projectionExtent[0]) {\n          --world;\n          offsetX = worldWidth * world;\n          transform = this.getTransform(frameState, offsetX);\n          replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids, snapToPixel);\n          startX += worldWidth;\n        }\n        world = 0;\n        startX = extent[2];\n        while (startX > projectionExtent[2]) {\n          ++world;\n          offsetX = worldWidth * world;\n          transform = this.getTransform(frameState, offsetX);\n          replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids, snapToPixel);\n          startX -= worldWidth;\n        }\n      }\n      rotateAtOffset(replayContext, rotation,\n        width / 2, height / 2);\n\n      if (hasRenderListeners) {\n        this.dispatchRenderEvent(replayContext, frameState, transform);\n      }\n      if (replayContext != context) {\n        if (transparentLayer) {\n          const mainContextAlpha = context.globalAlpha;\n          context.globalAlpha = layerState.opacity;\n          context.drawImage(replayContext.canvas, -drawOffsetX, -drawOffsetY);\n          context.globalAlpha = mainContextAlpha;\n        } else {\n          context.drawImage(replayContext.canvas, -drawOffsetX, -drawOffsetY);\n        }\n        replayContext.translate(-drawOffsetX, -drawOffsetY);\n      }\n\n      if (!transparentLayer) {\n        replayContext.globalAlpha = alpha;\n      }\n    }\n\n    if (clipped) {\n      context.restore();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  composeFrame(frameState, layerState, context) {\n    const transform = this.getTransform(frameState, 0);\n    this.preCompose(context, frameState, transform);\n    this.compose(context, frameState, layerState);\n    this.postCompose(context, frameState, layerState, transform);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg) {\n    if (!this.replayGroup_) {\n      return undefined;\n    } else {\n      const resolution = frameState.viewState.resolution;\n      const rotation = frameState.viewState.rotation;\n      const layer = /** @type {import(\"../../layer/Vector.js\").default} */ (this.getLayer());\n      /** @type {!Object<string, boolean>} */\n      const features = {};\n      const result = this.replayGroup_.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, {},\n        /**\n         * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n         * @return {?} Callback result.\n         */\n        function(feature) {\n          const key = getUid(feature);\n          if (!(key in features)) {\n            features[key] = true;\n            return callback.call(thisArg, feature, layer);\n          }\n        }, null);\n      return result;\n    }\n  }\n\n  /**\n   * @param {import(\"../../events/Event.js\").default} event Event.\n   */\n  handleFontsChanged_(event) {\n    const layer = this.getLayer();\n    if (layer.getVisible() && this.replayGroup_) {\n      layer.changed();\n    }\n  }\n\n  /**\n   * Handle changes in image style state.\n   * @param {import(\"../../events/Event.js\").default} event Image style change event.\n   * @private\n   */\n  handleStyleImageChange_(event) {\n    this.renderIfReadyAndVisible();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState, layerState) {\n    const vectorLayer = /** @type {import(\"../../layer/Vector.js\").default} */ (this.getLayer());\n    const vectorSource = /** @type {import(\"../../source/Vector.js\").default} */ (vectorLayer.getSource());\n\n    const animating = frameState.viewHints[ViewHint.ANIMATING];\n    const interacting = frameState.viewHints[ViewHint.INTERACTING];\n    const updateWhileAnimating = vectorLayer.getUpdateWhileAnimating();\n    const updateWhileInteracting = vectorLayer.getUpdateWhileInteracting();\n\n    if (!this.dirty_ && (!updateWhileAnimating && animating) ||\n        (!updateWhileInteracting && interacting)) {\n      return true;\n    }\n\n    const frameStateExtent = frameState.extent;\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const resolution = viewState.resolution;\n    const pixelRatio = frameState.pixelRatio;\n    const vectorLayerRevision = vectorLayer.getRevision();\n    const vectorLayerRenderBuffer = vectorLayer.getRenderBuffer();\n    let vectorLayerRenderOrder = vectorLayer.getRenderOrder();\n\n    if (vectorLayerRenderOrder === undefined) {\n      vectorLayerRenderOrder = defaultRenderOrder;\n    }\n\n    const extent = buffer(frameStateExtent,\n      vectorLayerRenderBuffer * resolution);\n    const projectionExtent = viewState.projection.getExtent();\n\n    if (vectorSource.getWrapX() && viewState.projection.canWrapX() &&\n        !containsExtent(projectionExtent, frameState.extent)) {\n      // For the replay group, we need an extent that intersects the real world\n      // (-180 to +180). To support geometries in a coordinate range from -540\n      // to +540, we add at least 1 world width on each side of the projection\n      // extent. If the viewport is wider than the world, we need to add half of\n      // the viewport width to make sure we cover the whole viewport.\n      const worldWidth = getWidth(projectionExtent);\n      const gutter = Math.max(getWidth(extent) / 2, worldWidth);\n      extent[0] = projectionExtent[0] - gutter;\n      extent[2] = projectionExtent[2] + gutter;\n    }\n\n    if (!this.dirty_ &&\n        this.renderedResolution_ == resolution &&\n        this.renderedRevision_ == vectorLayerRevision &&\n        this.renderedRenderOrder_ == vectorLayerRenderOrder &&\n        containsExtent(this.renderedExtent_, extent)) {\n      this.replayGroupChanged = false;\n      return true;\n    }\n\n    this.replayGroup_ = null;\n\n    this.dirty_ = false;\n\n    const replayGroup = new CanvasReplayGroup(\n      getRenderTolerance(resolution, pixelRatio), extent, resolution,\n      pixelRatio, vectorSource.getOverlaps(), this.declutterTree_, vectorLayer.getRenderBuffer());\n    vectorSource.loadFeatures(extent, resolution, projection);\n    /**\n     * @param {import(\"../../Feature.js\").default} feature Feature.\n     * @this {CanvasVectorLayerRenderer}\n     */\n    const render = function(feature) {\n      let styles;\n      const styleFunction = feature.getStyleFunction() || vectorLayer.getStyleFunction();\n      if (styleFunction) {\n        styles = styleFunction(feature, resolution);\n      }\n      if (styles) {\n        const dirty = this.renderFeature(\n          feature, resolution, pixelRatio, styles, replayGroup);\n        this.dirty_ = this.dirty_ || dirty;\n      }\n    }.bind(this);\n    if (vectorLayerRenderOrder) {\n      /** @type {Array<import(\"../../Feature.js\").default>} */\n      const features = [];\n      vectorSource.forEachFeatureInExtent(extent,\n        /**\n         * @param {import(\"../../Feature.js\").default} feature Feature.\n         */\n        function(feature) {\n          features.push(feature);\n        });\n      features.sort(vectorLayerRenderOrder);\n      for (let i = 0, ii = features.length; i < ii; ++i) {\n        render(features[i]);\n      }\n    } else {\n      vectorSource.forEachFeatureInExtent(extent, render);\n    }\n    replayGroup.finish();\n\n    this.renderedResolution_ = resolution;\n    this.renderedRevision_ = vectorLayerRevision;\n    this.renderedRenderOrder_ = vectorLayerRenderOrder;\n    this.renderedExtent_ = extent;\n    this.replayGroup_ = replayGroup;\n\n    this.replayGroupChanged = true;\n    return true;\n  }\n\n  /**\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../style/Style.js\").default|Array<import(\"../../style/Style.js\").default>} styles The style or array of styles.\n   * @param {import(\"../../render/canvas/ReplayGroup.js\").default} replayGroup Replay group.\n   * @return {boolean} `true` if an image is loading.\n   */\n  renderFeature(feature, resolution, pixelRatio, styles, replayGroup) {\n    if (!styles) {\n      return false;\n    }\n    let loading = false;\n    if (Array.isArray(styles)) {\n      for (let i = 0, ii = styles.length; i < ii; ++i) {\n        loading = renderFeature(\n          replayGroup, feature, styles[i],\n          getSquaredRenderTolerance(resolution, pixelRatio),\n          this.handleStyleImageChange_, this) || loading;\n      }\n    } else {\n      loading = renderFeature(\n        replayGroup, feature, styles,\n        getSquaredRenderTolerance(resolution, pixelRatio),\n        this.handleStyleImageChange_, this);\n    }\n    return loading;\n  }\n}\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {import(\"../../layer/Layer.js\").default} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasVectorLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.VECTOR;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {import(\"../Map.js\").default} mapRenderer The map renderer.\n * @param {import(\"../../layer/Layer.js\").default} layer The layer to be rendererd.\n * @return {CanvasVectorLayerRenderer} The layer renderer.\n */\nCanvasVectorLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasVectorLayerRenderer(/** @type {import(\"../../layer/Vector.js\").default} */ (layer));\n};\n\n\nexport default CanvasVectorLayerRenderer;\n","/**\n * @module ol/renderer/canvas/VectorTileLayer\n */\nimport {getUid} from '../../util.js';\nimport LayerType from '../../LayerType.js';\nimport TileState from '../../TileState.js';\nimport ViewHint from '../../ViewHint.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {listen, unlisten} from '../../events.js';\nimport EventType from '../../events/EventType.js';\nimport rbush from 'rbush';\nimport {buffer, containsCoordinate, equals, getIntersection, getTopLeft, intersects} from '../../extent.js';\nimport VectorTileRenderType from '../../layer/VectorTileRenderType.js';\nimport {equivalent as equivalentProjection} from '../../proj.js';\nimport Units from '../../proj/Units.js';\nimport ReplayType from '../../render/ReplayType.js';\nimport {labelCache, rotateAtOffset} from '../../render/canvas.js';\nimport CanvasReplayGroup, {replayDeclutter} from '../../render/canvas/ReplayGroup.js';\nimport {ORDER} from '../../render/replay.js';\nimport CanvasTileLayerRenderer from './TileLayer.js';\nimport {getSquaredTolerance as getSquaredRenderTolerance, renderFeature} from '../vector.js';\nimport {\n  create as createTransform,\n  compose as composeTransform,\n  reset as resetTransform,\n  scale as scaleTransform,\n  translate as translateTransform\n} from '../../transform.js';\n\n\n/**\n * @type {!Object<string, Array<import(\"../../render/ReplayType.js\").default>>}\n */\nconst IMAGE_REPLAYS = {\n  'image': [ReplayType.POLYGON, ReplayType.CIRCLE,\n    ReplayType.LINE_STRING, ReplayType.IMAGE, ReplayType.TEXT],\n  'hybrid': [ReplayType.POLYGON, ReplayType.LINE_STRING]\n};\n\n\n/**\n * @type {!Object<string, Array<import(\"../../render/ReplayType.js\").default>>}\n */\nconst VECTOR_REPLAYS = {\n  'image': [ReplayType.DEFAULT],\n  'hybrid': [ReplayType.IMAGE, ReplayType.TEXT, ReplayType.DEFAULT],\n  'vector': ORDER\n};\n\n\n/**\n * @classdesc\n * Canvas renderer for vector tile layers.\n * @api\n */\nclass CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer {\n\n  /**\n   * @param {import(\"../../layer/VectorTile.js\").default} layer VectorTile layer.\n   */\n  constructor(layer) {\n\n    super(layer, true);\n\n    /**\n     * Declutter tree.\n     * @private\n     */\n    this.declutterTree_ = layer.getDeclutter() ? rbush(9, undefined) : null;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.dirty_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedLayerRevision_;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.tmpTransform_ = createTransform();\n\n    const renderMode = layer.getRenderMode();\n\n    // Use lower resolution for pure vector rendering. Closest resolution otherwise.\n    this.zDirection = renderMode === VectorTileRenderType.VECTOR ? 1 : 0;\n\n    if (renderMode !== VectorTileRenderType.VECTOR) {\n      this.context = createCanvasContext2D();\n    }\n\n\n    listen(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    unlisten(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n    super.disposeInternal();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    const tile = super.getTile(z, x, y, pixelRatio, projection);\n    if (tile.getState() === TileState.LOADED) {\n      this.createReplayGroup_(/** @type {import(\"../../VectorImageTile.js\").default} */ (tile), pixelRatio, projection);\n      if (this.context) {\n        this.renderTileImage_(/** @type {import(\"../../VectorImageTile.js\").default} */ (tile), pixelRatio, projection);\n      }\n    }\n    return tile;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTileImage(tile) {\n    const tileLayer = /** @type {import(\"../../layer/Tile.js\").default} */ (this.getLayer());\n    return /** @type {import(\"../../VectorImageTile.js\").default} */ (tile).getImage(tileLayer);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState, layerState) {\n    const layer = /** @type {import(\"../../layer/Vector.js\").default} */ (this.getLayer());\n    const layerRevision = layer.getRevision();\n    if (this.renderedLayerRevision_ != layerRevision) {\n      this.renderedTiles.length = 0;\n    }\n    this.renderedLayerRevision_ = layerRevision;\n    return super.prepareFrame(frameState, layerState);\n  }\n\n  /**\n   * @param {import(\"../../VectorImageTile.js\").default} tile Tile.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n   * @private\n   */\n  createReplayGroup_(tile, pixelRatio, projection) {\n    const layer = /** @type {import(\"../../layer/Vector.js\").default} */ (this.getLayer());\n    const revision = layer.getRevision();\n    const renderOrder = /** @type {import(\"../../render.js\").OrderFunction} */ (layer.getRenderOrder()) || null;\n\n    const replayState = tile.getReplayState(layer);\n    if (!replayState.dirty && replayState.renderedRevision == revision &&\n        replayState.renderedRenderOrder == renderOrder) {\n      return;\n    }\n\n    const source = /** @type {import(\"../../source/VectorTile.js\").default} */ (layer.getSource());\n    const sourceTileGrid = source.getTileGrid();\n    const tileGrid = source.getTileGridForProjection(projection);\n    const resolution = tileGrid.getResolution(tile.tileCoord[0]);\n    const tileExtent = tile.extent;\n\n    for (let t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n      const sourceTile = tile.getTile(tile.tileKeys[t]);\n      if (sourceTile.getState() != TileState.LOADED) {\n        continue;\n      }\n\n      const sourceTileCoord = sourceTile.tileCoord;\n      const sourceTileExtent = sourceTileGrid.getTileCoordExtent(sourceTileCoord);\n      const sharedExtent = getIntersection(tileExtent, sourceTileExtent);\n      const bufferedExtent = equals(sourceTileExtent, sharedExtent) ? null :\n        buffer(sharedExtent, layer.getRenderBuffer() * resolution, this.tmpExtent);\n      const tileProjection = sourceTile.getProjection();\n      let reproject = false;\n      if (!equivalentProjection(projection, tileProjection)) {\n        reproject = true;\n        sourceTile.setProjection(projection);\n      }\n      replayState.dirty = false;\n      const replayGroup = new CanvasReplayGroup(0, sharedExtent, resolution,\n        pixelRatio, source.getOverlaps(), this.declutterTree_, layer.getRenderBuffer());\n      const squaredTolerance = getSquaredRenderTolerance(resolution, pixelRatio);\n\n      /**\n       * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n       * @this {CanvasVectorTileLayerRenderer}\n       */\n      const render = function(feature) {\n        let styles;\n        const styleFunction = feature.getStyleFunction() || layer.getStyleFunction();\n        if (styleFunction) {\n          styles = styleFunction(feature, resolution);\n        }\n        if (styles) {\n          const dirty = this.renderFeature(feature, squaredTolerance, styles, replayGroup);\n          this.dirty_ = this.dirty_ || dirty;\n          replayState.dirty = replayState.dirty || dirty;\n        }\n      };\n\n      const features = sourceTile.getFeatures();\n      if (renderOrder && renderOrder !== replayState.renderedRenderOrder) {\n        features.sort(renderOrder);\n      }\n      for (let i = 0, ii = features.length; i < ii; ++i) {\n        const feature = features[i];\n        if (reproject) {\n          if (tileProjection.getUnits() == Units.TILE_PIXELS) {\n            // projected tile extent\n            tileProjection.setWorldExtent(sourceTileExtent);\n            // tile extent in tile pixel space\n            tileProjection.setExtent(sourceTile.getExtent());\n          }\n          feature.getGeometry().transform(tileProjection, projection);\n        }\n        if (!bufferedExtent || intersects(bufferedExtent, feature.getGeometry().getExtent())) {\n          render.call(this, feature);\n        }\n      }\n      replayGroup.finish();\n      sourceTile.setReplayGroup(layer, tile.tileCoord.toString(), replayGroup);\n    }\n    replayState.renderedRevision = revision;\n    replayState.renderedRenderOrder = renderOrder;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg) {\n    const resolution = frameState.viewState.resolution;\n    const rotation = frameState.viewState.rotation;\n    hitTolerance = hitTolerance == undefined ? 0 : hitTolerance;\n    const layer = this.getLayer();\n    /** @type {!Object<string, boolean>} */\n    const features = {};\n\n    const renderedTiles = /** @type {Array<import(\"../../VectorImageTile.js\").default>} */ (this.renderedTiles);\n\n    let bufferedExtent, found;\n    let i, ii;\n    for (i = 0, ii = renderedTiles.length; i < ii; ++i) {\n      const tile = renderedTiles[i];\n      bufferedExtent = buffer(tile.extent, hitTolerance * resolution, bufferedExtent);\n      if (!containsCoordinate(bufferedExtent, coordinate)) {\n        continue;\n      }\n      for (let t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n        const sourceTile = tile.getTile(tile.tileKeys[t]);\n        if (sourceTile.getState() != TileState.LOADED) {\n          continue;\n        }\n        const replayGroup = /** @type {CanvasReplayGroup} */ (sourceTile.getReplayGroup(layer,\n          tile.tileCoord.toString()));\n        found = found || replayGroup.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, {},\n          /**\n           * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n           * @return {?} Callback result.\n           */\n          function(feature) {\n            const key = getUid(feature);\n            if (!(key in features)) {\n              features[key] = true;\n              return callback.call(thisArg, feature, layer);\n            }\n          }, null);\n      }\n    }\n    return found;\n  }\n\n  /**\n   * @param {import(\"../../VectorTile.js\").default} tile Tile.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {import(\"../../transform.js\").Transform} transform Transform.\n   * @private\n   */\n  getReplayTransform_(tile, frameState) {\n    const layer = this.getLayer();\n    const source = /** @type {import(\"../../source/VectorTile.js\").default} */ (layer.getSource());\n    const tileGrid = source.getTileGrid();\n    const tileCoord = tile.tileCoord;\n    const tileResolution = tileGrid.getResolution(tileCoord[0]);\n    const viewState = frameState.viewState;\n    const pixelRatio = frameState.pixelRatio;\n    const renderResolution = viewState.resolution / pixelRatio;\n    const tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent);\n    const center = viewState.center;\n    const origin = getTopLeft(tileExtent);\n    const size = frameState.size;\n    const offsetX = Math.round(pixelRatio * size[0] / 2);\n    const offsetY = Math.round(pixelRatio * size[1] / 2);\n    return composeTransform(this.tmpTransform_,\n      offsetX, offsetY,\n      tileResolution / renderResolution, tileResolution / renderResolution,\n      viewState.rotation,\n      (origin[0] - center[0]) / tileResolution,\n      (center[1] - origin[1]) / tileResolution);\n  }\n\n  /**\n   * @param {import(\"../../events/Event.js\").default} event Event.\n   */\n  handleFontsChanged_(event) {\n    const layer = this.getLayer();\n    if (layer.getVisible() && this.renderedLayerRevision_ !== undefined) {\n      layer.changed();\n    }\n  }\n\n  /**\n   * Handle changes in image style state.\n   * @param {import(\"../../events/Event.js\").default} event Image style change event.\n   * @private\n   */\n  handleStyleImageChange_(event) {\n    this.renderIfReadyAndVisible();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  postCompose(context, frameState, layerState) {\n    const layer = /** @type {import(\"../../layer/Vector.js\").default} */ (this.getLayer());\n    const renderMode = layer.getRenderMode();\n    if (renderMode != VectorTileRenderType.IMAGE) {\n      const declutterReplays = layer.getDeclutter() ? {} : null;\n      const source = /** @type {import(\"../../source/VectorTile.js\").default} */ (layer.getSource());\n      const replayTypes = VECTOR_REPLAYS[renderMode];\n      const pixelRatio = frameState.pixelRatio;\n      const rotation = frameState.viewState.rotation;\n      const size = frameState.size;\n      let offsetX, offsetY;\n      if (rotation) {\n        offsetX = Math.round(pixelRatio * size[0] / 2);\n        offsetY = Math.round(pixelRatio * size[1] / 2);\n        rotateAtOffset(context, -rotation, offsetX, offsetY);\n      }\n      if (declutterReplays) {\n        this.declutterTree_.clear();\n      }\n      const viewHints = frameState.viewHints;\n      const snapToPixel = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n      const tiles = this.renderedTiles;\n      const tileGrid = source.getTileGridForProjection(frameState.viewState.projection);\n      const clips = [];\n      const zs = [];\n      for (let i = tiles.length - 1; i >= 0; --i) {\n        const tile = /** @type {import(\"../../VectorImageTile.js\").default} */ (tiles[i]);\n        if (tile.getState() == TileState.ABORT) {\n          continue;\n        }\n        const tileCoord = tile.tileCoord;\n        const worldOffset = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent)[0] - tile.extent[0];\n        let transform = undefined;\n        for (let t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n          const sourceTile = tile.getTile(tile.tileKeys[t]);\n          if (sourceTile.getState() != TileState.LOADED) {\n            continue;\n          }\n          const replayGroup = /** @type {CanvasReplayGroup} */ (sourceTile.getReplayGroup(layer, tileCoord.toString()));\n          if (!replayGroup || !replayGroup.hasReplays(replayTypes)) {\n            // sourceTile was not yet loaded when this.createReplayGroup_() was\n            // called, or it has no replays of the types we want to render\n            continue;\n          }\n          if (!transform) {\n            transform = this.getTransform(frameState, worldOffset);\n          }\n          const currentZ = sourceTile.tileCoord[0];\n          const currentClip = replayGroup.getClipCoords(transform);\n          context.save();\n          context.globalAlpha = layerState.opacity;\n          // Create a clip mask for regions in this low resolution tile that are\n          // already filled by a higher resolution tile\n          for (let j = 0, jj = clips.length; j < jj; ++j) {\n            const clip = clips[j];\n            if (currentZ < zs[j]) {\n              context.beginPath();\n              // counter-clockwise (outer ring) for current tile\n              context.moveTo(currentClip[0], currentClip[1]);\n              context.lineTo(currentClip[2], currentClip[3]);\n              context.lineTo(currentClip[4], currentClip[5]);\n              context.lineTo(currentClip[6], currentClip[7]);\n              // clockwise (inner ring) for higher resolution tile\n              context.moveTo(clip[6], clip[7]);\n              context.lineTo(clip[4], clip[5]);\n              context.lineTo(clip[2], clip[3]);\n              context.lineTo(clip[0], clip[1]);\n              context.clip();\n            }\n          }\n          replayGroup.replay(context, transform, rotation, {}, snapToPixel, replayTypes, declutterReplays);\n          context.restore();\n          clips.push(currentClip);\n          zs.push(currentZ);\n        }\n      }\n      if (declutterReplays) {\n        replayDeclutter(declutterReplays, context, rotation, snapToPixel);\n      }\n      if (rotation) {\n        rotateAtOffset(context, rotation,\n          /** @type {number} */ (offsetX), /** @type {number} */ (offsetY));\n      }\n    }\n    super.postCompose(context, frameState, layerState);\n  }\n\n  /**\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   * @param {number} squaredTolerance Squared tolerance.\n   * @param {import(\"../../style/Style.js\").default|Array<import(\"../../style/Style.js\").default>} styles The style or array of styles.\n   * @param {import(\"../../render/canvas/ReplayGroup.js\").default} replayGroup Replay group.\n   * @return {boolean} `true` if an image is loading.\n   */\n  renderFeature(feature, squaredTolerance, styles, replayGroup) {\n    if (!styles) {\n      return false;\n    }\n    let loading = false;\n    if (Array.isArray(styles)) {\n      for (let i = 0, ii = styles.length; i < ii; ++i) {\n        loading = renderFeature(\n          replayGroup, feature, styles[i], squaredTolerance,\n          this.handleStyleImageChange_, this) || loading;\n      }\n    } else {\n      loading = renderFeature(\n        replayGroup, feature, styles, squaredTolerance,\n        this.handleStyleImageChange_, this);\n    }\n    return loading;\n  }\n\n  /**\n   * @param {import(\"../../VectorImageTile.js\").default} tile Tile.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n   * @private\n   */\n  renderTileImage_(tile, pixelRatio, projection) {\n    const layer = /** @type {import(\"../../layer/Vector.js\").default} */ (this.getLayer());\n    const replayState = tile.getReplayState(layer);\n    const revision = layer.getRevision();\n    const replays = IMAGE_REPLAYS[layer.getRenderMode()];\n    if (replays && replayState.renderedTileRevision !== revision) {\n      replayState.renderedTileRevision = revision;\n      const tileCoord = tile.wrappedTileCoord;\n      const z = tileCoord[0];\n      const source = /** @type {import(\"../../source/VectorTile.js\").default} */ (layer.getSource());\n      const tileGrid = source.getTileGridForProjection(projection);\n      const resolution = tileGrid.getResolution(z);\n      const context = tile.getContext(layer);\n      const size = source.getTilePixelSize(z, pixelRatio, projection);\n      context.canvas.width = size[0];\n      context.canvas.height = size[1];\n      const tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent);\n      for (let i = 0, ii = tile.tileKeys.length; i < ii; ++i) {\n        const sourceTile = tile.getTile(tile.tileKeys[i]);\n        if (sourceTile.getState() != TileState.LOADED) {\n          continue;\n        }\n        const pixelScale = pixelRatio / resolution;\n        const transform = resetTransform(this.tmpTransform_);\n        scaleTransform(transform, pixelScale, -pixelScale);\n        translateTransform(transform, -tileExtent[0], -tileExtent[3]);\n        const replayGroup = /** @type {CanvasReplayGroup} */ (sourceTile.getReplayGroup(layer,\n          tile.tileCoord.toString()));\n        replayGroup.replay(context, transform, 0, {}, true, replays);\n      }\n    }\n  }\n}\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {import(\"../../layer/Layer.js\").default} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasVectorTileLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.VECTOR_TILE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {import(\"../Map.js\").default} mapRenderer The map renderer.\n * @param {import(\"../../layer/Layer.js\").default} layer The layer to be rendererd.\n * @return {CanvasVectorTileLayerRenderer} The layer renderer.\n */\nCanvasVectorTileLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasVectorTileLayerRenderer(/** @type {import(\"../../layer/VectorTile.js\").default} */ (layer));\n};\n\n\nexport default CanvasVectorTileLayerRenderer;\n","/**\n * @module ol/Map\n */\nimport PluggableMap from './PluggableMap.js';\nimport {defaults as defaultControls} from './control/util.js';\nimport {defaults as defaultInteractions} from './interaction.js';\nimport {assign} from './obj.js';\nimport CanvasImageLayerRenderer from './renderer/canvas/ImageLayer.js';\nimport CanvasMapRenderer from './renderer/canvas/Map.js';\nimport CanvasTileLayerRenderer from './renderer/canvas/TileLayer.js';\nimport CanvasVectorLayerRenderer from './renderer/canvas/VectorLayer.js';\nimport CanvasVectorTileLayerRenderer from './renderer/canvas/VectorTileLayer.js';\n\n/**\n * @classdesc\n * The map is the core component of OpenLayers. For a map to render, a view,\n * one or more layers, and a target container are needed:\n *\n *     import Map from 'ol/Map';\n *     import View from 'ol/View';\n *     import TileLayer from 'ol/layer/Tile';\n *     import OSM from 'ol/source/OSM';\n *\n *     var map = new Map({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1\n *       }),\n *       layers: [\n *         new TileLayer({\n *           source: new OSM()\n *         })\n *       ],\n *       target: 'map'\n *     });\n *\n * The above snippet creates a map using a {@link module:ol/layer/Tile} to\n * display {@link module:ol/source/OSM~OSM} OSM data and render it to a DOM\n * element with the id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link module:ol/Overlay~Overlay} for the difference). The map\n * itself is placed in a further element within the viewport.\n *\n * Layers are stored as a {@link module:ol/Collection~Collection} in\n * layerGroups. A top-level group is provided by the library. This is what is\n * accessed by `getLayerGroup` and `setLayerGroup`. Layers entered in the\n * options are added to this group, and `addLayer` and `removeLayer` change the\n * layer collection in the group. `getLayers` is a convenience function for\n * `getLayerGroup().getLayers()`. Note that {@link module:ol/layer/Group~Group}\n * is a subclass of {@link module:ol/layer/Base}, so layers entered in the\n * options or added with `addLayer` can be groups, which can contain further\n * groups, and so on.\n *\n * @fires import(\"./MapBrowserEvent.js\").MapBrowserEvent\n * @fires import(\"./MapEvent.js\").MapEvent\n * @fires module:ol/render/Event~RenderEvent#postcompose\n * @fires module:ol/render/Event~RenderEvent#precompose\n * @api\n */\nclass Map extends PluggableMap {\n\n  /**\n   * @param {import(\"./PluggableMap.js\").MapOptions} options Map options.\n   */\n  constructor(options) {\n    options = assign({}, options);\n    if (!options.controls) {\n      options.controls = defaultControls();\n    }\n    if (!options.interactions) {\n      options.interactions = defaultInteractions();\n    }\n\n    super(options);\n  }\n\n  createRenderer() {\n    const renderer = new CanvasMapRenderer(this);\n    renderer.registerLayerRenderers([\n      CanvasImageLayerRenderer,\n      CanvasTileLayerRenderer,\n      CanvasVectorLayerRenderer,\n      CanvasVectorTileLayerRenderer\n    ]);\n    return renderer;\n  }\n}\n\n\nexport default Map;\n","/**\n * @module olcs.AutoRenderLoop\n */\n\nclass AutoRenderLoop {\n  /**\n   * @constructor\n   * @param {olcs.OLCesium} ol3d\n   */\n  constructor(ol3d) {\n    this.ol3d = ol3d;\n    this.scene_ = ol3d.getCesiumScene();\n    this.canvas_ = this.scene_.canvas;\n    this._boundNotifyRepaintRequired = this.notifyRepaintRequired.bind(this);\n\n    this.repaintEventNames_ = [\n      'mousemove', 'mousedown', 'mouseup',\n      'touchstart', 'touchend', 'touchmove',\n      'pointerdown', 'pointerup', 'pointermove',\n      'wheel'\n    ];\n\n    this.enable();\n  }\n\n  /**\n   * Enable.\n   */\n  enable() {\n    this.scene_.requestRenderMode = true;\n    this.scene_.maximumRenderTimeChange = 1000;\n    for (const repaintKey of this.repaintEventNames_) {\n      this.canvas_.addEventListener(repaintKey, this._boundNotifyRepaintRequired, false);\n    }\n\n    window.addEventListener('resize', this._boundNotifyRepaintRequired, false);\n\n    // Listen for changes on the layer group\n    this.ol3d.getOlMap().getLayerGroup().on('change', this._boundNotifyRepaintRequired);\n  }\n\n  /**\n   * Disable.\n   */\n  disable() {\n    for (const repaintKey of this.repaintEventNames_) {\n      this.canvas_.removeEventListener(repaintKey, this._boundNotifyRepaintRequired, false);\n    }\n\n    window.removeEventListener('resize', this._boundNotifyRepaintRequired, false);\n\n    this.ol3d.getOlMap().getLayerGroup().un('change', this._boundNotifyRepaintRequired);\n    this.scene_.requestRenderMode = false;\n  }\n\n  /**\n   * Restart render loop.\n   * Force a restart of the render loop.\n   * @api\n   */\n  restartRenderLoop() {\n    this.notifyRepaintRequired();\n  }\n\n  notifyRepaintRequired() {\n    this.scene_.requestRender();\n  }\n}\n\n\nexport default AutoRenderLoop;\n","/**\n * @module olcs.Camera\n */\n\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\nimport {toRadians, toDegrees} from './math.js';\nimport {getTransform} from 'ol/proj.js';\nimport olcsCore from './core.js';\n\nclass Camera {\n  /**\n   * This object takes care of additional 3d-specific properties of the view and\n   * ensures proper synchronization with the underlying raw Cesium.Camera object.\n   * @param {!Cesium.Scene} scene\n   * @param {!ol.Map} map\n   * @api\n   */\n  constructor(scene, map) {\n    /**\n     * @type {!Cesium.Scene}\n     * @private\n     */\n    this.scene_ = scene;\n\n    /**\n     * @type {!Cesium.Camera}\n     * @private\n     */\n    this.cam_ = scene.camera;\n\n    /**\n     * @type {!ol.Map}\n     * @private\n     */\n    this.map_ = map;\n\n    /**\n     * @type {?ol.View}\n     * @private\n     */\n    this.view_ = null;\n\n    /**\n     * @type {?ol.EventsKey}\n     * @private\n     */\n    this.viewListenKey_ = null;\n\n    /**\n     * @type {!ol.TransformFunction}\n     * @private\n     */\n    this.toLonLat_ = Camera.identityProjection;\n\n    /**\n     * @type {!ol.TransformFunction}\n     * @private\n     */\n    this.fromLonLat_ = Camera.identityProjection;\n\n    /**\n     * 0 -- topdown, PI/2 -- the horizon\n     * @type {number}\n     * @private\n     */\n    this.tilt_ = 0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.distance_ = 0;\n\n    /**\n     * @type {?Cesium.Matrix4}\n     * @private\n     */\n    this.lastCameraViewMatrix_ = null;\n\n    /**\n     * This is used to discard change events on view caused by updateView method.\n     * @type {boolean}\n     * @private\n     */\n    this.viewUpdateInProgress_ = false;\n\n    this.map_.on('change:view', (e) => {\n      this.setView_(this.map_.getView());\n    });\n    this.setView_(this.map_.getView());\n  }\n\n  /**\n   * @param {Array.<number>} input Input coordinate array.\n   * @param {Array.<number>=} opt_output Output array of coordinate values.\n   * @param {number=} opt_dimension Dimension.\n   * @return {Array.<number>} Input coordinate array (same array as input).\n   */\n  static identityProjection(input, opt_output, opt_dimension) {\n    const dim = opt_dimension || input.length;\n    if (opt_output) {\n      for (let i = 0; i < dim; ++i) {\n        opt_output[i] = input[i];\n      }\n    }\n    return input;\n  }\n\n  /**\n   * @param {?ol.View} view New view to use.\n   * @private\n   */\n  setView_(view) {\n    if (this.view_) {\n      olObservableUnByKey(this.viewListenKey_);\n      this.viewListenKey_ = null;\n    }\n\n    this.view_ = view;\n    if (view) {\n      const toLonLat = getTransform(view.getProjection(), 'EPSG:4326');\n      const fromLonLat = getTransform('EPSG:4326', view.getProjection());\n      console.assert(toLonLat && fromLonLat);\n\n      this.toLonLat_ = toLonLat;\n      this.fromLonLat_ = fromLonLat;\n\n      this.viewListenKey_ = view.on('propertychange', e => this.handleViewEvent_(e));\n\n      this.readFromView();\n    } else {\n      this.toLonLat_ = Camera.identityProjection;\n      this.fromLonLat_ = Camera.identityProjection;\n    }\n  }\n\n  /**\n   * @param {?} e\n   * @private\n   */\n  handleViewEvent_(e) {\n    if (!this.viewUpdateInProgress_) {\n      this.readFromView();\n    }\n  }\n\n  /**\n   * @param {number} heading In radians.\n   * @api\n   */\n  setHeading(heading) {\n    if (!this.view_) {\n      return;\n    }\n\n    this.view_.setRotation(heading);\n  }\n\n  /**\n   * @return {number|undefined} Heading in radians.\n   * @api\n   */\n  getHeading() {\n    if (!this.view_) {\n      return undefined;\n    }\n    const rotation = this.view_.getRotation();\n    return rotation || 0;\n  }\n\n  /**\n   * @param {number} tilt In radians.\n   * @api\n   */\n  setTilt(tilt) {\n    this.tilt_ = tilt;\n    this.updateCamera_();\n  }\n\n  /**\n   * @return {number} Tilt in radians.\n   * @api\n   */\n  getTilt() {\n    return this.tilt_;\n  }\n\n  /**\n   * @param {number} distance In meters.\n   * @api\n   */\n  setDistance(distance) {\n    this.distance_ = distance;\n    this.updateCamera_();\n    this.updateView();\n  }\n\n  /**\n   * @return {number} Distance in meters.\n   * @api\n   */\n  getDistance() {\n    return this.distance_;\n  }\n\n  /**\n   * Shortcut for ol.View.setCenter().\n   * @param {!ol.Coordinate} center Same projection as the ol.View.\n   * @api\n   */\n  setCenter(center) {\n    if (!this.view_) {\n      return;\n    }\n    this.view_.setCenter(center);\n  }\n\n  /**\n   * Shortcut for ol.View.getCenter().\n   * @return {ol.Coordinate|undefined} Same projection as the ol.View.\n   * @api\n   */\n  getCenter() {\n    if (!this.view_) {\n      return undefined;\n    }\n    return this.view_.getCenter();\n  }\n\n  /**\n   * Sets the position of the camera.\n   * @param {!ol.Coordinate} position Same projection as the ol.View.\n   * @api\n   */\n  setPosition(position) {\n    if (!this.toLonLat_) {\n      return;\n    }\n    const ll = this.toLonLat_(position);\n    console.assert(ll);\n\n    const carto = new Cesium.Cartographic(\n        toRadians(ll[0]),\n        toRadians(ll[1]),\n        this.getAltitude());\n\n    this.cam_.setView({\n      destination: Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto)\n    });\n    this.updateView();\n  }\n\n  /**\n   * Calculates position under the camera.\n   * @return {!ol.Coordinate|undefined} Same projection as the ol.View.\n   * @api\n   */\n  getPosition() {\n    if (!this.fromLonLat_) {\n      return undefined;\n    }\n    const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);\n\n    const pos = this.fromLonLat_([\n      toDegrees(carto.longitude),\n      toDegrees(carto.latitude)\n    ]);\n    console.assert(pos);\n    return pos;\n  }\n\n  /**\n   * @param {number} altitude In meters.\n   * @api\n   */\n  setAltitude(altitude) {\n    const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n        this.cam_.position);\n    carto.height = altitude;\n    this.cam_.position = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n    this.updateView();\n  }\n\n  /**\n   * @return {number} Altitude in meters.\n   * @api\n   */\n  getAltitude() {\n    const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n        this.cam_.position);\n\n    return carto.height;\n  }\n\n  /**\n   * Updates the state of the underlying Cesium.Camera\n   * according to the current values of the properties.\n   * @private\n   */\n  updateCamera_() {\n    if (!this.view_ || !this.toLonLat_) {\n      return;\n    }\n    const center = this.view_.getCenter();\n    if (!center) {\n      return;\n    }\n    const ll = this.toLonLat_(center);\n    console.assert(ll);\n\n    const carto = new Cesium.Cartographic(toRadians(ll[0]),\n        toRadians(ll[1]));\n    if (this.scene_.globe) {\n      const height = this.scene_.globe.getHeight(carto);\n      carto.height = height || 0;\n    }\n\n    const destination = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n    /** @type {Cesium.optionsOrientation} */\n    const orientation = {\n      pitch: this.tilt_ - Cesium.Math.PI_OVER_TWO,\n      heading: -this.view_.getRotation(),\n      roll: undefined\n    };\n    this.cam_.setView({\n      destination,\n      orientation\n    });\n\n    this.cam_.moveBackward(this.distance_);\n\n    this.checkCameraChange(true);\n  }\n\n  /**\n   * Calculates the values of the properties from the current ol.View state.\n   * @api\n   */\n  readFromView() {\n    if (!this.view_ || !this.toLonLat_) {\n      return;\n    }\n    const center = this.view_.getCenter();\n    if (center === undefined || center === null) {\n      return;\n    }\n    const ll = this.toLonLat_(center);\n    console.assert(ll);\n\n    const resolution = this.view_.getResolution();\n    this.distance_ = this.calcDistanceForResolution(\n        resolution || 0, toRadians(ll[1]));\n\n    this.updateCamera_();\n  }\n\n  /**\n   * Calculates the values of the properties from the current Cesium.Camera state.\n   * Modifies the center, resolution and rotation properties of the view.\n   * @api\n   */\n  updateView() {\n    if (!this.view_ || !this.fromLonLat_) {\n      return;\n    }\n    this.viewUpdateInProgress_ = true;\n\n    // target & distance\n    const ellipsoid = Cesium.Ellipsoid.WGS84;\n    const scene = this.scene_;\n    const target = olcsCore.pickCenterPoint(scene);\n\n    let bestTarget = target;\n    if (!bestTarget) {\n      //TODO: how to handle this properly ?\n      const globe = scene.globe;\n      const carto = this.cam_.positionCartographic.clone();\n      const height = globe.getHeight(carto);\n      carto.height = height || 0;\n      bestTarget = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n    }\n    this.distance_ = Cesium.Cartesian3.distance(bestTarget, this.cam_.position);\n    const bestTargetCartographic = ellipsoid.cartesianToCartographic(bestTarget);\n    this.view_.setCenter(this.fromLonLat_([\n      toDegrees(bestTargetCartographic.longitude),\n      toDegrees(bestTargetCartographic.latitude)]));\n\n    // resolution\n    this.view_.setResolution(\n        this.calcResolutionForDistance(this.distance_,\n            bestTargetCartographic ? bestTargetCartographic.latitude : 0));\n\n\n    /*\n     * Since we are positioning the target, the values of heading and tilt\n     * need to be calculated _at the target_.\n     */\n    if (target) {\n      const pos = this.cam_.position;\n\n      // normal to the ellipsoid at the target\n      const targetNormal = new Cesium.Cartesian3();\n      ellipsoid.geocentricSurfaceNormal(target, targetNormal);\n\n      // vector from the target to the camera\n      const targetToCamera = new Cesium.Cartesian3();\n      Cesium.Cartesian3.subtract(pos, target, targetToCamera);\n      Cesium.Cartesian3.normalize(targetToCamera, targetToCamera);\n\n\n      // HEADING\n      const up = this.cam_.up;\n      const right = this.cam_.right;\n      const normal = new Cesium.Cartesian3(-target.y, target.x, 0); // what is it?\n      const heading = Cesium.Cartesian3.angleBetween(right, normal);\n      const cross = Cesium.Cartesian3.cross(target, up, new Cesium.Cartesian3());\n      const orientation = cross.z;\n\n      this.view_.setRotation((orientation < 0 ? heading : -heading));\n\n      // TILT\n      const tiltAngle = Math.acos(\n          Cesium.Cartesian3.dot(targetNormal, targetToCamera));\n      this.tilt_ = isNaN(tiltAngle) ? 0 : tiltAngle;\n    } else {\n      // fallback when there is no target\n      this.view_.setRotation(this.cam_.heading);\n      this.tilt_ = -this.cam_.pitch + Math.PI / 2;\n    }\n\n    this.viewUpdateInProgress_ = false;\n  }\n\n  /**\n   * Check if the underlying camera state has changed and ensure synchronization.\n   * @param {boolean=} opt_dontSync Do not synchronize the view.\n   */\n  checkCameraChange(opt_dontSync) {\n    const old = this.lastCameraViewMatrix_;\n    const current = this.cam_.viewMatrix;\n\n    if (!old || !Cesium.Matrix4.equalsEpsilon(old, current, 1e-5)) {\n      this.lastCameraViewMatrix_ = current.clone();\n      if (opt_dontSync !== true) {\n        this.updateView();\n      }\n    }\n  }\n\n  /**\n   * calculate the distance between camera and centerpoint based on the resolution and latitude value\n   * @param {number} resolution Number of map units per pixel.\n   * @param {number} latitude Latitude in radians.\n   * @return {number} The calculated distance.\n   * @api\n   */\n  calcDistanceForResolution(resolution, latitude) {\n    const canvas = this.scene_.canvas;\n    const fovy = this.cam_.frustum.fovy; // vertical field of view\n    console.assert(!isNaN(fovy));\n    const metersPerUnit = this.view_.getProjection().getMetersPerUnit();\n\n    // number of \"map units\" visible in 2D (vertically)\n    const visibleMapUnits = resolution * canvas.clientHeight;\n\n    // The metersPerUnit does not take latitude into account, but it should\n    // be lower with increasing latitude -- we have to compensate.\n    // In 3D it is not possible to maintain the resolution at more than one point,\n    // so it only makes sense to use the latitude of the \"target\" point.\n    const relativeCircumference = Math.cos(Math.abs(latitude));\n\n    // how many meters should be visible in 3D\n    const visibleMeters = visibleMapUnits * metersPerUnit * relativeCircumference;\n\n    // distance required to view the calculated length in meters\n    //\n    //  fovy/2\n    //    |\\\n    //  x | \\\n    //    |--\\\n    // visibleMeters/2\n    const requiredDistance = (visibleMeters / 2) / Math.tan(fovy / 2);\n\n    // NOTE: This calculation is not absolutely precise, because metersPerUnit\n    // is a great simplification. It does not take ellipsoid/terrain into account.\n\n    return requiredDistance;\n  }\n\n  /**\n   * calculate the resolution based on a distance(camera to position) and latitude value\n   * @param {number} distance\n   * @param {number} latitude\n   * @return {number} The calculated resolution.\n   * @api\n   */\n  calcResolutionForDistance(distance, latitude) {\n    // See the reverse calculation (calcDistanceForResolution) for details\n    const canvas = this.scene_.canvas;\n    const fovy = this.cam_.frustum.fovy;\n    const metersPerUnit = this.view_.getProjection().getMetersPerUnit();\n\n    const visibleMeters = 2 * distance * Math.tan(fovy / 2);\n    const relativeCircumference = Math.cos(Math.abs(latitude));\n    const visibleMapUnits = visibleMeters / metersPerUnit / relativeCircumference;\n    const resolution = visibleMapUnits / canvas.clientHeight;\n\n    return resolution;\n  }\n}\n\n\nexport default Camera;\n","/**\n * @module olcs.AbstractSynchronizer\n */\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\nimport olLayerGroup from 'ol/layer/Group.js';\nimport {olcsListen, getUid} from './util.js';\n\n\nclass AbstractSynchronizer {\n  /**\n   * @param {!ol.Map} map\n   * @param {!Cesium.Scene} scene\n   * @template T\n   * @abstract\n   * @api\n   */\n  constructor(map, scene) {\n    /**\n     * @type {!ol.Map}\n     * @protected\n     */\n    this.map = map;\n\n    /**\n     * @type {ol.View}\n     * @protected\n     */\n    this.view = map.getView();\n\n    /**\n     * @type {!Cesium.Scene}\n     * @protected\n     */\n    this.scene = scene;\n\n    /**\n     * @type {ol.Collection.<ol.layer.Base>}\n     * @protected\n     */\n    this.olLayers = map.getLayerGroup().getLayers();\n\n    /**\n     * @type {ol.layer.Group}\n     */\n    this.mapLayerGroup = map.getLayerGroup();\n\n    /**\n     * Map of OpenLayers layer ids (from getUid) to the Cesium ImageryLayers.\n     * Null value means, that we are unable to create equivalent layers.\n     * @type {Object.<string, ?Array.<T>>}\n     * @protected\n     */\n    this.layerMap = {};\n\n    /**\n     * Map of listen keys for OpenLayers layer layers ids (from getUid).\n     * @type {!Object.<string, Array<ol.EventsKey>>}\n     * @protected\n     */\n    this.olLayerListenKeys = {};\n\n    /**\n     * Map of listen keys for OpenLayers layer groups ids (from getUid).\n     * @type {!Object.<string, !Array.<ol.EventsKey>>}\n     * @private\n     */\n    this.olGroupListenKeys_ = {};\n  }\n\n  /**\n   * Destroy all and perform complete synchronization of the layers.\n   * @api\n   */\n  synchronize() {\n    this.destroyAll();\n    this.addLayers_(this.mapLayerGroup);\n  }\n\n  /**\n   * Order counterparts using the same algorithm as the Openlayers renderer:\n   * z-index then original sequence order.\n   * @protected\n   */\n  orderLayers() {\n    // Ordering logics is handled in subclasses.\n  }\n\n  /**\n   * Add a layer hierarchy.\n   * @param {ol.layer.Base} root\n   * @private\n   */\n  addLayers_(root) {\n    /** @type {Array<import('olsc/core.js').LayerWithParents>} */\n    const fifo = [{\n      layer: root,\n      parents: []\n    }];\n    while (fifo.length > 0) {\n      const olLayerWithParents = fifo.splice(0, 1)[0];\n      const olLayer = olLayerWithParents.layer;\n      const olLayerId = getUid(olLayer).toString();\n      this.olLayerListenKeys[olLayerId] = [];\n      console.assert(!this.layerMap[olLayerId]);\n\n      let cesiumObjects = null;\n      if (olLayer instanceof olLayerGroup) {\n        this.listenForGroupChanges_(olLayer);\n        if (olLayer !== this.mapLayerGroup) {\n          cesiumObjects = this.createSingleLayerCounterparts(olLayerWithParents);\n        }\n        if (!cesiumObjects) {\n          olLayer.getLayers().forEach((l) => {\n            if (l) {\n              const newOlLayerWithParents = {\n                layer: l,\n                parents: olLayer === this.mapLayerGroup ?\n                  [] :\n                  [olLayerWithParents.layer].concat(olLayerWithParents.parents)\n              };\n              fifo.push(newOlLayerWithParents);\n            }\n          });\n        }\n      } else {\n        cesiumObjects = this.createSingleLayerCounterparts(olLayerWithParents);\n        if (!cesiumObjects) {\n          // keep an eye on the layers that once failed to be added (might work when the layer is updated)\n          // for example when a source is set after the layer is added to the map\n          const layerId = olLayerId;\n          const layerWithParents = olLayerWithParents;\n          const onLayerChange = (e) => {\n            const cesiumObjs = this.createSingleLayerCounterparts(layerWithParents);\n            if (cesiumObjs) {\n              // unsubscribe event listener\n              layerWithParents.layer.un('change', onLayerChange);\n              this.addCesiumObjects_(cesiumObjs, layerId, layerWithParents.layer);\n              this.orderLayers();\n            }\n          };\n          this.olLayerListenKeys[olLayerId].push(olcsListen(layerWithParents.layer, 'change', onLayerChange));\n        }\n      }\n      // add Cesium layers\n      if (cesiumObjects) {\n        this.addCesiumObjects_(cesiumObjects, olLayerId, olLayer);\n      }\n    }\n\n    this.orderLayers();\n  }\n\n  /**\n   * Add Cesium objects.\n   * @param {Array.<T>} cesiumObjects\n   * @param {string} layerId\n   * @param {ol.layer.Base} layer\n   * @private\n   */\n  addCesiumObjects_(cesiumObjects, layerId, layer) {\n    this.layerMap[layerId] = cesiumObjects;\n    this.olLayerListenKeys[layerId].push(olcsListen(layer, 'change:zIndex', () => this.orderLayers()));\n    cesiumObjects.forEach((cesiumObject) => {\n      this.addCesiumObject(cesiumObject);\n    });\n  }\n\n  /**\n   * Remove and destroy a single layer.\n   * @param {ol.layer.Layer} layer\n   * @return {boolean} counterpart destroyed\n   * @private\n   */\n  removeAndDestroySingleLayer_(layer) {\n    const uid = getUid(layer).toString();\n    const counterparts = this.layerMap[uid];\n    if (!!counterparts) {\n      counterparts.forEach((counterpart) => {\n        this.removeSingleCesiumObject(counterpart, false);\n        this.destroyCesiumObject(counterpart);\n      });\n      this.olLayerListenKeys[uid].forEach(olObservableUnByKey);\n      delete this.olLayerListenKeys[uid];\n    }\n    delete this.layerMap[uid];\n    return !!counterparts;\n  }\n\n  /**\n   * Unlisten a single layer group.\n   * @param {ol.layer.Group} group\n   * @private\n   */\n  unlistenSingleGroup_(group) {\n    if (group === this.mapLayerGroup) {\n      return;\n    }\n    const uid = getUid(group).toString();\n    const keys = this.olGroupListenKeys_[uid];\n    keys.forEach((key) => {\n      olObservableUnByKey(key);\n    });\n    delete this.olGroupListenKeys_[uid];\n    delete this.layerMap[uid];\n  }\n\n  /**\n   * Remove layer hierarchy.\n   * @param {ol.layer.Base} root\n   * @private\n   */\n  removeLayer_(root) {\n    if (!!root) {\n      const fifo = [root];\n      while (fifo.length > 0) {\n        const olLayer = fifo.splice(0, 1)[0];\n        const done = this.removeAndDestroySingleLayer_(olLayer);\n        if (olLayer instanceof olLayerGroup) {\n          this.unlistenSingleGroup_(olLayer);\n          if (!done) {\n            // No counterpart for the group itself so removing\n            // each of the child layers.\n            olLayer.getLayers().forEach((l) => {\n              fifo.push(l);\n            });\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Register listeners for single layer group change.\n   * @param {ol.layer.Group} group\n   * @private\n   */\n  listenForGroupChanges_(group) {\n    const uuid = getUid(group).toString();\n\n    console.assert(this.olGroupListenKeys_[uuid] === undefined);\n\n    const listenKeyArray = [];\n    this.olGroupListenKeys_[uuid] = listenKeyArray;\n\n    // only the keys that need to be relistened when collection changes\n    let contentKeys = [];\n    const listenAddRemove = (function() {\n      const collection = group.getLayers();\n      if (collection) {\n        contentKeys = [\n          collection.on('add', (event) => {\n            this.addLayers_(event.element);\n          }),\n          collection.on('remove', (event) => {\n            this.removeLayer_(event.element);\n          })\n        ];\n        listenKeyArray.push(...contentKeys);\n      }\n    }).bind(this);\n\n    listenAddRemove();\n\n    listenKeyArray.push(group.on('change:layers', (e) => {\n      contentKeys.forEach((el) => {\n        const i = listenKeyArray.indexOf(el);\n        if (i >= 0) {\n          listenKeyArray.splice(i, 1);\n        }\n        olObservableUnByKey(el);\n      });\n      listenAddRemove();\n    }));\n  }\n\n  /**\n   * Destroys all the created Cesium objects.\n   * @protected\n   */\n  destroyAll() {\n    this.removeAllCesiumObjects(true); // destroy\n    let objKey;\n    for (objKey in this.olGroupListenKeys_) {\n      const keys = this.olGroupListenKeys_[objKey];\n      keys.forEach(olObservableUnByKey);\n    }\n    for (objKey in this.olLayerListenKeys) {\n      this.olLayerListenKeys[objKey].forEach(olObservableUnByKey);\n    }\n    this.olGroupListenKeys_ = {};\n    this.olLayerListenKeys = {};\n    this.layerMap = {};\n  }\n\n  /**\n   * Adds a single Cesium object to the collection.\n   * @param {!T} object\n   * @abstract\n   * @protected\n   */\n  addCesiumObject(object) {}\n\n  /**\n   * @param {!T} object\n   * @abstract\n   * @protected\n   */\n  destroyCesiumObject(object) {}\n\n  /**\n   * Remove single Cesium object from the collection.\n   * @param {!T} object\n   * @param {boolean} destroy\n   * @abstract\n   * @protected\n   */\n  removeSingleCesiumObject(object, destroy) {}\n\n  /**\n   * Remove all Cesium objects from the collection.\n   * @param {boolean} destroy\n   * @abstract\n   * @protected\n   */\n  removeAllCesiumObjects(destroy) {}\n\n  /**\n   * @param {import('olsc/core.js').LayerWithParents} olLayerWithParents\n   * @return {?Array.<T>}\n   * @abstract\n   * @protected\n   */\n  createSingleLayerCounterparts(olLayerWithParents) {}\n}\n\n\nexport default AbstractSynchronizer;\n","/**\n * @module olcs.RasterSynchronizer\n */\nimport olLayerGroup from 'ol/layer/Group.js';\nimport {getUid, stableSort} from './util.js';\nimport olcsAbstractSynchronizer from './AbstractSynchronizer.js';\nimport olcsCore from './core.js';\n\nclass RasterSynchronizer extends olcsAbstractSynchronizer {\n  /**\n   * This object takes care of one-directional synchronization of\n   * Openlayers raster layers to the given Cesium globe.\n   * @param {!ol.Map} map\n   * @param {!Cesium.Scene} scene\n   * @constructor\n   * @extends {olcsAbstractSynchronizer.<Cesium.ImageryLayer>}\n   * @api\n   */\n  constructor(map, scene) {\n    super(map, scene);\n\n    /**\n     * @type {!Cesium.ImageryLayerCollection}\n     * @private\n     */\n    this.cesiumLayers_ = scene.imageryLayers;\n\n    /**\n     * @type {!Cesium.ImageryLayerCollection}\n     * @private\n     */\n    this.ourLayers_ = new Cesium.ImageryLayerCollection();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  addCesiumObject(object) {\n    this.cesiumLayers_.add(object);\n    this.ourLayers_.add(object);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  destroyCesiumObject(object) {\n    object.destroy();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeSingleCesiumObject(object, destroy) {\n    this.cesiumLayers_.remove(object, destroy);\n    this.ourLayers_.remove(object, false);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeAllCesiumObjects(destroy) {\n    for (let i = 0; i < this.ourLayers_.length; ++i) {\n      this.cesiumLayers_.remove(this.ourLayers_.get(i), destroy);\n    }\n    this.ourLayers_.removeAll(false);\n  }\n\n  /**\n   * Creates an array of Cesium.ImageryLayer.\n   * May be overriden by child classes to implement custom behavior.\n   * The default implementation handles tiled imageries in EPSG:4326 or\n   * EPSG:3859.\n   * @param {!ol.layer.Base} olLayer\n   * @param {!ol.proj.Projection} viewProj Projection of the view.\n   * @return {?Array.<!Cesium.ImageryLayer>} array or null if not possible\n   * (or supported)\n   * @protected\n   */\n  convertLayerToCesiumImageries(olLayer, viewProj) {\n    const result = olcsCore.tileLayerToImageryLayer(this.map, olLayer, viewProj);\n    return result ? [result] : null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createSingleLayerCounterparts(olLayerWithParents) {\n    const olLayer = olLayerWithParents.layer;\n    const uid = getUid(olLayer).toString();\n    const viewProj = this.view.getProjection();\n    console.assert(viewProj);\n    const cesiumObjects = this.convertLayerToCesiumImageries(olLayer, viewProj);\n    if (cesiumObjects) {\n      const listenKeyArray = [];\n      [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayerItem) => {\n        listenKeyArray.push(olLayerItem.on(['change:opacity', 'change:visible'], () => {\n          // the compiler does not seem to be able to infer this\n          console.assert(cesiumObjects);\n          for (let i = 0; i < cesiumObjects.length; ++i) {\n            olcsCore.updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);\n          }\n        }));\n      });\n\n      for (let i = 0; i < cesiumObjects.length; ++i) {\n        olcsCore.updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);\n      }\n\n      // there is no way to modify Cesium layer extent,\n      // we have to recreate when OpenLayers layer extent changes:\n      listenKeyArray.push(olLayer.on('change:extent', (e) => {\n        for (let i = 0; i < cesiumObjects.length; ++i) {\n          this.cesiumLayers_.remove(cesiumObjects[i], true); // destroy\n          this.ourLayers_.remove(cesiumObjects[i], false);\n        }\n        delete this.layerMap[getUid(olLayer)]; // invalidate the map entry\n        this.synchronize();\n      }));\n\n      listenKeyArray.push(olLayer.on('change', (e) => {\n        // when the source changes, re-add the layer to force update\n        for (let i = 0; i < cesiumObjects.length; ++i) {\n          const position = this.cesiumLayers_.indexOf(cesiumObjects[i]);\n          if (position >= 0) {\n            this.cesiumLayers_.remove(cesiumObjects[i], false);\n            this.cesiumLayers_.add(cesiumObjects[i], position);\n          }\n        }\n      }));\n\n      this.olLayerListenKeys[uid].push(...listenKeyArray);\n    }\n\n    return Array.isArray(cesiumObjects) ? cesiumObjects : null;\n  }\n\n  /**\n   * Order counterparts using the same algorithm as the Openlayers renderer:\n   * z-index then original sequence order.\n   * @override\n   * @protected\n   */\n  orderLayers() {\n    const layers = [];\n    const zIndices = {};\n    const queue = [this.mapLayerGroup];\n\n    while (queue.length > 0) {\n      const olLayer = queue.splice(0, 1)[0];\n      layers.push(olLayer);\n      zIndices[getUid(olLayer)] = olLayer.getZIndex();\n\n      if (olLayer instanceof olLayerGroup) {\n        const sublayers = olLayer.getLayers();\n        if (sublayers) {\n          // Prepend queue with sublayers in order\n          queue.unshift(...sublayers.getArray());\n        }\n      }\n    }\n\n    stableSort(layers, (layer1, layer2) =>\n      zIndices[getUid(layer1)] - zIndices[getUid(layer2)]\n    );\n\n    layers.forEach((olLayer) => {\n      const olLayerId = getUid(olLayer).toString();\n      const cesiumObjects = this.layerMap[olLayerId];\n      if (cesiumObjects) {\n        cesiumObjects.forEach((cesiumObject) => { this.raiseToTop(cesiumObject); });\n      }\n    });\n  }\n\n  /**\n   * @param {Cesium.ImageryLayer} counterpart\n   */\n  raiseToTop(counterpart) {\n    this.cesiumLayers_.raiseToTop(counterpart);\n  }\n}\n\n\nexport default RasterSynchronizer;\n","/**\n * @module ol/source/Cluster\n */\n\nimport {getUid} from '../util.js';\nimport {assert} from '../asserts.js';\nimport Feature from '../Feature.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport {scale as scaleCoordinate, add as addCoordinate} from '../coordinate.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {buffer, createEmpty, createOrUpdateFromCoordinate} from '../extent.js';\nimport Point from '../geom/Point.js';\nimport VectorSource from './Vector.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [distance=20] Minimum distance in pixels between clusters.\n * @property {function(Feature):Point} [geometryFunction]\n * Function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Point} as cluster calculation point for the feature. When a\n * feature should not be considered for clustering, the function should return\n * `null`. The default, which works when the underyling source contains point\n * features only, is\n * ```js\n * function(feature) {\n *   return feature.getGeometry();\n * }\n * ```\n * See {@link module:ol/geom/Polygon~Polygon#getInteriorPoint} for a way to get a cluster\n * calculation point for polygons.\n * @property {VectorSource} source Source.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source to cluster vector data. Works out of the box with point\n * geometries. For other geometry types, or if not all geometries should be\n * considered for clustering, a custom `geometryFunction` can be defined.\n * @api\n */\nclass Cluster extends VectorSource {\n  /**\n   * @param {Options} options Cluster options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      wrapX: options.wrapX\n    });\n\n    /**\n     * @type {number|undefined}\n     * @protected\n     */\n    this.resolution = undefined;\n\n    /**\n     * @type {number}\n     * @protected\n     */\n    this.distance = options.distance !== undefined ? options.distance : 20;\n\n    /**\n     * @type {Array<Feature>}\n     * @protected\n     */\n    this.features = [];\n\n    /**\n     * @param {Feature} feature Feature.\n     * @return {Point} Cluster calculation point.\n     * @protected\n     */\n    this.geometryFunction = options.geometryFunction || function(feature) {\n      const geometry = /** @type {Point} */ (feature.getGeometry());\n      assert(geometry.getType() == GeometryType.POINT,\n        10); // The default `geometryFunction` can only handle `Point` geometries\n      return geometry;\n    };\n\n    /**\n     * @type {VectorSource}\n     * @protected\n     */\n    this.source = options.source;\n\n    listen(this.source, EventType.CHANGE, this.refresh, this);\n  }\n\n  /**\n   * Get the distance in pixels between clusters.\n   * @return {number} Distance.\n   * @api\n   */\n  getDistance() {\n    return this.distance;\n  }\n\n  /**\n   * Get a reference to the wrapped source.\n   * @return {VectorSource} Source.\n   * @api\n   */\n  getSource() {\n    return this.source;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  loadFeatures(extent, resolution, projection) {\n    this.source.loadFeatures(extent, resolution, projection);\n    if (resolution !== this.resolution) {\n      this.clear();\n      this.resolution = resolution;\n      this.cluster();\n      this.addFeatures(this.features);\n    }\n  }\n\n  /**\n   * Set the distance in pixels between clusters.\n   * @param {number} distance The distance in pixels.\n   * @api\n   */\n  setDistance(distance) {\n    this.distance = distance;\n    this.refresh();\n  }\n\n  /**\n   * handle the source changing\n   * @override\n   */\n  refresh() {\n    this.clear();\n    this.cluster();\n    this.addFeatures(this.features);\n    super.refresh();\n  }\n\n  /**\n   * @protected\n   */\n  cluster() {\n    if (this.resolution === undefined) {\n      return;\n    }\n    this.features.length = 0;\n    const extent = createEmpty();\n    const mapDistance = this.distance * this.resolution;\n    const features = this.source.getFeatures();\n\n    /**\n     * @type {!Object<string, boolean>}\n     */\n    const clustered = {};\n\n    for (let i = 0, ii = features.length; i < ii; i++) {\n      const feature = features[i];\n      if (!(getUid(feature) in clustered)) {\n        const geometry = this.geometryFunction(feature);\n        if (geometry) {\n          const coordinates = geometry.getCoordinates();\n          createOrUpdateFromCoordinate(coordinates, extent);\n          buffer(extent, mapDistance, extent);\n\n          let neighbors = this.source.getFeaturesInExtent(extent);\n          neighbors = neighbors.filter(function(neighbor) {\n            const uid = getUid(neighbor);\n            if (!(uid in clustered)) {\n              clustered[uid] = true;\n              return true;\n            } else {\n              return false;\n            }\n          });\n          this.features.push(this.createCluster(neighbors));\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {Array<Feature>} features Features\n   * @return {Feature} The cluster feature.\n   * @protected\n   */\n  createCluster(features) {\n    const centroid = [0, 0];\n    for (let i = features.length - 1; i >= 0; --i) {\n      const geometry = this.geometryFunction(features[i]);\n      if (geometry) {\n        addCoordinate(centroid, geometry.getCoordinates());\n      } else {\n        features.splice(i, 1);\n      }\n    }\n    scaleCoordinate(centroid, 1 / features.length);\n\n    const cluster = new Feature(new Point(centroid));\n    cluster.set('features', features);\n    return cluster;\n  }\n}\n\n\nexport default Cluster;\n","/**\n * @module ol/layer/VectorTile\n */\nimport LayerType from '../LayerType.js';\nimport {assert} from '../asserts.js';\nimport TileProperty from './TileProperty.js';\nimport VectorLayer from './Vector.js';\nimport VectorTileRenderType from './VectorTileRenderType.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the tile extent used by the\n * renderer when getting features from the vector tile for the rendering or hit-detection.\n * Recommended value: Vector tiles are usually generated with a buffer, so this value should match\n * the largest possible buffer of the used tiles. It should be at least the size of the largest\n * point symbol or line width.\n * @property {import(\"./VectorTileRenderType.js\").default|string} [renderMode='hybrid'] Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but point symbols and texts\n *    are always rotated with the view and pixels are scaled during zoom animations.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels are scaled during zoom\n *    animations. Point symbols and texts are accurately rendered as vectors and can stay upright on\n *    rotated views.\n *  * `'vector'`: Vector tiles are rendered as vectors. Most accurate rendering even during\n *    animations, but slower performance than the other options.\n *\n * When `declutter` is set to `true`, `'hybrid'` will be used instead of `'image'`.\n * @property {import(\"../source/VectorTile.js\").default} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles, and the priority is defined by the z-index of the style. Lower z-index\n * means higher priority. When set to `true`, a `renderMode` of `'image'` will be overridden with\n * `'hybrid'`.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will be\n * recreated during animations. This means that no vectors will be shown clipped, but the setting\n * will have a performance impact for large amounts of vector data. When set to `false`, batches\n * will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will be\n * recreated during interactions. See also `updateWhileAnimating`.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n */\n\n\n/**\n * @classdesc\n * Layer for vector tile data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @param {Options=} opt_options Options.\n * @api\n */\nclass VectorTileLayer extends VectorLayer {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n\n    let renderMode = options.renderMode || VectorTileRenderType.HYBRID;\n    assert(renderMode == undefined ||\n       renderMode == VectorTileRenderType.IMAGE ||\n       renderMode == VectorTileRenderType.HYBRID ||\n       renderMode == VectorTileRenderType.VECTOR,\n    28); // `renderMode` must be `'image'`, `'hybrid'` or `'vector'`\n    if (options.declutter && renderMode == VectorTileRenderType.IMAGE) {\n      renderMode = VectorTileRenderType.HYBRID;\n    }\n    options.renderMode = renderMode;\n\n    const baseOptions = /** @type {Object} */ (assign({}, options));\n    delete baseOptions.preload;\n    delete baseOptions.useInterimTilesOnError;\n\n    super(/** @type {import(\"./Vector.js\").Options} */ (baseOptions));\n\n    this.setPreload(options.preload ? options.preload : 0);\n    this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined ?\n      options.useInterimTilesOnError : true);\n\n    /**\n    * The layer type.\n    * @protected\n    * @type {import(\"../LayerType.js\").default}\n    */\n    this.type = LayerType.VECTOR_TILE;\n\n  }\n\n  /**\n  * Return the level as number to which we will preload tiles up to.\n  * @return {number} The level to preload tiles up to.\n  * @observable\n  * @api\n  */\n  getPreload() {\n    return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n  }\n\n  /**\n  * Whether we use interim tiles on error.\n  * @return {boolean} Use interim tiles on error.\n  * @observable\n  * @api\n  */\n  getUseInterimTilesOnError() {\n    return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n  }\n\n  /**\n  * Set the level as number to which we will preload tiles up to.\n  * @param {number} preload The level to preload tiles up to.\n  * @observable\n  * @api\n  */\n  setPreload(preload) {\n    this.set(TileProperty.PRELOAD, preload);\n  }\n\n  /**\n  * Set whether we use interim tiles on error.\n  * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n  * @observable\n  * @api\n  */\n  setUseInterimTilesOnError(useInterimTilesOnError) {\n    this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n  }\n}\n\n\n/**\n * Return the associated {@link module:ol/source/VectorTile vectortilesource} of the layer.\n * @function\n * @return {import(\"../source/VectorTile.js\").default} Source.\n * @api\n */\nVectorTileLayer.prototype.getSource;\nexport default VectorTileLayer;\n","/**\n * @module olcs.core.VectorLayerCounterpart\n */\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\n\n\n/**\n * Context for feature conversion.\n * @typedef {Object} OlFeatureToCesiumContext\n * @property {!(import('ol/Projection.js').default|string)} projection\n * @property {!Cesium.PrimitiveCollection} primitives\n * @property {Object<number, Array<!Cesium.Primitive|!Cesium.Billboard>>} featureToCesiumMap\n * @property {!Cesium.BillboardCollection} billboards\n */\n\n\nclass VectorLayerCounterpart {\n  /**\n  * Result of the conversion of an OpenLayers layer to Cesium.\n  * @param {!(ol.proj.Projection|string)} layerProjection\n  * @param {!Cesium.Scene} scene\n  */\n  constructor(layerProjection, scene) {\n    const billboards = new Cesium.BillboardCollection({scene});\n    const primitives = new Cesium.PrimitiveCollection();\n\n    /**\n    * @type {!Array.<ol.EventsKey>}\n    */\n    this.olListenKeys = [];\n\n    this.rootCollection_ = new Cesium.PrimitiveCollection();\n    /**\n    * @type {!OlFeatureToCesiumContext}\n    */\n    this.context = {\n      projection: layerProjection,\n      billboards,\n      featureToCesiumMap: {},\n      primitives\n    };\n\n    this.rootCollection_.add(billboards);\n    this.rootCollection_.add(primitives);\n  }\n\n  /**\n  * Unlisten.\n  */\n  destroy() {\n    this.olListenKeys.forEach(olObservableUnByKey);\n    this.olListenKeys.length = 0;\n  }\n\n  /**\n  * @return {!Cesium.Primitive}\n  */\n  getRootPrimitive() {\n    return this.rootCollection_;\n  }\n}\n\n\nexport default VectorLayerCounterpart;\n","/**\n * @module olcs.FeatureConverter\n */\nimport olGeomGeometry from 'ol/geom/Geometry.js';\nimport olStyleIcon from 'ol/style/Icon.js';\nimport olSourceVector from 'ol/source/Vector.js';\nimport olSourceCluster from 'ol/source/Cluster.js';\nimport {circular as olCreateCircularPolygon} from 'ol/geom/Polygon.js';\nimport {boundingExtent, getCenter} from 'ol/extent.js';\nimport olGeomSimpleGeometry from 'ol/geom/SimpleGeometry.js';\nimport olcsCore from './core.js';\nimport olcsCoreVectorLayerCounterpart from './core/VectorLayerCounterpart.js';\nimport olcsUtil, {getUid, isGroundPolylinePrimitiveSupported} from './util.js';\n\n\n/**\n * @typedef {Object} ModelStyle\n * @property {Cesium.Matrix4} [debugModelMatrix]\n * @property {Cesium.ModelFromGltfOptions} cesiumOptions\n */\n\n\nclass FeatureConverter {\n  /**\n   * Concrete base class for converting from OpenLayers3 vectors to Cesium\n   * primitives.\n   * Extending this class is possible provided that the extending class and\n   * the library are compiled together by the closure compiler.\n   * @param {!Cesium.Scene} scene Cesium scene.\n   * @constructor\n   * @api\n   */\n  constructor(scene) {\n\n    /**\n     * @protected\n     */\n    this.scene = scene;\n\n    /**\n     * Bind once to have a unique function for using as a listener\n     * @type {function(ol.source.Vector.Event)}\n     * @private\n     */\n    this.boundOnRemoveOrClearFeatureListener_ = this.onRemoveOrClearFeature_.bind(this);\n\n    /**\n     * @type {Cesium.Cartesian3}\n     * @private\n     */\n    this.defaultBillboardEyeOffset_ = new Cesium.Cartesian3(0, 0, 10);\n  }\n\n  /**\n   * @param {ol.source.Vector.Event} evt\n   * @private\n   */\n  onRemoveOrClearFeature_(evt) {\n    const source = evt.target;\n    console.assert(source instanceof olSourceVector);\n\n    const cancellers = olcsUtil.obj(source)['olcs_cancellers'];\n    if (cancellers) {\n      const feature = evt.feature;\n      if (feature) {\n        // remove\n        const id = getUid(feature);\n        const canceller = cancellers[id];\n        if (canceller) {\n          canceller();\n          delete cancellers[id];\n        }\n      } else {\n        // clear\n        for (const key in cancellers) {\n          if (cancellers.hasOwnProperty(key)) {\n            cancellers[key]();\n          }\n        }\n        olcsUtil.obj(source)['olcs_cancellers'] = {};\n      }\n    }\n  }\n\n  /**\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!Cesium.Primitive|Cesium.Label|Cesium.Billboard} primitive\n   * @protected\n   */\n  setReferenceForPicking(layer, feature, primitive) {\n    primitive.olLayer = layer;\n    primitive.olFeature = feature;\n  }\n\n  /**\n   * Basics primitive creation using a color attribute.\n   * Note that Cesium has 'interior' and outline geometries.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.geom.Geometry} olGeometry OpenLayers geometry.\n   * @param {!Cesium.Geometry} geometry\n   * @param {!Cesium.Color} color\n   * @param {number=} opt_lineWidth\n   * @return {Cesium.Primitive}\n   * @protected\n   */\n  createColoredPrimitive(layer, feature, olGeometry, geometry, color, opt_lineWidth) {\n    const createInstance = function(geometry, color) {\n      const instance = new Cesium.GeometryInstance({\n        // always update Cesium externs before adding a property\n        geometry\n      });\n      if (color && !(color instanceof Cesium.ImageMaterialProperty)) {\n        instance.attributes = {\n          color: Cesium.ColorGeometryInstanceAttribute.fromColor(color)\n        };\n      }\n      return instance;\n    };\n\n    const options = {\n      // always update Cesium externs before adding a property\n      flat: true, // work with all geometries\n      renderState: {\n        depthTest: {\n          enabled: true\n        }\n      }\n    };\n\n    if (opt_lineWidth !== undefined) {\n      if (!options.renderState) {\n        options.renderState = {};\n      }\n      options.renderState.lineWidth = opt_lineWidth;\n    }\n\n    const instances = createInstance(geometry, color);\n\n    const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n    let primitive;\n\n    if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {\n      const ctor = instances.geometry.constructor;\n      if (ctor && !ctor['createShadowVolume']) {\n        return null;\n      }\n      primitive = new Cesium.GroundPrimitive({\n        geometryInstances: instances\n      });\n    } else {\n      primitive = new Cesium.Primitive({\n        geometryInstances: instances\n      });\n    }\n\n    if (color instanceof Cesium.ImageMaterialProperty) {\n      const dataUri = color.image.getValue().toDataURL();\n\n      primitive.appearance = new Cesium.MaterialAppearance({\n        flat: true,\n        renderState: {\n          depthTest: {\n            enabled: true\n          }\n        },\n        material: new Cesium.Material({\n          fabric: {\n            type: 'Image',\n            uniforms: {\n              image: dataUri\n            }\n          }\n        })\n      });\n    } else {\n      primitive.appearance = new Cesium.PerInstanceColorAppearance(options);\n    }\n\n    this.setReferenceForPicking(layer, feature, primitive);\n    return primitive;\n  }\n\n  /**\n   * Return the fill or stroke color from a plain ol style.\n   * @param {!ol.style.Style|ol.style.Text} style\n   * @param {boolean} outline\n   * @return {!Cesium.Color}\n   * @protected\n   */\n  extractColorFromOlStyle(style, outline) {\n    const fillColor = style.getFill() ? style.getFill().getColor() : null;\n    const strokeColor = style.getStroke() ? style.getStroke().getColor() : null;\n\n    let olColor = 'black';\n    if (strokeColor && outline) {\n      olColor = strokeColor;\n    } else if (fillColor) {\n      olColor = fillColor;\n    }\n\n    return olcsCore.convertColorToCesium(olColor);\n  }\n\n  /**\n   * Return the width of stroke from a plain ol style.\n   * @param {!ol.style.Style|ol.style.Text} style\n   * @return {number}\n   * @protected\n   */\n  extractLineWidthFromOlStyle(style) {\n    // Handling of line width WebGL limitations is handled by Cesium.\n    const width = style.getStroke() ? style.getStroke().getWidth() : undefined;\n    return width !== undefined ? width : 1;\n  }\n\n  /**\n   * Create a primitive collection out of two Cesium geometries.\n   * Only the OpenLayers style colors will be used.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.geom.Geometry} olGeometry OpenLayers geometry.\n   * @param {!Cesium.Geometry} fillGeometry\n   * @param {!Cesium.Geometry} outlineGeometry\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection}\n   * @protected\n   */\n  wrapFillAndOutlineGeometries(layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle) {\n    const fillColor = this.extractColorFromOlStyle(olStyle, false);\n    const outlineColor = this.extractColorFromOlStyle(olStyle, true);\n\n    const primitives = new Cesium.PrimitiveCollection();\n    if (olStyle.getFill()) {\n      const p1 = this.createColoredPrimitive(layer, feature, olGeometry,\n          fillGeometry, fillColor);\n      console.assert(!!p1);\n      primitives.add(p1);\n    }\n\n    if (olStyle.getStroke() && outlineGeometry) {\n      const width = this.extractLineWidthFromOlStyle(olStyle);\n      const p2 = this.createColoredPrimitive(layer, feature, olGeometry,\n          outlineGeometry, outlineColor, width);\n      if (p2) {\n        // Some outline geometries are not supported by Cesium in clamp to ground\n        // mode. These primitives are skipped.\n        primitives.add(p2);\n      }\n    }\n\n    return primitives;\n  }\n\n  // Geometry converters\n  /**\n   * Create a Cesium primitive if style has a text component.\n   * Eventually return a PrimitiveCollection including current primitive.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry\n   * @param {!ol.style.Style} style\n   * @param {!Cesium.Primitive} primitive current primitive\n   * @return {!Cesium.PrimitiveCollection}\n   * @protected\n   */\n  addTextStyle(layer, feature, geometry, style, primitive) {\n    let primitives;\n    if (!(primitive instanceof Cesium.PrimitiveCollection)) {\n      primitives = new Cesium.PrimitiveCollection();\n      primitives.add(primitive);\n    } else {\n      primitives = primitive;\n    }\n\n    if (!style.getText()) {\n      return primitives;\n    }\n\n    const text = /** @type {!ol.style.Text} */ (style.getText());\n    const label = this.olGeometry4326TextPartToCesium(layer, feature, geometry,\n        text);\n    if (label) {\n      primitives.add(label);\n    }\n    return primitives;\n  }\n\n  /**\n   * Add a billboard to a Cesium.BillboardCollection.\n   * Overriding this wrapper allows manipulating the billboard options.\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {!Cesium.optionsBillboardCollectionAdd} bbOptions\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.geom.Geometry} geometry\n   * @param {!ol.style.Style} style\n   * @return {!Cesium.Billboard} newly created billboard\n   * @api\n   */\n  csAddBillboard(billboards, bbOptions, layer, feature, geometry, style) {\n    if (!bbOptions.eyeOffset) {\n      bbOptions.eyeOffset = this.defaultBillboardEyeOffset_;\n    }\n    const bb = billboards.add(bbOptions);\n    this.setReferenceForPicking(layer, feature, bb);\n    return bb;\n  }\n\n  /**\n   * Convert an OpenLayers circle geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Circle} olGeometry OpenLayers circle geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection} primitives\n   * @api\n   */\n  olCircleGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {\n\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n    console.assert(olGeometry.getType() == 'Circle');\n\n    // ol.Coordinate\n    let center = olGeometry.getCenter();\n    const height = center.length == 3 ? center[2] : 0.0;\n    let point = center.slice();\n    point[0] += olGeometry.getRadius();\n\n    // Cesium\n    center = olcsCore.ol4326CoordinateToCesiumCartesian(center);\n    point = olcsCore.ol4326CoordinateToCesiumCartesian(point);\n\n    // Accurate computation of straight distance\n    const radius = Cesium.Cartesian3.distance(center, point);\n\n    const fillGeometry = new Cesium.CircleGeometry({\n      // always update Cesium externs before adding a property\n      center,\n      radius,\n      height\n    });\n\n    let outlinePrimitive, outlineGeometry;\n    if (this.getHeightReference(layer, feature, olGeometry) === Cesium.HeightReference.CLAMP_TO_GROUND) {\n      const width = this.extractLineWidthFromOlStyle(olStyle);\n      if (width) {\n        const circlePolygon = olCreateCircularPolygon(olGeometry.getCenter(), radius);\n        const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(circlePolygon.getLinearRing(0).getCoordinates());\n        if (!isGroundPolylinePrimitiveSupported(this.scene)) {\n          const color = this.extractColorFromOlStyle(olStyle, true);\n          outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, positions);\n        } else {\n          outlinePrimitive = new Cesium.GroundPolylinePrimitive({\n            geometryInstances: new Cesium.GeometryInstance({\n              geometry: new Cesium.GroundPolylineGeometry({positions, width}),\n            }),\n            appearance: new Cesium.PolylineMaterialAppearance({\n              material: this.olStyleToCesium(feature, olStyle, true),\n            }),\n            classificationType: Cesium.ClassificationType.TERRAIN,\n          });\n          outlinePrimitive.readyPromise.then(() => {\n            this.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);\n          });\n        }\n      }\n    } else {\n      outlineGeometry = new Cesium.CircleOutlineGeometry({\n        // always update Cesium externs before adding a property\n        center,\n        radius,\n        extrudedHeight: height,\n        height\n      });\n    }\n\n    const primitives = this.wrapFillAndOutlineGeometries(\n        layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);\n\n    if (outlinePrimitive) {\n      primitives.add(outlinePrimitive);\n    }\n    return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);\n  }\n\n  /**\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!number} width The width of the line.\n   * @param {!Cesium.Color} color The color of the line.\n   * @param {!Array<Cesium.Cartesian3>|Array<Array<Cesium.Cartesian3>>} positions The vertices of the line(s).\n   * @return {!Cesium.GroundPrimitive} primitive\n   */\n  createStackedGroundCorridors(layer, feature, width, color, positions) {\n    // Convert positions to an Array if it isn't\n    if (!Array.isArray(positions[0])) {\n      positions = [positions];\n    }\n    width = Math.max(3, width); // A <3px width is too small for ground primitives\n    const geometryInstances = [];\n    let previousDistance = 0;\n    // A stack of ground lines with increasing width (in meters) are created.\n    // Only one of these lines is displayed at any time giving a feeling of continuity.\n    // The values for the distance and width factor are more or less arbitrary.\n    // Applications can override this logics by subclassing the FeatureConverter class.\n    for (const distance of [1000, 4000, 16000, 64000, 254000, 1000000, 10000000]) {\n      width *= 2.14;\n      const geometryOptions = {\n        // always update Cesium externs before adding a property\n        width,\n        vertexFormat: Cesium.VertexFormat.POSITION_ONLY\n      };\n      for (const linePositions of positions) {\n        geometryOptions.positions = linePositions;\n        geometryInstances.push(new Cesium.GeometryInstance({\n          geometry: new Cesium.CorridorGeometry(geometryOptions),\n          attributes: {\n            color: Cesium.ColorGeometryInstanceAttribute.fromColor(color),\n            distanceDisplayCondition: new Cesium.DistanceDisplayConditionGeometryInstanceAttribute(previousDistance, distance - 1)\n          }\n        }));\n      }\n      previousDistance = distance;\n    }\n    return new Cesium.GroundPrimitive({\n      // always update Cesium externs before adding a property\n      geometryInstances\n    });\n  }\n\n  /**\n   * Convert an OpenLayers line string geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.LineString} olGeometry OpenLayers line string geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection} primitives\n   * @api\n   */\n  olLineStringGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {\n\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n    console.assert(olGeometry.getType() == 'LineString');\n\n    const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(olGeometry.getCoordinates());\n    const width = this.extractLineWidthFromOlStyle(olStyle);\n\n    let outlinePrimitive;\n    const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n    if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND && !isGroundPolylinePrimitiveSupported(this.scene)) {\n      const color = this.extractColorFromOlStyle(olStyle, true);\n      outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, positions);\n    } else {\n      const appearance = new Cesium.PolylineMaterialAppearance({\n        // always update Cesium externs before adding a property\n        material: this.olStyleToCesium(feature, olStyle, true)\n      });\n      const geometryOptions = {\n        // always update Cesium externs before adding a property\n        positions,\n        width,\n      };\n      const primitiveOptions = {\n        // always update Cesium externs before adding a property\n        appearance\n      };\n      if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {\n        const geometry = new Cesium.GroundPolylineGeometry(geometryOptions);\n        primitiveOptions.geometryInstances = new Cesium.GeometryInstance({\n          geometry\n        }),\n        outlinePrimitive = new Cesium.GroundPolylinePrimitive(primitiveOptions);\n        outlinePrimitive.readyPromise.then(() => {\n          this.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);\n        });\n      } else {\n        geometryOptions.vertexFormat = appearance.vertexFormat;\n        const geometry = new Cesium.PolylineGeometry(geometryOptions);\n        primitiveOptions.geometryInstances = new Cesium.GeometryInstance({\n          geometry\n        }),\n        outlinePrimitive = new Cesium.Primitive(primitiveOptions);\n      }\n    }\n\n    this.setReferenceForPicking(layer, feature, outlinePrimitive);\n\n    return this.addTextStyle(layer, feature, olGeometry, olStyle, outlinePrimitive);\n  }\n\n  /**\n   * Convert an OpenLayers polygon geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Polygon} olGeometry OpenLayers polygon geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection} primitives\n   * @api\n   */\n  olPolygonGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {\n\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n    console.assert(olGeometry.getType() == 'Polygon');\n\n    const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n    let fillGeometry, outlineGeometry, outlinePrimitive;\n    if ((olGeometry.getCoordinates()[0].length == 5) &&\n        (feature.getGeometry().get('olcs.polygon_kind') === 'rectangle')) {\n      // Create a rectangle according to the longitude and latitude curves\n      const coordinates = olGeometry.getCoordinates()[0];\n      // Extract the West, South, East, North coordinates\n      const extent = boundingExtent(coordinates);\n      const rectangle = Cesium.Rectangle.fromDegrees(extent[0], extent[1],\n          extent[2], extent[3]);\n\n      // Extract the average height of the vertices\n      let maxHeight = 0.0;\n      if (coordinates[0].length == 3) {\n        for (let c = 0; c < coordinates.length; c++) {\n          maxHeight = Math.max(maxHeight, coordinates[c][2]);\n        }\n      }\n\n      // Render the cartographic rectangle\n      fillGeometry = new Cesium.RectangleGeometry({\n        ellipsoid: Cesium.Ellipsoid.WGS84,\n        rectangle,\n        height: maxHeight\n      });\n\n      outlineGeometry = new Cesium.RectangleOutlineGeometry({\n        ellipsoid: Cesium.Ellipsoid.WGS84,\n        rectangle,\n        height: maxHeight\n      });\n    } else {\n      const rings = olGeometry.getLinearRings();\n      // always update Cesium externs before adding a property\n      const hierarchy = {};\n      const polygonHierarchy = hierarchy;\n      console.assert(rings.length > 0);\n\n      for (let i = 0; i < rings.length; ++i) {\n        const olPos = rings[i].getCoordinates();\n        const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(olPos);\n        console.assert(positions && positions.length > 0);\n        if (i == 0) {\n          hierarchy.positions = positions;\n        } else {\n          if (!hierarchy.holes) {\n            hierarchy.holes = [];\n          }\n          hierarchy.holes.push({\n            positions\n          });\n        }\n      }\n\n      fillGeometry = new Cesium.PolygonGeometry({\n        // always update Cesium externs before adding a property\n        polygonHierarchy,\n        perPositionHeight: true\n      });\n\n      // Since Cesium doesn't yet support Polygon outlines on terrain yet (coming soon...?)\n      // we don't create an outline geometry if clamped, but instead do the polyline method\n      // for each ring. Most of this code should be removeable when Cesium adds\n      // support for Polygon outlines on terrain.\n      if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {\n        const width = this.extractLineWidthFromOlStyle(olStyle);\n        if (width > 0) {\n          const positions = [hierarchy.positions];\n          if (hierarchy.holes) {\n            for (let i = 0; i < hierarchy.holes.length; ++i) {\n              positions.push(hierarchy.holes[i].positions);\n            }\n          }\n          if (!isGroundPolylinePrimitiveSupported(this.scene)) {\n            const color = this.extractColorFromOlStyle(olStyle, true);\n            outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, positions);\n          } else {\n            const appearance = new Cesium.PolylineMaterialAppearance({\n              // always update Cesium externs before adding a property\n              material: this.olStyleToCesium(feature, olStyle, true)\n            });\n            const geometryInstances = [];\n            for (const linePositions of positions) {\n              const polylineGeometry = new Cesium.GroundPolylineGeometry({positions: linePositions, width});\n              geometryInstances.push(new Cesium.GeometryInstance({\n                geometry: polylineGeometry\n              }));\n            }\n            const primitiveOptions = {\n              // always update Cesium externs before adding a property\n              appearance,\n              geometryInstances\n            };\n            outlinePrimitive = new Cesium.GroundPolylinePrimitive(primitiveOptions);\n            outlinePrimitive.readyPromise.then(() => {\n              this.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);\n            });\n          }\n        }\n      } else {\n        // Actually do the normal polygon thing. This should end the removable\n        // section of code described above.\n        outlineGeometry = new Cesium.PolygonOutlineGeometry({\n          // always update Cesium externs before adding a property\n          polygonHierarchy: hierarchy,\n          perPositionHeight: true\n        });\n      }\n    }\n\n    const primitives = this.wrapFillAndOutlineGeometries(\n        layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);\n\n    if (outlinePrimitive) {\n      primitives.add(outlinePrimitive);\n    }\n\n    return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);\n  }\n\n  /**\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry\n   * @return {!Cesium.HeightReference}\n   * @api\n   */\n  getHeightReference(layer, feature, geometry) {\n\n    // Read from the geometry\n    let altitudeMode = geometry.get('altitudeMode');\n\n    // Or from the feature\n    if (altitudeMode === undefined) {\n      altitudeMode = feature.get('altitudeMode');\n    }\n\n    // Or from the layer\n    if (altitudeMode === undefined) {\n      altitudeMode = layer.get('altitudeMode');\n    }\n\n    let heightReference = Cesium.HeightReference.NONE;\n    if (altitudeMode === 'clampToGround') {\n      heightReference = Cesium.HeightReference.CLAMP_TO_GROUND;\n    } else if (altitudeMode === 'relativeToGround') {\n      heightReference = Cesium.HeightReference.RELATIVE_TO_GROUND;\n    }\n\n    return heightReference;\n  }\n\n  /**\n   * Convert a point geometry to a Cesium BillboardCollection.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Point} olGeometry OpenLayers point geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} style\n   * @param {!ol.style.Image} imageStyle\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when the new billboard is added.\n   * @api\n   */\n  createBillboardFromImage(\n      layer,\n      feature,\n      olGeometry,\n      projection,\n      style,\n      imageStyle,\n      billboards,\n      opt_newBillboardCallback\n  ) {\n\n    if (imageStyle instanceof olStyleIcon) {\n      // make sure the image is scheduled for load\n      imageStyle.load();\n    }\n\n    const image = imageStyle.getImage(1); // get normal density\n    const isImageLoaded = function(image) {\n      return image.src != '' &&\n          image.naturalHeight != 0 &&\n          image.naturalWidth != 0 &&\n          image.complete;\n    };\n    const reallyCreateBillboard = (function() {\n      if (!image) {\n        return;\n      }\n      if (!(image instanceof HTMLCanvasElement ||\n          image instanceof Image ||\n          image instanceof HTMLImageElement)) {\n        return;\n      }\n      const center = olGeometry.getCoordinates();\n      const position = olcsCore.ol4326CoordinateToCesiumCartesian(center);\n      let color;\n      const opacity = imageStyle.getOpacity();\n      if (opacity !== undefined) {\n        color = new Cesium.Color(1.0, 1.0, 1.0, opacity);\n      }\n\n      const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n      const bbOptions = /** @type {Cesium.optionsBillboardCollectionAdd} */ ({\n        // always update Cesium externs before adding a property\n        image,\n        color,\n        scale: imageStyle.getScale(),\n        heightReference,\n        position\n      });\n\n      if (imageStyle instanceof olStyleIcon) {\n        const anchor = imageStyle.getAnchor();\n        if (anchor) {\n          bbOptions.pixelOffset = new Cesium.Cartesian2(image.width / 2 - anchor[0], image.height / 2 - anchor[1]);\n        }\n      }\n\n      const bb = this.csAddBillboard(billboards, bbOptions, layer, feature, olGeometry, style);\n      if (opt_newBillboardCallback) {\n        opt_newBillboardCallback(bb);\n      }\n    }).bind(this);\n\n    if (image instanceof Image && !isImageLoaded(image)) {\n      // Cesium requires the image to be loaded\n      let cancelled = false;\n      const source = layer.getSource();\n      const canceller = function() {\n        cancelled = true;\n      };\n      source.on(['removefeature', 'clear'],\n          this.boundOnRemoveOrClearFeatureListener_);\n      let cancellers = olcsUtil.obj(source)['olcs_cancellers'];\n      if (!cancellers) {\n        cancellers = olcsUtil.obj(source)['olcs_cancellers'] = {};\n      }\n\n      const fuid = getUid(feature);\n      if (cancellers[fuid]) {\n        // When the feature change quickly, a canceller may still be present so\n        // we cancel it here to prevent creation of a billboard.\n        cancellers[fuid]();\n      }\n      cancellers[fuid] = canceller;\n\n      const listener = function() {\n        image.removeEventListener('load', listener);\n        if (!billboards.isDestroyed() && !cancelled) {\n          // Create billboard if the feature is still displayed on the map.\n          reallyCreateBillboard();\n        }\n      };\n\n      image.addEventListener('load', listener);\n    } else {\n      reallyCreateBillboard();\n    }\n  }\n\n  /**\n   * Convert a point geometry to a Cesium BillboardCollection.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Point} olGeometry OpenLayers point geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} style\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when\n   * the new billboard is added.\n   * @return {Cesium.Primitive} primitives\n   * @api\n   */\n  olPointGeometryToCesium(\n      layer,\n      feature,\n      olGeometry,\n      projection,\n      style,\n      billboards,\n      opt_newBillboardCallback\n  ) {\n    console.assert(olGeometry.getType() == 'Point');\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n\n    let modelPrimitive = null;\n    const imageStyle = style.getImage();\n    if (imageStyle) {\n      const olcsModelFunction = /** @type {function():olcsx.ModelStyle} */ (olGeometry.get('olcs_model') || feature.get('olcs_model'));\n      if (olcsModelFunction) {\n        const olcsModel = olcsModelFunction();\n        const options = /** @type {Cesium.ModelFromGltfOptions} */ (Object.assign({}, {scene: this.scene}, olcsModel.cesiumOptions));\n        const model = Cesium.Model.fromGltf(options);\n        modelPrimitive = new Cesium.PrimitiveCollection();\n        modelPrimitive.add(model);\n        if (olcsModel.debugModelMatrix) {\n          modelPrimitive.add(new Cesium.DebugModelMatrixPrimitive({\n            modelMatrix: olcsModel.debugModelMatrix\n          }));\n        }\n      } else {\n        this.createBillboardFromImage(layer, feature, olGeometry, projection, style, imageStyle, billboards, opt_newBillboardCallback);\n      }\n    }\n\n    if (style.getText()) {\n      return this.addTextStyle(layer, feature, olGeometry, style, modelPrimitive || new Cesium.Primitive());\n    } else {\n      return modelPrimitive;\n    }\n  }\n\n  /**\n   * Convert an OpenLayers multi-something geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry OpenLayers geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when\n   * the new billboard is added.\n   * @return {Cesium.Primitive} primitives\n   * @api\n   */\n  olMultiGeometryToCesium(\n      layer,\n      feature,\n      geometry,\n      projection,\n      olStyle,\n      billboards,\n      opt_newBillboardCallback\n  ) {\n    // Do not reproject to 4326 now because it will be done later.\n\n    // FIXME: would be better to combine all child geometries in one primitive\n    // instead we create n primitives for simplicity.\n    const accumulate = function(geometries, functor) {\n      const primitives = new Cesium.PrimitiveCollection();\n      geometries.forEach((geometry) => {\n        primitives.add(functor(layer, feature, geometry, projection, olStyle));\n      });\n      return primitives;\n    };\n\n    let subgeos;\n    switch (geometry.getType()) {\n      case 'MultiPoint':\n        geometry = /** @type {!ol.geom.MultiPoint} */ (geometry);\n        subgeos = geometry.getPoints();\n        if (olStyle.getText()) {\n          const primitives = new Cesium.PrimitiveCollection();\n          subgeos.forEach((geometry) => {\n            console.assert(geometry);\n            const result = this.olPointGeometryToCesium(layer, feature, geometry,\n                projection, olStyle, billboards, opt_newBillboardCallback);\n            if (result) {\n              primitives.add(result);\n            }\n          });\n          return primitives;\n        } else {\n          subgeos.forEach((geometry) => {\n            console.assert(geometry);\n            this.olPointGeometryToCesium(layer, feature, geometry, projection,\n                olStyle, billboards, opt_newBillboardCallback);\n          });\n          return null;\n        }\n      case 'MultiLineString':\n        geometry = /** @type {!ol.geom.MultiLineString} */ (geometry);\n        subgeos = geometry.getLineStrings();\n        return accumulate(subgeos, this.olLineStringGeometryToCesium.bind(this));\n      case 'MultiPolygon':\n        geometry = /** @type {!ol.geom.MultiPolygon} */ (geometry);\n        subgeos = geometry.getPolygons();\n        return accumulate(subgeos, this.olPolygonGeometryToCesium.bind(this));\n      default:\n        console.assert(false, `Unhandled multi geometry type${geometry.getType()}`);\n    }\n  }\n\n  /**\n   * Convert an OpenLayers text style to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry\n   * @param {!ol.style.Text} style\n   * @return {Cesium.LabelCollection} Cesium primitive\n   * @api\n   */\n  olGeometry4326TextPartToCesium(layer, feature, geometry, style) {\n    const text = style.getText();\n    if (!text) {\n      return null;\n    }\n\n    const labels = new Cesium.LabelCollection({scene: this.scene});\n    // TODO: export and use the text draw position from OpenLayers .\n    // See src/ol/render/vector.js\n    const extentCenter = getCenter(geometry.getExtent());\n    if (geometry instanceof olGeomSimpleGeometry) {\n      const first = geometry.getFirstCoordinate();\n      extentCenter[2] = first.length == 3 ? first[2] : 0.0;\n    }\n    const options = /** @type {Cesium.optionsLabelCollection} */ ({});\n\n    options.position = olcsCore.ol4326CoordinateToCesiumCartesian(extentCenter);\n\n    options.text = text;\n\n    options.heightReference = this.getHeightReference(layer, feature, geometry);\n\n    const offsetX = style.getOffsetX();\n    const offsetY = style.getOffsetY();\n    if (offsetX != 0 && offsetY != 0) {\n      const offset = new Cesium.Cartesian2(offsetX, offsetY);\n      options.pixelOffset = offset;\n    }\n\n    options.font = style.getFont() || '10px sans-serif'; // OpenLayers default\n\n    let labelStyle = undefined;\n    if (style.getFill()) {\n      options.fillColor = this.extractColorFromOlStyle(style, false);\n      labelStyle = Cesium.LabelStyle.FILL;\n    }\n    if (style.getStroke()) {\n      options.outlineWidth = this.extractLineWidthFromOlStyle(style);\n      options.outlineColor = this.extractColorFromOlStyle(style, true);\n      labelStyle = Cesium.LabelStyle.OUTLINE;\n    }\n    if (style.getFill() && style.getStroke()) {\n      labelStyle = Cesium.LabelStyle.FILL_AND_OUTLINE;\n    }\n    options.style = labelStyle;\n\n    let horizontalOrigin;\n    switch (style.getTextAlign()) {\n      case 'left':\n        horizontalOrigin = Cesium.HorizontalOrigin.LEFT;\n        break;\n      case 'right':\n        horizontalOrigin = Cesium.HorizontalOrigin.RIGHT;\n        break;\n      case 'center':\n      default:\n        horizontalOrigin = Cesium.HorizontalOrigin.CENTER;\n    }\n    options.horizontalOrigin = horizontalOrigin;\n\n    if (style.getTextBaseline()) {\n      let verticalOrigin;\n      switch (style.getTextBaseline()) {\n        case 'top':\n          verticalOrigin = Cesium.VerticalOrigin.TOP;\n          break;\n        case 'middle':\n          verticalOrigin = Cesium.VerticalOrigin.CENTER;\n          break;\n        case 'bottom':\n          verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n          break;\n        case 'alphabetic':\n          verticalOrigin = Cesium.VerticalOrigin.TOP;\n          break;\n        case 'hanging':\n          verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n          break;\n        default:\n          console.assert(false, `unhandled baseline ${style.getTextBaseline()}`);\n      }\n      options.verticalOrigin = verticalOrigin;\n    }\n\n\n    const l = labels.add(options);\n    this.setReferenceForPicking(layer, feature, l);\n    return labels;\n  }\n\n  /**\n   * Convert an OpenLayers style to a Cesium Material.\n   * @param {ol.Feature} feature OpenLayers feature..\n   * @param {!ol.style.Style} style\n   * @param {boolean} outline\n   * @return {Cesium.Material}\n   * @api\n   */\n  olStyleToCesium(feature, style, outline) {\n    const fill = style.getFill();\n    const stroke = style.getStroke();\n    if ((outline && !stroke) || (!outline && !fill)) {\n      return null; // FIXME use a default style? Developer error?\n    }\n\n    let color = outline ? stroke.getColor() : fill.getColor();\n    color = olcsCore.convertColorToCesium(color);\n\n    if (outline && stroke.getLineDash()) {\n      return Cesium.Material.fromType('Stripe', {\n        // always update Cesium externs before adding a property\n        horizontal: false,\n        repeat: 500, // TODO how to calculate this?\n        evenColor: color,\n        oddColor: new Cesium.Color(0, 0, 0, 0) // transparent\n      });\n    } else {\n      return Cesium.Material.fromType('Color', {\n        // always update Cesium externs before adding a property\n        color\n      });\n    }\n\n  }\n\n  /**\n   * Compute OpenLayers plain style.\n   * Evaluates style function, blend arrays, get default style.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature\n   * @param {ol.StyleFunction|undefined} fallbackStyleFunction\n   * @param {number} resolution\n   * @return {Array.<!ol.style.Style>} null if no style is available\n   * @api\n   */\n  computePlainStyle(layer, feature, fallbackStyleFunction, resolution) {\n    /**\n     * @type {ol.FeatureStyleFunction|undefined}\n     */\n    const featureStyleFunction = feature.getStyleFunction();\n\n    /**\n     * @type {ol.style.Style|Array.<ol.style.Style>}\n     */\n    let style = null;\n\n    if (featureStyleFunction) {\n      style = featureStyleFunction(feature, resolution);\n    }\n\n    if (!style && fallbackStyleFunction) {\n      style = fallbackStyleFunction(feature, resolution);\n    }\n\n    if (!style) {\n      // The feature must not be displayed\n      return null;\n    }\n\n    // FIXME combine materials as in cesium-materials-pack?\n    // then this function must return a custom material\n    // More simply, could blend the colors like described in\n    // http://en.wikipedia.org/wiki/Alpha_compositing\n    return Array.isArray(style) ? style : [style];\n  }\n\n  /**\n   * @protected\n   * @param {!ol.Feature} feature\n   * @param {!ol.style.Style} style\n   * @param {!ol.geom.Geometry=} opt_geom Geometry to be converted.\n   * @return {ol.geom.Geometry|undefined}\n   */\n  getGeometryFromFeature(feature, style, opt_geom) {\n    if (opt_geom) {\n      return opt_geom;\n    }\n\n    const geom3d = /** @type {!ol.geom.Geometry} */(feature.get('olcs.3d_geometry'));\n    if (geom3d && geom3d instanceof olGeomGeometry) {\n      return geom3d;\n    }\n\n    if (style) {\n      const geomFuncRes = style.getGeometryFunction()(feature);\n      if (geomFuncRes instanceof olGeomGeometry) {\n        return geomFuncRes;\n      }\n    }\n\n    return feature.getGeometry();\n  }\n\n  /**\n   * Convert one OpenLayers feature up to a collection of Cesium primitives.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.style.Style} style\n   * @param {!import('olcs/core/VectorLayerConterpart.js').OlFeatureToCesiumContext} context\n   * @param {!ol.geom.Geometry=} opt_geom Geometry to be converted.\n   * @return {Cesium.Primitive} primitives\n   * @api\n   */\n  olFeatureToCesium(layer, feature, style, context, opt_geom) {\n    let geom = this.getGeometryFromFeature(feature, style, opt_geom);\n\n    if (!geom) {\n      // OpenLayers features may not have a geometry\n      // See http://geojson.org/geojson-spec.html#feature-objects\n      return null;\n    }\n\n    const proj = context.projection;\n    const newBillboardAddedCallback = function(bb) {\n      const featureBb = context.featureToCesiumMap[getUid(feature)];\n      if (featureBb instanceof Array) {\n        featureBb.push(bb);\n      }\n      else {\n        context.featureToCesiumMap[getUid(feature)] = [bb];\n      }\n    };\n\n    switch (geom.getType()) {\n      case 'GeometryCollection':\n        const primitives = new Cesium.PrimitiveCollection();\n        const collection = /** @type {!ol.geom.GeometryCollection} */ (geom);\n        // TODO: use getGeometriesArray() instead\n        collection.getGeometries().forEach((geom) => {\n          if (geom) {\n            const prims = this.olFeatureToCesium(layer, feature, style, context,\n                geom);\n            if (prims) {\n              primitives.add(prims);\n            }\n          }\n        });\n        return primitives;\n      case 'Point':\n        geom = /** @type {!ol.geom.Point} */ (geom);\n        const bbs = context.billboards;\n        const result = this.olPointGeometryToCesium(layer, feature, geom, proj,\n            style, bbs, newBillboardAddedCallback);\n        if (!result) {\n          // no wrapping primitive\n          return null;\n        } else {\n          return result;\n        }\n      case 'Circle':\n        geom = /** @type {!ol.geom.Circle} */ (geom);\n        return this.olCircleGeometryToCesium(layer, feature, geom, proj,\n            style);\n      case 'LineString':\n        geom = /** @type {!ol.geom.LineString} */ (geom);\n        return this.olLineStringGeometryToCesium(layer, feature, geom, proj,\n            style);\n      case 'Polygon':\n        geom = /** @type {!ol.geom.Polygon} */ (geom);\n        return this.olPolygonGeometryToCesium(layer, feature, geom, proj,\n            style);\n      case 'MultiPoint':\n      case 'MultiLineString':\n      case 'MultiPolygon':\n        const result2 = this.olMultiGeometryToCesium(layer, feature, geom, proj,\n            style, context.billboards, newBillboardAddedCallback);\n        if (!result2) {\n          // no wrapping primitive\n          return null;\n        } else {\n          return result2;\n        }\n      case 'LinearRing':\n        throw new Error('LinearRing should only be part of polygon.');\n      default:\n        throw new Error(`Ol geom type not handled : ${geom.getType()}`);\n    }\n  }\n\n  /**\n   * Convert an OpenLayers vector layer to Cesium primitive collection.\n   * For each feature, the associated primitive will be stored in\n   * `featurePrimitiveMap`.\n   * @param {!(ol.layer.Vector|ol.layer.Image)} olLayer\n   * @param {!ol.View} olView\n   * @param {!Object.<number, !Cesium.Primitive>} featurePrimitiveMap\n   * @return {!olcs.core.VectorLayerCounterpart}\n   * @api\n   */\n  olVectorLayerToCesium(olLayer, olView, featurePrimitiveMap) {\n    const proj = olView.getProjection();\n    const resolution = olView.getResolution();\n\n    if (resolution === undefined || !proj) {\n      console.assert(false, 'View not ready');\n      // an assertion is not enough for closure to assume resolution and proj\n      // are defined\n      throw new Error('View not ready');\n    }\n\n    let source = olLayer.getSource();\n    if (source instanceof olSourceCluster) {\n      source = source.getSource();\n    }\n\n    console.assert(source instanceof olSourceVector);\n    const features = source.getFeatures();\n    const counterpart = new olcsCoreVectorLayerCounterpart(proj, this.scene);\n    const context = counterpart.context;\n    for (let i = 0; i < features.length; ++i) {\n      const feature = features[i];\n      if (!feature) {\n        continue;\n      }\n      /**\n       * @type {ol.StyleFunction|undefined}\n       */\n      const layerStyle = olLayer.getStyleFunction();\n      const styles = this.computePlainStyle(olLayer, feature, layerStyle,\n          resolution);\n      if (!styles || !styles.length) {\n        // only 'render' features with a style\n        continue;\n      }\n\n      /**\n       * @type {Cesium.Primitive|null}\n       */\n      let primitives = null;\n      for (let i = 0; i < styles.length; i++) {\n        const prims = this.olFeatureToCesium(olLayer, feature, styles[i], context);\n        if (prims) {\n          if (!primitives) {\n            primitives = prims;\n          } else if (prims) {\n            let i = 0, prim;\n            while ((prim = prims.get(i))) {\n              primitives.add(prim);\n              i++;\n            }\n          }\n        }\n      }\n      if (!primitives) {\n        continue;\n      }\n      featurePrimitiveMap[getUid(feature)] = primitives;\n      counterpart.getRootPrimitive().add(primitives);\n    }\n\n    return counterpart;\n  }\n\n  /**\n   * Convert an OpenLayers feature to Cesium primitive collection.\n   * @param {!(ol.layer.Vector|ol.layer.Image)} layer\n   * @param {!ol.View} view\n   * @param {!ol.Feature} feature\n   * @param {!import('olcs/core/VectorLayerConterpart.js').OlFeatureToCesiumContext} context\n   * @return {Cesium.Primitive}\n   * @api\n   */\n  convert(layer, view, feature, context) {\n    const proj = view.getProjection();\n    const resolution = view.getResolution();\n\n    if (resolution == undefined || !proj) {\n      return null;\n    }\n\n    /**\n     * @type {ol.StyleFunction|undefined}\n     */\n    const layerStyle = layer.getStyleFunction();\n\n    const styles = this.computePlainStyle(layer, feature, layerStyle, resolution);\n\n    if (!styles.length) {\n      // only 'render' features with a style\n      return null;\n    }\n\n    context.projection = proj;\n\n    /**\n     * @type {Cesium.Primitive|null}\n     */\n    let primitives = null;\n    for (let i = 0; i < styles.length; i++) {\n      const prims = this.olFeatureToCesium(layer, feature, styles[i], context);\n      if (!primitives) {\n        primitives = prims;\n      } else if (prims) {\n        let i = 0, prim;\n        while ((prim = prims.get(i))) {\n          primitives.add(prim);\n          i++;\n        }\n      }\n    }\n    return primitives;\n  }\n}\n\n\nexport default FeatureConverter;\n","/**\n * @module olcs.VectorSynchronizer\n */\nimport olSourceVector from 'ol/source/Vector.js';\nimport olLayerLayer from 'ol/layer/Layer.js';\nimport olSourceCluster from 'ol/source/Cluster.js';\nimport olLayerImage from 'ol/layer/Image.js';\nimport {olcsListen, getUid} from './util.js';\nimport olLayerVector from 'ol/layer/Vector.js';\nimport olLayerVectorTile from 'ol/layer/VectorTile.js';\nimport olcsAbstractSynchronizer from './AbstractSynchronizer.js';\nimport olcsFeatureConverter from './FeatureConverter.js';\n\nclass VectorSynchronizer extends olcsAbstractSynchronizer {\n  /**\n   * Unidirectionally synchronize OpenLayers vector layers to Cesium.\n   * @param {!ol.Map} map\n   * @param {!Cesium.Scene} scene\n   * @param {olcs.FeatureConverter=} opt_converter\n   * @extends {olcs.AbstractSynchronizer.<olcs.core.VectorLayerCounterpart>}\n   * @api\n   */\n  constructor(map, scene, opt_converter) {\n    super(map, scene);\n\n    /**\n     * @protected\n     */\n    this.converter = opt_converter || new olcsFeatureConverter(scene);\n\n    /**\n     * @private\n     */\n    this.csAllPrimitives_ = new Cesium.PrimitiveCollection();\n    scene.primitives.add(this.csAllPrimitives_);\n    this.csAllPrimitives_.destroyPrimitives = false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  addCesiumObject(counterpart) {\n    console.assert(counterpart);\n    counterpart.getRootPrimitive()['counterpart'] = counterpart;\n    this.csAllPrimitives_.add(counterpart.getRootPrimitive());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  destroyCesiumObject(object) {\n    object.getRootPrimitive().destroy();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeSingleCesiumObject(object, destroy) {\n    object.destroy();\n    this.csAllPrimitives_.destroyPrimitives = destroy;\n    this.csAllPrimitives_.remove(object.getRootPrimitive());\n    this.csAllPrimitives_.destroyPrimitives = false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeAllCesiumObjects(destroy) {\n    this.csAllPrimitives_.destroyPrimitives = destroy;\n    if (destroy) {\n      for (let i = 0; i < this.csAllPrimitives_.length; ++i) {\n        this.csAllPrimitives_.get(i)['counterpart'].destroy();\n      }\n    }\n    this.csAllPrimitives_.removeAll();\n    this.csAllPrimitives_.destroyPrimitives = false;\n  }\n\n  /**\n   * Synchronizes the layer visibility properties\n   * to the given Cesium Primitive.\n   * @param {import('olsc/core.js').LayerWithParents} olLayerWithParents\n   * @param {!Cesium.Primitive} csPrimitive\n   */\n  updateLayerVisibility(olLayerWithParents, csPrimitive) {\n    let visible = true;\n    [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayer) => {\n      const layerVisible = olLayer.getVisible();\n      if (layerVisible !== undefined) {\n        visible &= layerVisible;\n      } else {\n        visible = false;\n      }\n    });\n    csPrimitive.show = visible;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createSingleLayerCounterparts(olLayerWithParents) {\n    const olLayer = olLayerWithParents.layer;\n    if (!(olLayer instanceof olLayerVector) || olLayer instanceof olLayerVectorTile) {\n      return null;\n    }\n    console.assert(olLayer instanceof olLayerLayer);\n\n    let source = olLayer.getSource();\n    if (source instanceof olSourceCluster) {\n      source = source.getSource();\n    }\n\n    if (!source) {\n      return null;\n    }\n\n    console.assert(source instanceof olSourceVector);\n    console.assert(this.view);\n\n    const view = this.view;\n    const featurePrimitiveMap = {};\n    const counterpart = this.converter.olVectorLayerToCesium(olLayer, view,\n        featurePrimitiveMap);\n    const csPrimitives = counterpart.getRootPrimitive();\n    const olListenKeys = counterpart.olListenKeys;\n\n    [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayerItem) => {\n      olListenKeys.push(olcsListen(olLayerItem, 'change:visible', () => {\n        this.updateLayerVisibility(olLayerWithParents, csPrimitives);\n      }));\n    });\n    this.updateLayerVisibility(olLayerWithParents, csPrimitives);\n\n    const onAddFeature = (function(feature) {\n      console.assert(\n          (olLayer instanceof olLayerVector) ||\n          (olLayer instanceof olLayerImage)\n      );\n      const context = counterpart.context;\n      const prim = this.converter.convert(olLayer, view, feature, context);\n      if (prim) {\n        featurePrimitiveMap[getUid(feature)] = prim;\n        csPrimitives.add(prim);\n      }\n    }).bind(this);\n\n    const onRemoveFeature = (function(feature) {\n      const id = getUid(feature);\n      const context = counterpart.context;\n      const bbs = context.featureToCesiumMap[id];\n      if (bbs) {\n        delete context.featureToCesiumMap[id];\n        bbs.forEach((bb) => {\n          if (bb instanceof Cesium.Billboard) {\n            context.billboards.remove(bb);\n          }\n        });\n      }\n      const csPrimitive = featurePrimitiveMap[id];\n      delete featurePrimitiveMap[id];\n      if (csPrimitive) {\n        csPrimitives.remove(csPrimitive);\n      }\n    }).bind(this);\n\n    olListenKeys.push(olcsListen(source, 'addfeature', (e) => {\n      console.assert(e.feature);\n      onAddFeature(e.feature);\n    }, this));\n\n    olListenKeys.push(olcsListen(source, 'removefeature', (e) => {\n      console.assert(e.feature);\n      onRemoveFeature(e.feature);\n    }, this));\n\n    olListenKeys.push(olcsListen(source, 'changefeature', (e) => {\n      const feature = e.feature;\n      console.assert(feature);\n      onRemoveFeature(feature);\n      onAddFeature(feature);\n    }, this));\n\n    return counterpart ? [counterpart] : null;\n  }\n}\n\nexport default VectorSynchronizer;\n","/**\n * @module olcs.SynchronizedOverlay\n */\nimport olOverlay from 'ol/Overlay.js';\nimport {transform} from 'ol/proj.js';\nimport {removeNode, removeChildren} from './util.js';\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\n\n\n/**\n * Options for SynchronizedOverlay\n * @typedef {Object} SynchronizedOverlayOptions\n * @property {!Cesium.Scene} scene\n * @property {olOverlay} parent\n * @property {!import('olsc/OverlaySynchronizer.js').default} synchronizer\n */\n\n\nclass SynchronizedOverlay extends olOverlay {\n  /**\n   * @param {olcsx.SynchronizedOverlayOptions} options SynchronizedOverlay Options.\n   * @api\n   */\n  constructor(options) {\n    const parent = options.parent;\n    super(parent.getOptions());\n\n    /**\n     * @private\n     * @type {?Function}\n     */\n    this.scenePostRenderListenerRemover_ = null;\n\n    /**\n     * @private\n     * @type {!Cesium.Scene}\n     */\n    this.scene_ = options.scene;\n\n    /**\n     * @private\n     * @type {!olcs.OverlaySynchronizer}\n     */\n    this.synchronizer_ = options.synchronizer;\n\n    /**\n     * @private\n     * @type {!ol.Overlay}\n     */\n    this.parent_ = parent;\n\n    /**\n     * @private\n     * @type {ol.Coordinate|undefined}\n     */\n    this.positionWGS84_ = undefined;\n\n    /**\n     * @private\n     * @type {MutationObserver}\n     */\n    this.observer_ = new MutationObserver(this.handleElementChanged.bind(this));\n\n    /**\n     * @private\n     * @type {Array.<MutationObserver>}\n     */\n    this.attributeObserver_ = [];\n\n    /**\n     * @private\n     * @type {Array<ol.EventsKey>}\n     */\n    this.listenerKeys_ = [];\n    // synchronize our Overlay with the parent Overlay\n    const setPropertyFromEvent = event => this.setPropertyFromEvent_(event);\n    this.listenerKeys_.push(this.parent_.on('change:position', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:element', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:offset', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:position', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:positioning', setPropertyFromEvent));\n\n    this.setProperties(this.parent_.getProperties());\n\n    this.handleMapChanged();\n    this.handleElementChanged();\n  }\n\n  /**\n   * @param {Node} target\n   * @private\n   */\n  observeTarget_(target) {\n    if (!this.observer_) {\n      // not ready, skip the event (this occurs on construction)\n      return;\n    }\n    this.observer_.disconnect();\n    this.observer_.observe(target, {\n      attributes: false,\n      childList: true,\n      characterData: true,\n      subtree: true\n    });\n    this.attributeObserver_.forEach((observer) => {\n      observer.disconnect();\n    });\n    this.attributeObserver_.length = 0;\n    for (let i = 0; i < target.childNodes.length; i++) {\n      const node = target.childNodes[i];\n      if (node.nodeType === 1) {\n        const observer = new MutationObserver(this.handleElementChanged.bind(this));\n        observer.observe(node, {\n          attributes: true,\n          subtree: true\n        });\n        this.attributeObserver_.push(observer);\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {ol.Object.Event} event\n   * @private\n   */\n  setPropertyFromEvent_(event) {\n    if (event.target && event.key) {\n      this.set(event.key, event.target.get(event.key));\n    }\n  }\n\n  /**\n   * Get the scene associated with this overlay.\n   * @see ol.Overlay.prototype.getMap\n   * @return {!Cesium.Scene} The scene that the overlay is part of.\n   * @api\n   */\n  getScene() {\n    return this.scene_;\n  }\n\n  /**\n   * @override\n   */\n  handleMapChanged() {\n    if (this.scenePostRenderListenerRemover_) {\n      this.scenePostRenderListenerRemover_();\n      removeNode(this.element);\n    }\n    this.scenePostRenderListenerRemover_ = null;\n    const scene = this.getScene();\n    if (scene) {\n      this.scenePostRenderListenerRemover_ = scene.postRender.addEventListener(this.updatePixelPosition.bind(this));\n      this.updatePixelPosition();\n      const container = this.stopEvent ?\n        this.synchronizer_.getOverlayContainerStopEvent() : this.synchronizer_.getOverlayContainer();\n      if (this.insertFirst) {\n        container.insertBefore(this.element, container.childNodes[0] || null);\n      } else {\n        container.appendChild(this.element);\n      }\n    }\n  }\n\n  /**\n   * @override\n   */\n  handlePositionChanged() {\n    // transform position to WGS84\n    const position = this.getPosition();\n    if (position) {\n      const sourceProjection = this.parent_.getMap().getView().getProjection();\n      this.positionWGS84_ = transform(position, sourceProjection, 'EPSG:4326');\n    } else {\n      this.positionWGS84_ = undefined;\n    }\n    this.updatePixelPosition();\n  }\n\n  /**\n   * @override\n   */\n  handleElementChanged() {\n    function cloneNode(node, parent) {\n      const clone = node.cloneNode();\n      if (parent) {\n        parent.appendChild(clone);\n      }\n      if (node.nodeType != Node.TEXT_NODE) {\n        clone.addEventListener('click', (event) => {\n          node.dispatchEvent(new MouseEvent('click', event));\n          event.stopPropagation();\n        });\n      }\n      const nodes = node.childNodes;\n      for (let i = 0; i < nodes.length; i++) {\n        if (!nodes[i]) {\n          continue;\n        }\n        cloneNode(nodes[i], clone);\n      }\n      return clone;\n    }\n    removeChildren(this.element);\n    const element = this.getElement();\n    if (element) {\n      if (element.parentNode && element.parentNode.childNodes) {\n        for (const node of element.parentNode.childNodes) {\n          const clonedNode = cloneNode(node, null);\n          this.element.appendChild(clonedNode);\n        }\n      }\n    }\n    if (element.parentNode) {\n      // set new Observer\n      this.observeTarget_(element.parentNode);\n    }\n  }\n\n  /**\n   * @override\n   */\n  updatePixelPosition() {\n    const position = this.positionWGS84_;\n    if (!this.scene_ || !position) {\n      this.setVisible(false);\n      return;\n    }\n    let height = 0;\n    if (position.length === 2) {\n      const globeHeight = this.scene_.globe.getHeight(Cesium.Cartographic.fromDegrees(position[0], position[1]));\n      if (globeHeight && this.scene_.globe.tilesLoaded) {\n        position[2] = globeHeight;\n      }\n      if (globeHeight) {\n        height = globeHeight;\n      }\n    } else {\n      height = position[2];\n    }\n    const cartesian = Cesium.Cartesian3.fromDegrees(position[0], position[1], height);\n    const camera = this.scene_.camera;\n    const ellipsoidBoundingSphere = new Cesium.BoundingSphere(new Cesium.Cartesian3(), 6356752);\n    const occluder = new Cesium.Occluder(ellipsoidBoundingSphere, camera.position);\n    // check if overlay position is behind the horizon\n    if (!occluder.isPointVisible(cartesian)) {\n      this.setVisible(false);\n      return;\n    }\n    const cullingVolume = camera.frustum.computeCullingVolume(camera.position, camera.direction, camera.up);\n    // check if overlay position is visible from the camera\n    if (cullingVolume.computeVisibility(new Cesium.BoundingSphere(cartesian)) !== 1) {\n      this.setVisible(false);\n      return;\n    }\n    this.setVisible(true);\n\n    const pixelCartesian = this.scene_.cartesianToCanvasCoordinates(cartesian);\n    const pixel = [pixelCartesian.x, pixelCartesian.y];\n    const mapSize = [this.scene_.canvas.width, this.scene_.canvas.height];\n    this.updateRenderedPosition(pixel, mapSize);\n  }\n\n  /**\n   * Destroys the overlay, removing all its listeners and elements\n   * @api\n   */\n  destroy() {\n    if (this.scenePostRenderListenerRemover_) {\n      this.scenePostRenderListenerRemover_();\n    }\n    if (this.observer_) {\n      this.observer_.disconnect();\n    }\n    olObservableUnByKey(this.listenerKeys_);\n    this.listenerKeys_.splice(0);\n    if (this.element.removeNode) {\n      this.element.removeNode(true);\n    } else {\n      this.element.remove();\n    }\n    this.element = null;\n  }\n}\n\nexport default SynchronizedOverlay;\n","/**\n * @module olcs.OverlaySynchronizer\n */\nimport olcsSynchronizedOverlay from './SynchronizedOverlay.js';\nimport {getUid} from './util.js';\n\nclass OverlaySynchronizer {\n  /**\n  * @param {!ol.Map} map\n  * @param {!Cesium.Scene} scene\n  * @constructor\n  * @template T\n  * @api\n  */\n  constructor(map, scene) {\n    /**\n    * @type {!ol.Map}\n    * @protected\n    */\n    this.map = map;\n\n    /**\n    * @type {ol.Collection.<ol.Overlay>}\n    * @private\n    */\n    this.overlays_ = this.map.getOverlays();\n\n    /**\n    * @type {!Cesium.Scene}\n    * @protected\n    */\n    this.scene = scene;\n\n    /**\n    * @private\n    * @type {!Element}\n    */\n    this.overlayContainerStopEvent_ = document.createElement('DIV');\n    this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n    const overlayEvents = ['click', 'dblclick', 'mousedown', 'touchstart', 'MSPointerDown', 'pointerdown', 'mousewheel', 'wheel'];\n    overlayEvents.forEach((event) => {\n      this.overlayContainerStopEvent_.addEventListener(event, evt => evt.stopPropagation());\n    });\n    this.scene.canvas.parentElement.appendChild(this.overlayContainerStopEvent_);\n\n    /**\n    * @private\n    * @type {!Element}\n    */\n    this.overlayContainer_ = document.createElement('DIV');\n    this.overlayContainer_.className = 'ol-overlaycontainer';\n    this.scene.canvas.parentElement.appendChild(this.overlayContainer_);\n\n\n    /**\n    * @type {!Object<?,olcs.SynchronizedOverlay>}\n    * @private\n    */\n    this.overlayMap_ = {};\n  }\n\n  /**\n  * Get the element that serves as a container for overlays that don't allow\n  * event propagation. Elements added to this container won't let mousedown and\n  * touchstart events through to the map, so clicks and gestures on an overlay\n  * don't trigger any {@link ol.MapBrowserEvent}.\n  * @return {!Element} The map's overlay container that stops events.\n  */\n  getOverlayContainerStopEvent() {\n    return this.overlayContainerStopEvent_;\n  }\n\n  /**\n  * Get the element that serves as a container for overlays.\n  * @return {!Element} The map's overlay container.\n  */\n  getOverlayContainer() {\n    return this.overlayContainer_;\n  }\n\n  /**\n  * Destroy all and perform complete synchronization of the overlays.\n  * @api\n  */\n  synchronize() {\n    this.destroyAll();\n    this.addOverlays();\n    this.overlays_.on('add', this.addOverlayFromEvent_.bind(this));\n    this.overlays_.on('remove', this.removeOverlayFromEvent_.bind(this));\n  }\n\n  /**\n  * @param {ol.Collection.Event} event\n  * @private\n  */\n  addOverlayFromEvent_(event) {\n    const overlay = /** @type {ol.Overlay} */ (event.element);\n    this.addOverlay(overlay);\n  }\n\n  /**\n  * @api\n  */\n  addOverlays() {\n    this.overlays_.forEach((overlay) => { this.addOverlay(overlay); });\n  }\n\n  /**\n  * @param {ol.Overlay} overlay\n  * @api\n  */\n  addOverlay(overlay) {\n    if (!overlay) {\n      return;\n    }\n    const cesiumOverlay = new olcsSynchronizedOverlay({\n      scene: this.scene,\n      synchronizer: this,\n      parent: overlay\n    });\n\n    const overlayId = getUid(overlay).toString();\n    this.overlayMap_[overlayId] = cesiumOverlay;\n  }\n\n  /**\n  * @param {ol.Collection.Event} event\n  * @private\n  */\n  removeOverlayFromEvent_(event) {\n    const removedOverlay = /** @type {ol.Overlay} */ (event.element);\n    this.removeOverlay(removedOverlay);\n  }\n\n  /**\n  * Removes an overlay from the scene\n  * @param {ol.Overlay} overlay\n  * @api\n  */\n  removeOverlay(overlay) {\n    const overlayId = getUid(overlay).toString();\n    const csOverlay = this.overlayMap_[overlayId];\n    if (csOverlay) {\n      csOverlay.destroy();\n      delete this.overlayMap_[overlayId];\n    }\n  }\n\n  /**\n  * Destroys all the created Cesium objects.\n  * @protected\n  */\n  destroyAll() {\n    Object.keys(this.overlayMap_).forEach((key) => {\n      const overlay = this.overlayMap_[key];\n      overlay.destroy();\n      delete this.overlayMap_[key];\n    });\n  }\n}\n\n\nexport default OverlaySynchronizer;\n","/**\n * @module olcs.OLCesium\n */\nimport olGeomPoint from 'ol/geom/Point.js';\nimport {getTransform} from 'ol/proj.js';\nimport olcsUtil from './util.js';\nimport olcsCore from './core.js';\nimport olcsAutoRenderLoop from './AutoRenderLoop.js';\nimport olcsCamera from './Camera.js';\nimport olcsRasterSynchronizer from './RasterSynchronizer.js';\nimport olcsVectorSynchronizer from './VectorSynchronizer.js';\nimport olcsOverlaySynchronizer from './OverlaySynchronizer.js';\n\n\n/**\n * @typedef {Object} OLCesiumOptions\n * @property {import('ol/Map.js').default} map The OpenLayers map we want to show on a Cesium scene.\n * @property {Element|string} [target] Target element for the Cesium scene.\n * @property {function(!import('ol/Map.js').default, !Cesium.Scene, !Cesium.DataSourceCollection): Array<import('olcs/AbstractSynchronizer.js').default>}\n *      [createSynchronizers] Callback function which will be called by the {@link olcs.OLCesium}\n *      constructor to create custom synchronizers. Receives an `ol.Map` and a `Cesium.Scene` as arguments,\n *      and needs to return an array of {@link import('olcs/AbstractSynchronizer.js').default}.\n * @property {function(): Cesium.JulianDate} [time] Control the current time used by Cesium.\n * @property {boolean} [stopOpenLayersEventsPropagation] Prevent propagation of mouse/touch events to\n *      OpenLayers when Cesium is active.\n * @property {Cesium.SceneOptions} [sceneOptions] Allows the passing of property value to the\n *      `Cesium.Scene`.\n */\n\n\nclass OLCesium {\n  /**\n   * @param {!OLCesiumOptions} options Options.\n   * @constructor\n   * @api\n   */\n  constructor(options) {\n\n    /**\n     * @type {olcs.AutoRenderLoop}\n     * @private\n     */\n    this.autoRenderLoop_ = null;\n\n    /**\n     * @type {!ol.Map}\n     * @private\n     */\n    this.map_ = options.map;\n\n    /**\n     * @type {!function(): Cesium.JulianDate}\n     * @private\n     */\n    this.time_ = options.time || function() {\n      return Cesium.JulianDate.now();\n    };\n\n    /**\n     * No change of the view projection.\n     * @private\n     */\n    this.to4326Transform_ = getTransform(this.map_.getView().getProjection(), 'EPSG:4326');\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.resolutionScale_ = 1.0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.canvasClientWidth_ = 0.0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.canvasClientHeight_ = 0.0;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.resolutionScaleChanged_ = true; // force resize\n\n    const fillArea = 'position:absolute;top:0;left:0;width:100%;height:100%;';\n\n    /**\n     * @type {!Element}\n     * @private\n     */\n    this.container_ = document.createElement('DIV');\n    const containerAttribute = document.createAttribute('style');\n    containerAttribute.value = `${fillArea}visibility:hidden;`;\n    this.container_.setAttributeNode(containerAttribute);\n\n    let targetElement = options.target || null;\n    if (targetElement) {\n      if (typeof targetElement === 'string') {\n        targetElement = document.getElementById(targetElement);\n      }\n      targetElement.appendChild(this.container_);\n    } else {\n      const oc = this.map_.getViewport().querySelector('.ol-overlaycontainer');\n      if (oc && oc.parentNode) {\n        oc.parentNode.insertBefore(this.container_, oc);\n      }\n    }\n\n    /**\n     * Whether the Cesium container is placed over the ol map.\n     * @type {boolean}\n     * @private\n     */\n    this.isOverMap_ = !targetElement;\n\n\n    if (this.isOverMap_ && options.stopOpenLayersEventsPropagation) {\n      const overlayEvents = ['click', 'dblclick', 'mousedown', 'touchstart', 'MSPointerDown', 'pointerdown', 'mousewheel', 'wheel'];\n      for (let i = 0, ii = overlayEvents.length; i < ii; ++i) {\n        this.container_.addEventListener(overlayEvents[i], evt => evt.stopPropagation());\n      }\n    }\n\n\n    /**\n     * @type {!HTMLCanvasElement}\n     * @private\n     */\n    this.canvas_ = /** @type {!HTMLCanvasElement} */ (document.createElement('CANVAS'));\n    const canvasAttribute = document.createAttribute('style');\n    canvasAttribute.value = fillArea;\n    this.canvas_.setAttributeNode(canvasAttribute);\n\n    if (olcsUtil.supportsImageRenderingPixelated()) {\n      // non standard CSS4\n      this.canvas_.style['imageRendering'] = olcsUtil.imageRenderingValue();\n    }\n\n    this.canvas_.oncontextmenu = function() { return false; };\n    this.canvas_.onselectstart = function() { return false; };\n\n    this.container_.appendChild(this.canvas_);\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.enabled_ = false;\n\n    /**\n     * @type {!Array.<ol.interaction.Interaction>}\n     * @private\n     */\n    this.pausedInteractions_ = [];\n\n    /**\n     * @type {?ol.layer.Group}\n     * @private\n     */\n    this.hiddenRootGroup_ = null;\n\n    const sceneOptions = options.sceneOptions !== undefined ? options.sceneOptions :\n      /** @type {Cesium.SceneOptions} */ ({});\n    sceneOptions.canvas = this.canvas_;\n    sceneOptions.scene3DOnly = true;\n\n    /**\n     * @type {!Cesium.Scene}\n     * @private\n     */\n    this.scene_ = new Cesium.Scene(sceneOptions);\n\n    const sscc = this.scene_.screenSpaceCameraController;\n\n    sscc.tiltEventTypes.push({\n      'eventType': Cesium.CameraEventType.LEFT_DRAG,\n      'modifier': Cesium.KeyboardEventModifier.SHIFT\n    });\n\n    sscc.tiltEventTypes.push({\n      'eventType': Cesium.CameraEventType.LEFT_DRAG,\n      'modifier': Cesium.KeyboardEventModifier.ALT\n    });\n\n    sscc.enableLook = false;\n\n    this.scene_.camera.constrainedAxis = Cesium.Cartesian3.UNIT_Z;\n\n    /**\n     * @type {!olcs.Camera}\n     * @private\n     */\n    this.camera_ = new olcsCamera(this.scene_, this.map_);\n\n    /**\n     * @type {!Cesium.Globe}\n     * @private\n     */\n    this.globe_ = new Cesium.Globe(Cesium.Ellipsoid.WGS84);\n    this.globe_.baseColor = Cesium.Color.WHITE;\n    this.scene_.globe = this.globe_;\n    this.scene_.skyAtmosphere = new Cesium.SkyAtmosphere();\n\n    // The first layer of Cesium is special; using a 1x1 transparent image to workaround it.\n    // See https://github.com/AnalyticalGraphicsInc/cesium/issues/1323 for details.\n    const firstImageryProvider = new Cesium.SingleTileImageryProvider({\n      url: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=',\n      rectangle: Cesium.Rectangle.fromDegrees(0, 0, 1, 1) // the Rectangle dimensions are arbitrary\n    });\n    this.globe_.imageryLayers.addImageryProvider(firstImageryProvider, 0);\n\n    this.dataSourceCollection_ = new Cesium.DataSourceCollection();\n    this.dataSourceDisplay_ = new Cesium.DataSourceDisplay({\n      scene: this.scene_,\n      dataSourceCollection: this.dataSourceCollection_\n    });\n\n    const synchronizers = options.createSynchronizers ?\n      options.createSynchronizers(this.map_, this.scene_, this.dataSourceCollection_) : [\n        new olcsRasterSynchronizer(this.map_, this.scene_),\n        new olcsVectorSynchronizer(this.map_, this.scene_),\n        new olcsOverlaySynchronizer(this.map_, this.scene_)\n      ];\n\n    // Assures correct canvas size after initialisation\n    this.handleResize_();\n\n    for (let i = synchronizers.length - 1; i >= 0; --i) {\n      synchronizers[i].synchronize();\n    }\n\n    /**\n     * Time of the last rendered frame, as returned by `performance.now()`.\n     * @type {number}\n     * @private\n     */\n    this.lastFrameTime_ = 0;\n\n    /**\n     * The identifier returned by `requestAnimationFrame`.\n     * @type {number|undefined}\n     * @private\n     */\n    this.renderId_ = undefined;\n\n    /**\n     * Target frame rate for the render loop.\n     * @type {number}\n     * @private\n     */\n    this.targetFrameRate_ = Number.POSITIVE_INFINITY;\n\n    /**\n     * If the Cesium render loop is being blocked.\n     * @type {boolean}\n     * @private\n     */\n    this.blockCesiumRendering_ = false;\n\n    /**\n     * If the warmup routine is active.\n     * @type {boolean}\n     * @private\n     */\n    this.warmingUp_ = false;\n\n    /**\n     * @type {ol.Feature}\n     * @private\n     */\n    this.trackedFeature_ = null;\n\n    /**\n     * @type {Cesium.Entity}\n     * @private\n     */\n    this.trackedEntity_ = null;\n\n    /**\n     * @type {Cesium.EntityView}\n     * @private\n     */\n    this.entityView_ = null;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.needTrackedEntityUpdate_ = false;\n\n    /**\n     * @type {!Cesium.BoundingSphere}\n     */\n    this.boundingSphereScratch_ = new Cesium.BoundingSphere();\n\n    const eventHelper = new Cesium.EventHelper();\n    eventHelper.add(this.scene_.postRender, OLCesium.prototype.updateTrackedEntity_, this);\n\n    // Cesium has a mechanism to prevent the camera to go under the terrain.\n    // Unfortunately, it is only active when all the terrain has been loaded, which:\n    // - does not prevent the camera to sink under terrain anymore;\n    // - introduce a jumping effect once all terrain has been loaded and the position of the camera is finally fixed.\n    // The property below enables a workaround found in the Camptocamp Cesium fork.\n    // See also https://github.com/AnalyticalGraphicsInc/cesium/issues/5999.\n    Cesium.Camera.enableSuspendTerrainAdjustment = false;\n  }\n\n  /**\n   * Render the Cesium scene.\n   * @private\n   */\n  render_() {\n    // if a call to `requestAnimationFrame` is pending, cancel it\n    if (this.renderId_ !== undefined) {\n      cancelAnimationFrame(this.renderId_);\n      this.renderId_ = undefined;\n    }\n\n    // only render if Cesium is enabled/warming and rendering hasn't been blocked\n    if ((this.enabled_ || this.warmingUp_) && !this.blockCesiumRendering_) {\n      this.renderId_ = requestAnimationFrame(this.onAnimationFrame_.bind(this));\n    }\n  }\n\n  /**\n   * Callback for `requestAnimationFrame`.\n   * @param {number} frameTime The frame time, from `performance.now()`.\n   * @private\n   */\n  onAnimationFrame_(frameTime) {\n    this.renderId_ = undefined;\n\n    // check if a frame was rendered within the target frame rate\n    const interval = 1000.0 / this.targetFrameRate_;\n    const delta = frameTime - this.lastFrameTime_;\n    if (delta < interval) {\n      // too soon, don't render yet\n      this.render_();\n      return;\n    }\n\n    // time to render a frame, save the time\n    this.lastFrameTime_ = frameTime;\n\n    const julianDate = this.time_();\n    this.scene_.initializeFrame();\n    this.handleResize_();\n    this.dataSourceDisplay_.update(julianDate);\n\n    // Update tracked entity\n    if (this.entityView_) {\n      const trackedEntity = this.trackedEntity_;\n      const trackedState = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);\n      if (trackedState === Cesium.BoundingSphereState.DONE) {\n        this.boundingSphereScratch_.radius = 1; // a radius of 1 is enough for tracking points\n        this.entityView_.update(julianDate, this.boundingSphereScratch_);\n      }\n    }\n\n    this.scene_.render(julianDate);\n    this.camera_.checkCameraChange();\n\n    // request the next render call after this one completes to ensure the browser doesn't get backed up\n    this.render_();\n  }\n\n  /**\n   * @private\n   */\n  updateTrackedEntity_() {\n    if (!this.needTrackedEntityUpdate_) {\n      return;\n    }\n\n    const trackedEntity = this.trackedEntity_;\n    const scene = this.scene_;\n\n    const state = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);\n    if (state === Cesium.BoundingSphereState.PENDING) {\n      return;\n    }\n\n    scene.screenSpaceCameraController.enableTilt = false;\n\n    const bs = state !== Cesium.BoundingSphereState.FAILED ? this.boundingSphereScratch_ : undefined;\n    if (bs) {\n      bs.radius = 1;\n    }\n    this.entityView_ = new Cesium.EntityView(trackedEntity, scene, scene.mapProjection.ellipsoid);\n    this.entityView_.update(this.time_(), bs);\n    this.needTrackedEntityUpdate_ = false;\n  }\n\n  /**\n   * @private\n   */\n  handleResize_() {\n    let width = this.canvas_.clientWidth;\n    let height = this.canvas_.clientHeight;\n\n    if (width === 0 | height === 0) {\n      // The canvas DOM element is not ready yet.\n      return;\n    }\n\n    if (width === this.canvasClientWidth_ &&\n        height === this.canvasClientHeight_ &&\n        !this.resolutionScaleChanged_) {\n      return;\n    }\n\n    let resolutionScale = this.resolutionScale_;\n    if (!olcsUtil.supportsImageRenderingPixelated()) {\n      resolutionScale *= window.devicePixelRatio || 1.0;\n    }\n    this.resolutionScaleChanged_ = false;\n\n    this.canvasClientWidth_ = width;\n    this.canvasClientHeight_ = height;\n\n    width *= resolutionScale;\n    height *= resolutionScale;\n\n    this.canvas_.width = width;\n    this.canvas_.height = height;\n    this.scene_.camera.frustum.aspectRatio = width / height;\n  }\n\n  /**\n   * @return {!olcs.Camera}\n   * @api\n   */\n  getCamera() {\n    return this.camera_;\n  }\n\n  /**\n   * @return {!ol.Map}\n   * @api\n   */\n  getOlMap() {\n    return this.map_;\n  }\n\n  /**\n   * @return {!ol.View}\n   * @api\n   */\n  getOlView() {\n    const view = this.map_.getView();\n    console.assert(view);\n    return view;\n  }\n\n  /**\n   * @return {!Cesium.Scene}\n   * @api\n   */\n  getCesiumScene() {\n    return this.scene_;\n  }\n\n  /**\n   * @return {!Cesium.DataSourceCollection}\n   * @api\n   */\n  getDataSources() {\n    return this.dataSourceCollection_;\n  }\n\n  /**\n   * @return {!Cesium.DataSourceDisplay}\n   * @api\n   */\n  getDataSourceDisplay() {\n    return this.dataSourceDisplay_;\n  }\n\n  /**\n   * @return {boolean}\n   * @api\n   */\n  getEnabled() {\n    return this.enabled_;\n  }\n\n  /**\n   * Enables/disables the Cesium.\n   * This modifies the visibility style of the container element.\n   * @param {boolean} enable\n   * @api\n   */\n  setEnabled(enable) {\n    if (this.enabled_ === enable) {\n      return;\n    }\n    this.enabled_ = enable;\n\n    // some Cesium operations are operating with canvas.clientWidth,\n    // so we can't remove it from DOM or even make display:none;\n    this.container_.style.visibility = this.enabled_ ? 'visible' : 'hidden';\n    let interactions;\n    if (this.enabled_) {\n      this.throwOnUnitializedMap_();\n      if (this.isOverMap_) {\n        interactions = this.map_.getInteractions();\n        interactions.forEach((el, i, arr) => {\n          this.pausedInteractions_.push(el);\n        });\n        interactions.clear();\n\n        this.map_.addInteraction = interaction => this.pausedInteractions_.push(interaction);\n        this.map_.removeInteraction = interaction =>\n          this.pausedInteractions_ = this.pausedInteractions_.filter(i => i !== interaction);\n\n        const rootGroup = this.map_.getLayerGroup();\n        if (rootGroup.getVisible()) {\n          this.hiddenRootGroup_ = rootGroup;\n          this.hiddenRootGroup_.setVisible(false);\n        }\n\n        this.map_.getOverlayContainer().classList.add('olcs-hideoverlay');\n        this.map_.getOverlayContainerStopEvent().classList.add('olcs-hideoverlay');\n      }\n\n      this.camera_.readFromView();\n      this.render_();\n    } else {\n      if (this.isOverMap_) {\n        interactions = this.map_.getInteractions();\n        this.pausedInteractions_.forEach((interaction) => {\n          interactions.push(interaction);\n        });\n        this.pausedInteractions_.length = 0;\n\n        this.map_.addInteraction = interaction => this.map_.getInteractions().push(interaction);\n        this.map_.removeInteraction = interaction => this.map_.getInteractions().remove(interaction);\n\n        this.map_.getOverlayContainer().classList.remove('olcs-hideoverlay');\n        this.map_.getOverlayContainerStopEvent().classList.remove('olcs-hideoverlay');\n        if (this.hiddenRootGroup_) {\n          this.hiddenRootGroup_.setVisible(true);\n          this.hiddenRootGroup_ = null;\n        }\n      }\n\n      this.camera_.updateView();\n    }\n  }\n\n  /**\n   * Preload Cesium so that it is ready when transitioning from 2D to 3D.\n   * @param {number} height Target height of the camera\n   * @param {number} timeout Milliseconds after which the warming will stop\n   * @api\n  */\n  warmUp(height, timeout) {\n    if (this.enabled_) {\n      // already enabled\n      return;\n    }\n    this.throwOnUnitializedMap_();\n    this.camera_.readFromView();\n    const ellipsoid = this.globe_.ellipsoid;\n    const csCamera = this.scene_.camera;\n    const position = ellipsoid.cartesianToCartographic(csCamera.position);\n    if (position.height < height) {\n      position.height = height;\n      csCamera.position = ellipsoid.cartographicToCartesian(position);\n    }\n\n    this.warmingUp_ = true;\n    this.render_();\n\n    setTimeout(() => {\n      this.warmingUp_ = false;\n    }, timeout);\n  }\n\n  /**\n   * Block Cesium rendering to save resources.\n   * @param {boolean} block True to block.\n   * @api\n  */\n  setBlockCesiumRendering(block) {\n    if (this.blockCesiumRendering_ !== block) {\n      this.blockCesiumRendering_ = block;\n\n      // reset the render loop\n      this.render_();\n    }\n  }\n\n  /**\n   * Render the globe only when necessary in order to save resources.\n   * Experimental.\n   * @api\n   */\n  enableAutoRenderLoop() {\n    if (!this.autoRenderLoop_) {\n      this.autoRenderLoop_ = new olcsAutoRenderLoop(this);\n    }\n  }\n\n  /**\n   * Get the autorender loop.\n   * @return {?olcs.AutoRenderLoop}\n   * @api\n  */\n  getAutoRenderLoop() {\n    return this.autoRenderLoop_;\n  }\n\n  /**\n   * The 3D Cesium globe is rendered in a canvas with two different dimensions:\n   * clientWidth and clientHeight which are the dimension on the screen and\n   * width and height which are the dimensions of the drawing buffer.\n   *\n   * By using a resolution scale lower than 1.0, it is possible to render the\n   * globe in a buffer smaller than the canvas client dimensions and improve\n   * performance, at the cost of quality.\n   *\n   * Pixel ratio should also be taken into account; by default, a device with\n   * pixel ratio of 2.0 will have a buffer surface 4 times bigger than the client\n   * surface.\n   *\n   * @param {number} value\n   * @this {olcs.OLCesium}\n   * @api\n   */\n  setResolutionScale(value) {\n    value = Math.max(0, value);\n    if (value !== this.resolutionScale_) {\n      this.resolutionScale_ = Math.max(0, value);\n      this.resolutionScaleChanged_ = true;\n      if (this.autoRenderLoop_) {\n        this.autoRenderLoop_.restartRenderLoop();\n      }\n    }\n  }\n\n  /**\n   * Set the target frame rate for the renderer. Set to `Number.POSITIVE_INFINITY`\n   * to render as quickly as possible.\n   * @param {number} value The frame rate, in frames per second.\n   * @api\n   */\n  setTargetFrameRate(value) {\n    if (this.targetFrameRate_ !== value) {\n      this.targetFrameRate_ = value;\n\n      // reset the render loop\n      this.render_();\n    }\n  }\n\n  /**\n   * Check if OpenLayers map is not properly initialized.\n   * @private\n   */\n  throwOnUnitializedMap_() {\n    const map = this.map_;\n    const view = map.getView();\n    const center = view.getCenter();\n    if (!view.isDef() || isNaN(center[0]) || isNaN(center[1])) {\n      throw new Error(`The OpenLayers map is not properly initialized: ${center} / ${view.getResolution()}`);\n    }\n  }\n}\n\n\nObject.defineProperties(OLCesium.prototype, {\n  'trackedFeature': {\n    'get': /** @this {olcs.OLCesium} */ function() {\n      return this.trackedFeature_;\n    },\n    'set': /** @this {olcs.OLCesium} */ function(feature) {\n      if (this.trackedFeature_ !== feature) {\n\n        const scene = this.scene_;\n\n        //Stop tracking\n        if (!feature || !feature.getGeometry()) {\n          this.needTrackedEntityUpdate_ = false;\n          scene.screenSpaceCameraController.enableTilt = true;\n\n          if (this.trackedEntity_) {\n            this.dataSourceDisplay_.defaultDataSource.entities.remove(this.trackedEntity_);\n          }\n          this.trackedEntity_ = null;\n          this.trackedFeature_ = null;\n          this.entityView_ = null;\n          scene.camera.lookAtTransform(Cesium.Matrix4.IDENTITY);\n          return;\n        }\n\n        this.trackedFeature_ = feature;\n\n        //We can't start tracking immediately, so we set a flag and start tracking\n        //when the bounding sphere is ready (most likely next frame).\n        this.needTrackedEntityUpdate_ = true;\n\n        const to4326Transform = this.to4326Transform_;\n        const toCesiumPosition = function() {\n          const geometry = feature.getGeometry();\n          console.assert(geometry instanceof olGeomPoint);\n          const coo = geometry.getCoordinates();\n          const coo4326 = to4326Transform(coo, undefined, coo.length);\n          return olcsCore.ol4326CoordinateToCesiumCartesian(coo4326);\n        };\n\n        // Create an invisible point entity for tracking.\n        // It is independant from the primitive/geometry created by the vector synchronizer.\n        const options = {\n          'position': new Cesium.CallbackProperty((time, result) => toCesiumPosition(), false),\n          'point': {\n            'pixelSize': 1,\n            'color': Cesium.Color.TRANSPARENT\n          }\n        };\n\n        this.trackedEntity_ = this.dataSourceDisplay_.defaultDataSource.entities.add(options);\n      }\n    }\n  }\n});\n\n\nexport default OLCesium;\n","/**\n * @module ol/functions\n */\n\n/**\n * Always returns true.\n * @returns {boolean} true.\n */\nexport function TRUE() {\n  return true;\n}\n\n/**\n * Always returns false.\n * @returns {boolean} false.\n */\nexport function FALSE() {\n  return false;\n}\n\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {void} Nothing.\n */\nexport function VOID() {}\n","/**\n * @module ol/Object\n */\nimport {getUid} from './util.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport Event from './events/Event.js';\nimport {assign} from './obj.js';\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nexport class ObjectEvent extends Event {\n\n  /**\n   * @param {string} type The event type.\n   * @param {string} key The property name.\n   * @param {*} oldValue The old value for `key`.\n   */\n  constructor(type, key, oldValue) {\n    super(type);\n\n    /**\n     * The name of the property whose value is changing.\n     * @type {string}\n     * @api\n     */\n    this.key = key;\n\n    /**\n     * The old value. To get the new value use `e.target.get(e.key)` where\n     * `e` is the event object.\n     * @type {*}\n     * @api\n     */\n    this.oldValue = oldValue;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nclass BaseObject extends Observable {\n\n  /**\n   * @param {Object<string, *>=} opt_values An object with key-value pairs.\n   */\n  constructor(opt_values) {\n    super();\n\n    // Call {@link module:ol/util~getUid} to ensure that the order of objects' ids is\n    // the same as the order in which they were created.  This also helps to\n    // ensure that object properties are always added in the same order, which\n    // helps many JavaScript engines generate faster code.\n    getUid(this);\n\n    /**\n     * @private\n     * @type {!Object<string, *>}\n     */\n    this.values_ = {};\n\n    if (opt_values !== undefined) {\n      this.setProperties(opt_values);\n    }\n  }\n\n  /**\n   * Gets a value.\n   * @param {string} key Key name.\n   * @return {*} Value.\n   * @api\n   */\n  get(key) {\n    let value;\n    if (this.values_.hasOwnProperty(key)) {\n      value = this.values_[key];\n    }\n    return value;\n  }\n\n  /**\n   * Get a list of object property names.\n   * @return {Array<string>} List of property names.\n   * @api\n   */\n  getKeys() {\n    return Object.keys(this.values_);\n  }\n\n  /**\n   * Get an object of all property names and values.\n   * @return {Object<string, *>} Object.\n   * @api\n   */\n  getProperties() {\n    return assign({}, this.values_);\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {*} oldValue Old value.\n   */\n  notify(key, oldValue) {\n    let eventType;\n    eventType = getChangeEventType(key);\n    this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    eventType = ObjectEventType.PROPERTYCHANGE;\n    this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n  }\n\n  /**\n   * Sets a value.\n   * @param {string} key Key name.\n   * @param {*} value Value.\n   * @param {boolean=} opt_silent Update without triggering an event.\n   * @api\n   */\n  set(key, value, opt_silent) {\n    if (opt_silent) {\n      this.values_[key] = value;\n    } else {\n      const oldValue = this.values_[key];\n      this.values_[key] = value;\n      if (oldValue !== value) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n\n  /**\n   * Sets a collection of key-value pairs.  Note that this changes any existing\n   * properties and adds new ones (it does not remove any existing properties).\n   * @param {Object<string, *>} values Values.\n   * @param {boolean=} opt_silent Update without triggering an event.\n   * @api\n   */\n  setProperties(values, opt_silent) {\n    for (const key in values) {\n      this.set(key, values[key], opt_silent);\n    }\n  }\n\n  /**\n   * Unsets a property.\n   * @param {string} key Key name.\n   * @param {boolean=} opt_silent Unset without triggering an event.\n   * @api\n   */\n  unset(key, opt_silent) {\n    if (key in this.values_) {\n      const oldValue = this.values_[key];\n      delete this.values_[key];\n      if (!opt_silent) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n}\n\n\n/**\n * @type {Object<string, string>}\n */\nconst changeEventTypeCache = {};\n\n\n/**\n * @param {string} key Key name.\n * @return {string} Change name.\n */\nexport function getChangeEventType(key) {\n  return changeEventTypeCache.hasOwnProperty(key) ?\n    changeEventTypeCache[key] :\n    (changeEventTypeCache[key] = 'change:' + key);\n}\n\n\nexport default BaseObject;\n","/**\n * @module ol/style/Fill\n */\nimport {getUid} from '../util.js';\nimport {asString} from '../color.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n\n\n/**\n * @classdesc\n * Set fill style for vector features.\n * @api\n */\nclass Fill {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n     */\n    this.color_ = options.color !== undefined ? options.color : null;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n   * @return {Fill} The cloned style.\n   * @api\n   */\n  clone() {\n    const color = this.getColor();\n    return new Fill({\n      color: Array.isArray(color) ? color.slice() : color || undefined\n    });\n  }\n\n  /**\n   * Get the fill color.\n   * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Set the color.\n   *\n   * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n   * @api\n   */\n  setColor(color) {\n    this.color_ = color;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * @return {string} The checksum.\n   */\n  getChecksum() {\n    if (this.checksum_ === undefined) {\n      const color = this.color_;\n      if (color) {\n        if (Array.isArray(color) || typeof color == 'string') {\n          this.checksum_ = 'f' + asString(/** @type {import(\"../color.js\").Color|string} */ (color));\n        } else {\n          this.checksum_ = getUid(this.color_);\n        }\n      } else {\n        this.checksum_ = 'f-';\n      }\n    }\n\n    return this.checksum_;\n  }\n}\n\nexport default Fill;\n","/**\n * @module ol/Feature\n */\nimport {assert} from './asserts.js';\nimport {listen, unlisten, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\n\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n */\nclass Feature extends BaseObject {\n  /**\n   * @param {import(\"./geom/Geometry.js\").default|Object<string, *>=} opt_geometryOrProperties\n   *     You may pass a Geometry object directly, or an object literal containing\n   *     properties. If you pass an object literal, you may include a Geometry\n   *     associated with a `geometry` key.\n   */\n  constructor(opt_geometryOrProperties) {\n\n    super();\n\n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this.id_ = undefined;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.geometryName_ = 'geometry';\n\n    /**\n     * User provided style.\n     * @private\n     * @type {import(\"./style/Style.js\").StyleLike}\n     */\n    this.style_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n     */\n    this.styleFunction_ = undefined;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.geometryChangeKey_ = null;\n\n    listen(\n      this, getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n\n    if (opt_geometryOrProperties) {\n      if (typeof /** @type {?} */ (opt_geometryOrProperties).getSimplifiedGeometry === 'function') {\n        const geometry = /** @type {import(\"./geom/Geometry.js\").default} */ (opt_geometryOrProperties);\n        this.setGeometry(geometry);\n      } else {\n        /** @type {Object<string, *>} */\n        const properties = opt_geometryOrProperties;\n        this.setProperties(properties);\n      }\n    }\n  }\n\n  /**\n   * Clone this feature. If the original feature has a geometry it\n   * is also cloned. The feature id is not set in the clone.\n   * @return {Feature} The clone.\n   * @api\n   */\n  clone() {\n    const clone = new Feature(this.getProperties());\n    clone.setGeometryName(this.getGeometryName());\n    const geometry = this.getGeometry();\n    if (geometry) {\n      clone.setGeometry(geometry.clone());\n    }\n    const style = this.getStyle();\n    if (style) {\n      clone.setStyle(style);\n    }\n    return clone;\n  }\n\n  /**\n   * Get the feature's default geometry.  A feature may have any number of named\n   * geometries.  The \"default\" geometry (the one that is rendered by default) is\n   * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n   * @return {import(\"./geom/Geometry.js\").default|undefined} The default geometry for the feature.\n   * @api\n   * @observable\n   */\n  getGeometry() {\n    return (\n      /** @type {import(\"./geom/Geometry.js\").default|undefined} */ (this.get(this.geometryName_))\n    );\n  }\n\n  /**\n   * Get the feature identifier.  This is a stable identifier for the feature and\n   * is either set when reading data from a remote source or set explicitly by\n   * calling {@link module:ol/Feature~Feature#setId}.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id_;\n  }\n\n  /**\n   * Get the name of the feature's default geometry.  By default, the default\n   * geometry is named `geometry`.\n   * @return {string} Get the property name associated with the default geometry\n   *     for this feature.\n   * @api\n   */\n  getGeometryName() {\n    return this.geometryName_;\n  }\n\n  /**\n   * Get the feature's style. Will return what was provided to the\n   * {@link module:ol/Feature~Feature#setStyle} method.\n   * @return {import(\"./style/Style.js\").StyleLike} The feature style.\n   * @api\n   */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n   * Get the feature's style function.\n   * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n   * representing the current style of this feature.\n   * @api\n   */\n  getStyleFunction() {\n    return this.styleFunction_;\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChanged_() {\n    if (this.geometryChangeKey_) {\n      unlistenByKey(this.geometryChangeKey_);\n      this.geometryChangeKey_ = null;\n    }\n    const geometry = this.getGeometry();\n    if (geometry) {\n      this.geometryChangeKey_ = listen(geometry,\n        EventType.CHANGE, this.handleGeometryChange_, this);\n    }\n    this.changed();\n  }\n\n  /**\n   * Set the default geometry for the feature.  This will update the property\n   * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n   * @param {import(\"./geom/Geometry.js\").default|undefined} geometry The new geometry.\n   * @api\n   * @observable\n   */\n  setGeometry(geometry) {\n    this.set(this.geometryName_, geometry);\n  }\n\n  /**\n   * Set the style for the feature.  This can be a single style object, an array\n   * of styles, or a function that takes a resolution and returns an array of\n   * styles. If it is `null` the feature has no style (a `null` style).\n   * @param {import(\"./style/Style.js\").StyleLike} style Style for this feature.\n   * @api\n   * @fires module:ol/events/Event~Event#event:change\n   */\n  setStyle(style) {\n    this.style_ = style;\n    this.styleFunction_ = !style ? undefined : createStyleFunction(style);\n    this.changed();\n  }\n\n  /**\n   * Set the feature id.  The feature id is considered stable and may be used when\n   * requesting features or comparing identifiers returned from a remote source.\n   * The feature id can be used with the\n   * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n   * @param {number|string|undefined} id The feature id.\n   * @api\n   * @fires module:ol/events/Event~Event#event:change\n   */\n  setId(id) {\n    this.id_ = id;\n    this.changed();\n  }\n\n  /**\n   * Set the property name to be used when getting the feature's default geometry.\n   * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n   * this name will be returned.\n   * @param {string} name The property name of the default geometry.\n   * @api\n   */\n  setGeometryName(name) {\n    unlisten(\n      this, getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n    this.geometryName_ = name;\n    listen(\n      this, getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n    this.handleGeometryChanged_();\n  }\n}\n\n\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n  if (typeof obj === 'function') {\n    return obj;\n  } else {\n    /**\n     * @type {Array<import(\"./style/Style.js\").default>}\n     */\n    let styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      assert(typeof /** @type {?} */ (obj).getZIndex === 'function',\n        41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n      const style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n      styles = [style];\n    }\n    return function() {\n      return styles;\n    };\n  }\n}\nexport default Feature;\n","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n\n  /**\n   * A true single click with no dragging and no double click. Note that this\n   * event is delayed by 250 ms to ensure that it is not a double click.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n   * @api\n   */\n  SINGLECLICK: 'singleclick',\n\n  /**\n   * A click with no dragging. A double click will fire two of this.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n   * @api\n   */\n  CLICK: EventType.CLICK,\n\n  /**\n   * A true double click, with no dragging.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n   * @api\n   */\n  DBLCLICK: EventType.DBLCLICK,\n\n  /**\n   * Triggered when a pointer is dragged.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n   * @api\n   */\n  POINTERDRAG: 'pointerdrag',\n\n  /**\n   * Triggered when a pointer is moved. Note that on touch devices this is\n   * triggered when the map is panned, so is not the same as mousemove.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n   * @api\n   */\n  POINTERMOVE: 'pointermove',\n\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel'\n};\n","/**\n * @module ol/geom/Point\n */\nimport {createOrUpdateFromCoordinate, containsXY} from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {deflateCoordinate} from './flat/deflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Point geometry.\n *\n * @api\n */\nclass Point extends SimpleGeometry {\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinates Coordinates.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n    super();\n    this.setCoordinates(coordinates, opt_layout);\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!Point} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const point = new Point(this.flatCoordinates.slice(), this.layout);\n    return point;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    const flatCoordinates = this.flatCoordinates;\n    const squaredDistance = squaredDx(x, y, flatCoordinates[0], flatCoordinates[1]);\n    if (squaredDistance < minSquaredDistance) {\n      const stride = this.stride;\n      for (let i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[i];\n      }\n      closestPoint.length = stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n\n  /**\n   * Return the coordinate of the point.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return !this.flatCoordinates ? [] : this.flatCoordinates.slice();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    return createOrUpdateFromCoordinate(this.flatCoordinates, extent);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.POINT;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return containsXY(extent, this.flatCoordinates[0], this.flatCoordinates[1]);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinate(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default Point;\n","/**\n * @module ol/interaction/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ACTIVE: 'active'\n};\n","/**\n * @module ol/interaction/Interaction\n */\nimport BaseObject from '../Object.js';\nimport {easeOut, linear} from '../easing.js';\nimport InteractionProperty from './Property.js';\nimport {clamp} from '../math.js';\n\n\n/**\n * Object literal with config options for interactions.\n * @typedef {Object} InteractionOptions\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} handleEvent\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. If the function returns a falsy value, propagation of\n * the event to other interactions in the map's interactions chain will be\n * prevented (this includes functions with no explicit return).\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * User actions that change the state of the map. Some are similar to controls,\n * but are not associated with a DOM element.\n * For example, {@link module:ol/interaction/KeyboardZoom~KeyboardZoom} is\n * functionally the same as {@link module:ol/control/Zoom~Zoom}, but triggered\n * by a keyboard event not a button element event.\n * Although interactions do not have a DOM element, some of them do render\n * vectors and so are visible on the screen.\n * @api\n */\nclass Interaction extends BaseObject {\n  /**\n   * @param {InteractionOptions} options Options.\n   */\n  constructor(options) {\n    super();\n\n    if (options.handleEvent) {\n      this.handleEvent = options.handleEvent;\n    }\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").default}\n     */\n    this.map_ = null;\n\n    this.setActive(true);\n  }\n\n  /**\n   * Return whether the interaction is currently active.\n   * @return {boolean} `true` if the interaction is active, `false` otherwise.\n   * @observable\n   * @api\n   */\n  getActive() {\n    return /** @type {boolean} */ (this.get(InteractionProperty.ACTIVE));\n  }\n\n  /**\n   * Get the map associated with this interaction.\n   * @return {import(\"../PluggableMap.js\").default} Map.\n   * @api\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event}.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   * @return {boolean} `false` to stop event propagation.\n   * @api\n   */\n  handleEvent(mapBrowserEvent) {\n    return true;\n  }\n\n  /**\n   * Activate or deactivate the interaction.\n   * @param {boolean} active Active.\n   * @observable\n   * @api\n   */\n  setActive(active) {\n    this.set(InteractionProperty.ACTIVE, active);\n  }\n\n  /**\n   * Remove the interaction from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  setMap(map) {\n    this.map_ = map;\n  }\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {import(\"../coordinate.js\").Coordinate} delta Delta.\n * @param {number=} opt_duration Duration.\n */\nexport function pan(view, delta, opt_duration) {\n  const currentCenter = view.getCenter();\n  if (currentCenter) {\n    const center = view.constrainCenter(\n      [currentCenter[0] + delta[0], currentCenter[1] + delta[1]]);\n    if (opt_duration) {\n      view.animate({\n        duration: opt_duration,\n        easing: linear,\n        center: center\n      });\n    } else {\n      view.setCenter(center);\n    }\n  }\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number|undefined} rotation Rotation.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function rotate(view, rotation, opt_anchor, opt_duration) {\n  rotation = view.constrainRotation(rotation, 0);\n  rotateWithoutConstraints(view, rotation, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number|undefined} rotation Rotation.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function rotateWithoutConstraints(view, rotation, opt_anchor, opt_duration) {\n  if (rotation !== undefined) {\n    const currentRotation = view.getRotation();\n    const currentCenter = view.getCenter();\n    if (currentRotation !== undefined && currentCenter && opt_duration > 0) {\n      view.animate({\n        rotation: rotation,\n        anchor: opt_anchor,\n        duration: opt_duration,\n        easing: easeOut\n      });\n    } else {\n      view.rotate(rotation, opt_anchor);\n    }\n  }\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number|undefined} resolution Resolution to go to.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n * @param {number=} opt_direction Zooming direction; > 0 indicates\n *     zooming out, in which case the constraints system will select\n *     the largest nearest resolution; < 0 indicates zooming in, in\n *     which case the constraints system will select the smallest\n *     nearest resolution; == 0 indicates that the zooming direction\n *     is unknown/not relevant, in which case the constraints system\n *     will select the nearest resolution. If not defined 0 is\n *     assumed.\n */\nexport function zoom(view, resolution, opt_anchor, opt_duration, opt_direction) {\n  resolution = view.constrainResolution(resolution, 0, opt_direction);\n  zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number} delta Delta from previous zoom level.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function zoomByDelta(view, delta, opt_anchor, opt_duration) {\n  const currentResolution = view.getResolution();\n  let resolution = view.constrainResolution(currentResolution, delta, 0);\n\n  if (resolution !== undefined) {\n    const resolutions = view.getResolutions();\n    resolution = clamp(\n      resolution,\n      view.getMinResolution() || resolutions[resolutions.length - 1],\n      view.getMaxResolution() || resolutions[0]);\n  }\n\n  // If we have a constraint on center, we need to change the anchor so that the\n  // new center is within the extent. We first calculate the new center, apply\n  // the constraint to it, and then calculate back the anchor\n  if (opt_anchor && resolution !== undefined && resolution !== currentResolution) {\n    const currentCenter = view.getCenter();\n    let center = view.calculateCenterZoom(resolution, opt_anchor);\n    center = view.constrainCenter(center);\n\n    opt_anchor = [\n      (resolution * currentCenter[0] - currentResolution * center[0]) /\n          (resolution - currentResolution),\n      (resolution * currentCenter[1] - currentResolution * center[1]) /\n          (resolution - currentResolution)\n    ];\n  }\n\n  zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number|undefined} resolution Resolution to go to.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration) {\n  if (resolution) {\n    const currentResolution = view.getResolution();\n    const currentCenter = view.getCenter();\n    if (currentResolution !== undefined && currentCenter &&\n        resolution !== currentResolution && opt_duration) {\n      view.animate({\n        resolution: resolution,\n        anchor: opt_anchor,\n        duration: opt_duration,\n        easing: easeOut\n      });\n    } else {\n      if (opt_anchor) {\n        const center = view.calculateCenterZoom(resolution, opt_anchor);\n        view.setCenter(center);\n      }\n      view.setResolution(resolution);\n    }\n  }\n}\n\nexport default Interaction;\n","/**\n * @module ol/has\n */\n\nconst ua = typeof navigator !== 'undefined' ?\n  navigator.userAgent.toLowerCase() : '';\n\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport const FIREFOX = ua.indexOf('firefox') !== -1;\n\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport const SAFARI = ua.indexOf('safari') !== -1 && ua.indexOf('chrom') == -1;\n\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport const WEBKIT = ua.indexOf('webkit') !== -1 && ua.indexOf('edge') == -1;\n\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport const MAC = ua.indexOf('macintosh') !== -1;\n\n\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport const DEVICE_PIXEL_RATIO = window.devicePixelRatio || 1;\n\n\n/**\n * True if the browser's Canvas implementation implements {get,set}LineDash.\n * @type {boolean}\n */\nexport const CANVAS_LINE_DASH = function() {\n  let has = false;\n  try {\n    has = !!document.createElement('canvas').getContext('2d').setLineDash;\n  } catch (e) {\n    // pass\n  }\n  return has;\n}();\n\n\n/**\n * Is HTML5 geolocation supported in the current browser?\n * @const\n * @type {boolean}\n * @api\n */\nexport const GEOLOCATION = 'geolocation' in navigator;\n\n\n/**\n * True if browser supports touch events.\n * @const\n * @type {boolean}\n * @api\n */\nexport const TOUCH = 'ontouchstart' in window;\n\n\n/**\n * True if browser supports pointer events.\n * @const\n * @type {boolean}\n */\nexport const POINTER = 'PointerEvent' in window;\n\n\n/**\n * True if browser supports ms pointer events (IE 10).\n * @const\n * @type {boolean}\n */\nexport const MSPOINTER = !!(navigator.msPointerEnabled);\n\n\nexport {HAS as WEBGL} from './webgl.js';\n","/**\n * @module ol/events/Event\n */\n\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * See https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface.\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/Target~Target}.\n */\nclass Event {\n\n  /**\n   * @param {string} type Type.\n   */\n  constructor(type) {\n\n    /**\n     * @type {boolean}\n     */\n    this.propagationStopped;\n\n    /**\n     * The event type.\n     * @type {string}\n     * @api\n     */\n    this.type = type;\n\n    /**\n     * The event target.\n     * @type {Object}\n     * @api\n     */\n    this.target = null;\n  }\n\n  /**\n   * Stop event propagation.\n   * @api\n   */\n  preventDefault() {\n    this.propagationStopped = true;\n  }\n\n  /**\n   * Stop event propagation.\n   * @api\n   */\n  stopPropagation() {\n    this.propagationStopped = true;\n  }\n\n}\n\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function stopPropagation(evt) {\n  evt.stopPropagation();\n}\n\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function preventDefault(evt) {\n  evt.preventDefault();\n}\n\nexport default Event;\n","/**\n * @module ol/featureloader\n */\nimport {VOID} from './functions.js';\nimport FormatType from './format/FormatType.js';\n\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * load features.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area to be loaded,\n * a `{number}` representing the resolution (map units per pixel) and an\n * {@link module:ol/proj/Projection} for the projection  as\n * arguments. `this` within the function is bound to the\n * {@link module:ol/source/Vector} it's called from.\n *\n * The function is responsible for loading the features and adding them to the\n * source.\n * @typedef {function(this:(import(\"./source/Vector\").default|import(\"./VectorTile.js\").default), import(\"./extent.js\").Extent, number,\n *                    import(\"./proj/Projection.js\").default)} FeatureLoader\n * @api\n */\n\n\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * get the url to load features from.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area\n * to be loaded, a `{number}` representing the resolution (map units per pixel)\n * and an {@link module:ol/proj/Projection} for the projection  as\n * arguments and returns a `{string}` representing the URL.\n * @typedef {function(import(\"./extent.js\").Extent, number, import(\"./proj/Projection.js\").default): string} FeatureUrlFunction\n * @api\n */\n\n\n/**\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @param {function(this:import(\"./VectorTile.js\").default, Array<import(\"./Feature.js\").default>, import(\"./proj/Projection.js\").default, import(\"./extent.js\").Extent)|function(this:import(\"./source/Vector\").default, Array<import(\"./Feature.js\").default>)} success\n *     Function called with the loaded features and optionally with the data\n *     projection. Called with the vector tile or source as `this`.\n * @param {function(this:import(\"./VectorTile.js\").default)|function(this:import(\"./source/Vector\").default)} failure\n *     Function called when loading failed. Called with the vector tile or\n *     source as `this`.\n * @return {FeatureLoader} The feature loader.\n */\nexport function loadFeaturesXhr(url, format, success, failure) {\n  return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @this {import(\"./source/Vector\").default|import(\"./VectorTile.js\").default}\n     */\n    function(extent, resolution, projection) {\n      const xhr = new XMLHttpRequest();\n      xhr.open('GET',\n        typeof url === 'function' ? url(extent, resolution, projection) : url,\n        true);\n      if (format.getType() == FormatType.ARRAY_BUFFER) {\n        xhr.responseType = 'arraybuffer';\n      }\n      /**\n       * @param {Event} event Event.\n       * @private\n       */\n      xhr.onload = function(event) {\n        // status will be 0 for file:// urls\n        if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {\n          const type = format.getType();\n          /** @type {Document|Node|Object|string|undefined} */\n          let source;\n          if (type == FormatType.JSON || type == FormatType.TEXT) {\n            source = xhr.responseText;\n          } else if (type == FormatType.XML) {\n            source = xhr.responseXML;\n            if (!source) {\n              source = new DOMParser().parseFromString(xhr.responseText, 'application/xml');\n            }\n          } else if (type == FormatType.ARRAY_BUFFER) {\n            source = /** @type {ArrayBuffer} */ (xhr.response);\n          }\n          if (source) {\n            success.call(this, format.readFeatures(source,\n              {featureProjection: projection}),\n            format.readProjection(source), format.getLastExtent());\n          } else {\n            failure.call(this);\n          }\n        } else {\n          failure.call(this);\n        }\n      }.bind(this);\n      /**\n       * @private\n       */\n      xhr.onerror = function() {\n        failure.call(this);\n      }.bind(this);\n      xhr.send();\n    }\n  );\n}\n\n\n/**\n * Create an XHR feature loader for a `url` and `format`. The feature loader\n * loads features (with XHR), parses the features, and adds them to the\n * vector source.\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @return {FeatureLoader} The feature loader.\n * @api\n */\nexport function xhr(url, format) {\n  return loadFeaturesXhr(url, format,\n    /**\n     * @param {Array<import(\"./Feature.js\").default>} features The loaded features.\n     * @param {import(\"./proj/Projection.js\").default} dataProjection Data\n     * projection.\n     * @this {import(\"./source/Vector\").default|import(\"./VectorTile.js\").default}\n     */\n    function(features, dataProjection) {\n      const sourceOrTile = /** @type {?} */ (this);\n      if (typeof sourceOrTile.addFeatures === 'function') {\n        /** @type {import(\"./source/Vector\").default} */ (sourceOrTile).addFeatures(features);\n      }\n    }, /* FIXME handle error */ VOID);\n}\n","/**\n * @module ol/loadingstrategy\n */\n\n\n/**\n * Strategy function for loading all features with a single request.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function all(extent, resolution) {\n  return [[-Infinity, -Infinity, Infinity, Infinity]];\n}\n\n\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function bbox(extent, resolution) {\n  return [extent];\n}\n\n\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {function(import(\"./extent.js\").Extent, number): Array<import(\"./extent.js\").Extent>} Loading strategy.\n * @api\n */\nexport function tile(tileGrid) {\n  return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @return {Array<import(\"./extent.js\").Extent>} Extents.\n     */\n    function(extent, resolution) {\n      const z = tileGrid.getZForResolution(resolution);\n      const tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n      /** @type {Array<import(\"./extent.js\").Extent>} */\n      const extents = [];\n      /** @type {import(\"./tilecoord.js\").TileCoord} */\n      const tileCoord = [z, 0, 0];\n      for (tileCoord[1] = tileRange.minX; tileCoord[1] <= tileRange.maxX; ++tileCoord[1]) {\n        for (tileCoord[2] = tileRange.minY; tileCoord[2] <= tileRange.maxY; ++tileCoord[2]) {\n          extents.push(tileGrid.getTileCoordExtent(tileCoord));\n        }\n      }\n      return extents;\n    }\n  );\n}\n","/**\n * @module ol/source/VectorEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a feature is added to the source.\n   * @event ol/source/Vector.VectorSourceEvent#addfeature\n   * @api\n   */\n  ADDFEATURE: 'addfeature',\n\n  /**\n   * Triggered when a feature is updated.\n   * @event ol/source/Vector.VectorSourceEvent#changefeature\n   * @api\n   */\n  CHANGEFEATURE: 'changefeature',\n\n  /**\n   * Triggered when the clear method is called on the source.\n   * @event ol/source/Vector.VectorSourceEvent#clear\n   * @api\n   */\n  CLEAR: 'clear',\n\n  /**\n   * Triggered when a feature is removed from the source.\n   * See {@link module:ol/source/Vector#clear source.clear()} for exceptions.\n   * @event ol/source/Vector.VectorSourceEvent#removefeature\n   * @api\n   */\n  REMOVEFEATURE: 'removefeature'\n};\n","/**\n * @module ol/structs/RBush\n */\nimport {getUid} from '../util.js';\nimport rbush from 'rbush';\nimport {createOrUpdate, equals} from '../extent.js';\nimport {isEmpty} from '../obj.js';\n\n/**\n * @typedef {Object} Entry\n * @property {number} minX\n * @property {number} minY\n * @property {number} maxX\n * @property {number} maxY\n * @property {Object} [value]\n */\n\n/**\n * @classdesc\n * Wrapper around the RBush by Vladimir Agafonkin.\n * See https://github.com/mourner/rbush.\n *\n * @template T\n */\nclass RBush {\n  /**\n   * @param {number=} opt_maxEntries Max entries.\n   */\n  constructor(opt_maxEntries) {\n\n    /**\n     * @private\n     */\n    this.rbush_ = rbush(opt_maxEntries, undefined);\n\n    /**\n     * A mapping between the objects added to this rbush wrapper\n     * and the objects that are actually added to the internal rbush.\n     * @private\n     * @type {Object<string, Entry>}\n     */\n    this.items_ = {};\n\n  }\n\n  /**\n   * Insert a value into the RBush.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {T} value Value.\n   */\n  insert(extent, value) {\n    /** @type {Entry} */\n    const item = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3],\n      value: value\n    };\n\n    this.rbush_.insert(item);\n    this.items_[getUid(value)] = item;\n  }\n\n\n  /**\n   * Bulk-insert values into the RBush.\n   * @param {Array<import(\"../extent.js\").Extent>} extents Extents.\n   * @param {Array<T>} values Values.\n   */\n  load(extents, values) {\n    const items = new Array(values.length);\n    for (let i = 0, l = values.length; i < l; i++) {\n      const extent = extents[i];\n      const value = values[i];\n\n      /** @type {Entry} */\n      const item = {\n        minX: extent[0],\n        minY: extent[1],\n        maxX: extent[2],\n        maxY: extent[3],\n        value: value\n      };\n      items[i] = item;\n      this.items_[getUid(value)] = item;\n    }\n    this.rbush_.load(items);\n  }\n\n\n  /**\n   * Remove a value from the RBush.\n   * @param {T} value Value.\n   * @return {boolean} Removed.\n   */\n  remove(value) {\n    const uid = getUid(value);\n\n    // get the object in which the value was wrapped when adding to the\n    // internal rbush. then use that object to do the removal.\n    const item = this.items_[uid];\n    delete this.items_[uid];\n    return this.rbush_.remove(item) !== null;\n  }\n\n\n  /**\n   * Update the extent of a value in the RBush.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {T} value Value.\n   */\n  update(extent, value) {\n    const item = this.items_[getUid(value)];\n    const bbox = [item.minX, item.minY, item.maxX, item.maxY];\n    if (!equals(bbox, extent)) {\n      this.remove(value);\n      this.insert(extent, value);\n    }\n  }\n\n\n  /**\n   * Return all values in the RBush.\n   * @return {Array<T>} All.\n   */\n  getAll() {\n    const items = this.rbush_.all();\n    return items.map(function(item) {\n      return item.value;\n    });\n  }\n\n\n  /**\n   * Return all values in the given extent.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {Array<T>} All in extent.\n   */\n  getInExtent(extent) {\n    /** @type {Entry} */\n    const bbox = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3]\n    };\n    const items = this.rbush_.search(bbox);\n    return items.map(function(item) {\n      return item.value;\n    });\n  }\n\n\n  /**\n   * Calls a callback function with each value in the tree.\n   * If the callback returns a truthy value, this value is returned without\n   * checking the rest of the tree.\n   * @param {function(this: S, T): *} callback Callback.\n   * @param {S=} opt_this The object to use as `this` in `callback`.\n   * @return {*} Callback return value.\n   * @template S\n   */\n  forEach(callback, opt_this) {\n    return this.forEach_(this.getAll(), callback, opt_this);\n  }\n\n\n  /**\n   * Calls a callback function with each value in the provided extent.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(this: S, T): *} callback Callback.\n   * @param {S=} opt_this The object to use as `this` in `callback`.\n   * @return {*} Callback return value.\n   * @template S\n   */\n  forEachInExtent(extent, callback, opt_this) {\n    return this.forEach_(this.getInExtent(extent), callback, opt_this);\n  }\n\n\n  /**\n   * @param {Array<T>} values Values.\n   * @param {function(this: S, T): *} callback Callback.\n   * @param {S=} opt_this The object to use as `this` in `callback`.\n   * @private\n   * @return {*} Callback return value.\n   * @template S\n   */\n  forEach_(values, callback, opt_this) {\n    let result;\n    for (let i = 0, l = values.length; i < l; i++) {\n      result = callback.call(opt_this, values[i]);\n      if (result) {\n        return result;\n      }\n    }\n    return result;\n  }\n\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return isEmpty(this.items_);\n  }\n\n\n  /**\n   * Remove all values from the RBush.\n   */\n  clear() {\n    this.rbush_.clear();\n    this.items_ = {};\n  }\n\n\n  /**\n   * @param {import(\"../extent.js\").Extent=} opt_extent Extent.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   */\n  getExtent(opt_extent) {\n    const data = this.rbush_.toJSON();\n    return createOrUpdate(data.minX, data.minY, data.maxX, data.maxY, opt_extent);\n  }\n\n\n  /**\n   * @param {RBush} rbush R-Tree.\n   */\n  concat(rbush) {\n    this.rbush_.load(rbush.rbush_.all());\n    for (const i in rbush.items_) {\n      this.items_[i] = rbush.items_[i];\n    }\n  }\n\n}\n\n\nexport default RBush;\n","/**\n * @module ol/source/Vector\n */\n\nimport {getUid} from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport {extend} from '../array.js';\nimport {assert} from '../asserts.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, equals} from '../extent.js';\nimport {xhr} from '../featureloader.js';\nimport {TRUE, VOID} from '../functions.js';\nimport {all as allStrategy} from '../loadingstrategy.js';\nimport {isEmpty, getValues} from '../obj.js';\nimport Source from './Source.js';\nimport SourceState from './State.js';\nimport VectorEventType from './VectorEventType.js';\nimport RBush from '../structs/RBush.js';\n\n/**\n * A function that takes an {@link module:ol/extent~Extent} and a resolution as arguments, and\n * returns an array of {@link module:ol/extent~Extent} with the extents to load. Usually this\n * is one of the standard {@link module:ol/loadingstrategy} strategies.\n *\n * @typedef {function(import(\"../extent.js\").Extent, number): Array<import(\"../extent.js\").Extent>} LoadingStrategy\n * @api\n */\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Vector} instances are instances of this\n * type.\n */\nexport class VectorSourceEvent extends Event {\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../Feature.js\").default=} opt_feature Feature.\n   */\n  constructor(type, opt_feature) {\n\n    super(type);\n\n    /**\n     * The feature being added or removed.\n     * @type {import(\"../Feature.js\").default|undefined}\n     * @api\n     */\n    this.feature = opt_feature;\n\n  }\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {Array<import(\"../Feature.js\").default>|Collection<import(\"../Feature.js\").default>} [features]\n * Features. If provided as {@link module:ol/Collection}, the features in the source\n * and the collection will stay in sync.\n * @property {import(\"../format/Feature.js\").default} [format] The feature format used by the XHR\n * feature loader when `url` is set. Required if `url` is set, otherwise ignored.\n * @property {import(\"../featureloader.js\").FeatureLoader} [loader]\n * The loader function used to load features, from a remote source for example.\n * If this is not set and `url` is set, the source will create and use an XHR\n * feature loader.\n *\n * Example:\n *\n * ```js\n * import {Vector} from 'ol/source';\n * import {GeoJSON} from 'ol/format';\n * import {bbox} from 'ol/loadingstrategy';\n *\n * var vectorSource = new Vector({\n *   format: new GeoJSON(),\n *   loader: function(extent, resolution, projection) {\n *      var proj = projection.getCode();\n *      var url = 'https://ahocevar.com/geoserver/wfs?service=WFS&' +\n *          'version=1.1.0&request=GetFeature&typename=osm:water_areas&' +\n *          'outputFormat=application/json&srsname=' + proj + '&' +\n *          'bbox=' + extent.join(',') + ',' + proj;\n *      var xhr = new XMLHttpRequest();\n *      xhr.open('GET', url);\n *      var onError = function() {\n *        vectorSource.removeLoadedExtent(extent);\n *      }\n *      xhr.onerror = onError;\n *      xhr.onload = function() {\n *        if (xhr.status == 200) {\n *          vectorSource.addFeatures(\n *              vectorSource.getFormat().readFeatures(xhr.responseText));\n *        } else {\n *          onError();\n *        }\n *      }\n *      xhr.send();\n *    },\n *    strategy: bbox\n *  });\n * ```\n * @property {boolean} [overlaps=true] This source may have overlapping geometries.\n * Setting this to `false` (e.g. for sources with polygons that represent administrative\n * boundaries or TopoJSON sources) allows the renderer to optimise fill and\n * stroke operations.\n * @property {LoadingStrategy} [strategy] The loading strategy to use.\n * By default an {@link module:ol/loadingstrategy~all}\n * strategy is used, a one-off strategy which loads all features at once.\n * @property {string|import(\"../featureloader.js\").FeatureUrlFunction} [url]\n * Setting this option instructs the source to load features using an XHR loader\n * (see {@link module:ol/featureloader~xhr}). Use a `string` and an\n * {@link module:ol/loadingstrategy~all} for a one-off download of all features from\n * the given URL. Use a {@link module:ol/featureloader~FeatureUrlFunction} to generate the url with\n * other loading strategies.\n * Requires `format` to be set as well.\n * When default XHR feature loader is provided, the features will\n * be transformed from the data projection to the view projection\n * during parsing. If your remote data source does not advertise its projection\n * properly, this transformation will be incorrect. For some formats, the\n * default projection (usually EPSG:4326) can be overridden by setting the\n * dataProjection constructor option on the format.\n * Note that if a source contains non-feature data, such as a GeoJSON geometry\n * or a KML NetworkLink, these will be ignored. Use a custom loader to load these.\n * @property {boolean} [useSpatialIndex=true]\n * By default, an RTree is used as spatial index. When features are removed and\n * added frequently, and the total number of features is low, setting this to\n * `false` may improve performance.\n *\n * Note that\n * {@link module:ol/source/Vector~VectorSource#getFeaturesInExtent},\n * {@link module:ol/source/Vector~VectorSource#getClosestFeatureToCoordinate} and\n * {@link module:ol/source/Vector~VectorSource#getExtent} cannot be used when `useSpatialIndex` is\n * set to `false`, and {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent} will loop\n * through all features.\n *\n * When set to `false`, the features will be maintained in an\n * {@link module:ol/Collection}, which can be retrieved through\n * {@link module:ol/source/Vector~VectorSource#getFeaturesCollection}.\n * @property {boolean} [wrapX=true] Wrap the world horizontally. For vector editing across the\n * -180 and 180 meridians to work properly, this should be set to `false`. The\n * resulting geometry coordinates will then exceed the world bounds.\n */\n\n\n/**\n * @classdesc\n * Provides a source of features for vector layers. Vector features provided\n * by this source are suitable for editing. See {@link module:ol/source/VectorTile~VectorTile} for\n * vector data that is optimized for rendering.\n *\n * @fires ol/source/Vector.VectorSourceEvent\n * @api\n */\nclass VectorSource extends Source {\n  /**\n   * @param {Options=} opt_options Vector source options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    super({\n      attributions: options.attributions,\n      projection: undefined,\n      state: SourceState.READY,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true\n    });\n\n    /**\n     * @private\n     * @type {import(\"../featureloader.js\").FeatureLoader}\n     */\n    this.loader_ = VOID;\n\n    /**\n     * @private\n     * @type {import(\"../format/Feature.js\").default|undefined}\n     */\n    this.format_ = options.format;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overlaps_ = options.overlaps == undefined ? true : options.overlaps;\n\n    /**\n     * @private\n     * @type {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined}\n     */\n    this.url_ = options.url;\n\n    if (options.loader !== undefined) {\n      this.loader_ = options.loader;\n    } else if (this.url_ !== undefined) {\n      assert(this.format_, 7); // `format` must be set when `url` is set\n      // create a XHR feature loader for \"url\" and \"format\"\n      this.loader_ = xhr(this.url_, /** @type {import(\"../format/Feature.js\").default} */ (this.format_));\n    }\n\n    /**\n     * @private\n     * @type {LoadingStrategy}\n     */\n    this.strategy_ = options.strategy !== undefined ? options.strategy : allStrategy;\n\n    const useSpatialIndex =\n        options.useSpatialIndex !== undefined ? options.useSpatialIndex : true;\n\n    /**\n     * @private\n     * @type {RBush<import(\"../Feature.js\").default>}\n     */\n    this.featuresRtree_ = useSpatialIndex ? new RBush() : null;\n\n    /**\n     * @private\n     * @type {RBush<{extent: import(\"../extent.js\").Extent}>}\n     */\n    this.loadedExtentsRtree_ = new RBush();\n\n    /**\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default>}\n     */\n    this.nullGeometryFeatures_ = {};\n\n    /**\n     * A lookup of features by id (the return from feature.getId()).\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default>}\n     */\n    this.idIndex_ = {};\n\n    /**\n     * A lookup of features without id (keyed by getUid(feature)).\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default>}\n     */\n    this.undefIdIndex_ = {};\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n     */\n    this.featureChangeKeys_ = {};\n\n    /**\n     * @private\n     * @type {Collection<import(\"../Feature.js\").default>}\n     */\n    this.featuresCollection_ = null;\n\n    let collection, features;\n    if (Array.isArray(options.features)) {\n      features = options.features;\n    } else if (options.features) {\n      collection = options.features;\n      features = collection.getArray();\n    }\n    if (!useSpatialIndex && collection === undefined) {\n      collection = new Collection(features);\n    }\n    if (features !== undefined) {\n      this.addFeaturesInternal(features);\n    }\n    if (collection !== undefined) {\n      this.bindFeaturesCollection_(collection);\n    }\n\n  }\n\n  /**\n   * Add a single feature to the source.  If you want to add a batch of features\n   * at once, call {@link module:ol/source/Vector~VectorSource#addFeatures #addFeatures()}\n   * instead. A feature will not be added to the source if feature with\n   * the same id is already there. The reason for this behavior is to avoid\n   * feature duplication when using bbox or tile loading strategies.\n   * @param {import(\"../Feature.js\").default} feature Feature to add.\n   * @api\n   */\n  addFeature(feature) {\n    this.addFeatureInternal(feature);\n    this.changed();\n  }\n\n\n  /**\n   * Add a feature without firing a `change` event.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @protected\n   */\n  addFeatureInternal(feature) {\n    const featureKey = getUid(feature);\n\n    if (!this.addToIndex_(featureKey, feature)) {\n      return;\n    }\n\n    this.setupChangeEvents_(featureKey, feature);\n\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      const extent = geometry.getExtent();\n      if (this.featuresRtree_) {\n        this.featuresRtree_.insert(extent, feature);\n      }\n    } else {\n      this.nullGeometryFeatures_[featureKey] = feature;\n    }\n\n    this.dispatchEvent(\n      new VectorSourceEvent(VectorEventType.ADDFEATURE, feature));\n  }\n\n\n  /**\n   * @param {string} featureKey Unique identifier for the feature.\n   * @param {import(\"../Feature.js\").default} feature The feature.\n   * @private\n   */\n  setupChangeEvents_(featureKey, feature) {\n    this.featureChangeKeys_[featureKey] = [\n      listen(feature, EventType.CHANGE,\n        this.handleFeatureChange_, this),\n      listen(feature, ObjectEventType.PROPERTYCHANGE,\n        this.handleFeatureChange_, this)\n    ];\n  }\n\n\n  /**\n   * @param {string} featureKey Unique identifier for the feature.\n   * @param {import(\"../Feature.js\").default} feature The feature.\n   * @return {boolean} The feature is \"valid\", in the sense that it is also a\n   *     candidate for insertion into the Rtree.\n   * @private\n   */\n  addToIndex_(featureKey, feature) {\n    let valid = true;\n    const id = feature.getId();\n    if (id !== undefined) {\n      if (!(id.toString() in this.idIndex_)) {\n        this.idIndex_[id.toString()] = feature;\n      } else {\n        valid = false;\n      }\n    } else {\n      assert(!(featureKey in this.undefIdIndex_),\n        30); // The passed `feature` was already added to the source\n      this.undefIdIndex_[featureKey] = feature;\n    }\n    return valid;\n  }\n\n\n  /**\n   * Add a batch of features to the source.\n   * @param {Array<import(\"../Feature.js\").default>} features Features to add.\n   * @api\n   */\n  addFeatures(features) {\n    this.addFeaturesInternal(features);\n    this.changed();\n  }\n\n\n  /**\n   * Add features without firing a `change` event.\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @protected\n   */\n  addFeaturesInternal(features) {\n    const extents = [];\n    const newFeatures = [];\n    const geometryFeatures = [];\n\n    for (let i = 0, length = features.length; i < length; i++) {\n      const feature = features[i];\n      const featureKey = getUid(feature);\n      if (this.addToIndex_(featureKey, feature)) {\n        newFeatures.push(feature);\n      }\n    }\n\n    for (let i = 0, length = newFeatures.length; i < length; i++) {\n      const feature = newFeatures[i];\n      const featureKey = getUid(feature);\n      this.setupChangeEvents_(featureKey, feature);\n\n      const geometry = feature.getGeometry();\n      if (geometry) {\n        const extent = geometry.getExtent();\n        extents.push(extent);\n        geometryFeatures.push(feature);\n      } else {\n        this.nullGeometryFeatures_[featureKey] = feature;\n      }\n    }\n    if (this.featuresRtree_) {\n      this.featuresRtree_.load(extents, geometryFeatures);\n    }\n\n    for (let i = 0, length = newFeatures.length; i < length; i++) {\n      this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, newFeatures[i]));\n    }\n  }\n\n\n  /**\n   * @param {!Collection<import(\"../Feature.js\").default>} collection Collection.\n   * @private\n   */\n  bindFeaturesCollection_(collection) {\n    let modifyingCollection = false;\n    listen(this, VectorEventType.ADDFEATURE,\n      /**\n       * @param {VectorSourceEvent} evt The vector source event\n       */\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          collection.push(evt.feature);\n          modifyingCollection = false;\n        }\n      });\n    listen(this, VectorEventType.REMOVEFEATURE,\n      /**\n       * @param {VectorSourceEvent} evt The vector source event\n       */\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          collection.remove(evt.feature);\n          modifyingCollection = false;\n        }\n      });\n    listen(collection, CollectionEventType.ADD,\n      /**\n       * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n       */\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          this.addFeature(/** @type {import(\"../Feature.js\").default} */ (evt.element));\n          modifyingCollection = false;\n        }\n      }, this);\n    listen(collection, CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n       */\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          this.removeFeature(/** @type {import(\"../Feature.js\").default} */ (evt.element));\n          modifyingCollection = false;\n        }\n      }, this);\n    this.featuresCollection_ = collection;\n  }\n\n\n  /**\n   * Remove all features from the source.\n   * @param {boolean=} opt_fast Skip dispatching of {@link module:ol/source/Vector.VectorSourceEvent#removefeature} events.\n   * @api\n   */\n  clear(opt_fast) {\n    if (opt_fast) {\n      for (const featureId in this.featureChangeKeys_) {\n        const keys = this.featureChangeKeys_[featureId];\n        keys.forEach(unlistenByKey);\n      }\n      if (!this.featuresCollection_) {\n        this.featureChangeKeys_ = {};\n        this.idIndex_ = {};\n        this.undefIdIndex_ = {};\n      }\n    } else {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.forEach(this.removeFeatureInternal, this);\n        for (const id in this.nullGeometryFeatures_) {\n          this.removeFeatureInternal(this.nullGeometryFeatures_[id]);\n        }\n      }\n    }\n    if (this.featuresCollection_) {\n      this.featuresCollection_.clear();\n    }\n\n    if (this.featuresRtree_) {\n      this.featuresRtree_.clear();\n    }\n    this.loadedExtentsRtree_.clear();\n    this.nullGeometryFeatures_ = {};\n\n    const clearEvent = new VectorSourceEvent(VectorEventType.CLEAR);\n    this.dispatchEvent(clearEvent);\n    this.changed();\n  }\n\n\n  /**\n   * Iterate through all features on the source, calling the provided callback\n   * with each one.  If the callback returns any \"truthy\" value, iteration will\n   * stop and the function will return the same value.\n   * Note: this function only iterate through the feature that have a defined geometry.\n   *\n   * @param {function(import(\"../Feature.js\").default): T} callback Called with each feature\n   *     on the source.  Return a truthy value to stop iteration.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeature(callback) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.forEach(callback);\n    } else if (this.featuresCollection_) {\n      this.featuresCollection_.forEach(callback);\n    }\n  }\n\n\n  /**\n   * Iterate through all features whose geometries contain the provided\n   * coordinate, calling the callback with each feature.  If the callback returns\n   * a \"truthy\" value, iteration will stop and the function will return the same\n   * value.\n   *\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {function(import(\"../Feature.js\").default): T} callback Called with each feature\n   *     whose goemetry contains the provided coordinate.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   */\n  forEachFeatureAtCoordinateDirect(coordinate, callback) {\n    const extent = [coordinate[0], coordinate[1], coordinate[0], coordinate[1]];\n    return this.forEachFeatureInExtent(extent, function(feature) {\n      const geometry = feature.getGeometry();\n      if (geometry.intersectsCoordinate(coordinate)) {\n        return callback(feature);\n      } else {\n        return undefined;\n      }\n    });\n  }\n\n\n  /**\n   * Iterate through all features whose bounding box intersects the provided\n   * extent (note that the feature's geometry may not intersect the extent),\n   * calling the callback with each feature.  If the callback returns a \"truthy\"\n   * value, iteration will stop and the function will return the same value.\n   *\n   * If you are interested in features whose geometry intersects an extent, call\n   * the {@link module:ol/source/Vector~VectorSource#forEachFeatureIntersectingExtent #forEachFeatureIntersectingExtent()} method instead.\n   *\n   * When `useSpatialIndex` is set to false, this method will loop through all\n   * features, equivalent to {@link module:ol/source/Vector~VectorSource#forEachFeature #forEachFeature()}.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(import(\"../Feature.js\").default): T} callback Called with each feature\n   *     whose bounding box intersects the provided extent.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeatureInExtent(extent, callback) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.forEachInExtent(extent, callback);\n    } else if (this.featuresCollection_) {\n      this.featuresCollection_.forEach(callback);\n    }\n  }\n\n\n  /**\n   * Iterate through all features whose geometry intersects the provided extent,\n   * calling the callback with each feature.  If the callback returns a \"truthy\"\n   * value, iteration will stop and the function will return the same value.\n   *\n   * If you only want to test for bounding box intersection, call the\n   * {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent #forEachFeatureInExtent()} method instead.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(import(\"../Feature.js\").default): T} callback Called with each feature\n   *     whose geometry intersects the provided extent.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeatureIntersectingExtent(extent, callback) {\n    return this.forEachFeatureInExtent(extent,\n      /**\n       * @param {import(\"../Feature.js\").default} feature Feature.\n       * @return {T|undefined} The return value from the last call to the callback.\n       */\n      function(feature) {\n        const geometry = feature.getGeometry();\n        if (geometry.intersectsExtent(extent)) {\n          const result = callback(feature);\n          if (result) {\n            return result;\n          }\n        }\n      });\n  }\n\n\n  /**\n   * Get the features collection associated with this source. Will be `null`\n   * unless the source was configured with `useSpatialIndex` set to `false`, or\n   * with an {@link module:ol/Collection} as `features`.\n   * @return {Collection<import(\"../Feature.js\").default>} The collection of features.\n   * @api\n   */\n  getFeaturesCollection() {\n    return this.featuresCollection_;\n  }\n\n\n  /**\n   * Get all features on the source in random order.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  getFeatures() {\n    let features;\n    if (this.featuresCollection_) {\n      features = this.featuresCollection_.getArray();\n    } else if (this.featuresRtree_) {\n      features = this.featuresRtree_.getAll();\n      if (!isEmpty(this.nullGeometryFeatures_)) {\n        extend(features, getValues(this.nullGeometryFeatures_));\n      }\n    }\n    return (\n      /** @type {Array<import(\"../Feature.js\").default>} */ (features)\n    );\n  }\n\n\n  /**\n   * Get all features whose geometry intersects the provided coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  getFeaturesAtCoordinate(coordinate) {\n    const features = [];\n    this.forEachFeatureAtCoordinateDirect(coordinate, function(feature) {\n      features.push(feature);\n    });\n    return features;\n  }\n\n\n  /**\n   * Get all features in the provided extent.  Note that this returns an array of\n   * all features intersecting the given extent in random order (so it may include\n   * features whose geometries do not intersect the extent).\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  getFeaturesInExtent(extent) {\n    return this.featuresRtree_.getInExtent(extent);\n  }\n\n\n  /**\n   * Get the closest feature to the provided coordinate.\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {function(import(\"../Feature.js\").default):boolean=} opt_filter Feature filter function.\n   *     The filter function will receive one argument, the {@link module:ol/Feature feature}\n   *     and it should return a boolean value. By default, no filtering is made.\n   * @return {import(\"../Feature.js\").default} Closest feature.\n   * @api\n   */\n  getClosestFeatureToCoordinate(coordinate, opt_filter) {\n    // Find the closest feature using branch and bound.  We start searching an\n    // infinite extent, and find the distance from the first feature found.  This\n    // becomes the closest feature.  We then compute a smaller extent which any\n    // closer feature must intersect.  We continue searching with this smaller\n    // extent, trying to find a closer feature.  Every time we find a closer\n    // feature, we update the extent being searched so that any even closer\n    // feature must intersect it.  We continue until we run out of features.\n    const x = coordinate[0];\n    const y = coordinate[1];\n    let closestFeature = null;\n    const closestPoint = [NaN, NaN];\n    let minSquaredDistance = Infinity;\n    const extent = [-Infinity, -Infinity, Infinity, Infinity];\n    const filter = opt_filter ? opt_filter : TRUE;\n    this.featuresRtree_.forEachInExtent(extent,\n      /**\n       * @param {import(\"../Feature.js\").default} feature Feature.\n       */\n      function(feature) {\n        if (filter(feature)) {\n          const geometry = feature.getGeometry();\n          const previousMinSquaredDistance = minSquaredDistance;\n          minSquaredDistance = geometry.closestPointXY(\n            x, y, closestPoint, minSquaredDistance);\n          if (minSquaredDistance < previousMinSquaredDistance) {\n            closestFeature = feature;\n            // This is sneaky.  Reduce the extent that it is currently being\n            // searched while the R-Tree traversal using this same extent object\n            // is still in progress.  This is safe because the new extent is\n            // strictly contained by the old extent.\n            const minDistance = Math.sqrt(minSquaredDistance);\n            extent[0] = x - minDistance;\n            extent[1] = y - minDistance;\n            extent[2] = x + minDistance;\n            extent[3] = y + minDistance;\n          }\n        }\n      });\n    return closestFeature;\n  }\n\n\n  /**\n   * Get the extent of the features currently in the source.\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Destination extent. If provided, no new extent\n   *     will be created. Instead, that extent's coordinates will be overwritten.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getExtent(opt_extent) {\n    return this.featuresRtree_.getExtent(opt_extent);\n  }\n\n\n  /**\n   * Get a feature by its identifier (the value returned by feature.getId()).\n   * Note that the index treats string and numeric identifiers as the same.  So\n   * `source.getFeatureById(2)` will return a feature with id `'2'` or `2`.\n   *\n   * @param {string|number} id Feature identifier.\n   * @return {import(\"../Feature.js\").default} The feature (or `null` if not found).\n   * @api\n   */\n  getFeatureById(id) {\n    const feature = this.idIndex_[id.toString()];\n    return feature !== undefined ? feature : null;\n  }\n\n\n  /**\n   * Get the format associated with this source.\n   *\n   * @return {import(\"../format/Feature.js\").default|undefined} The feature format.\n   * @api\n   */\n  getFormat() {\n    return this.format_;\n  }\n\n\n  /**\n   * @return {boolean} The source can have overlapping geometries.\n   */\n  getOverlaps() {\n    return this.overlaps_;\n  }\n\n\n  /**\n   * Get the url associated with this source.\n   *\n   * @return {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined} The url.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n\n  /**\n   * @param {Event} event Event.\n   * @private\n   */\n  handleFeatureChange_(event) {\n    const feature = /** @type {import(\"../Feature.js\").default} */ (event.target);\n    const featureKey = getUid(feature);\n    const geometry = feature.getGeometry();\n    if (!geometry) {\n      if (!(featureKey in this.nullGeometryFeatures_)) {\n        if (this.featuresRtree_) {\n          this.featuresRtree_.remove(feature);\n        }\n        this.nullGeometryFeatures_[featureKey] = feature;\n      }\n    } else {\n      const extent = geometry.getExtent();\n      if (featureKey in this.nullGeometryFeatures_) {\n        delete this.nullGeometryFeatures_[featureKey];\n        if (this.featuresRtree_) {\n          this.featuresRtree_.insert(extent, feature);\n        }\n      } else {\n        if (this.featuresRtree_) {\n          this.featuresRtree_.update(extent, feature);\n        }\n      }\n    }\n    const id = feature.getId();\n    if (id !== undefined) {\n      const sid = id.toString();\n      if (featureKey in this.undefIdIndex_) {\n        delete this.undefIdIndex_[featureKey];\n        this.idIndex_[sid] = feature;\n      } else {\n        if (this.idIndex_[sid] !== feature) {\n          this.removeFromIdIndex_(feature);\n          this.idIndex_[sid] = feature;\n        }\n      }\n    } else {\n      if (!(featureKey in this.undefIdIndex_)) {\n        this.removeFromIdIndex_(feature);\n        this.undefIdIndex_[featureKey] = feature;\n      }\n    }\n    this.changed();\n    this.dispatchEvent(new VectorSourceEvent(\n      VectorEventType.CHANGEFEATURE, feature));\n  }\n\n  /**\n   * Returns true if the feature is contained within the source.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @return {boolean} Has feature.\n   * @api\n   */\n  hasFeature(feature) {\n    const id = feature.getId();\n    if (id !== undefined) {\n      return id in this.idIndex_;\n    } else {\n      return getUid(feature) in this.undefIdIndex_;\n    }\n  }\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return this.featuresRtree_.isEmpty() && isEmpty(this.nullGeometryFeatures_);\n  }\n\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   */\n  loadFeatures(extent, resolution, projection) {\n    const loadedExtentsRtree = this.loadedExtentsRtree_;\n    const extentsToLoad = this.strategy_(extent, resolution);\n    this.loading = false;\n    for (let i = 0, ii = extentsToLoad.length; i < ii; ++i) {\n      const extentToLoad = extentsToLoad[i];\n      const alreadyLoaded = loadedExtentsRtree.forEachInExtent(extentToLoad,\n        /**\n         * @param {{extent: import(\"../extent.js\").Extent}} object Object.\n         * @return {boolean} Contains.\n         */\n        function(object) {\n          return containsExtent(object.extent, extentToLoad);\n        });\n      if (!alreadyLoaded) {\n        this.loader_.call(this, extentToLoad, resolution, projection);\n        loadedExtentsRtree.insert(extentToLoad, {extent: extentToLoad.slice()});\n        this.loading = this.loader_ !== VOID;\n      }\n    }\n  }\n\n\n  /**\n   * Remove an extent from the list of loaded extents.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  removeLoadedExtent(extent) {\n    const loadedExtentsRtree = this.loadedExtentsRtree_;\n    let obj;\n    loadedExtentsRtree.forEachInExtent(extent, function(object) {\n      if (equals(object.extent, extent)) {\n        obj = object;\n        return true;\n      }\n    });\n    if (obj) {\n      loadedExtentsRtree.remove(obj);\n    }\n  }\n\n\n  /**\n   * Remove a single feature from the source.  If you want to remove all features\n   * at once, use the {@link module:ol/source/Vector~VectorSource#clear #clear()} method\n   * instead.\n   * @param {import(\"../Feature.js\").default} feature Feature to remove.\n   * @api\n   */\n  removeFeature(feature) {\n    const featureKey = getUid(feature);\n    if (featureKey in this.nullGeometryFeatures_) {\n      delete this.nullGeometryFeatures_[featureKey];\n    } else {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.remove(feature);\n      }\n    }\n    this.removeFeatureInternal(feature);\n    this.changed();\n  }\n\n\n  /**\n   * Remove feature without firing a `change` event.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @protected\n   */\n  removeFeatureInternal(feature) {\n    const featureKey = getUid(feature);\n    this.featureChangeKeys_[featureKey].forEach(unlistenByKey);\n    delete this.featureChangeKeys_[featureKey];\n    const id = feature.getId();\n    if (id !== undefined) {\n      delete this.idIndex_[id.toString()];\n    } else {\n      delete this.undefIdIndex_[featureKey];\n    }\n    this.dispatchEvent(new VectorSourceEvent(\n      VectorEventType.REMOVEFEATURE, feature));\n  }\n\n\n  /**\n   * Remove a feature from the id index.  Called internally when the feature id\n   * may have changed.\n   * @param {import(\"../Feature.js\").default} feature The feature.\n   * @return {boolean} Removed the feature from the index.\n   * @private\n   */\n  removeFromIdIndex_(feature) {\n    let removed = false;\n    for (const id in this.idIndex_) {\n      if (this.idIndex_[id] === feature) {\n        delete this.idIndex_[id];\n        removed = true;\n        break;\n      }\n    }\n    return removed;\n  }\n\n\n  /**\n   * Set the new loader of the source. The next loadFeatures call will use the\n   * new loader.\n   * @param {import(\"../featureloader.js\").FeatureLoader} loader The loader to set.\n   * @api\n   */\n  setLoader(loader) {\n    this.loader_ = loader;\n  }\n\n}\n\n\nexport default VectorSource;\n","/**\n * @module ol/format/Feature\n */\nimport {assign} from '../obj.js';\nimport {abstract} from '../util.js';\nimport {get as getProjection, equivalent as equivalentProjection, transformExtent} from '../proj.js';\n\n\n/**\n * @typedef {Object} ReadOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are reading.\n * If not provided, the projection will be derived from the data (where possible) or\n * the `dataProjection` of the format is assigned (where set). If the projection\n * can not be derived from the data and if no `dataProjection` is set for a format,\n * the features will not be reprojected.\n * @property {import(\"../extent.js\").Extent} [extent] Tile extent of the tile being read. This is only used and\n * required for {@link module:ol/format/MVT}.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * created by the format reader. If not provided, features will be returned in the\n * `dataProjection`.\n */\n\n\n/**\n * @typedef {Object} WriteOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are writing.\n * If not provided, the `dataProjection` of the format is assigned (where set).\n * If no `dataProjection` is set for a format, the features will be returned\n * in the `featureProjection`.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * that will be serialized by the format writer. If not provided, geometries are assumed\n * to be in the `dataProjection` if that is set; in other words, they are not transformed.\n * @property {boolean} [rightHanded] When writing geometries, follow the right-hand\n * rule for linear ring orientation.  This means that polygons will have counter-clockwise\n * exterior rings and clockwise interior rings.  By default, coordinates are serialized\n * as they are provided at construction.  If `true`, the right-hand rule will\n * be applied.  If `false`, the left-hand rule will be applied (clockwise for\n * exterior and counter-clockwise for interior rings).  Note that not all\n * formats support this.  The GeoJSON format does use this property when writing\n * geometries.\n * @property {number} [decimals] Maximum number of decimal places for coordinates.\n * Coordinates are stored internally as floats, but floating-point arithmetic can create\n * coordinates with a large number of decimal places, not generally wanted on output.\n * Set a number here to round coordinates. Can also be used to ensure that\n * coordinates read in can be written back out with the same number of decimals.\n * Default is no rounding.\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for feature formats.\n * {FeatureFormat} subclasses provide the ability to decode and encode\n * {@link module:ol/Feature~Feature} objects from a variety of commonly used geospatial\n * file formats.  See the documentation for each format for more details.\n *\n * @abstract\n * @api\n */\nclass FeatureFormat {\n  constructor() {\n\n    /**\n     * @protected\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.dataProjection = null;\n\n    /**\n     * @protected\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.defaultFeatureProjection = null;\n\n  }\n\n  /**\n   * Adds the data projection to the read options.\n   * @param {Document|Node|Object|string} source Source.\n   * @param {ReadOptions=} opt_options Options.\n   * @return {ReadOptions|undefined} Options.\n   * @protected\n   */\n  getReadOptions(source, opt_options) {\n    let options;\n    if (opt_options) {\n      options = {\n        dataProjection: opt_options.dataProjection ?\n          opt_options.dataProjection : this.readProjection(source),\n        featureProjection: opt_options.featureProjection\n      };\n    }\n    return this.adaptOptions(options);\n  }\n\n  /**\n   * Sets the `dataProjection` on the options, if no `dataProjection`\n   * is set.\n   * @param {WriteOptions|ReadOptions|undefined} options\n   *     Options.\n   * @protected\n   * @return {WriteOptions|ReadOptions|undefined}\n   *     Updated options.\n   */\n  adaptOptions(options) {\n    return assign({\n      dataProjection: this.dataProjection,\n      featureProjection: this.defaultFeatureProjection\n    }, options);\n  }\n\n  /**\n   * Get the extent from the source of the last {@link readFeatures} call.\n   * @return {import(\"../extent.js\").Extent} Tile extent.\n   */\n  getLastExtent() {\n    return null;\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"./FormatType.js\").default} Format.\n   */\n  getType() {\n    return abstract();\n  }\n\n  /**\n   * Read a single feature from a source.\n   *\n   * @abstract\n   * @param {Document|Node|Object|string} source Source.\n   * @param {ReadOptions=} opt_options Read options.\n   * @return {import(\"../Feature.js\").FeatureLike} Feature.\n   */\n  readFeature(source, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read all features from a source.\n   *\n   * @abstract\n   * @param {Document|Node|ArrayBuffer|Object|string} source Source.\n   * @param {ReadOptions=} opt_options Read options.\n   * @return {Array<import(\"../Feature.js\").FeatureLike>} Features.\n   */\n  readFeatures(source, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read a single geometry from a source.\n   *\n   * @abstract\n   * @param {Document|Node|Object|string} source Source.\n   * @param {ReadOptions=} opt_options Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometry(source, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the projection from a source.\n   *\n   * @abstract\n   * @param {Document|Node|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjection(source) {\n    return abstract();\n  }\n\n  /**\n   * Encode a feature in this format.\n   *\n   * @abstract\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   */\n  writeFeature(feature, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Encode an array of features in this format.\n   *\n   * @abstract\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   */\n  writeFeatures(features, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Write a single geometry in this format.\n   *\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   */\n  writeGeometry(geometry, opt_options) {\n    return abstract();\n  }\n}\n\nexport default FeatureFormat;\n\n/**\n * @param {import(\"../geom/Geometry.js\").default|import(\"../extent.js\").Extent} geometry Geometry.\n * @param {boolean} write Set to true for writing, false for reading.\n * @param {(WriteOptions|ReadOptions)=} opt_options Options.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../extent.js\").Extent} Transformed geometry.\n */\nexport function transformWithOptions(geometry, write, opt_options) {\n  const featureProjection = opt_options ?\n    getProjection(opt_options.featureProjection) : null;\n  const dataProjection = opt_options ?\n    getProjection(opt_options.dataProjection) : null;\n  /**\n   * @type {import(\"../geom/Geometry.js\").default|import(\"../extent.js\").Extent}\n   */\n  let transformed;\n  if (featureProjection && dataProjection &&\n      !equivalentProjection(featureProjection, dataProjection)) {\n    if (Array.isArray(geometry)) {\n      // FIXME this is necessary because GML treats extents\n      // as geometries\n      transformed = transformExtent(\n        geometry,\n        dataProjection,\n        featureProjection);\n    } else {\n      transformed = (write ? /** @type {import(\"../geom/Geometry\").default} */ (geometry).clone() : geometry).transform(\n        write ? featureProjection : dataProjection,\n        write ? dataProjection : featureProjection);\n    }\n  } else {\n    transformed = geometry;\n  }\n  if (write && opt_options && /** @type {WriteOptions} */ (opt_options).decimals !== undefined &&\n    !Array.isArray(transformed)) {\n    const power = Math.pow(10, /** @type {WriteOptions} */ (opt_options).decimals);\n    // if decimals option on write, round each coordinate appropriately\n    /**\n     * @param {Array<number>} coordinates Coordinates.\n     * @return {Array<number>} Transformed coordinates.\n     */\n    const transform = function(coordinates) {\n      for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = Math.round(coordinates[i] * power) / power;\n      }\n      return coordinates;\n    };\n    if (transformed === geometry) {\n      transformed = /** @type {import(\"../geom/Geometry\").default} */ (geometry).clone();\n    }\n    transformed.applyTransform(transform);\n  }\n  return transformed;\n}\n","/**\n * @module ol/easing\n */\n\n\n/**\n * Start slow and speed up.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeIn(t) {\n  return Math.pow(t, 3);\n}\n\n\n/**\n * Start fast and slow down.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeOut(t) {\n  return 1 - easeIn(1 - t);\n}\n\n\n/**\n * Start slow, speed up, and then slow down again.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function inAndOut(t) {\n  return 3 * t * t - 2 * t * t * t;\n}\n\n\n/**\n * Maintain a constant speed over time.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function linear(t) {\n  return t;\n}\n\n\n/**\n * Start slow, speed up, and at the very end slow down again.  This has the\n * same general behavior as {@link module:ol/easing~inAndOut}, but the final\n * slowdown is delayed.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function upAndDown(t) {\n  if (t < 0.5) {\n    return inAndOut(2 * t);\n  } else {\n    return 1 - inAndOut(2 * (t - 0.5));\n  }\n}\n","/**\n * @module ol/layer/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  OPACITY: 'opacity',\n  VISIBLE: 'visible',\n  EXTENT: 'extent',\n  Z_INDEX: 'zIndex',\n  MAX_RESOLUTION: 'maxResolution',\n  MIN_RESOLUTION: 'minResolution',\n  SOURCE: 'source'\n};\n","/**\n * @module ol/layer/Vector\n */\nimport LayerType from '../LayerType.js';\nimport Layer from './Layer.js';\nimport VectorRenderType from './VectorRenderType.js';\nimport {assign} from '../obj.js';\nimport {createDefaultStyle, toFunction as toStyleFunction} from '../style/Style.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {import(\"./VectorRenderType.js\").default|string} [renderMode='vector'] Render mode for vector layers:\n *  * `'image'`: Vector layers are rendered as images. Great performance, but point symbols and\n *    texts are always rotated with the view and pixels are scaled during zoom animations.\n *  * `'vector'`: Vector layers are rendered as vectors. Most accurate rendering even during\n *    animations, but slower performance.\n * @property {import(\"../source/Vector.js\").default} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles, and the priority is defined by the z-index of the style. Lower z-index\n * means higher priority.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true` and `renderMode`\n * is `vector`, feature batches will be recreated during animations. This means that no\n * vectors will be shown clipped, but the setting will have a performance impact for large\n * amounts of vector data. When set to `false`, batches will be recreated when no animation\n * is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true` and `renderMode`\n * is `vector`, feature batches will be recreated during interactions. See also\n * `updateWhileAnimating`.\n */\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  RENDER_ORDER: 'renderOrder'\n};\n\n\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @api\n */\nclass VectorLayer extends Layer {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ?\n      opt_options : /** @type {Options} */ ({});\n\n    const baseOptions = assign({}, options);\n\n    delete baseOptions.style;\n    delete baseOptions.renderBuffer;\n    delete baseOptions.updateWhileAnimating;\n    delete baseOptions.updateWhileInteracting;\n    super(baseOptions);\n\n    /**\n    * @private\n    * @type {boolean}\n    */\n    this.declutter_ = options.declutter !== undefined ? options.declutter : false;\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.renderBuffer_ = options.renderBuffer !== undefined ?\n      options.renderBuffer : 100;\n\n    /**\n    * User provided style.\n    * @type {import(\"../style/Style.js\").StyleLike}\n    * @private\n    */\n    this.style_ = null;\n\n    /**\n    * Style function for use within the library.\n    * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n    * @private\n    */\n    this.styleFunction_ = undefined;\n\n    this.setStyle(options.style);\n\n    /**\n    * @type {boolean}\n    * @private\n    */\n    this.updateWhileAnimating_ = options.updateWhileAnimating !== undefined ?\n      options.updateWhileAnimating : false;\n\n    /**\n    * @type {boolean}\n    * @private\n    */\n    this.updateWhileInteracting_ = options.updateWhileInteracting !== undefined ?\n      options.updateWhileInteracting : false;\n\n    /**\n    * @private\n    * @type {import(\"./VectorTileRenderType.js\").default|string}\n    */\n    this.renderMode_ = options.renderMode || VectorRenderType.VECTOR;\n\n    /**\n    * The layer type.\n    * @protected\n    * @type {import(\"../LayerType.js\").default}\n    */\n    this.type = LayerType.VECTOR;\n\n  }\n\n  /**\n  * @return {boolean} Declutter.\n  */\n  getDeclutter() {\n    return this.declutter_;\n  }\n\n  /**\n  * @param {boolean} declutter Declutter.\n  */\n  setDeclutter(declutter) {\n    this.declutter_ = declutter;\n  }\n\n  /**\n  * @return {number|undefined} Render buffer.\n  */\n  getRenderBuffer() {\n    return this.renderBuffer_;\n  }\n\n  /**\n  * @return {function(import(\"../Feature.js\").default, import(\"../Feature.js\").default): number|null|undefined} Render\n  *     order.\n  */\n  getRenderOrder() {\n    return (\n    /** @type {import(\"../render.js\").OrderFunction|null|undefined} */ (this.get(Property.RENDER_ORDER))\n    );\n  }\n\n  /**\n  * Get the style for features.  This returns whatever was passed to the `style`\n  * option at construction or to the `setStyle` method.\n  * @return {import(\"../style/Style.js\").StyleLike}\n  *     Layer style.\n  * @api\n  */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n  * Get the style function.\n  * @return {import(\"../style/Style.js\").StyleFunction|undefined} Layer style function.\n  * @api\n  */\n  getStyleFunction() {\n    return this.styleFunction_;\n  }\n\n  /**\n  * @return {boolean} Whether the rendered layer should be updated while\n  *     animating.\n  */\n  getUpdateWhileAnimating() {\n    return this.updateWhileAnimating_;\n  }\n\n  /**\n  * @return {boolean} Whether the rendered layer should be updated while\n  *     interacting.\n  */\n  getUpdateWhileInteracting() {\n    return this.updateWhileInteracting_;\n  }\n\n  /**\n  * @param {import(\"../render.js\").OrderFunction|null|undefined} renderOrder\n  *     Render order.\n  */\n  setRenderOrder(renderOrder) {\n    this.set(Property.RENDER_ORDER, renderOrder);\n  }\n\n  /**\n  * Set the style for features.  This can be a single style object, an array\n  * of styles, or a function that takes a feature and resolution and returns\n  * an array of styles. If it is `undefined` the default style is used. If\n  * it is `null` the layer has no style (a `null` style), so only features\n  * that have their own styles will be rendered in the layer. See\n  * {@link module:ol/style} for information on the default style.\n  * @param {import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction|null|undefined} style Layer style.\n  * @api\n  */\n  setStyle(style) {\n    this.style_ = style !== undefined ? style : createDefaultStyle;\n    this.styleFunction_ = style === null ?\n      undefined : toStyleFunction(this.style_);\n    this.changed();\n  }\n\n  /**\n  * @return {import(\"./VectorRenderType.js\").default|string} The render mode.\n  */\n  getRenderMode() {\n    return this.renderMode_;\n  }\n}\n\n\n/**\n * Return the associated {@link module:ol/source/Vector vectorsource} of the layer.\n * @function\n * @return {import(\"../source/Vector.js\").default} Source.\n * @api\n */\nVectorLayer.prototype.getSource;\n\n\nexport default VectorLayer;\n","/**\n * @module ol/geom/LinearRing\n */\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {linearRing as linearRingArea} from './flat/area.js';\nimport {assignClosestPoint, maxSquaredDelta} from './flat/closest.js';\nimport {deflateCoordinates} from './flat/deflate.js';\nimport {inflateCoordinates} from './flat/inflate.js';\nimport {douglasPeucker} from './flat/simplify.js';\n\n/**\n * @classdesc\n * Linear ring geometry. Only used as part of polygon; cannot be rendered\n * on its own.\n *\n * @api\n */\nclass LinearRing extends SimpleGeometry {\n\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {GeometryLayout=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n\n    super();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n    } else {\n      this.setCoordinates(/** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n    }\n\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!LinearRing} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new LinearRing(this.flatCoordinates.slice(), this.layout);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(maxSquaredDelta(\n        this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestPoint(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * Return the area of the linear ring on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingArea(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * Return the coordinates of the linear ring.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    simplifiedFlatCoordinates.length = douglasPeucker(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      squaredTolerance, simplifiedFlatCoordinates, 0);\n    return new LinearRing(simplifiedFlatCoordinates, GeometryLayout.XY);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.LINEAR_RING;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  intersectsExtent(extent) {\n    return false;\n  }\n\n  /**\n   * Set the coordinates of the linear ring.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default LinearRing;\n","/**\n * @module ol/geom/Polygon\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY, getCenter} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport LinearRing from './LinearRing.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {offset as sphereOffset} from '../sphere.js';\nimport {linearRings as linearRingsArea} from './flat/area.js';\nimport {assignClosestArrayPoint, arrayMaxSquaredDelta} from './flat/closest.js';\nimport {linearRingsContainsXY} from './flat/contains.js';\nimport {deflateCoordinatesArray} from './flat/deflate.js';\nimport {inflateCoordinatesArray} from './flat/inflate.js';\nimport {getInteriorPointOfArray} from './flat/interiorpoint.js';\nimport {intersectsLinearRingArray} from './flat/intersectsextent.js';\nimport {linearRingIsOriented, orientLinearRings} from './flat/orient.js';\nimport {quantizeArray} from './flat/simplify.js';\nimport {modulo} from '../math.js';\n\n/**\n * @classdesc\n * Polygon geometry.\n *\n * @api\n */\nclass Polygon extends SimpleGeometry {\n\n  /**\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>|!Array<number>} coordinates\n   *     Array of linear rings that define the polygon. The first linear ring of the\n   *     array defines the outer-boundary or surface of the polygon. Each subsequent\n   *     linear ring defines a hole in the surface of the polygon. A linear ring is\n   *     an array of vertices' coordinates where the first coordinate and the last are\n   *     equivalent. (For internal use, flat coordinates in combination with\n   *     `opt_layout` and `opt_ends` are also accepted.)\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @param {Array<number>=} opt_ends Ends (for internal use with flat coordinates).\n   */\n  constructor(coordinates, opt_layout, opt_ends) {\n\n    super();\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.ends_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.flatInteriorPointRevision_ = -1;\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.flatInteriorPoint_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.orientedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.orientedFlatCoordinates_ = null;\n\n    if (opt_layout !== undefined && opt_ends) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n      this.ends_ = opt_ends;\n    } else {\n      this.setCoordinates(/** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */ (coordinates), opt_layout);\n    }\n\n  }\n\n  /**\n   * Append the passed linear ring to this polygon.\n   * @param {LinearRing} linearRing Linear ring.\n   * @api\n   */\n  appendLinearRing(linearRing) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = linearRing.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, linearRing.getFlatCoordinates());\n    }\n    this.ends_.push(this.flatCoordinates.length);\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!Polygon} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new Polygon(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(\n        this.flatCoordinates, 0, this.ends_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestArrayPoint(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    return linearRingsContainsXY(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, x, y);\n  }\n\n  /**\n   * Return the area of the polygon on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingsArea(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride);\n  }\n\n  /**\n   * Get the coordinate array for this geometry.  This array has the structure\n   * of a GeoJSON coordinate array for polygons.\n   *\n   * @param {boolean=} opt_right Orient coordinates according to the right-hand\n   *     rule (counter-clockwise for exterior and clockwise for interior rings).\n   *     If `false`, coordinates will be oriented according to the left-hand rule\n   *     (clockwise for exterior and counter-clockwise for interior rings).\n   *     By default, coordinate orientation will depend on how the geometry was\n   *     constructed.\n   * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates(opt_right) {\n    let flatCoordinates;\n    if (opt_right !== undefined) {\n      flatCoordinates = this.getOrientedFlatCoordinates().slice();\n      orientLinearRings(\n        flatCoordinates, 0, this.ends_, this.stride, opt_right);\n    } else {\n      flatCoordinates = this.flatCoordinates;\n    }\n\n    return inflateCoordinatesArray(\n      flatCoordinates, 0, this.ends_, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Ends.\n   */\n  getEnds() {\n    return this.ends_;\n  }\n\n  /**\n   * @return {Array<number>} Interior point.\n   */\n  getFlatInteriorPoint() {\n    if (this.flatInteriorPointRevision_ != this.getRevision()) {\n      const flatCenter = getCenter(this.getExtent());\n      this.flatInteriorPoint_ = getInteriorPointOfArray(\n        this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride,\n        flatCenter, 0);\n      this.flatInteriorPointRevision_ = this.getRevision();\n    }\n    return this.flatInteriorPoint_;\n  }\n\n  /**\n   * Return an interior point of the polygon.\n   * @return {Point} Interior point as XYM coordinate, where M is the\n   * length of the horizontal intersection that the point belongs to.\n   * @api\n   */\n  getInteriorPoint() {\n    return new Point(this.getFlatInteriorPoint(), GeometryLayout.XYM);\n  }\n\n  /**\n   * Return the number of rings of the polygon,  this includes the exterior\n   * ring and any interior rings.\n   *\n   * @return {number} Number of rings.\n   * @api\n   */\n  getLinearRingCount() {\n    return this.ends_.length;\n  }\n\n  /**\n   * Return the Nth linear ring of the polygon geometry. Return `null` if the\n   * given index is out of range.\n   * The exterior linear ring is available at index `0` and the interior rings\n   * at index `1` and beyond.\n   *\n   * @param {number} index Index.\n   * @return {LinearRing} Linear ring.\n   * @api\n   */\n  getLinearRing(index) {\n    if (index < 0 || this.ends_.length <= index) {\n      return null;\n    }\n    return new LinearRing(this.flatCoordinates.slice(\n      index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n  }\n\n  /**\n   * Return the linear rings of the polygon.\n   * @return {Array<LinearRing>} Linear rings.\n   * @api\n   */\n  getLinearRings() {\n    const layout = this.layout;\n    const flatCoordinates = this.flatCoordinates;\n    const ends = this.ends_;\n    const linearRings = [];\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const linearRing = new LinearRing(flatCoordinates.slice(offset, end), layout);\n      linearRings.push(linearRing);\n      offset = end;\n    }\n    return linearRings;\n  }\n\n  /**\n   * @return {Array<number>} Oriented flat coordinates.\n   */\n  getOrientedFlatCoordinates() {\n    if (this.orientedRevision_ != this.getRevision()) {\n      const flatCoordinates = this.flatCoordinates;\n      if (linearRingIsOriented(\n        flatCoordinates, 0, this.ends_, this.stride)) {\n        this.orientedFlatCoordinates_ = flatCoordinates;\n      } else {\n        this.orientedFlatCoordinates_ = flatCoordinates.slice();\n        this.orientedFlatCoordinates_.length =\n            orientLinearRings(\n              this.orientedFlatCoordinates_, 0, this.ends_, this.stride);\n      }\n      this.orientedRevision_ = this.getRevision();\n    }\n    return this.orientedFlatCoordinates_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    const simplifiedEnds = [];\n    simplifiedFlatCoordinates.length = quantizeArray(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      Math.sqrt(squaredTolerance),\n      simplifiedFlatCoordinates, 0, simplifiedEnds);\n    return new Polygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.POLYGON;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLinearRingArray(\n      this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, extent);\n  }\n\n  /**\n   * Set the coordinates of the polygon.\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = deflateCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n}\n\n\nexport default Polygon;\n\n\n/**\n * Create an approximation of a circle on the surface of a sphere.\n * @param {import(\"../coordinate.js\").Coordinate} center Center (`[lon, lat]` in degrees).\n * @param {number} radius The great-circle distance from the center to\n *     the polygon vertices.\n * @param {number=} opt_n Optional number of vertices for the resulting\n *     polygon. Default is `32`.\n * @param {number=} opt_sphereRadius Optional radius for the sphere (defaults to\n *     the Earth's mean radius using the WGS84 ellipsoid).\n * @return {Polygon} The \"circular\" polygon.\n * @api\n */\nexport function circular(center, radius, opt_n, opt_sphereRadius) {\n  const n = opt_n ? opt_n : 32;\n  /** @type {Array<number>} */\n  const flatCoordinates = [];\n  for (let i = 0; i < n; ++i) {\n    extend(flatCoordinates, sphereOffset(center, radius, 2 * Math.PI * i / n, opt_sphereRadius));\n  }\n  flatCoordinates.push(flatCoordinates[0], flatCoordinates[1]);\n  return new Polygon(flatCoordinates, GeometryLayout.XY, [flatCoordinates.length]);\n}\n\n\n/**\n * Create a polygon from an extent. The layout used is `XY`.\n * @param {import(\"../extent.js\").Extent} extent The extent.\n * @return {Polygon} The polygon.\n * @api\n */\nexport function fromExtent(extent) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const flatCoordinates =\n      [minX, minY, minX, maxY, maxX, maxY, maxX, minY, minX, minY];\n  return new Polygon(flatCoordinates, GeometryLayout.XY, [flatCoordinates.length]);\n}\n\n\n/**\n * Create a regular polygon from a circle.\n * @param {import(\"./Circle.js\").default} circle Circle geometry.\n * @param {number=} opt_sides Number of sides of the polygon. Default is 32.\n * @param {number=} opt_angle Start angle for the first vertex of the polygon in\n *     radians. Default is 0.\n * @return {Polygon} Polygon geometry.\n * @api\n */\nexport function fromCircle(circle, opt_sides, opt_angle) {\n  const sides = opt_sides ? opt_sides : 32;\n  const stride = circle.getStride();\n  const layout = circle.getLayout();\n  const center = circle.getCenter();\n  const arrayLength = stride * (sides + 1);\n  const flatCoordinates = new Array(arrayLength);\n  for (let i = 0; i < arrayLength; i += stride) {\n    flatCoordinates[i] = 0;\n    flatCoordinates[i + 1] = 0;\n    for (let j = 2; j < stride; j++) {\n      flatCoordinates[i + j] = center[j];\n    }\n  }\n  const ends = [flatCoordinates.length];\n  const polygon = new Polygon(flatCoordinates, layout, ends);\n  makeRegular(polygon, center, circle.getRadius(), opt_angle);\n  return polygon;\n}\n\n\n/**\n * Modify the coordinates of a polygon to make it a regular polygon.\n * @param {Polygon} polygon Polygon geometry.\n * @param {import(\"../coordinate.js\").Coordinate} center Center of the regular polygon.\n * @param {number} radius Radius of the regular polygon.\n * @param {number=} opt_angle Start angle for the first vertex of the polygon in\n *     radians. Default is 0.\n */\nexport function makeRegular(polygon, center, radius, opt_angle) {\n  const flatCoordinates = polygon.getFlatCoordinates();\n  const stride = polygon.getStride();\n  const sides = flatCoordinates.length / stride - 1;\n  const startAngle = opt_angle ? opt_angle : 0;\n  for (let i = 0; i <= sides; ++i) {\n    const offset = i * stride;\n    const angle = startAngle + (modulo(i, sides) * 2 * Math.PI / sides);\n    flatCoordinates[offset] = center[0] + (radius * Math.cos(angle));\n    flatCoordinates[offset + 1] = center[1] + (radius * Math.sin(angle));\n  }\n  polygon.changed();\n}\n","/**\n * @module ol/tilecoord\n */\n\n\n/**\n * An array of three numbers representing the location of a tile in a tile\n * grid. The order is `z`, `x`, and `y`. `z` is the zoom level.\n * @typedef {Array<number>} TileCoord\n * @api\n */\n\n\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {TileCoord=} opt_tileCoord Tile coordinate.\n * @return {TileCoord} Tile coordinate.\n */\nexport function createOrUpdate(z, x, y, opt_tileCoord) {\n  if (opt_tileCoord !== undefined) {\n    opt_tileCoord[0] = z;\n    opt_tileCoord[1] = x;\n    opt_tileCoord[2] = y;\n    return opt_tileCoord;\n  } else {\n    return [z, x, y];\n  }\n}\n\n\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {string} Key.\n */\nexport function getKeyZXY(z, x, y) {\n  return z + '/' + x + '/' + y;\n}\n\n\n/**\n * Get the key for a tile coord.\n * @param {TileCoord} tileCoord The tile coord.\n * @return {string} Key.\n */\nexport function getKey(tileCoord) {\n  return getKeyZXY(tileCoord[0], tileCoord[1], tileCoord[2]);\n}\n\n\n/**\n * Get a tile coord given a key.\n * @param {string} key The tile coord key.\n * @return {TileCoord} The tile coord.\n */\nexport function fromKey(key) {\n  return key.split('/').map(Number);\n}\n\n\n/**\n * @param {TileCoord} tileCoord Tile coord.\n * @return {number} Hash.\n */\nexport function hash(tileCoord) {\n  return (tileCoord[1] << tileCoord[0]) + tileCoord[2];\n}\n\n\n/**\n * @param {TileCoord} tileCoord Tile coord.\n * @return {string} Quad key.\n */\nexport function quadKey(tileCoord) {\n  const z = tileCoord[0];\n  const digits = new Array(z);\n  let mask = 1 << (z - 1);\n  let i, charCode;\n  for (i = 0; i < z; ++i) {\n    // 48 is charCode for 0 - '0'.charCodeAt(0)\n    charCode = 48;\n    if (tileCoord[1] & mask) {\n      charCode += 1;\n    }\n    if (tileCoord[2] & mask) {\n      charCode += 2;\n    }\n    digits[i] = String.fromCharCode(charCode);\n    mask >>= 1;\n  }\n  return digits.join('');\n}\n\n\n/**\n * @param {TileCoord} tileCoord Tile coordinate.\n * @param {!import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {boolean} Tile coordinate is within extent and zoom level range.\n */\nexport function withinExtentAndZ(tileCoord, tileGrid) {\n  const z = tileCoord[0];\n  const x = tileCoord[1];\n  const y = tileCoord[2];\n\n  if (tileGrid.getMinZoom() > z || z > tileGrid.getMaxZoom()) {\n    return false;\n  }\n  const extent = tileGrid.getExtent();\n  let tileRange;\n  if (!extent) {\n    tileRange = tileGrid.getFullTileRange(z);\n  } else {\n    tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n  }\n  if (!tileRange) {\n    return true;\n  } else {\n    return tileRange.containsXY(x, y);\n  }\n}\n","/**\n * @module ol/css\n */\n\n\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_HIDDEN = 'ol-hidden';\n\n\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_SELECTABLE = 'ol-selectable';\n\n\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSELECTABLE = 'ol-unselectable';\n\n\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSUPPORTED = 'ol-unsupported';\n\n\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_CONTROL = 'ol-control';\n\n\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_COLLAPSED = 'ol-collapsed';\n\n\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} The CSS font property.\n * @return {Object<string>} The font families (or null if the input spec is invalid).\n */\nexport const getFontFamilies = (function() {\n  let style;\n  const cache = {};\n  return function(font) {\n    if (!style) {\n      style = document.createElement('div').style;\n    }\n    if (!(font in cache)) {\n      style.font = font;\n      const family = style.fontFamily;\n      style.font = '';\n      if (!family) {\n        return null;\n      }\n      cache[font] = family.split(/,\\s?/);\n    }\n    return cache[font];\n  };\n})();\n","/**\n * @module ol/style/IconOrigin\n */\n\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/geom/SimpleGeometry\n */\nimport {abstract} from '../util.js';\nimport {createOrUpdateFromFlatCoordinates, getCenter} from '../extent.js';\nimport Geometry from './Geometry.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport {rotate, scale, translate, transform2D} from './flat/transform.js';\nimport {clear} from '../obj.js';\n\n/**\n * @classdesc\n * Abstract base class; only used for creating subclasses; do not instantiate\n * in apps, as cannot be rendered.\n *\n * @abstract\n * @api\n */\nclass SimpleGeometry extends Geometry {\n  constructor() {\n\n    super();\n\n    /**\n     * @protected\n     * @type {GeometryLayout}\n     */\n    this.layout = GeometryLayout.XY;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.stride = 2;\n\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n    this.flatCoordinates = null;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    return createOrUpdateFromFlatCoordinates(this.flatCoordinates,\n      0, this.flatCoordinates.length, this.stride, extent);\n  }\n\n  /**\n   * @abstract\n   * @return {Array} Coordinates.\n   */\n  getCoordinates() {\n    return abstract();\n  }\n\n  /**\n   * Return the first coordinate of the geometry.\n   * @return {import(\"../coordinate.js\").Coordinate} First coordinate.\n   * @api\n   */\n  getFirstCoordinate() {\n    return this.flatCoordinates.slice(0, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Flat coordinates.\n   */\n  getFlatCoordinates() {\n    return this.flatCoordinates;\n  }\n\n  /**\n   * Return the last coordinate of the geometry.\n   * @return {import(\"../coordinate.js\").Coordinate} Last point.\n   * @api\n   */\n  getLastCoordinate() {\n    return this.flatCoordinates.slice(this.flatCoordinates.length - this.stride);\n  }\n\n  /**\n   * Return the {@link module:ol/geom/GeometryLayout layout} of the geometry.\n   * @return {GeometryLayout} Layout.\n   * @api\n   */\n  getLayout() {\n    return this.layout;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    if (this.simplifiedGeometryRevision != this.getRevision()) {\n      clear(this.simplifiedGeometryCache);\n      this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n      this.simplifiedGeometryRevision = this.getRevision();\n    }\n    // If squaredTolerance is negative or if we know that simplification will not\n    // have any effect then just return this.\n    if (squaredTolerance < 0 ||\n        (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n         squaredTolerance <= this.simplifiedGeometryMaxMinSquaredTolerance)) {\n      return this;\n    }\n    const key = squaredTolerance.toString();\n    if (this.simplifiedGeometryCache.hasOwnProperty(key)) {\n      return this.simplifiedGeometryCache[key];\n    } else {\n      const simplifiedGeometry =\n          this.getSimplifiedGeometryInternal(squaredTolerance);\n      const simplifiedFlatCoordinates = simplifiedGeometry.getFlatCoordinates();\n      if (simplifiedFlatCoordinates.length < this.flatCoordinates.length) {\n        this.simplifiedGeometryCache[key] = simplifiedGeometry;\n        return simplifiedGeometry;\n      } else {\n        // Simplification did not actually remove any coordinates.  We now know\n        // that any calls to getSimplifiedGeometry with a squaredTolerance less\n        // than or equal to the current squaredTolerance will also not have any\n        // effect.  This allows us to short circuit simplification (saving CPU\n        // cycles) and prevents the cache of simplified geometries from filling\n        // up with useless identical copies of this geometry (saving memory).\n        this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n        return this;\n      }\n    }\n  }\n\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {SimpleGeometry} Simplified geometry.\n   * @protected\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    return this;\n  }\n\n  /**\n   * @return {number} Stride.\n   */\n  getStride() {\n    return this.stride;\n  }\n\n  /**\n   * @param {GeometryLayout} layout Layout.\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   */\n  setFlatCoordinates(layout, flatCoordinates) {\n    this.stride = getStrideForLayout(layout);\n    this.layout = layout;\n    this.flatCoordinates = flatCoordinates;\n  }\n\n  /**\n   * @abstract\n   * @param {!Array} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   */\n  setCoordinates(coordinates, opt_layout) {\n    abstract();\n  }\n\n  /**\n   * @param {GeometryLayout|undefined} layout Layout.\n   * @param {Array} coordinates Coordinates.\n   * @param {number} nesting Nesting.\n   * @protected\n   */\n  setLayout(layout, coordinates, nesting) {\n    /** @type {number} */\n    let stride;\n    if (layout) {\n      stride = getStrideForLayout(layout);\n    } else {\n      for (let i = 0; i < nesting; ++i) {\n        if (coordinates.length === 0) {\n          this.layout = GeometryLayout.XY;\n          this.stride = 2;\n          return;\n        } else {\n          coordinates = /** @type {Array} */ (coordinates[0]);\n        }\n      }\n      stride = coordinates.length;\n      layout = getLayoutForStride(stride);\n    }\n    this.layout = layout;\n    this.stride = stride;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  applyTransform(transformFn) {\n    if (this.flatCoordinates) {\n      transformFn(this.flatCoordinates, this.flatCoordinates, this.stride);\n      this.changed();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  rotate(angle, anchor) {\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      rotate(\n        flatCoordinates, 0, flatCoordinates.length,\n        stride, angle, anchor, flatCoordinates);\n      this.changed();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  scale(sx, opt_sy, opt_anchor) {\n    let sy = opt_sy;\n    if (sy === undefined) {\n      sy = sx;\n    }\n    let anchor = opt_anchor;\n    if (!anchor) {\n      anchor = getCenter(this.getExtent());\n    }\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      scale(\n        flatCoordinates, 0, flatCoordinates.length,\n        stride, sx, sy, anchor, flatCoordinates);\n      this.changed();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      translate(\n        flatCoordinates, 0, flatCoordinates.length, stride,\n        deltaX, deltaY, flatCoordinates);\n      this.changed();\n    }\n  }\n}\n\n\n/**\n * @param {number} stride Stride.\n * @return {GeometryLayout} layout Layout.\n */\nfunction getLayoutForStride(stride) {\n  let layout;\n  if (stride == 2) {\n    layout = GeometryLayout.XY;\n  } else if (stride == 3) {\n    layout = GeometryLayout.XYZ;\n  } else if (stride == 4) {\n    layout = GeometryLayout.XYZM;\n  }\n  return (\n    /** @type {GeometryLayout} */ (layout)\n  );\n}\n\n\n/**\n * @param {GeometryLayout} layout Layout.\n * @return {number} Stride.\n */\nexport function getStrideForLayout(layout) {\n  let stride;\n  if (layout == GeometryLayout.XY) {\n    stride = 2;\n  } else if (layout == GeometryLayout.XYZ || layout == GeometryLayout.XYM) {\n    stride = 3;\n  } else if (layout == GeometryLayout.XYZM) {\n    stride = 4;\n  }\n  return /** @type {number} */ (stride);\n}\n\n\n/**\n * @param {SimpleGeometry} simpleGeometry Simple geometry.\n * @param {import(\"../transform.js\").Transform} transform Transform.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed flat coordinates.\n */\nexport function transformGeom2D(simpleGeometry, transform, opt_dest) {\n  const flatCoordinates = simpleGeometry.getFlatCoordinates();\n  if (!flatCoordinates) {\n    return null;\n  } else {\n    const stride = simpleGeometry.getStride();\n    return transform2D(\n      flatCoordinates, 0, flatCoordinates.length, stride,\n      transform, opt_dest);\n  }\n}\n\nexport default SimpleGeometry;\n","/**\n * @module ol/source/State\n */\n\n/**\n * @enum {string}\n * State of the source, one of 'undefined', 'loading', 'ready' or 'error'.\n */\nexport default {\n  UNDEFINED: 'undefined',\n  LOADING: 'loading',\n  READY: 'ready',\n  ERROR: 'error'\n};\n","/**\n * @module ol/extent/Relationship\n */\n\n/**\n * Relationship to an extent.\n * @enum {number}\n */\nexport default {\n  UNKNOWN: 0,\n  INTERSECTING: 1,\n  ABOVE: 2,\n  RIGHT: 4,\n  BELOW: 8,\n  LEFT: 16\n};\n","/**\n * @module ol/proj/Units\n */\n\n/**\n * Projection units: `'degrees'`, `'ft'`, `'m'`, `'pixels'`, `'tile-pixels'` or\n * `'us-ft'`.\n * @enum {string}\n */\nconst Units = {\n  DEGREES: 'degrees',\n  FEET: 'ft',\n  METERS: 'm',\n  PIXELS: 'pixels',\n  TILE_PIXELS: 'tile-pixels',\n  USFEET: 'us-ft'\n};\n\n\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Object<Units, number>}\n * @api\n */\nexport const METERS_PER_UNIT = {};\n// use the radius of the Normal sphere\nMETERS_PER_UNIT[Units.DEGREES] = 2 * Math.PI * 6370997 / 360;\nMETERS_PER_UNIT[Units.FEET] = 0.3048;\nMETERS_PER_UNIT[Units.METERS] = 1;\nMETERS_PER_UNIT[Units.USFEET] = 1200 / 3937;\n\nexport default Units;\n","/**\n * @module ol/size\n */\n\n\n/**\n * An array of numbers representing a size: `[width, height]`.\n * @typedef {Array<number>} Size\n * @api\n */\n\n\n/**\n * Returns a buffered size.\n * @param {Size} size Size.\n * @param {number} num The amount by which to buffer.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} The buffered size.\n */\nexport function buffer(size, num, opt_size) {\n  if (opt_size === undefined) {\n    opt_size = [0, 0];\n  }\n  opt_size[0] = size[0] + 2 * num;\n  opt_size[1] = size[1] + 2 * num;\n  return opt_size;\n}\n\n\n/**\n * Determines if a size has a positive area.\n * @param {Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\nexport function hasArea(size) {\n  return size[0] > 0 && size[1] > 0;\n}\n\n\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {Size} size Size.\n * @param {number} ratio Ratio.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} The scaled size.\n */\nexport function scale(size, ratio, opt_size) {\n  if (opt_size === undefined) {\n    opt_size = [0, 0];\n  }\n  opt_size[0] = (size[0] * ratio + 0.5) | 0;\n  opt_size[1] = (size[1] * ratio + 0.5) | 0;\n  return opt_size;\n}\n\n\n/**\n * Returns an `Size` array for the passed in number (meaning: square) or\n * `Size` array.\n * (meaning: non-square),\n * @param {number|Size} size Width and height.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} Size.\n * @api\n */\nexport function toSize(size, opt_size) {\n  if (Array.isArray(size)) {\n    return size;\n  } else {\n    if (opt_size === undefined) {\n      opt_size = [size, size];\n    } else {\n      opt_size[0] = opt_size[1] = /** @type {number} */ (size);\n    }\n    return opt_size;\n  }\n}\n","/**\n * @module ol/LayerType\n */\n\n/**\n * A layer type used when creating layer renderers.\n * @enum {string}\n */\nexport default {\n  IMAGE: 'IMAGE',\n  TILE: 'TILE',\n  VECTOR_TILE: 'VECTOR_TILE',\n  VECTOR: 'VECTOR'\n};\n","/**\n * @module ol/Observable\n */\nimport {listen, unlistenByKey, unlisten, listenOnce} from './events.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").Event\n * @api\n */\nclass Observable extends EventTarget {\n  constructor() {\n\n    super();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.revision_ = 0;\n\n  }\n\n  /**\n   * Increases the revision counter and dispatches a 'change' event.\n   * @api\n   */\n  changed() {\n    ++this.revision_;\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * Get the version number for this object.  Each time the object is modified,\n   * its version number will be incremented.\n   * @return {number} Revision.\n   * @api\n   */\n  getRevision() {\n    return this.revision_;\n  }\n\n  /**\n   * Listen for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n   *     called with an array of event types as the first argument, the return\n   *     will be an array of keys.\n   * @api\n   */\n  on(type, listener) {\n    if (Array.isArray(type)) {\n      const len = type.length;\n      const keys = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        keys[i] = listen(this, type[i], listener);\n      }\n      return keys;\n    } else {\n      return listen(this, /** @type {string} */ (type), listener);\n    }\n  }\n\n  /**\n   * Listen once for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n   *     called with an array of event types as the first argument, the return\n   *     will be an array of keys.\n   * @api\n   */\n  once(type, listener) {\n    if (Array.isArray(type)) {\n      const len = type.length;\n      const keys = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        keys[i] = listenOnce(this, type[i], listener);\n      }\n      return keys;\n    } else {\n      return listenOnce(this, /** @type {string} */ (type), listener);\n    }\n  }\n\n  /**\n   * Unlisten for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @api\n   */\n  un(type, listener) {\n    if (Array.isArray(type)) {\n      for (let i = 0, ii = type.length; i < ii; ++i) {\n        unlisten(this, type[i], listener);\n      }\n      return;\n    } else {\n      unlisten(this, /** @type {string} */ (type), listener);\n    }\n  }\n}\n\n\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n  if (Array.isArray(key)) {\n    for (let i = 0, ii = key.length; i < ii; ++i) {\n      unlistenByKey(key[i]);\n    }\n  } else {\n    unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n  }\n}\n\n\nexport default Observable;\n","/**\n * @module ol/coordinate\n */\nimport {modulo} from './math.js';\nimport {padNumber} from './string.js';\n\n\n/**\n * An array of numbers representing an xy coordinate. Example: `[16, 48]`.\n * @typedef {Array<number>} Coordinate\n * @api\n */\n\n\n/**\n * A function that takes a {@link module:ol/coordinate~Coordinate} and\n * transforms it into a `{string}`.\n *\n * @typedef {function((Coordinate|undefined)): string} CoordinateFormat\n * @api\n */\n\n\n/**\n * Add `delta` to `coordinate`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {add} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     add(coord, [-2, 4]);\n *     // coord is now [5.85, 51.983333]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {Coordinate} delta Delta.\n * @return {Coordinate} The input coordinate adjusted by\n * the given delta.\n * @api\n */\nexport function add(coordinate, delta) {\n  coordinate[0] += delta[0];\n  coordinate[1] += delta[1];\n  return coordinate;\n}\n\n\n/**\n * Calculates the point closest to the passed coordinate on the passed circle.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {import(\"./geom/Circle.js\").default} circle The circle.\n * @return {Coordinate} Closest point on the circumference.\n */\nexport function closestOnCircle(coordinate, circle) {\n  const r = circle.getRadius();\n  const center = circle.getCenter();\n  const x0 = center[0];\n  const y0 = center[1];\n  const x1 = coordinate[0];\n  const y1 = coordinate[1];\n\n  let dx = x1 - x0;\n  const dy = y1 - y0;\n  if (dx === 0 && dy === 0) {\n    dx = 1;\n  }\n  const d = Math.sqrt(dx * dx + dy * dy);\n\n  const x = x0 + r * dx / d;\n  const y = y0 + r * dy / d;\n\n  return [x, y];\n}\n\n\n/**\n * Calculates the point closest to the passed coordinate on the passed segment.\n * This is the foot of the perpendicular of the coordinate to the segment when\n * the foot is on the segment, or the closest segment coordinate when the foot\n * is outside the segment.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {Array<Coordinate>} segment The two coordinates\n * of the segment.\n * @return {Coordinate} The foot of the perpendicular of\n * the coordinate to the segment.\n */\nexport function closestOnSegment(coordinate, segment) {\n  const x0 = coordinate[0];\n  const y0 = coordinate[1];\n  const start = segment[0];\n  const end = segment[1];\n  const x1 = start[0];\n  const y1 = start[1];\n  const x2 = end[0];\n  const y2 = end[1];\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const along = (dx === 0 && dy === 0) ? 0 :\n    ((dx * (x0 - x1)) + (dy * (y0 - y1))) / ((dx * dx + dy * dy) || 0);\n  let x, y;\n  if (along <= 0) {\n    x = x1;\n    y = y1;\n  } else if (along >= 1) {\n    x = x2;\n    y = y2;\n  } else {\n    x = x1 + along * dx;\n    y = y1 + along * dy;\n  }\n  return [x, y];\n}\n\n\n/**\n * Returns a {@link module:ol/coordinate~CoordinateFormat} function that can be\n * used to format\n * a {Coordinate} to a string.\n *\n * Example without specifying the fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY();\n *     var out = stringifyFunc(coord);\n *     // out is now '8, 48'\n *\n * Example with explicitly specifying 2 fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY(2);\n *     var out = stringifyFunc(coord);\n *     // out is now '7.85, 47.98'\n *\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {CoordinateFormat} Coordinate format.\n * @api\n */\nexport function createStringXY(opt_fractionDigits) {\n  return (\n    /**\n     * @param {Coordinate} coordinate Coordinate.\n     * @return {string} String XY.\n     */\n    function(coordinate) {\n      return toStringXY(coordinate, opt_fractionDigits);\n    }\n  );\n}\n\n\n/**\n * @param {string} hemispheres Hemispheres.\n * @param {number} degrees Degrees.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} String.\n */\nexport function degreesToStringHDMS(hemispheres, degrees, opt_fractionDigits) {\n  const normalizedDegrees = modulo(degrees + 180, 360) - 180;\n  const x = Math.abs(3600 * normalizedDegrees);\n  const dflPrecision = opt_fractionDigits || 0;\n  const precision = Math.pow(10, dflPrecision);\n\n  let deg = Math.floor(x / 3600);\n  let min = Math.floor((x - deg * 3600) / 60);\n  let sec = x - (deg * 3600) - (min * 60);\n  sec = Math.ceil(sec * precision) / precision;\n\n  if (sec >= 60) {\n    sec = 0;\n    min += 1;\n  }\n\n  if (min >= 60) {\n    min = 0;\n    deg += 1;\n  }\n\n  return deg + '\\u00b0 ' + padNumber(min, 2) + '\\u2032 ' +\n    padNumber(sec, 2, dflPrecision) + '\\u2033' +\n    (normalizedDegrees == 0 ? '' : ' ' + hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0));\n}\n\n\n/**\n * Transforms the given {@link module:ol/coordinate~Coordinate} to a string\n * using the given string template. The strings `{x}` and `{y}` in the template\n * will be replaced with the first and second coordinate values respectively.\n *\n * Example without specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template);\n *     // out is now 'Coordinate is (8|48).'\n *\n * Example explicitly specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template, 2);\n *     // out is now 'Coordinate is (7.85|47.98).'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {string} template A template string with `{x}` and `{y}` placeholders\n *     that will be replaced by first and second coordinate values.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Formatted coordinate.\n * @api\n */\nexport function format(coordinate, template, opt_fractionDigits) {\n  if (coordinate) {\n    return template\n      .replace('{x}', coordinate[0].toFixed(opt_fractionDigits))\n      .replace('{y}', coordinate[1].toFixed(opt_fractionDigits));\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * @param {Coordinate} coordinate1 First coordinate.\n * @param {Coordinate} coordinate2 Second coordinate.\n * @return {boolean} The two coordinates are equal.\n */\nexport function equals(coordinate1, coordinate2) {\n  let equals = true;\n  for (let i = coordinate1.length - 1; i >= 0; --i) {\n    if (coordinate1[i] != coordinate2[i]) {\n      equals = false;\n      break;\n    }\n  }\n  return equals;\n}\n\n\n/**\n * Rotate `coordinate` by `angle`. `coordinate` is modified in place and\n * returned by the function.\n *\n * Example:\n *\n *     import {rotate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var rotateRadians = Math.PI / 2; // 90 degrees\n *     rotate(coord, rotateRadians);\n *     // coord is now [-47.983333, 7.85]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} angle Angle in radian.\n * @return {Coordinate} Coordinate.\n * @api\n */\nexport function rotate(coordinate, angle) {\n  const cosAngle = Math.cos(angle);\n  const sinAngle = Math.sin(angle);\n  const x = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n  const y = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n  coordinate[0] = x;\n  coordinate[1] = y;\n  return coordinate;\n}\n\n\n/**\n * Scale `coordinate` by `scale`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {scale as scaleCoordinate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var scale = 1.2;\n *     scaleCoordinate(coord, scale);\n *     // coord is now [9.42, 57.5799996]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} scale Scale factor.\n * @return {Coordinate} Coordinate.\n */\nexport function scale(coordinate, scale) {\n  coordinate[0] *= scale;\n  coordinate[1] *= scale;\n  return coordinate;\n}\n\n\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Squared distance between coord1 and coord2.\n */\nexport function squaredDistance(coord1, coord2) {\n  const dx = coord1[0] - coord2[0];\n  const dy = coord1[1] - coord2[1];\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Distance between coord1 and coord2.\n */\nexport function distance(coord1, coord2) {\n  return Math.sqrt(squaredDistance(coord1, coord2));\n}\n\n\n/**\n * Calculate the squared distance from a coordinate to a line segment.\n *\n * @param {Coordinate} coordinate Coordinate of the point.\n * @param {Array<Coordinate>} segment Line segment (2\n * coordinates).\n * @return {number} Squared distance from the point to the line segment.\n */\nexport function squaredDistanceToSegment(coordinate, segment) {\n  return squaredDistance(coordinate,\n    closestOnSegment(coordinate, segment));\n}\n\n\n/**\n * Format a geographic coordinate with the hemisphere, degrees, minutes, and\n * seconds.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord);\n *     // out is now '47 58 60 N 7 50 60 E'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord, 1);\n *     // out is now '47 58 60.0 N 7 50 60.0 E'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Hemisphere, degrees, minutes and seconds.\n * @api\n */\nexport function toStringHDMS(coordinate, opt_fractionDigits) {\n  if (coordinate) {\n    return degreesToStringHDMS('NS', coordinate[1], opt_fractionDigits) + ' ' +\n        degreesToStringHDMS('EW', coordinate[0], opt_fractionDigits);\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * Format a coordinate as a comma delimited string.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord);\n *     // out is now '8, 48'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord, 1);\n *     // out is now '7.8, 48.0'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} XY.\n * @api\n */\nexport function toStringXY(coordinate, opt_fractionDigits) {\n  return format(coordinate, '{x}, {y}', opt_fractionDigits);\n}\n","/**\n * @module ol/reproj/common\n */\n\n/**\n * Default maximum allowed threshold  (in pixels) for reprojection\n * triangulation.\n * @type {number}\n */\nexport const ERROR_THRESHOLD = 0.5;\n\n/**\n * Enable automatic reprojection of raster sources. Default is `true`.\n * TODO: decide if we want to expose this as a build flag or remove it\n * @type {boolean}\n */\nexport const ENABLE_RASTER_REPROJECTION = true;\n","/**\n * @module ol/CollectionEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when an item is added to the collection.\n   * @event module:ol/Collection.CollectionEvent#add\n   * @api\n   */\n  ADD: 'add',\n  /**\n   * Triggered when an item is removed from the collection.\n   * @event module:ol/Collection.CollectionEvent#remove\n   * @api\n   */\n  REMOVE: 'remove'\n};\n","/**\n * @module ol/style/IconAnchorUnits\n */\n\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n  FRACTION: 'fraction',\n  PIXELS: 'pixels'\n};\n","/**\n * @module ol/geom/flat/deflate\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinate(flatCoordinates, offset, coordinate, stride) {\n  for (let i = 0, ii = coordinate.length; i < ii; ++i) {\n    flatCoordinates[offset++] = coordinate[i];\n  }\n  return offset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinates(flatCoordinates, offset, coordinates, stride) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    const coordinate = coordinates[i];\n    for (let j = 0; j < stride; ++j) {\n      flatCoordinates[offset++] = coordinate[j];\n    }\n  }\n  return offset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>} coordinatess Coordinatess.\n * @param {number} stride Stride.\n * @param {Array<number>=} opt_ends Ends.\n * @return {Array<number>} Ends.\n */\nexport function deflateCoordinatesArray(flatCoordinates, offset, coordinatess, stride, opt_ends) {\n  const ends = opt_ends ? opt_ends : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatess.length; j < jj; ++j) {\n    const end = deflateCoordinates(\n      flatCoordinates, offset, coordinatess[j], stride);\n    ends[i++] = end;\n    offset = end;\n  }\n  ends.length = i;\n  return ends;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} coordinatesss Coordinatesss.\n * @param {number} stride Stride.\n * @param {Array<Array<number>>=} opt_endss Endss.\n * @return {Array<Array<number>>} Endss.\n */\nexport function deflateMultiCoordinatesArray(flatCoordinates, offset, coordinatesss, stride, opt_endss) {\n  const endss = opt_endss ? opt_endss : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatesss.length; j < jj; ++j) {\n    const ends = deflateCoordinatesArray(\n      flatCoordinates, offset, coordinatesss[j], stride, endss[i]);\n    endss[i++] = ends;\n    offset = ends[ends.length - 1];\n  }\n  endss.length = i;\n  return endss;\n}\n","/**\n * @module ol/geom/flat/inflate\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>=} opt_coordinates Coordinates.\n * @return {Array<import(\"../../coordinate.js\").Coordinate>} Coordinates.\n */\nexport function inflateCoordinates(flatCoordinates, offset, end, stride, opt_coordinates) {\n  const coordinates = opt_coordinates !== undefined ? opt_coordinates : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    coordinates[i++] = flatCoordinates.slice(j, j + stride);\n  }\n  coordinates.length = i;\n  return coordinates;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>=} opt_coordinatess Coordinatess.\n * @return {Array<Array<import(\"../../coordinate.js\").Coordinate>>} Coordinatess.\n */\nexport function inflateCoordinatesArray(flatCoordinates, offset, ends, stride, opt_coordinatess) {\n  const coordinatess = opt_coordinatess !== undefined ? opt_coordinatess : [];\n  let i = 0;\n  for (let j = 0, jj = ends.length; j < jj; ++j) {\n    const end = ends[j];\n    coordinatess[i++] = inflateCoordinates(\n      flatCoordinates, offset, end, stride, coordinatess[i]);\n    offset = end;\n  }\n  coordinatess.length = i;\n  return coordinatess;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>=} opt_coordinatesss\n *     Coordinatesss.\n * @return {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} Coordinatesss.\n */\nexport function inflateMultiCoordinatesArray(flatCoordinates, offset, endss, stride, opt_coordinatesss) {\n  const coordinatesss = opt_coordinatesss !== undefined ? opt_coordinatesss : [];\n  let i = 0;\n  for (let j = 0, jj = endss.length; j < jj; ++j) {\n    const ends = endss[j];\n    coordinatesss[i++] = inflateCoordinatesArray(\n      flatCoordinates, offset, ends, stride, coordinatesss[i]);\n    offset = ends[ends.length - 1];\n  }\n  coordinatesss.length = i;\n  return coordinatesss;\n}\n","/**\n * @module ol/color\n */\nimport {assert} from './asserts.js';\nimport {clamp} from './math.js';\n\n\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array<number>} Color\n * @api\n */\n\n\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nconst HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n\n\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nconst NAMED_COLOR_RE_ = /^([a-z]*)$/i;\n\n\n/**\n * Return the color as an rgba string.\n * @param {Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n  if (typeof color === 'string') {\n    return color;\n  } else {\n    return toString(color);\n  }\n}\n\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n  const el = document.createElement('div');\n  el.style.color = color;\n  if (el.style.color !== '') {\n    document.body.appendChild(el);\n    const rgb = getComputedStyle(el).color;\n    document.body.removeChild(el);\n    return rgb;\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * @param {string} s String.\n * @return {Color} Color.\n */\nexport const fromString = (\n  function() {\n\n    // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n    // semantics, whenever the cache grows too large we simply delete an\n    // arbitrary 25% of the entries.\n\n    /**\n     * @const\n     * @type {number}\n     */\n    const MAX_CACHE_SIZE = 1024;\n\n    /**\n     * @type {Object<string, Color>}\n     */\n    const cache = {};\n\n    /**\n     * @type {number}\n     */\n    let cacheSize = 0;\n\n    return (\n      /**\n       * @param {string} s String.\n       * @return {Color} Color.\n       */\n      function(s) {\n        let color;\n        if (cache.hasOwnProperty(s)) {\n          color = cache[s];\n        } else {\n          if (cacheSize >= MAX_CACHE_SIZE) {\n            let i = 0;\n            for (const key in cache) {\n              if ((i++ & 3) === 0) {\n                delete cache[key];\n                --cacheSize;\n              }\n            }\n          }\n          color = fromStringInternal_(s);\n          cache[s] = color;\n          ++cacheSize;\n        }\n        return color;\n      }\n    );\n\n  })();\n\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {Color|string} color Color.\n * @return {Color} Color.\n * @api\n */\nexport function asArray(color) {\n  if (Array.isArray(color)) {\n    return color;\n  } else {\n    return fromString(color);\n  }\n}\n\n/**\n * @param {string} s String.\n * @private\n * @return {Color} Color.\n */\nfunction fromStringInternal_(s) {\n  let r, g, b, a, color;\n\n  if (NAMED_COLOR_RE_.exec(s)) {\n    s = fromNamed(s);\n  }\n\n  if (HEX_COLOR_RE_.exec(s)) { // hex\n    const n = s.length - 1; // number of hex digits\n    let d; // number of digits per channel\n    if (n <= 4) {\n      d = 1;\n    } else {\n      d = 2;\n    }\n    const hasAlpha = n === 4 || n === 8;\n    r = parseInt(s.substr(1 + 0 * d, d), 16);\n    g = parseInt(s.substr(1 + 1 * d, d), 16);\n    b = parseInt(s.substr(1 + 2 * d, d), 16);\n    if (hasAlpha) {\n      a = parseInt(s.substr(1 + 3 * d, d), 16);\n    } else {\n      a = 255;\n    }\n    if (d == 1) {\n      r = (r << 4) + r;\n      g = (g << 4) + g;\n      b = (b << 4) + b;\n      if (hasAlpha) {\n        a = (a << 4) + a;\n      }\n    }\n    color = [r, g, b, a / 255];\n  } else if (s.indexOf('rgba(') == 0) { // rgba()\n    color = s.slice(5, -1).split(',').map(Number);\n    normalize(color);\n  } else if (s.indexOf('rgb(') == 0) { // rgb()\n    color = s.slice(4, -1).split(',').map(Number);\n    color.push(1);\n    normalize(color);\n  } else {\n    assert(false, 14); // Invalid color\n  }\n  return color;\n}\n\n\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {Color} color Color.\n * @return {Color} Clamped color.\n */\nexport function normalize(color) {\n  color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n  color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n  color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n  color[3] = clamp(color[3], 0, 1);\n  return color;\n}\n\n\n/**\n * @param {Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n  let r = color[0];\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0;\n  }\n  let g = color[1];\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0;\n  }\n  let b = color[2];\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0;\n  }\n  const a = color[3] === undefined ? 1 : color[3];\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n","/**\n * @module ol/Collection\n */\nimport AssertionError from './AssertionError.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport BaseObject from './Object.js';\nimport Event from './events/Event.js';\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LENGTH: 'length'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n */\nexport class CollectionEvent extends Event {\n\n  /**\n   * @param {CollectionEventType} type Type.\n   * @param {*=} opt_element Element.\n   */\n  constructor(type, opt_element) {\n    super(type);\n\n    /**\n     * The element that is added to or removed from the collection.\n     * @type {*}\n     * @api\n     */\n    this.element = opt_element;\n\n  }\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nclass Collection extends BaseObject {\n\n  /**\n   * @param {Array<T>=} opt_array Array.\n   * @param {Options=} opt_options Collection options.\n   */\n  constructor(opt_array, opt_options) {\n\n    super();\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.unique_ = !!options.unique;\n\n    /**\n     * @private\n     * @type {!Array<T>}\n     */\n    this.array_ = opt_array ? opt_array : [];\n\n    if (this.unique_) {\n      for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n        this.assertUnique_(this.array_[i], i);\n      }\n    }\n\n    this.updateLength_();\n\n  }\n\n  /**\n   * Remove all elements from the collection.\n   * @api\n   */\n  clear() {\n    while (this.getLength() > 0) {\n      this.pop();\n    }\n  }\n\n  /**\n   * Add elements to the collection.  This pushes each item in the provided array\n   * to the end of the collection.\n   * @param {!Array<T>} arr Array.\n   * @return {Collection<T>} This collection.\n   * @api\n   */\n  extend(arr) {\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      this.push(arr[i]);\n    }\n    return this;\n  }\n\n  /**\n   * Iterate over each element, calling the provided callback.\n   * @param {function(T, number, Array<T>): *} f The function to call\n   *     for every element. This function takes 3 arguments (the element, the\n   *     index and the array). The return value is ignored.\n   * @api\n   */\n  forEach(f) {\n    const array = this.array_;\n    for (let i = 0, ii = array.length; i < ii; ++i) {\n      f(array[i], i, array);\n    }\n  }\n\n  /**\n   * Get a reference to the underlying Array object. Warning: if the array\n   * is mutated, no events will be dispatched by the collection, and the\n   * collection's \"length\" property won't be in sync with the actual length\n   * of the array.\n   * @return {!Array<T>} Array.\n   * @api\n   */\n  getArray() {\n    return this.array_;\n  }\n\n  /**\n   * Get the element at the provided index.\n   * @param {number} index Index.\n   * @return {T} Element.\n   * @api\n   */\n  item(index) {\n    return this.array_[index];\n  }\n\n  /**\n   * Get the length of this collection.\n   * @return {number} The length of the array.\n   * @observable\n   * @api\n   */\n  getLength() {\n    return this.get(Property.LENGTH);\n  }\n\n  /**\n   * Insert an element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  insertAt(index, elem) {\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    this.array_.splice(index, 0, elem);\n    this.updateLength_();\n    this.dispatchEvent(\n      new CollectionEvent(CollectionEventType.ADD, elem));\n  }\n\n  /**\n   * Remove the last element of the collection and return it.\n   * Return `undefined` if the collection is empty.\n   * @return {T|undefined} Element.\n   * @api\n   */\n  pop() {\n    return this.removeAt(this.getLength() - 1);\n  }\n\n  /**\n   * Insert the provided element at the end of the collection.\n   * @param {T} elem Element.\n   * @return {number} New length of the collection.\n   * @api\n   */\n  push(elem) {\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    const n = this.getLength();\n    this.insertAt(n, elem);\n    return this.getLength();\n  }\n\n  /**\n   * Remove the first occurrence of an element from the collection.\n   * @param {T} elem Element.\n   * @return {T|undefined} The removed element or undefined if none found.\n   * @api\n   */\n  remove(elem) {\n    const arr = this.array_;\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      if (arr[i] === elem) {\n        return this.removeAt(i);\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Remove the element at the provided index and return it.\n   * Return `undefined` if the collection does not contain this index.\n   * @param {number} index Index.\n   * @return {T|undefined} Value.\n   * @api\n   */\n  removeAt(index) {\n    const prev = this.array_[index];\n    this.array_.splice(index, 1);\n    this.updateLength_();\n    this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev));\n    return prev;\n  }\n\n  /**\n   * Set the element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  setAt(index, elem) {\n    const n = this.getLength();\n    if (index < n) {\n      if (this.unique_) {\n        this.assertUnique_(elem, index);\n      }\n      const prev = this.array_[index];\n      this.array_[index] = elem;\n      this.dispatchEvent(\n        new CollectionEvent(CollectionEventType.REMOVE, prev));\n      this.dispatchEvent(\n        new CollectionEvent(CollectionEventType.ADD, elem));\n    } else {\n      for (let j = n; j < index; ++j) {\n        this.insertAt(j, undefined);\n      }\n      this.insertAt(index, elem);\n    }\n  }\n\n  /**\n   * @private\n   */\n  updateLength_() {\n    this.set(Property.LENGTH, this.array_.length);\n  }\n\n  /**\n   * @private\n   * @param {T} elem Element.\n   * @param {number=} opt_except Optional index to ignore.\n   */\n  assertUnique_(elem, opt_except) {\n    for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n      if (this.array_[i] === elem && i !== opt_except) {\n        throw new AssertionError(58);\n      }\n    }\n  }\n}\n\n\nexport default Collection;\n","/**\n * @module ol/layer/Layer\n */\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getUid} from '../util.js';\nimport {getChangeEventType} from '../Object.js';\nimport BaseLayer from './Base.js';\nimport LayerProperty from './Property.js';\nimport {assign} from '../obj.js';\nimport RenderEventType from '../render/EventType.js';\nimport SourceState from '../source/State.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../source/Source.js\").default} [source] Source for this layer.  If not provided to the constructor,\n * the source can be set by calling {@link module:ol/layer/Layer#setSource layer.setSource(source)} after\n * construction.\n * @property {import(\"../PluggableMap.js\").default} [map] Map.\n */\n\n\n/**\n * @typedef {Object} State\n * @property {import(\"./Base.js\").default} layer\n * @property {number} opacity\n * @property {SourceState} sourceState\n * @property {boolean} visible\n * @property {boolean} managed\n * @property {import(\"../extent.js\").Extent} [extent]\n * @property {number} zIndex\n * @property {number} maxResolution\n * @property {number} minResolution\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with {@link module:ol/Map#addLayer}. Components\n * like {@link module:ol/interaction/Select~Select} use unmanaged layers\n * internally. These unmanaged layers are associated with the map using\n * {@link module:ol/layer/Layer~Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n *\n * @fires import(\"../render/Event.js\").RenderEvent\n */\nclass Layer extends BaseLayer {\n  /**\n   * @param {Options} options Layer options.\n   */\n  constructor(options) {\n\n    const baseOptions = assign({}, options);\n    delete baseOptions.source;\n\n    super(baseOptions);\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.mapPrecomposeKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.mapRenderKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.sourceChangeKey_ = null;\n\n    if (options.map) {\n      this.setMap(options.map);\n    }\n\n    listen(this,\n      getChangeEventType(LayerProperty.SOURCE),\n      this.handleSourcePropertyChange_, this);\n\n    const source = options.source ? options.source : null;\n    this.setSource(source);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayersArray(opt_array) {\n    const array = opt_array ? opt_array : [];\n    array.push(this);\n    return array;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayerStatesArray(opt_states) {\n    const states = opt_states ? opt_states : [];\n    states.push(this.getLayerState());\n    return states;\n  }\n\n  /**\n   * Get the layer source.\n   * @return {import(\"../source/Source.js\").default} The layer source (or `null` if not yet set).\n   * @observable\n   * @api\n   */\n  getSource() {\n    const source = this.get(LayerProperty.SOURCE);\n    return (\n      /** @type {import(\"../source/Source.js\").default} */ (source) || null\n    );\n  }\n\n  /**\n    * @inheritDoc\n    */\n  getSourceState() {\n    const source = this.getSource();\n    return !source ? SourceState.UNDEFINED : source.getState();\n  }\n\n  /**\n   * @private\n   */\n  handleSourceChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleSourcePropertyChange_() {\n    if (this.sourceChangeKey_) {\n      unlistenByKey(this.sourceChangeKey_);\n      this.sourceChangeKey_ = null;\n    }\n    const source = this.getSource();\n    if (source) {\n      this.sourceChangeKey_ = listen(source,\n        EventType.CHANGE, this.handleSourceChange_, this);\n    }\n    this.changed();\n  }\n\n  /**\n   * Sets the layer to be rendered on top of other layers on a map. The map will\n   * not manage this layer in its layers collection, and the callback in\n   * {@link module:ol/Map#forEachLayerAtPixel} will receive `null` as layer. This\n   * is useful for temporary layers. To remove an unmanaged layer from the map,\n   * use `#setMap(null)`.\n   *\n   * To add the layer to a map and have it managed by the map, use\n   * {@link module:ol/Map#addLayer} instead.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   * @api\n   */\n  setMap(map) {\n    if (this.mapPrecomposeKey_) {\n      unlistenByKey(this.mapPrecomposeKey_);\n      this.mapPrecomposeKey_ = null;\n    }\n    if (!map) {\n      this.changed();\n    }\n    if (this.mapRenderKey_) {\n      unlistenByKey(this.mapRenderKey_);\n      this.mapRenderKey_ = null;\n    }\n    if (map) {\n      this.mapPrecomposeKey_ = listen(map, RenderEventType.PRECOMPOSE, function(evt) {\n        const renderEvent = /** @type {import(\"../render/Event.js\").default} */ (evt);\n        const layerState = this.getLayerState();\n        layerState.managed = false;\n        if (this.getZIndex() === undefined) {\n          layerState.zIndex = Infinity;\n        }\n        renderEvent.frameState.layerStatesArray.push(layerState);\n        renderEvent.frameState.layerStates[getUid(this)] = layerState;\n      }, this);\n      this.mapRenderKey_ = listen(this, EventType.CHANGE, map.render, map);\n      this.changed();\n    }\n  }\n\n  /**\n   * Set the layer source.\n   * @param {import(\"../source/Source.js\").default} source The layer source.\n   * @observable\n   * @api\n   */\n  setSource(source) {\n    this.set(LayerProperty.SOURCE, source);\n  }\n}\n\n\n/**\n * Return `true` if the layer is visible, and if the passed resolution is\n * between the layer's minResolution and maxResolution. The comparison is\n * inclusive for `minResolution` and exclusive for `maxResolution`.\n * @param {State} layerState Layer state.\n * @param {number} resolution Resolution.\n * @return {boolean} The layer is visible at the given resolution.\n */\nexport function visibleAtResolution(layerState, resolution) {\n  return layerState.visible && resolution >= layerState.minResolution &&\n      resolution < layerState.maxResolution;\n}\n\n\nexport default Layer;\n","/**\n * @module ol/geom/flat/closest\n */\nimport {lerp, squaredDistance as squaredDx} from '../../math.js';\n\n\n/**\n * Returns the point on the 2D line segment flatCoordinates[offset1] to\n * flatCoordinates[offset2] that is closest to the point (x, y).  Extra\n * dimensions are linearly interpolated.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset1 Offset 1.\n * @param {number} offset2 Offset 2.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n */\nfunction assignClosest(flatCoordinates, offset1, offset2, stride, x, y, closestPoint) {\n  const x1 = flatCoordinates[offset1];\n  const y1 = flatCoordinates[offset1 + 1];\n  const dx = flatCoordinates[offset2] - x1;\n  const dy = flatCoordinates[offset2 + 1] - y1;\n  let offset;\n  if (dx === 0 && dy === 0) {\n    offset = offset1;\n  } else {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      offset = offset2;\n    } else if (t > 0) {\n      for (let i = 0; i < stride; ++i) {\n        closestPoint[i] = lerp(flatCoordinates[offset1 + i],\n          flatCoordinates[offset2 + i], t);\n      }\n      closestPoint.length = stride;\n      return;\n    } else {\n      offset = offset1;\n    }\n  }\n  for (let i = 0; i < stride; ++i) {\n    closestPoint[i] = flatCoordinates[offset + i];\n  }\n  closestPoint.length = stride;\n}\n\n\n/**\n * Return the squared of the largest distance between any pair of consecutive\n * coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function maxSquaredDelta(flatCoordinates, offset, end, stride, max) {\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  for (offset += stride; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    const squaredDelta = squaredDx(x1, y1, x2, y2);\n    if (squaredDelta > max) {\n      max = squaredDelta;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return max;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function arrayMaxSquaredDelta(flatCoordinates, offset, ends, stride, max) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    max = maxSquaredDelta(\n      flatCoordinates, offset, end, stride, max);\n    offset = end;\n  }\n  return max;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function multiArrayMaxSquaredDelta(flatCoordinates, offset, endss, stride, max) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    max = arrayMaxSquaredDelta(\n      flatCoordinates, offset, ends, stride, max);\n    offset = ends[ends.length - 1];\n  }\n  return max;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestPoint(flatCoordinates, offset, end,\n  stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  if (offset == end) {\n    return minSquaredDistance;\n  }\n  let i, squaredDistance;\n  if (maxDelta === 0) {\n    // All points are identical, so just test the first point.\n    squaredDistance = squaredDx(\n      x, y, flatCoordinates[offset], flatCoordinates[offset + 1]);\n    if (squaredDistance < minSquaredDistance) {\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[offset + i];\n      }\n      closestPoint.length = stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  let index = offset + stride;\n  while (index < end) {\n    assignClosest(\n      flatCoordinates, index - stride, index, stride, x, y, tmpPoint);\n    squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n      index += stride;\n    } else {\n      // Skip ahead multiple points, because we know that all the skipped\n      // points cannot be any closer than the closest point we have found so\n      // far.  We know this because we know how close the current point is, how\n      // close the closest point we have found so far is, and the maximum\n      // distance between consecutive points.  For example, if we're currently\n      // at distance 10, the best we've found so far is 3, and that the maximum\n      // distance between consecutive points is 2, then we'll need to skip at\n      // least (10 - 3) / 2 == 3 (rounded down) points to have any chance of\n      // finding a closer point.  We use Math.max(..., 1) to ensure that we\n      // always advance at least one point, to avoid an infinite loop.\n      index += stride * Math.max(\n        ((Math.sqrt(squaredDistance) -\n            Math.sqrt(minSquaredDistance)) / maxDelta) | 0, 1);\n    }\n  }\n  if (isRing) {\n    // Check the closing segment.\n    assignClosest(\n      flatCoordinates, end - stride, offset, stride, x, y, tmpPoint);\n    squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n    }\n  }\n  return minSquaredDistance;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestArrayPoint(flatCoordinates, offset, ends,\n  stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    minSquaredDistance = assignClosestPoint(\n      flatCoordinates, offset, end, stride,\n      maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n    offset = end;\n  }\n  return minSquaredDistance;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestMultiArrayPoint(flatCoordinates, offset,\n  endss, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    minSquaredDistance = assignClosestArrayPoint(\n      flatCoordinates, offset, ends, stride,\n      maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n    offset = ends[ends.length - 1];\n  }\n  return minSquaredDistance;\n}\n","/**\n * @module ol/geom/flat/transform\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../transform.js\").Transform} transform Transform.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function transform2D(flatCoordinates, offset, end, stride, transform, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const x = flatCoordinates[j];\n    const y = flatCoordinates[j + 1];\n    dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n    dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} angle Angle.\n * @param {Array<number>} anchor Rotation anchor point.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function rotate(flatCoordinates, offset, end, stride, angle, anchor, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + deltaX * cos - deltaY * sin;\n    dest[i++] = anchorY + deltaX * sin + deltaY * cos;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * Scale the coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} sx Scale factor in the x-direction.\n * @param {number} sy Scale factor in the y-direction.\n * @param {Array<number>} anchor Scale anchor point.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function scale(flatCoordinates, offset, end, stride, sx, sy, anchor, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + sx * deltaX;\n    dest[i++] = anchorY + sy * deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function translate(flatCoordinates, offset, end, stride, deltaX, deltaY, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    dest[i++] = flatCoordinates[j] + deltaX;\n    dest[i++] = flatCoordinates[j + 1] + deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n","/**\n * @module ol/events/Target\n */\nimport Disposable from '../Disposable.js';\nimport {unlistenAll} from '../events.js';\nimport {VOID} from '../functions.js';\nimport Event from './Event.js';\n\n\n/**\n * @typedef {EventTarget|Target} EventTargetLike\n */\n\n\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * See https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget.\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n */\nclass Target extends Disposable {\n  constructor() {\n\n    super();\n\n    /**\n     * @private\n     * @type {!Object<string, number>}\n     */\n    this.pendingRemovals_ = {};\n\n    /**\n     * @private\n     * @type {!Object<string, number>}\n     */\n    this.dispatching_ = {};\n\n    /**\n     * @private\n     * @type {!Object<string, Array<import(\"../events.js\").ListenerFunction>>}\n     */\n    this.listeners_ = {};\n\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").ListenerFunction} listener Listener.\n   */\n  addEventListener(type, listener) {\n    let listeners = this.listeners_[type];\n    if (!listeners) {\n      listeners = this.listeners_[type] = [];\n    }\n    if (listeners.indexOf(listener) === -1) {\n      listeners.push(listener);\n    }\n  }\n\n  /**\n   * Dispatches an event and calls all listeners listening for events\n   * of this type. The event parameter can either be a string or an\n   * Object with a `type` property.\n   *\n   * @param {{type: string,\n   *     target: (EventTargetLike|undefined),\n   *     propagationStopped: (boolean|undefined)}|\n   *     import(\"./Event.js\").default|string} event Event object.\n   * @return {boolean|undefined} `false` if anyone called preventDefault on the\n   *     event object or if any of the listeners returned false.\n   * @api\n   */\n  dispatchEvent(event) {\n    const evt = typeof event === 'string' ? new Event(event) : event;\n    const type = evt.type;\n    evt.target = this;\n    const listeners = this.listeners_[type];\n    let propagate;\n    if (listeners) {\n      if (!(type in this.dispatching_)) {\n        this.dispatching_[type] = 0;\n        this.pendingRemovals_[type] = 0;\n      }\n      ++this.dispatching_[type];\n      for (let i = 0, ii = listeners.length; i < ii; ++i) {\n        if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n          propagate = false;\n          break;\n        }\n      }\n      --this.dispatching_[type];\n      if (this.dispatching_[type] === 0) {\n        let pendingRemovals = this.pendingRemovals_[type];\n        delete this.pendingRemovals_[type];\n        while (pendingRemovals--) {\n          this.removeEventListener(type, VOID);\n        }\n        delete this.dispatching_[type];\n      }\n      return propagate;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    unlistenAll(this);\n  }\n\n  /**\n   * Get the listeners for a specified event type. Listeners are returned in the\n   * order that they will be called in.\n   *\n   * @param {string} type Type.\n   * @return {Array<import(\"../events.js\").ListenerFunction>} Listeners.\n   */\n  getListeners(type) {\n    return this.listeners_[type];\n  }\n\n  /**\n   * @param {string=} opt_type Type. If not provided,\n   *     `true` will be returned if this event target has any listeners.\n   * @return {boolean} Has listeners.\n   */\n  hasListener(opt_type) {\n    return opt_type ?\n      opt_type in this.listeners_ :\n      Object.keys(this.listeners_).length > 0;\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").ListenerFunction} listener Listener.\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners_[type];\n    if (listeners) {\n      const index = listeners.indexOf(listener);\n      if (type in this.pendingRemovals_) {\n        // make listener a no-op, and remove later in #dispatchEvent()\n        listeners[index] = VOID;\n        ++this.pendingRemovals_[type];\n      } else {\n        listeners.splice(index, 1);\n        if (listeners.length === 0) {\n          delete this.listeners_[type];\n        }\n      }\n    }\n  }\n}\n\n\nexport default Target;\n","/**\n * @module ol/geom/LineString\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {assignClosestPoint, maxSquaredDelta} from './flat/closest.js';\nimport {deflateCoordinates} from './flat/deflate.js';\nimport {inflateCoordinates} from './flat/inflate.js';\nimport {interpolatePoint, lineStringCoordinateAtM} from './flat/interpolate.js';\nimport {intersectsLineString} from './flat/intersectsextent.js';\nimport {lineStringLength} from './flat/length.js';\nimport {forEach as forEachSegment} from './flat/segments.js';\nimport {douglasPeucker} from './flat/simplify.js';\n\n/**\n * @classdesc\n * Linestring geometry.\n *\n * @api\n */\nclass LineString extends SimpleGeometry {\n\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {GeometryLayout=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.flatMidpoint_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.flatMidpointRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n    } else {\n      this.setCoordinates(/** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n    }\n\n  }\n\n  /**\n   * Append the passed coordinate to the coordinates of the linestring.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @api\n   */\n  appendCoordinate(coordinate) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = coordinate.slice();\n    } else {\n      extend(this.flatCoordinates, coordinate);\n    }\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!LineString} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new LineString(this.flatCoordinates.slice(), this.layout);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(maxSquaredDelta(\n        this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestPoint(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * Iterate over each segment, calling the provided callback.\n   * If the callback returns a truthy value the function returns that\n   * value immediately. Otherwise the function returns `false`.\n   *\n   * @param {function(this: S, import(\"../coordinate.js\").Coordinate, import(\"../coordinate.js\").Coordinate): T} callback Function\n   *     called for each segment.\n   * @return {T|boolean} Value.\n   * @template T,S\n   * @api\n   */\n  forEachSegment(callback) {\n    return forEachSegment(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, callback);\n  }\n\n  /**\n   * Returns the coordinate at `m` using linear interpolation, or `null` if no\n   * such coordinate exists.\n   *\n   * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n   * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n   * M will return the first coordinate and Ms greater than the last M will\n   * return the last coordinate.\n   *\n   * @param {number} m M.\n   * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinate.\n   * @api\n   */\n  getCoordinateAtM(m, opt_extrapolate) {\n    if (this.layout != GeometryLayout.XYM &&\n        this.layout != GeometryLayout.XYZM) {\n      return null;\n    }\n    const extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n    return lineStringCoordinateAtM(this.flatCoordinates, 0,\n      this.flatCoordinates.length, this.stride, m, extrapolate);\n  }\n\n  /**\n   * Return the coordinates of the linestring.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * Return the coordinate at the provided fraction along the linestring.\n   * The `fraction` is a number between 0 and 1, where 0 is the start of the\n   * linestring and 1 is the end.\n   * @param {number} fraction Fraction.\n   * @param {import(\"../coordinate.js\").Coordinate=} opt_dest Optional coordinate whose values will\n   *     be modified. If not provided, a new coordinate will be returned.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinate of the interpolated point.\n   * @api\n   */\n  getCoordinateAt(fraction, opt_dest) {\n    return interpolatePoint(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      fraction, opt_dest);\n  }\n\n  /**\n   * Return the length of the linestring on projected plane.\n   * @return {number} Length (on projected plane).\n   * @api\n   */\n  getLength() {\n    return lineStringLength(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Flat midpoint.\n   */\n  getFlatMidpoint() {\n    if (this.flatMidpointRevision_ != this.getRevision()) {\n      this.flatMidpoint_ = this.getCoordinateAt(0.5, this.flatMidpoint_);\n      this.flatMidpointRevision_ = this.getRevision();\n    }\n    return this.flatMidpoint_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    simplifiedFlatCoordinates.length = douglasPeucker(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      squaredTolerance, simplifiedFlatCoordinates, 0);\n    return new LineString(simplifiedFlatCoordinates, GeometryLayout.XY);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.LINE_STRING;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLineString(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      extent);\n  }\n\n  /**\n   * Set the coordinates of the linestring.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default LineString;\n","/**\n * @module ol/render/EventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * @event module:ol/render/Event~RenderEvent#postcompose\n   * @api\n   */\n  POSTCOMPOSE: 'postcompose',\n  /**\n   * @event module:ol/render/Event~RenderEvent#precompose\n   * @api\n   */\n  PRECOMPOSE: 'precompose',\n  /**\n   * @event module:ol/render/Event~RenderEvent#render\n   * @api\n   */\n  RENDER: 'render',\n  /**\n   * Triggered when rendering is complete, i.e. all sources and tiles have\n   * finished loading for the current viewport, and all tiles are faded in.\n   * @event module:ol/render/Event~RenderEvent#rendercomplete\n   * @api\n   */\n  RENDERCOMPLETE: 'rendercomplete'\n};\n","/**\n * @module ol/style/IconImage\n */\n\nimport {createCanvasContext2D} from '../dom.js';\nimport {listenOnce, unlistenByKey} from '../events.js';\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport {shared as iconImageCache} from './IconImageCache.js';\n\nclass IconImage extends EventTarget {\n  /**\n   * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n   * @param {string|undefined} src Src.\n   * @param {import(\"../size.js\").Size} size Size.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../ImageState.js\").default} imageState Image state.\n   * @param {import(\"../color.js\").Color} color Color.\n   */\n  constructor(image, src, size, crossOrigin, imageState, color) {\n\n    super();\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = !image ? new Image() : image;\n\n    if (crossOrigin !== null) {\n      /** @type {HTMLImageElement} */ (this.image_).crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = color ?\n      /** @type {HTMLCanvasElement} */ (document.createElement('canvas')) :\n      null;\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = color;\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.imageListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../ImageState.js\").default}\n     */\n    this.imageState_ = imageState;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = size;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.tainted_;\n\n  }\n\n  /**\n   * @private\n   * @return {boolean} The image canvas is tainted.\n   */\n  isTainted_() {\n    if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n      this.tainted_ = false;\n      const context = createCanvasContext2D(1, 1);\n      try {\n        context.drawImage(this.image_, 0, 0);\n        context.getImageData(0, 0, 1, 1);\n      } catch (e) {\n        this.tainted_ = true;\n      }\n    }\n    return this.tainted_ === true;\n  }\n\n  /**\n   * @private\n   */\n  dispatchChangeEvent_() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @private\n   */\n  handleImageError_() {\n    this.imageState_ = ImageState.ERROR;\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  }\n\n  /**\n   * @private\n   */\n  handleImageLoad_() {\n    this.imageState_ = ImageState.LOADED;\n    if (this.size_) {\n      this.image_.width = this.size_[0];\n      this.image_.height = this.size_[1];\n    }\n    this.size_ = [this.image_.width, this.image_.height];\n    this.unlistenImage_();\n    this.replaceColor_();\n    this.dispatchChangeEvent_();\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   */\n  getImage(pixelRatio) {\n    return this.canvas_ ? this.canvas_ : this.image_;\n  }\n\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return this.imageState_;\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n  getHitDetectionImage(pixelRatio) {\n    if (!this.hitDetectionImage_) {\n      if (this.isTainted_()) {\n        const width = this.size_[0];\n        const height = this.size_[1];\n        const context = createCanvasContext2D(width, height);\n        context.fillRect(0, 0, width, height);\n        this.hitDetectionImage_ = context.canvas;\n      } else {\n        this.hitDetectionImage_ = this.image_;\n      }\n    }\n    return this.hitDetectionImage_;\n  }\n\n  /**\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getSize() {\n    return this.size_;\n  }\n\n  /**\n   * @return {string|undefined} Image src.\n   */\n  getSrc() {\n    return this.src_;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   */\n  load() {\n    if (this.imageState_ == ImageState.IDLE) {\n      this.imageState_ = ImageState.LOADING;\n      this.imageListenerKeys_ = [\n        listenOnce(this.image_, EventType.ERROR,\n          this.handleImageError_, this),\n        listenOnce(this.image_, EventType.LOAD,\n          this.handleImageLoad_, this)\n      ];\n      try {\n        /** @type {HTMLImageElement} */ (this.image_).src = this.src_;\n      } catch (e) {\n        this.handleImageError_();\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  replaceColor_() {\n    if (!this.color_ || this.isTainted_()) {\n      return;\n    }\n\n    this.canvas_.width = this.image_.width;\n    this.canvas_.height = this.image_.height;\n\n    const ctx = this.canvas_.getContext('2d');\n    ctx.drawImage(this.image_, 0, 0);\n\n    const imgData = ctx.getImageData(0, 0, this.image_.width, this.image_.height);\n    const data = imgData.data;\n    const r = this.color_[0] / 255.0;\n    const g = this.color_[1] / 255.0;\n    const b = this.color_[2] / 255.0;\n\n    for (let i = 0, ii = data.length; i < ii; i += 4) {\n      data[i] *= r;\n      data[i + 1] *= g;\n      data[i + 2] *= b;\n    }\n    ctx.putImageData(imgData, 0, 0);\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    this.imageListenerKeys_.forEach(unlistenByKey);\n    this.imageListenerKeys_ = null;\n  }\n}\n\n\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n  let iconImage = iconImageCache.get(src, crossOrigin, color);\n  if (!iconImage) {\n    iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n    iconImageCache.set(src, crossOrigin, color, iconImage);\n  }\n  return iconImage;\n}\n\n\nexport default IconImage;\n","/**\n * @module ol/style/Icon\n */\nimport {getUid} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport {assert} from '../asserts.js';\nimport {asArray} from '../color.js';\nimport {listen, unlisten} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport IconAnchorUnits from './IconAnchorUnits.js';\nimport {get as getIconImage} from './IconImage.js';\nimport IconOrigin from './IconOrigin.js';\nimport ImageStyle from './Image.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {import(\"./IconOrigin.js\").default} [anchorOrigin] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`. Default is `top-left`.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorXUnits] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels. Default is `'fraction'`.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorYUnits] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels. Default is `'fraction'`.\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you are using the WebGL renderer or if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {Array<number>} [offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\n * sub-rectangle to use from the original icon image.\n * @property {import(\"./IconOrigin.js\").default} [offsetOrigin] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`. Default is `top-left`.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {import(\"../size.js\").Size} [size] Icon size in pixel. Can be used together with `offset` to define the\n * sub-rectangle to use from the origin (sprite) icon image.\n * @property {import(\"../size.js\").Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not, and\n * for SVG images in Internet Explorer 11. The provided `imgSize` needs to match the actual size of the image.\n * @property {string} [src] Image source URI.\n */\n\n\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\nclass Icon extends ImageStyle {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options || {};\n\n    /**\n     * @type {number}\n     */\n    const opacity = options.opacity !== undefined ? options.opacity : 1;\n\n    /**\n     * @type {number}\n     */\n    const rotation = options.rotation !== undefined ? options.rotation : 0;\n\n    /**\n     * @type {number}\n     */\n    const scale = options.scale !== undefined ? options.scale : 1;\n\n    /**\n     * @type {boolean}\n     */\n    const rotateWithView = options.rotateWithView !== undefined ?\n      options.rotateWithView : false;\n\n    super({\n      opacity: opacity,\n      rotation: rotation,\n      scale: scale,\n      rotateWithView: rotateWithView\n    });\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.normalizedAnchor_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./IconOrigin.js\").default}\n     */\n    this.anchorOrigin_ = options.anchorOrigin !== undefined ?\n      options.anchorOrigin : IconOrigin.TOP_LEFT;\n\n    /**\n     * @private\n     * @type {import(\"./IconAnchorUnits.js\").default}\n     */\n    this.anchorXUnits_ = options.anchorXUnits !== undefined ?\n      options.anchorXUnits : IconAnchorUnits.FRACTION;\n\n    /**\n     * @private\n     * @type {import(\"./IconAnchorUnits.js\").default}\n     */\n    this.anchorYUnits_ = options.anchorYUnits !== undefined ?\n      options.anchorYUnits : IconAnchorUnits.FRACTION;\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n        options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    const image = options.img !== undefined ? options.img : null;\n\n    /**\n     * @type {import(\"../size.js\").Size}\n     */\n    const imgSize = options.imgSize !== undefined ? options.imgSize : null;\n\n    /**\n     * @type {string|undefined}\n     */\n    let src = options.src;\n\n    assert(!(src !== undefined && image),\n      4); // `image` and `src` cannot be provided at the same time\n    assert(!image || (image && imgSize),\n      5); // `imgSize` must be set when `image` is provided\n\n    if ((src === undefined || src.length === 0) && image) {\n      src = /** @type {HTMLImageElement} */ (image).src || getUid(image);\n    }\n    assert(src !== undefined && src.length > 0,\n      6); // A defined and non-empty `src` or `image` must be provided\n\n    /**\n     * @type {import(\"../ImageState.js\").default}\n     */\n    const imageState = options.src !== undefined ?\n      ImageState.IDLE : ImageState.LOADED;\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = options.color !== undefined ? asArray(options.color) : null;\n\n    /**\n     * @private\n     * @type {import(\"./IconImage.js\").default}\n     */\n    this.iconImage_ = getIconImage(\n      image, /** @type {string} */ (src), imgSize, this.crossOrigin_, imageState, this.color_);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n\n    /**\n     * @private\n     * @type {import(\"./IconOrigin.js\").default}\n     */\n    this.offsetOrigin_ = options.offsetOrigin !== undefined ?\n      options.offsetOrigin : IconOrigin.TOP_LEFT;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = options.size !== undefined ? options.size : null;\n\n  }\n\n  /**\n   * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n   * @return {Icon} The cloned style.\n   * @api\n   */\n  clone() {\n    return new Icon({\n      anchor: this.anchor_.slice(),\n      anchorOrigin: this.anchorOrigin_,\n      anchorXUnits: this.anchorXUnits_,\n      anchorYUnits: this.anchorYUnits_,\n      crossOrigin: this.crossOrigin_,\n      color: (this.color_ && this.color_.slice) ? this.color_.slice() : this.color_ || undefined,\n      src: this.getSrc(),\n      offset: this.offset_.slice(),\n      offsetOrigin: this.offsetOrigin_,\n      size: this.size_ !== null ? this.size_.slice() : undefined,\n      opacity: this.getOpacity(),\n      scale: this.getScale(),\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView()\n    });\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getAnchor() {\n    if (this.normalizedAnchor_) {\n      return this.normalizedAnchor_;\n    }\n    let anchor = this.anchor_;\n    const size = this.getSize();\n    if (this.anchorXUnits_ == IconAnchorUnits.FRACTION ||\n        this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n      if (!size) {\n        return null;\n      }\n      anchor = this.anchor_.slice();\n      if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\n        anchor[0] *= size[0];\n      }\n      if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n        anchor[1] *= size[1];\n      }\n    }\n\n    if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\n      if (!size) {\n        return null;\n      }\n      if (anchor === this.anchor_) {\n        anchor = this.anchor_.slice();\n      }\n      if (this.anchorOrigin_ == IconOrigin.TOP_RIGHT ||\n          this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        anchor[0] = -anchor[0] + size[0];\n      }\n      if (this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT ||\n          this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        anchor[1] = -anchor[1] + size[1];\n      }\n    }\n    this.normalizedAnchor_ = anchor;\n    return this.normalizedAnchor_;\n  }\n\n  /**\n   * Set the anchor point. The anchor determines the center point for the\n   * symbolizer.\n   *\n   * @param {Array<number>} anchor Anchor.\n   * @api\n   */\n  setAnchor(anchor) {\n    this.anchor_ = anchor;\n    this.normalizedAnchor_ = null;\n  }\n\n  /**\n   * Get the icon color.\n   * @return {import(\"../color.js\").Color} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   * @override\n   * @api\n   */\n  getImage(pixelRatio) {\n    return this.iconImage_.getImage(pixelRatio);\n  }\n\n  /**\n   * @override\n   */\n  getImageSize() {\n    return this.iconImage_.getSize();\n  }\n\n  /**\n   * @override\n   */\n  getHitDetectionImageSize() {\n    return this.getImageSize();\n  }\n\n  /**\n   * @override\n   */\n  getImageState() {\n    return this.iconImage_.getImageState();\n  }\n\n  /**\n   * @override\n   */\n  getHitDetectionImage(pixelRatio) {\n    return this.iconImage_.getHitDetectionImage(pixelRatio);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getOrigin() {\n    if (this.origin_) {\n      return this.origin_;\n    }\n    let offset = this.offset_;\n\n    if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\n      const size = this.getSize();\n      const iconImageSize = this.iconImage_.getSize();\n      if (!size || !iconImageSize) {\n        return null;\n      }\n      offset = offset.slice();\n      if (this.offsetOrigin_ == IconOrigin.TOP_RIGHT ||\n          this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        offset[0] = iconImageSize[0] - size[0] - offset[0];\n      }\n      if (this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT ||\n          this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        offset[1] = iconImageSize[1] - size[1] - offset[1];\n      }\n    }\n    this.origin_ = offset;\n    return this.origin_;\n  }\n\n  /**\n   * Get the image URL.\n   * @return {string|undefined} Image src.\n   * @api\n   */\n  getSrc() {\n    return this.iconImage_.getSrc();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getSize() {\n    return !this.size_ ? this.iconImage_.getSize() : this.size_;\n  }\n\n  /**\n   * @override\n   */\n  listenImageChange(listener, thisArg) {\n    return listen(this.iconImage_, EventType.CHANGE,\n      listener, thisArg);\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * When rendering a feature with an icon style, the vector renderer will\n   * automatically call this method. However, you might want to call this\n   * method yourself for preloading or other purposes.\n   * @override\n   * @api\n   */\n  load() {\n    this.iconImage_.load();\n  }\n\n  /**\n   * @override\n   */\n  unlistenImageChange(listener, thisArg) {\n    unlisten(this.iconImage_, EventType.CHANGE,\n      listener, thisArg);\n  }\n}\n\n\nexport default Icon;\n","/**\n * @module ol/tilegrid/TileGrid\n */\nimport {DEFAULT_TILE_SIZE} from './common.js';\nimport {assert} from '../asserts.js';\nimport TileRange, {createOrUpdate as createOrUpdateTileRange} from '../TileRange.js';\nimport {isSorted, linearFindNearest} from '../array.js';\nimport {createOrUpdate, getTopLeft} from '../extent.js';\nimport {clamp} from '../math.js';\nimport {toSize} from '../size.js';\nimport {createOrUpdate as createOrUpdateTileCoord} from '../tilecoord.js';\n\n\n/**\n * @private\n * @type {import(\"../tilecoord.js\").TileCoord}\n */\nconst tmpTileCoord = [0, 0, 0];\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../extent.js\").Extent} [extent] Extent for the tile grid. No tiles outside this\n * extent will be requested by {@link module:ol/source/Tile} sources. When no `origin` or\n * `origins` are configured, the `origin` will be set to the top-left corner of the extent.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {import(\"../coordinate.js\").Coordinate} [origin] The tile grid origin, i.e. where the `x`\n * and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left to right and upwards. If not\n * specified, `extent` or `origins` must be provided.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} [origins] Tile grid origins, i.e. where\n * the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * origin. Tile coordinates increase left to right and upwards. If not specified, `extent` or\n * `origin` must be provided.\n * @property {!Array<number>} resolutions Resolutions. The array index of each resolution needs\n * to match the zoom level. This means that even if a `minZoom` is configured, the resolutions\n * array will have a length of `maxZoom + 1`.\n * @property {Array<import(\"../size.js\").Size>} [sizes] Sizes.\n * @property {number|import(\"../size.js\").Size} [tileSize] Tile size.\n * Default is `[256, 256]`.\n * @property {Array<import(\"../size.js\").Size>} [tileSizes] Tile sizes. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * tile size.\n */\n\n\n/**\n * @classdesc\n * Base class for setting the grid pattern for sources accessing tiled-image\n * servers.\n * @api\n */\nclass TileGrid {\n  /**\n   * @param {Options} options Tile grid options.\n   */\n  constructor(options) {\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.minZoom = options.minZoom !== undefined ? options.minZoom : 0;\n\n    /**\n     * @private\n     * @type {!Array<number>}\n     */\n    this.resolutions_ = options.resolutions;\n    assert(isSorted(this.resolutions_, function(a, b) {\n      return b - a;\n    }, true), 17); // `resolutions` must be sorted in descending order\n\n\n    // check if we've got a consistent zoom factor and origin\n    let zoomFactor;\n    if (!options.origins) {\n      for (let i = 0, ii = this.resolutions_.length - 1; i < ii; ++i) {\n        if (!zoomFactor) {\n          zoomFactor = this.resolutions_[i] / this.resolutions_[i + 1];\n        } else {\n          if (this.resolutions_[i] / this.resolutions_[i + 1] !== zoomFactor) {\n            zoomFactor = undefined;\n            break;\n          }\n        }\n      }\n    }\n\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.zoomFactor_ = zoomFactor;\n\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.maxZoom = this.resolutions_.length - 1;\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.origin_ = options.origin !== undefined ? options.origin : null;\n\n    /**\n     * @private\n     * @type {Array<import(\"../coordinate.js\").Coordinate>}\n     */\n    this.origins_ = null;\n    if (options.origins !== undefined) {\n      this.origins_ = options.origins;\n      assert(this.origins_.length == this.resolutions_.length,\n        20); // Number of `origins` and `resolutions` must be equal\n    }\n\n    const extent = options.extent;\n\n    if (extent !== undefined &&\n        !this.origin_ && !this.origins_) {\n      this.origin_ = getTopLeft(extent);\n    }\n\n    assert(\n      (!this.origin_ && this.origins_) || (this.origin_ && !this.origins_),\n      18); // Either `origin` or `origins` must be configured, never both\n\n    /**\n     * @private\n     * @type {Array<number|import(\"../size.js\").Size>}\n     */\n    this.tileSizes_ = null;\n    if (options.tileSizes !== undefined) {\n      this.tileSizes_ = options.tileSizes;\n      assert(this.tileSizes_.length == this.resolutions_.length,\n        19); // Number of `tileSizes` and `resolutions` must be equal\n    }\n\n    /**\n     * @private\n     * @type {number|import(\"../size.js\").Size}\n     */\n    this.tileSize_ = options.tileSize !== undefined ?\n      options.tileSize :\n      !this.tileSizes_ ? DEFAULT_TILE_SIZE : null;\n    assert(\n      (!this.tileSize_ && this.tileSizes_) ||\n        (this.tileSize_ && !this.tileSizes_),\n      22); // Either `tileSize` or `tileSizes` must be configured, never both\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = extent !== undefined ? extent : null;\n\n\n    /**\n     * @private\n     * @type {Array<import(\"../TileRange.js\").default>}\n     */\n    this.fullTileRanges_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.tmpSize_ = [0, 0];\n\n    if (options.sizes !== undefined) {\n      this.fullTileRanges_ = options.sizes.map(function(size, z) {\n        const tileRange = new TileRange(\n          Math.min(0, size[0]), Math.max(size[0] - 1, -1),\n          Math.min(0, size[1]), Math.max(size[1] - 1, -1));\n        return tileRange;\n      }, this);\n    } else if (extent) {\n      this.calculateTileRanges_(extent);\n    }\n\n  }\n\n  /**\n   * Call a function with each tile coordinate for a given extent and zoom level.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} zoom Integer zoom level.\n   * @param {function(import(\"../tilecoord.js\").TileCoord)} callback Function called with each tile coordinate.\n   * @api\n   */\n  forEachTileCoord(extent, zoom, callback) {\n    const tileRange = this.getTileRangeForExtentAndZ(extent, zoom);\n    for (let i = tileRange.minX, ii = tileRange.maxX; i <= ii; ++i) {\n      for (let j = tileRange.minY, jj = tileRange.maxY; j <= jj; ++j) {\n        callback([zoom, i, j]);\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {function(this: T, number, import(\"../TileRange.js\").default): boolean} callback Callback.\n   * @param {T=} opt_this The object to use as `this` in `callback`.\n   * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary import(\"../TileRange.js\").default object.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n   * @return {boolean} Callback succeeded.\n   * @template T\n   */\n  forEachTileCoordParentTileRange(tileCoord, callback, opt_this, opt_tileRange, opt_extent) {\n    let tileRange, x, y;\n    let tileCoordExtent = null;\n    let z = tileCoord[0] - 1;\n    if (this.zoomFactor_ === 2) {\n      x = tileCoord[1];\n      y = tileCoord[2];\n    } else {\n      tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n    }\n    while (z >= this.minZoom) {\n      if (this.zoomFactor_ === 2) {\n        x = Math.floor(x / 2);\n        y = Math.floor(y / 2);\n        tileRange = createOrUpdateTileRange(x, x, y, y, opt_tileRange);\n      } else {\n        tileRange = this.getTileRangeForExtentAndZ(tileCoordExtent, z, opt_tileRange);\n      }\n      if (callback.call(opt_this, z, tileRange)) {\n        return true;\n      }\n      --z;\n    }\n    return false;\n  }\n\n  /**\n   * Get the extent for this tile grid, if it was configured.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   */\n  getExtent() {\n    return this.extent_;\n  }\n\n  /**\n   * Get the maximum zoom level for the grid.\n   * @return {number} Max zoom.\n   * @api\n   */\n  getMaxZoom() {\n    return this.maxZoom;\n  }\n\n  /**\n   * Get the minimum zoom level for the grid.\n   * @return {number} Min zoom.\n   * @api\n   */\n  getMinZoom() {\n    return this.minZoom;\n  }\n\n  /**\n   * Get the origin for the grid at the given zoom level.\n   * @param {number} z Integer zoom level.\n   * @return {import(\"../coordinate.js\").Coordinate} Origin.\n   * @api\n   */\n  getOrigin(z) {\n    if (this.origin_) {\n      return this.origin_;\n    } else {\n      return this.origins_[z];\n    }\n  }\n\n  /**\n   * Get the resolution for the given zoom level.\n   * @param {number} z Integer zoom level.\n   * @return {number} Resolution.\n   * @api\n   */\n  getResolution(z) {\n    return this.resolutions_[z];\n  }\n\n  /**\n   * Get the list of resolutions for the tile grid.\n   * @return {Array<number>} Resolutions.\n   * @api\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary import(\"../TileRange.js\").default object.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n   * @return {import(\"../TileRange.js\").default} Tile range.\n   */\n  getTileCoordChildTileRange(tileCoord, opt_tileRange, opt_extent) {\n    if (tileCoord[0] < this.maxZoom) {\n      if (this.zoomFactor_ === 2) {\n        const minX = tileCoord[1] * 2;\n        const minY = tileCoord[2] * 2;\n        return createOrUpdateTileRange(minX, minX + 1, minY, minY + 1, opt_tileRange);\n      }\n      const tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n      return this.getTileRangeForExtentAndZ(\n        tileCoordExtent, tileCoord[0] + 1, opt_tileRange);\n    }\n    return null;\n  }\n\n  /**\n   * Get the extent for a tile range.\n   * @param {number} z Integer zoom level.\n   * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   */\n  getTileRangeExtent(z, tileRange, opt_extent) {\n    const origin = this.getOrigin(z);\n    const resolution = this.getResolution(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n    const minX = origin[0] + tileRange.minX * tileSize[0] * resolution;\n    const maxX = origin[0] + (tileRange.maxX + 1) * tileSize[0] * resolution;\n    const minY = origin[1] + tileRange.minY * tileSize[1] * resolution;\n    const maxY = origin[1] + (tileRange.maxY + 1) * tileSize[1] * resolution;\n    return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n  }\n\n  /**\n   * Get a tile range for the given extent and integer zoom level.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} z Integer zoom level.\n   * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary tile range object.\n   * @return {import(\"../TileRange.js\").default} Tile range.\n   */\n  getTileRangeForExtentAndZ(extent, z, opt_tileRange) {\n    const tileCoord = tmpTileCoord;\n    this.getTileCoordForXYAndZ_(extent[0], extent[1], z, false, tileCoord);\n    const minX = tileCoord[1];\n    const minY = tileCoord[2];\n    this.getTileCoordForXYAndZ_(extent[2], extent[3], z, true, tileCoord);\n    return createOrUpdateTileRange(minX, tileCoord[1], minY, tileCoord[2], opt_tileRange);\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @return {import(\"../coordinate.js\").Coordinate} Tile center.\n   */\n  getTileCoordCenter(tileCoord) {\n    const origin = this.getOrigin(tileCoord[0]);\n    const resolution = this.getResolution(tileCoord[0]);\n    const tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n    return [\n      origin[0] + (tileCoord[1] + 0.5) * tileSize[0] * resolution,\n      origin[1] + (tileCoord[2] + 0.5) * tileSize[1] * resolution\n    ];\n  }\n\n  /**\n   * Get the extent of a tile coordinate.\n   *\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Temporary extent object.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getTileCoordExtent(tileCoord, opt_extent) {\n    const origin = this.getOrigin(tileCoord[0]);\n    const resolution = this.getResolution(tileCoord[0]);\n    const tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n    const minX = origin[0] + tileCoord[1] * tileSize[0] * resolution;\n    const minY = origin[1] + tileCoord[2] * tileSize[1] * resolution;\n    const maxX = minX + tileSize[0] * resolution;\n    const maxY = minY + tileSize[1] * resolution;\n    return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n  }\n\n  /**\n   * Get the tile coordinate for the given map coordinate and resolution.  This\n   * method considers that coordinates that intersect tile boundaries should be\n   * assigned the higher tile coordinate.\n   *\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Destination import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @api\n   */\n  getTileCoordForCoordAndResolution(coordinate, resolution, opt_tileCoord) {\n    return this.getTileCoordForXYAndResolution_(\n      coordinate[0], coordinate[1], resolution, false, opt_tileCoord);\n  }\n\n  /**\n   * Note that this method should not be called for resolutions that correspond\n   * to an integer zoom level.  Instead call the `getTileCoordForXYAndZ_` method.\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {number} resolution Resolution (for a non-integer zoom level).\n   * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n   *     intersections go to the higher tile coordinate, let edge intersections\n   *     go to the lower tile coordinate.\n   * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Temporary import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @private\n   */\n  getTileCoordForXYAndResolution_(x, y, resolution, reverseIntersectionPolicy, opt_tileCoord) {\n    const z = this.getZForResolution(resolution);\n    const scale = resolution / this.getResolution(z);\n    const origin = this.getOrigin(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n\n    const adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n    const adjustY = reverseIntersectionPolicy ? 0 : 0.5;\n    const xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n    const yFromOrigin = Math.floor((y - origin[1]) / resolution + adjustY);\n    let tileCoordX = scale * xFromOrigin / tileSize[0];\n    let tileCoordY = scale * yFromOrigin / tileSize[1];\n\n    if (reverseIntersectionPolicy) {\n      tileCoordX = Math.ceil(tileCoordX) - 1;\n      tileCoordY = Math.ceil(tileCoordY) - 1;\n    } else {\n      tileCoordX = Math.floor(tileCoordX);\n      tileCoordY = Math.floor(tileCoordY);\n    }\n\n    return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n  }\n\n  /**\n   * Although there is repetition between this method and `getTileCoordForXYAndResolution_`,\n   * they should have separate implementations.  This method is for integer zoom\n   * levels.  The other method should only be called for resolutions corresponding\n   * to non-integer zoom levels.\n   * @param {number} x Map x coordinate.\n   * @param {number} y Map y coordinate.\n   * @param {number} z Integer zoom level.\n   * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n   *     intersections go to the higher tile coordinate, let edge intersections\n   *     go to the lower tile coordinate.\n   * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Temporary import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @private\n   */\n  getTileCoordForXYAndZ_(x, y, z, reverseIntersectionPolicy, opt_tileCoord) {\n    const origin = this.getOrigin(z);\n    const resolution = this.getResolution(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n\n    const adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n    const adjustY = reverseIntersectionPolicy ? 0 : 0.5;\n    const xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n    const yFromOrigin = Math.floor((y - origin[1]) / resolution + adjustY);\n    let tileCoordX = xFromOrigin / tileSize[0];\n    let tileCoordY = yFromOrigin / tileSize[1];\n\n    if (reverseIntersectionPolicy) {\n      tileCoordX = Math.ceil(tileCoordX) - 1;\n      tileCoordY = Math.ceil(tileCoordY) - 1;\n    } else {\n      tileCoordX = Math.floor(tileCoordX);\n      tileCoordY = Math.floor(tileCoordY);\n    }\n\n    return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n  }\n\n  /**\n   * Get a tile coordinate given a map coordinate and zoom level.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} z Zoom level.\n   * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Destination import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @api\n   */\n  getTileCoordForCoordAndZ(coordinate, z, opt_tileCoord) {\n    return this.getTileCoordForXYAndZ_(\n      coordinate[0], coordinate[1], z, false, opt_tileCoord);\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @return {number} Tile resolution.\n   */\n  getTileCoordResolution(tileCoord) {\n    return this.resolutions_[tileCoord[0]];\n  }\n\n  /**\n   * Get the tile size for a zoom level. The type of the return value matches the\n   * `tileSize` or `tileSizes` that the tile grid was configured with. To always\n   * get an `import(\"../size.js\").Size`, run the result through `import(\"../size.js\").Size.toSize()`.\n   * @param {number} z Z.\n   * @return {number|import(\"../size.js\").Size} Tile size.\n   * @api\n   */\n  getTileSize(z) {\n    if (this.tileSize_) {\n      return this.tileSize_;\n    } else {\n      return this.tileSizes_[z];\n    }\n  }\n\n  /**\n   * @param {number} z Zoom level.\n   * @return {import(\"../TileRange.js\").default} Extent tile range for the specified zoom level.\n   */\n  getFullTileRange(z) {\n    if (!this.fullTileRanges_) {\n      return null;\n    } else {\n      return this.fullTileRanges_[z];\n    }\n  }\n\n  /**\n   * @param {number} resolution Resolution.\n   * @param {number=} opt_direction If 0, the nearest resolution will be used.\n   *     If 1, the nearest lower resolution will be used. If -1, the nearest\n   *     higher resolution will be used. Default is 0.\n   * @return {number} Z.\n   * @api\n   */\n  getZForResolution(resolution, opt_direction) {\n    const z = linearFindNearest(this.resolutions_, resolution, opt_direction || 0);\n    return clamp(z, this.minZoom, this.maxZoom);\n  }\n\n  /**\n   * @param {!import(\"../extent.js\").Extent} extent Extent for this tile grid.\n   * @private\n   */\n  calculateTileRanges_(extent) {\n    const length = this.resolutions_.length;\n    const fullTileRanges = new Array(length);\n    for (let z = this.minZoom; z < length; ++z) {\n      fullTileRanges[z] = this.getTileRangeForExtentAndZ(extent, z);\n    }\n    this.fullTileRanges_ = fullTileRanges;\n  }\n}\n\n\nexport default TileGrid;\n","/**\n * @module ol/tilegrid\n */\nimport {DEFAULT_MAX_ZOOM, DEFAULT_TILE_SIZE} from './tilegrid/common.js';\nimport {toSize} from './size.js';\nimport {containsCoordinate, createOrUpdate, getCorner, getHeight, getWidth} from './extent.js';\nimport Corner from './extent/Corner.js';\nimport {get as getProjection, METERS_PER_UNIT} from './proj.js';\nimport Units from './proj/Units.js';\nimport TileGrid from './tilegrid/TileGrid.js';\n\n\n/**\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {!TileGrid} Default tile grid for the\n * passed projection.\n */\nexport function getForProjection(projection) {\n  let tileGrid = projection.getDefaultTileGrid();\n  if (!tileGrid) {\n    tileGrid = createForProjection(projection);\n    projection.setDefaultTileGrid(tileGrid);\n  }\n  return tileGrid;\n}\n\n\n/**\n * @param {TileGrid} tileGrid Tile grid.\n * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {import(\"./tilecoord.js\").TileCoord} Tile coordinate.\n */\nexport function wrapX(tileGrid, tileCoord, projection) {\n  const z = tileCoord[0];\n  const center = tileGrid.getTileCoordCenter(tileCoord);\n  const projectionExtent = extentFromProjection(projection);\n  if (!containsCoordinate(projectionExtent, center)) {\n    const worldWidth = getWidth(projectionExtent);\n    const worldsAway = Math.ceil((projectionExtent[0] - center[0]) / worldWidth);\n    center[0] += worldWidth * worldsAway;\n    return tileGrid.getTileCoordForCoordAndZ(center, z);\n  } else {\n    return tileCoord;\n  }\n}\n\n\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {Corner=} opt_corner Extent corner (default is `'top-left'`).\n * @return {!TileGrid} TileGrid instance.\n */\nexport function createForExtent(extent, opt_maxZoom, opt_tileSize, opt_corner) {\n  const corner = opt_corner !== undefined ? opt_corner : Corner.TOP_LEFT;\n\n  const resolutions = resolutionsFromExtent(extent, opt_maxZoom, opt_tileSize);\n\n  return new TileGrid({\n    extent: extent,\n    origin: getCorner(extent, corner),\n    resolutions: resolutions,\n    tileSize: opt_tileSize\n  });\n}\n\n\n/**\n * @typedef {Object} XYZOptions\n * @property {import(\"./extent.js\").Extent} [extent] Extent for the tile grid. The origin for an XYZ tile grid is the\n * top-left corner of the extent. The zero level of the grid is defined by the resolution at which one tile fits in the\n * provided extent. If not provided, the extent of the EPSG:3857 projection is used.\n * @property {number} [maxZoom] Maximum zoom. The default is `42`. This determines the number of levels\n * in the grid set. For example, a `maxZoom` of 21 means there are 22 levels in the grid set.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {number|import(\"./size.js\").Size} [tileSize=[256, 256]] Tile size in pixels.\n */\n\n\n/**\n * Creates a tile grid with a standard XYZ tiling scheme.\n * @param {XYZOptions=} opt_options Tile grid options.\n * @return {!TileGrid} Tile grid instance.\n * @api\n */\nexport function createXYZ(opt_options) {\n  /** @type {XYZOptions} */\n  const xyzOptions = opt_options || {};\n\n  const extent = xyzOptions.extent || getProjection('EPSG:3857').getExtent();\n\n  /** @type {import(\"./tilegrid/TileGrid.js\").Options} */\n  const gridOptions = {\n    extent: extent,\n    minZoom: xyzOptions.minZoom,\n    tileSize: xyzOptions.tileSize,\n    resolutions: resolutionsFromExtent(\n      extent,\n      xyzOptions.maxZoom,\n      xyzOptions.tileSize\n    )\n  };\n  return new TileGrid(gridOptions);\n}\n\n\n/**\n * Create a resolutions array from an extent.  A zoom factor of 2 is assumed.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @return {!Array<number>} Resolutions array.\n */\nfunction resolutionsFromExtent(extent, opt_maxZoom, opt_tileSize) {\n  const maxZoom = opt_maxZoom !== undefined ?\n    opt_maxZoom : DEFAULT_MAX_ZOOM;\n\n  const height = getHeight(extent);\n  const width = getWidth(extent);\n\n  const tileSize = toSize(opt_tileSize !== undefined ?\n    opt_tileSize : DEFAULT_TILE_SIZE);\n  const maxResolution = Math.max(\n    width / tileSize[0], height / tileSize[1]);\n\n  const length = maxZoom + 1;\n  const resolutions = new Array(length);\n  for (let z = 0; z < length; ++z) {\n    resolutions[z] = maxResolution / Math.pow(2, z);\n  }\n  return resolutions;\n}\n\n\n/**\n * @param {import(\"./proj.js\").ProjectionLike} projection Projection.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {Corner=} opt_corner Extent corner (default is `'top-left'`).\n * @return {!TileGrid} TileGrid instance.\n */\nexport function createForProjection(projection, opt_maxZoom, opt_tileSize, opt_corner) {\n  const extent = extentFromProjection(projection);\n  return createForExtent(extent, opt_maxZoom, opt_tileSize, opt_corner);\n}\n\n\n/**\n * Generate a tile grid extent from a projection.  If the projection has an\n * extent, it is used.  If not, a global extent is assumed.\n * @param {import(\"./proj.js\").ProjectionLike} projection Projection.\n * @return {import(\"./extent.js\").Extent} Extent.\n */\nexport function extentFromProjection(projection) {\n  projection = getProjection(projection);\n  let extent = projection.getExtent();\n  if (!extent) {\n    const half = 180 * METERS_PER_UNIT[Units.DEGREES] / projection.getMetersPerUnit();\n    extent = createOrUpdate(-half, -half, half, half);\n  }\n  return extent;\n}\n","/**\n * @module ol/colorlike\n */\nimport {toString} from './color.js';\n\n\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, pattern, or gradient. The origin for patterns and\n * gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n\n\n/**\n * @param {import(\"./color.js\").Color|ColorLike} color Color.\n * @return {ColorLike} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\nexport function asColorLike(color) {\n  if (Array.isArray(color)) {\n    return toString(color);\n  } else {\n    return color;\n  }\n}\n","/**\n * @module ol/control/Control\n */\nimport {VOID} from '../functions.js';\nimport MapEventType from '../MapEventType.js';\nimport BaseObject from '../Object.js';\nimport {removeNode} from '../dom.js';\nimport {listen, unlistenByKey} from '../events.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {HTMLElement} [element] The element is the control's\n * container element. This only needs to be specified if you're developing\n * a custom control.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {HTMLElement|string} [target] Specify a target if you want\n * the control to be rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A control is a visible widget with a DOM element in a fixed position on the\n * screen. They can involve user input (buttons), or be informational only;\n * the position is determined using CSS. By default these are placed in the\n * container with CSS class name `ol-overlaycontainer-stopevent`, but can use\n * any outside DOM element.\n *\n * This is the base class for controls. You can use it for simple custom\n * controls by creating the element with listeners, creating an instance:\n * ```js\n * var myControl = new Control({element: myElement});\n * ```\n * and then adding this to the map.\n *\n * The main advantage of having this as a control rather than a simple separate\n * DOM element is that preventing propagation is handled for you. Controls\n * will also be objects in a {@link module:ol/Collection~Collection}, so you can use their methods.\n *\n * You can also extend this base for your own control class. See\n * examples/custom-controls for an example of how to do this.\n *\n * @api\n */\nclass Control extends BaseObject {\n\n  /**\n   * @param {Options} options Control options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.element = options.element ? options.element : null;\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.target_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").default}\n     */\n    this.map_ = null;\n\n    /**\n     * @protected\n     * @type {!Array<import(\"../events.js\").EventsKey>}\n     */\n    this.listenerKeys = [];\n\n    /**\n     * @type {function(import(\"../MapEvent.js\").default)}\n     */\n    this.render = options.render ? options.render : VOID;\n\n    if (options.target) {\n      this.setTarget(options.target);\n    }\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    removeNode(this.element);\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the map associated with this control.\n   * @return {import(\"../PluggableMap.js\").default} Map.\n   * @api\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Remove the control from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   * @api\n   */\n  setMap(map) {\n    if (this.map_) {\n      removeNode(this.element);\n    }\n    for (let i = 0, ii = this.listenerKeys.length; i < ii; ++i) {\n      unlistenByKey(this.listenerKeys[i]);\n    }\n    this.listenerKeys.length = 0;\n    this.map_ = map;\n    if (this.map_) {\n      const target = this.target_ ?\n        this.target_ : map.getOverlayContainerStopEvent();\n      target.appendChild(this.element);\n      if (this.render !== VOID) {\n        this.listenerKeys.push(listen(map,\n          MapEventType.POSTRENDER, this.render, this));\n      }\n      map.render();\n    }\n  }\n\n  /**\n   * This function is used to set a target element for the control. It has no\n   * effect if it is called after the control has been added to the map (i.e.\n   * after `setMap` is called on the control). If no `target` is set in the\n   * options passed to the control constructor and if `setTarget` is not called\n   * then the control is added to the map's overlay container.\n   * @param {HTMLElement|string} target Target.\n   * @api\n   */\n  setTarget(target) {\n    this.target_ = typeof target === 'string' ?\n      document.getElementById(target) :\n      target;\n  }\n}\n\n\nexport default Control;\n","/**\n * @module ol/control/Attribution\n */\nimport {equals} from '../array.js';\nimport Control from './Control.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE, CLASS_COLLAPSED} from '../css.js';\nimport {removeChildren, replaceNode} from '../dom.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {visibleAtResolution} from '../layer/Layer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-attribution'] CSS class name.\n * @property {HTMLElement|string} [target] Specify a target if you\n * want the control to be rendered outside of the map's\n * viewport.\n * @property {boolean} [collapsible] Specify if attributions can\n * be collapsed. If not specified, sources control this behavior with their\n * `attributionsCollapsible` setting.\n * @property {boolean} [collapsed=true] Specify if attributions should\n * be collapsed at startup.\n * @property {string} [tipLabel='Attributions'] Text label to use for the button tip.\n * @property {string} [label='i'] Text label to use for the\n * collapsed attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|HTMLElement} [collapseLabel=''] Text label to use\n * for the expanded attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n */\n\n\n/**\n * @classdesc\n * Control to show all the attributions associated with the layer sources\n * in the map. This control is one of the default controls included in maps.\n * By default it will show in the bottom right portion of the map, but this can\n * be changed by using a css selector for `.ol-attribution`.\n *\n * @api\n */\nclass Attribution extends Control {\n\n  /**\n   * @param {Options=} opt_options Attribution options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render || render,\n      target: options.target\n    });\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.ulElement_ = document.createElement('ul');\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.collapsed_ = options.collapsed !== undefined ? options.collapsed : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overrideCollapsible_ = options.collapsible !== undefined;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.collapsible_ = options.collapsible !== undefined ?\n      options.collapsible : true;\n\n    if (!this.collapsible_) {\n      this.collapsed_ = false;\n    }\n\n    const className = options.className !== undefined ? options.className : 'ol-attribution';\n\n    const tipLabel = options.tipLabel !== undefined ? options.tipLabel : 'Attributions';\n\n    const collapseLabel = options.collapseLabel !== undefined ? options.collapseLabel : '\\u00BB';\n\n    if (typeof collapseLabel === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      this.collapseLabel_ = document.createElement('span');\n      this.collapseLabel_.textContent = collapseLabel;\n    } else {\n      this.collapseLabel_ = collapseLabel;\n    }\n\n    const label = options.label !== undefined ? options.label : 'i';\n\n    if (typeof label === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      this.label_ = document.createElement('span');\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n    }\n\n\n    const activeLabel = (this.collapsible_ && !this.collapsed_) ?\n      this.collapseLabel_ : this.label_;\n    const button = document.createElement('button');\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(activeLabel);\n\n    listen(button, EventType.CLICK, this.handleClick_, this);\n\n    const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL +\n        (this.collapsed_ && this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') +\n        (this.collapsible_ ? '' : ' ol-uncollapsible');\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(this.ulElement_);\n    element.appendChild(button);\n\n    /**\n     * A list of currently rendered resolutions.\n     * @type {Array<string>}\n     * @private\n     */\n    this.renderedAttributions_ = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = true;\n\n  }\n\n  /**\n   * Collect a list of visible attributions and set the collapsible state.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {Array<string>} Attributions.\n   * @private\n   */\n  collectSourceAttributions_(frameState) {\n    /**\n     * Used to determine if an attribution already exists.\n     * @type {!Object<string, boolean>}\n     */\n    const lookup = {};\n\n    /**\n     * A list of visible attributions.\n     * @type {Array<string>}\n     */\n    const visibleAttributions = [];\n\n    const layerStatesArray = frameState.layerStatesArray;\n    const resolution = frameState.viewState.resolution;\n    for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      const layerState = layerStatesArray[i];\n      if (!visibleAtResolution(layerState, resolution)) {\n        continue;\n      }\n\n      const source = /** @type {import(\"../layer/Layer.js\").default} */ (layerState.layer).getSource();\n      if (!source) {\n        continue;\n      }\n\n      const attributionGetter = source.getAttributions();\n      if (!attributionGetter) {\n        continue;\n      }\n\n      const attributions = attributionGetter(frameState);\n      if (!attributions) {\n        continue;\n      }\n\n      if (!this.overrideCollapsible_ && source.getAttributionsCollapsible() === false) {\n        this.setCollapsible(false);\n      }\n\n      if (Array.isArray(attributions)) {\n        for (let j = 0, jj = attributions.length; j < jj; ++j) {\n          if (!(attributions[j] in lookup)) {\n            visibleAttributions.push(attributions[j]);\n            lookup[attributions[j]] = true;\n          }\n        }\n      } else {\n        if (!(attributions in lookup)) {\n          visibleAttributions.push(attributions);\n          lookup[attributions] = true;\n        }\n      }\n    }\n    return visibleAttributions;\n  }\n\n  /**\n   * @private\n   * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  updateElement_(frameState) {\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    const attributions = this.collectSourceAttributions_(frameState);\n\n    const visible = attributions.length > 0;\n    if (this.renderedVisible_ != visible) {\n      this.element.style.display = visible ? '' : 'none';\n      this.renderedVisible_ = visible;\n    }\n\n    if (equals(attributions, this.renderedAttributions_)) {\n      return;\n    }\n\n    removeChildren(this.ulElement_);\n\n    // append the attributions\n    for (let i = 0, ii = attributions.length; i < ii; ++i) {\n      const element = document.createElement('li');\n      element.innerHTML = attributions[i];\n      this.ulElement_.appendChild(element);\n    }\n\n    this.renderedAttributions_ = attributions;\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    this.handleToggle_();\n  }\n\n  /**\n   * @private\n   */\n  handleToggle_() {\n    this.element.classList.toggle(CLASS_COLLAPSED);\n    if (this.collapsed_) {\n      replaceNode(this.collapseLabel_, this.label_);\n    } else {\n      replaceNode(this.label_, this.collapseLabel_);\n    }\n    this.collapsed_ = !this.collapsed_;\n  }\n\n  /**\n   * Return `true` if the attribution is collapsible, `false` otherwise.\n   * @return {boolean} True if the widget is collapsible.\n   * @api\n   */\n  getCollapsible() {\n    return this.collapsible_;\n  }\n\n  /**\n   * Set whether the attribution should be collapsible.\n   * @param {boolean} collapsible True if the widget is collapsible.\n   * @api\n   */\n  setCollapsible(collapsible) {\n    if (this.collapsible_ === collapsible) {\n      return;\n    }\n    this.collapsible_ = collapsible;\n    this.element.classList.toggle('ol-uncollapsible');\n    if (!collapsible && this.collapsed_) {\n      this.handleToggle_();\n    }\n  }\n\n  /**\n   * Collapse or expand the attribution according to the passed parameter. Will\n   * not do anything if the attribution isn't collapsible or if the current\n   * collapsed state is already the one requested.\n   * @param {boolean} collapsed True if the widget is collapsed.\n   * @api\n   */\n  setCollapsed(collapsed) {\n    if (!this.collapsible_ || this.collapsed_ === collapsed) {\n      return;\n    }\n    this.handleToggle_();\n  }\n\n  /**\n   * Return `true` when the attribution is currently collapsed or `false`\n   * otherwise.\n   * @return {boolean} True if the widget is collapsed.\n   * @api\n   */\n  getCollapsed() {\n    return this.collapsed_;\n  }\n}\n\n\n/**\n * Update the attribution element.\n * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n * @this {Attribution}\n * @api\n */\nexport function render(mapEvent) {\n  this.updateElement_(mapEvent.frameState);\n}\n\n\nexport default Attribution;\n","/**\n * @module ol/control/Rotate\n */\nimport Control from './Control.js';\nimport {CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|HTMLElement} [label=''] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function()} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @api\n */\nclass Rotate extends Control {\n\n  /**\n   * @param {Options=} opt_options Rotate options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render || render,\n      target: options.target\n    });\n\n    const className = options.className !== undefined ? options.className : 'ol-rotate';\n\n    const label = options.label !== undefined ? options.label : '\\u21E7';\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n    this.label_ = null;\n\n    if (typeof label === 'string') {\n      this.label_ = document.createElement('span');\n      this.label_.className = 'ol-compass';\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n      this.label_.classList.add('ol-compass');\n    }\n\n    const tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n\n    const button = document.createElement('button');\n    button.className = className + '-reset';\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(this.label_);\n\n    listen(button, EventType.CLICK, this.handleClick_, this);\n\n    const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(button);\n\n    this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = undefined;\n\n    if (this.autoHide_) {\n      this.element.classList.add(CLASS_HIDDEN);\n    }\n\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    if (this.callResetNorth_ !== undefined) {\n      this.callResetNorth_();\n    } else {\n      this.resetNorth_();\n    }\n  }\n\n  /**\n   * @private\n   */\n  resetNorth_() {\n    const map = this.getMap();\n    const view = map.getView();\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n    if (view.getRotation() !== undefined) {\n      if (this.duration_ > 0) {\n        view.animate({\n          rotation: 0,\n          duration: this.duration_,\n          easing: easeOut\n        });\n      } else {\n        view.setRotation(0);\n      }\n    }\n  }\n}\n\n\n/**\n * Update the rotate control element.\n * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n * @this {Rotate}\n * @api\n */\nexport function render(mapEvent) {\n  const frameState = mapEvent.frameState;\n  if (!frameState) {\n    return;\n  }\n  const rotation = frameState.viewState.rotation;\n  if (rotation != this.rotation_) {\n    const transform = 'rotate(' + rotation + 'rad)';\n    if (this.autoHide_) {\n      const contains = this.element.classList.contains(CLASS_HIDDEN);\n      if (!contains && rotation === 0) {\n        this.element.classList.add(CLASS_HIDDEN);\n      } else if (contains && rotation !== 0) {\n        this.element.classList.remove(CLASS_HIDDEN);\n      }\n    }\n    this.label_.style.msTransform = transform;\n    this.label_.style.webkitTransform = transform;\n    this.label_.style.transform = transform;\n  }\n  this.rotation_ = rotation;\n}\n\nexport default Rotate;\n","/**\n * @module ol/control/Zoom\n */\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport Control from './Control.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {string} [className='ol-zoom'] CSS class name.\n * @property {string|HTMLElement} [zoomInLabel='+'] Text label to use for the zoom-in\n * button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|HTMLElement} [zoomOutLabel='-'] Text label to use for the zoom-out button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [zoomInTipLabel='Zoom in'] Text label to use for the button tip.\n * @property {string} [zoomOutTipLabel='Zoom out'] Text label to use for the button tip.\n * @property {number} [delta=1] The zoom delta applied on each click.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A control with 2 buttons, one for zoom in and one for zoom out.\n * This control is one of the default controls of a map. To style this control\n * use css selectors `.ol-zoom-in` and `.ol-zoom-out`.\n *\n * @api\n */\nclass Zoom extends Control {\n\n  /**\n   * @param {Options=} opt_options Zoom options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      target: options.target\n    });\n\n    const className = options.className !== undefined ? options.className : 'ol-zoom';\n\n    const delta = options.delta !== undefined ? options.delta : 1;\n\n    const zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+';\n    const zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2212';\n\n    const zoomInTipLabel = options.zoomInTipLabel !== undefined ?\n      options.zoomInTipLabel : 'Zoom in';\n    const zoomOutTipLabel = options.zoomOutTipLabel !== undefined ?\n      options.zoomOutTipLabel : 'Zoom out';\n\n    const inElement = document.createElement('button');\n    inElement.className = className + '-in';\n    inElement.setAttribute('type', 'button');\n    inElement.title = zoomInTipLabel;\n    inElement.appendChild(\n      typeof zoomInLabel === 'string' ? document.createTextNode(zoomInLabel) : zoomInLabel\n    );\n\n    listen(inElement, EventType.CLICK, this.handleClick_.bind(this, delta));\n\n    const outElement = document.createElement('button');\n    outElement.className = className + '-out';\n    outElement.setAttribute('type', 'button');\n    outElement.title = zoomOutTipLabel;\n    outElement.appendChild(\n      typeof zoomOutLabel === 'string' ? document.createTextNode(zoomOutLabel) : zoomOutLabel\n    );\n\n    listen(outElement, EventType.CLICK, this.handleClick_.bind(this, -delta));\n\n    const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(inElement);\n    element.appendChild(outElement);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n  /**\n   * @param {number} delta Zoom delta.\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(delta, event) {\n    event.preventDefault();\n    this.zoomByDelta_(delta);\n  }\n\n  /**\n   * @param {number} delta Zoom delta.\n   * @private\n   */\n  zoomByDelta_(delta) {\n    const map = this.getMap();\n    const view = map.getView();\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n    const currentResolution = view.getResolution();\n    if (currentResolution) {\n      const newResolution = view.constrainResolution(currentResolution, delta);\n      if (this.duration_ > 0) {\n        if (view.getAnimating()) {\n          view.cancelAnimations();\n        }\n        view.animate({\n          resolution: newResolution,\n          duration: this.duration_,\n          easing: easeOut\n        });\n      } else {\n        view.setResolution(newResolution);\n      }\n    }\n  }\n}\n\n\nexport default Zoom;\n","/**\n * @module ol/control/util\n */\nimport Collection from '../Collection.js';\nimport Attribution from './Attribution.js';\nimport Rotate from './Rotate.js';\nimport Zoom from './Zoom.js';\n\n\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [attribution=true] Include\n * {@link module:ol/control/Attribution~Attribution}.\n * @property {import(\"./Attribution.js\").Options} [attributionOptions]\n * Options for {@link module:ol/control/Attribution~Attribution}.\n * @property {boolean} [rotate=true] Include\n * {@link module:ol/control/Rotate~Rotate}.\n * @property {import(\"./Rotate.js\").Options} [rotateOptions] Options\n * for {@link module:ol/control/Rotate~Rotate}.\n * @property {boolean} [zoom] Include {@link module:ol/control/Zoom~Zoom}.\n * @property {import(\"./Zoom.js\").Options} [zoomOptions] Options for\n * {@link module:ol/control/Zoom~Zoom}.\n * @api\n */\n\n\n/**\n * Set of controls included in maps by default. Unless configured otherwise,\n * this returns a collection containing an instance of each of the following\n * controls:\n * * {@link module:ol/control/Zoom~Zoom}\n * * {@link module:ol/control/Rotate~Rotate}\n * * {@link module:ol/control/Attribution~Attribution}\n *\n * @param {DefaultsOptions=} opt_options\n * Defaults options.\n * @return {Collection<import(\"./Control.js\").default>}\n * Controls.\n * @function module:ol/control.defaults\n * @api\n */\nexport function defaults(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  const controls = new Collection();\n\n  const zoomControl = options.zoom !== undefined ? options.zoom : true;\n  if (zoomControl) {\n    controls.push(new Zoom(options.zoomOptions));\n  }\n\n  const rotateControl = options.rotate !== undefined ? options.rotate : true;\n  if (rotateControl) {\n    controls.push(new Rotate(options.rotateOptions));\n  }\n\n  const attributionControl = options.attribution !== undefined ?\n    options.attribution : true;\n  if (attributionControl) {\n    controls.push(new Attribution(options.attributionOptions));\n  }\n\n  return controls;\n}\n","/**\n * @module ol/string\n */\n\n/**\n * @param {number} number Number to be formatted\n * @param {number} width The desired width\n * @param {number=} opt_precision Precision of the output string (i.e. number of decimal places)\n * @returns {string} Formatted string\n */\nexport function padNumber(number, width, opt_precision) {\n  const numberString = opt_precision !== undefined ? number.toFixed(opt_precision) : '' + number;\n  let decimal = numberString.indexOf('.');\n  decimal = decimal === -1 ? numberString.length : decimal;\n  return decimal > width ? numberString : new Array(1 + width - decimal).join('0') + numberString;\n}\n\n\n/**\n * Adapted from https://github.com/omichelsen/compare-versions/blob/master/index.js\n * @param {string|number} v1 First version\n * @param {string|number} v2 Second version\n * @returns {number} Value\n */\nexport function compareVersions(v1, v2) {\n  const s1 = ('' + v1).split('.');\n  const s2 = ('' + v2).split('.');\n\n  for (let i = 0; i < Math.max(s1.length, s2.length); i++) {\n    const n1 = parseInt(s1[i] || '0', 10);\n    const n2 = parseInt(s2[i] || '0', 10);\n\n    if (n1 > n2) {\n      return 1;\n    }\n    if (n2 > n1) {\n      return -1;\n    }\n  }\n\n  return 0;\n}\n","/**\n * @module ol/geom/flat/simplify\n */\n// Based on simplify-js https://github.com/mourner/simplify-js\n// Copyright (c) 2012, Vladimir Agafonkin\n// All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n//    1. Redistributions of source code must retain the above copyright notice,\n//       this list of conditions and the following disclaimer.\n//\n//    2. Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n// POSSIBILITY OF SUCH DAMAGE.\n\nimport {squaredSegmentDistance, squaredDistance} from '../../math.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {boolean} highQuality Highest quality.\n * @param {Array<number>=} opt_simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @return {Array<number>} Simplified line string.\n */\nexport function simplifyLineString(flatCoordinates, offset, end,\n  stride, squaredTolerance, highQuality, opt_simplifiedFlatCoordinates) {\n  const simplifiedFlatCoordinates = opt_simplifiedFlatCoordinates !== undefined ?\n    opt_simplifiedFlatCoordinates : [];\n  if (!highQuality) {\n    end = radialDistance(flatCoordinates, offset, end,\n      stride, squaredTolerance,\n      simplifiedFlatCoordinates, 0);\n    flatCoordinates = simplifiedFlatCoordinates;\n    offset = 0;\n    stride = 2;\n  }\n  simplifiedFlatCoordinates.length = douglasPeucker(\n    flatCoordinates, offset, end, stride, squaredTolerance,\n    simplifiedFlatCoordinates, 0);\n  return simplifiedFlatCoordinates;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function douglasPeucker(flatCoordinates, offset, end,\n  stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  const n = (end - offset) / stride;\n  if (n < 3) {\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  /** @type {Array<number>} */\n  const markers = new Array(n);\n  markers[0] = 1;\n  markers[n - 1] = 1;\n  /** @type {Array<number>} */\n  const stack = [offset, end - stride];\n  let index = 0;\n  while (stack.length > 0) {\n    const last = stack.pop();\n    const first = stack.pop();\n    let maxSquaredDistance = 0;\n    const x1 = flatCoordinates[first];\n    const y1 = flatCoordinates[first + 1];\n    const x2 = flatCoordinates[last];\n    const y2 = flatCoordinates[last + 1];\n    for (let i = first + stride; i < last; i += stride) {\n      const x = flatCoordinates[i];\n      const y = flatCoordinates[i + 1];\n      const squaredDistance = squaredSegmentDistance(\n        x, y, x1, y1, x2, y2);\n      if (squaredDistance > maxSquaredDistance) {\n        index = i;\n        maxSquaredDistance = squaredDistance;\n      }\n    }\n    if (maxSquaredDistance > squaredTolerance) {\n      markers[(index - offset) / stride] = 1;\n      if (first + stride < index) {\n        stack.push(first, index);\n      }\n      if (index + stride < last) {\n        stack.push(index, last);\n      }\n    }\n  }\n  for (let i = 0; i < n; ++i) {\n    if (markers[i]) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + i * stride];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + i * stride + 1];\n    }\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerArray(flatCoordinates, offset,\n  ends, stride, squaredTolerance, simplifiedFlatCoordinates,\n  simplifiedOffset, simplifiedEnds) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = douglasPeucker(\n      flatCoordinates, offset, end, stride, squaredTolerance,\n      simplifiedFlatCoordinates, simplifiedOffset);\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerMultiArray(\n  flatCoordinates, offset, endss, stride, squaredTolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    const simplifiedEnds = [];\n    simplifiedOffset = douglasPeuckerArray(\n      flatCoordinates, offset, ends, stride, squaredTolerance,\n      simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function radialDistance(flatCoordinates, offset, end,\n  stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  if (end <= offset + stride) {\n    // zero or one point, no simplification possible, so copy and return\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  // copy first point\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  let x2 = x1;\n  let y2 = y1;\n  for (offset += stride; offset < end; offset += stride) {\n    x2 = flatCoordinates[offset];\n    y2 = flatCoordinates[offset + 1];\n    if (squaredDistance(x1, y1, x2, y2) > squaredTolerance) {\n      // copy point at offset\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  if (x2 != x1 || y2 != y1) {\n    // copy last point\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {number} value Value.\n * @param {number} tolerance Tolerance.\n * @return {number} Rounded value.\n */\nexport function snap(value, tolerance) {\n  return tolerance * Math.round(value / tolerance);\n}\n\n\n/**\n * Simplifies a line string using an algorithm designed by Tim Schaub.\n * Coordinates are snapped to the nearest value in a virtual grid and\n * consecutive duplicate coordinates are discarded.  This effectively preserves\n * topology as the simplification of any subsection of a line string is\n * independent of the rest of the line string.  This means that, for examples,\n * the common edge between two polygons will be simplified to the same line\n * string independently in both polygons.  This implementation uses a single\n * pass over the coordinates and eliminates intermediate collinear points.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function quantize(flatCoordinates, offset, end, stride,\n  tolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  // do nothing if the line is empty\n  if (offset == end) {\n    return simplifiedOffset;\n  }\n  // snap the first coordinate (P1)\n  let x1 = snap(flatCoordinates[offset], tolerance);\n  let y1 = snap(flatCoordinates[offset + 1], tolerance);\n  offset += stride;\n  // add the first coordinate to the output\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  // find the next coordinate that does not snap to the same value as the first\n  // coordinate (P2)\n  let x2, y2;\n  do {\n    x2 = snap(flatCoordinates[offset], tolerance);\n    y2 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    if (offset == end) {\n      // all coordinates snap to the same value, the line collapses to a point\n      // push the last snapped value anyway to ensure that the output contains\n      // at least two points\n      // FIXME should we really return at least two points anyway?\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      return simplifiedOffset;\n    }\n  } while (x2 == x1 && y2 == y1);\n  while (offset < end) {\n    // snap the next coordinate (P3)\n    const x3 = snap(flatCoordinates[offset], tolerance);\n    const y3 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    // skip P3 if it is equal to P2\n    if (x3 == x2 && y3 == y2) {\n      continue;\n    }\n    // calculate the delta between P1 and P2\n    const dx1 = x2 - x1;\n    const dy1 = y2 - y1;\n    // calculate the delta between P3 and P1\n    const dx2 = x3 - x1;\n    const dy2 = y3 - y1;\n    // if P1, P2, and P3 are colinear and P3 is further from P1 than P2 is from\n    // P1 in the same direction then P2 is on the straight line between P1 and\n    // P3\n    if ((dx1 * dy2 == dy1 * dx2) &&\n        ((dx1 < 0 && dx2 < dx1) || dx1 == dx2 || (dx1 > 0 && dx2 > dx1)) &&\n        ((dy1 < 0 && dy2 < dy1) || dy1 == dy2 || (dy1 > 0 && dy2 > dy1))) {\n      // discard P2 and set P2 = P3\n      x2 = x3;\n      y2 = y3;\n      continue;\n    }\n    // either P1, P2, and P3 are not colinear, or they are colinear but P3 is\n    // between P3 and P1 or on the opposite half of the line to P2.  add P2,\n    // and continue with P1 = P2 and P2 = P3\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    x1 = x2;\n    y1 = y2;\n    x2 = x3;\n    y2 = y3;\n  }\n  // add the last point (P2)\n  simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function quantizeArray(\n  flatCoordinates, offset, ends, stride,\n  tolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = quantize(\n      flatCoordinates, offset, end, stride,\n      tolerance,\n      simplifiedFlatCoordinates, simplifiedOffset);\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function quantizeMultiArray(\n  flatCoordinates, offset, endss, stride,\n  tolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    const simplifiedEnds = [];\n    simplifiedOffset = quantizeArray(\n      flatCoordinates, offset, ends, stride,\n      tolerance,\n      simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n","/**\n * @module ol/format/FormatType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ARRAY_BUFFER: 'arraybuffer',\n  JSON: 'json',\n  TEXT: 'text',\n  XML: 'xml'\n};\n","/**\n * @module ol/geom/flat/contains\n */\nimport {forEachCorner} from '../../extent.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} Contains extent.\n */\nexport function linearRingContainsExtent(flatCoordinates, offset, end, stride, extent) {\n  const outside = forEachCorner(extent,\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {boolean} Contains (x, y).\n     */\n    function(coordinate) {\n      return !linearRingContainsXY(flatCoordinates, offset, end, stride, coordinate[0], coordinate[1]);\n    });\n  return !outside;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingContainsXY(flatCoordinates, offset, end, stride, x, y) {\n  // http://geomalgorithms.com/a03-_inclusion.html\n  // Copyright 2000 softSurfer, 2012 Dan Sunday\n  // This code may be freely used and modified for any purpose\n  // providing that this copyright notice is included with it.\n  // SoftSurfer makes no warranty for this code, and cannot be held\n  // liable for any real or imagined damage resulting from its use.\n  // Users of this code must verify correctness for their application.\n  let wn = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    if (y1 <= y) {\n      if (y2 > y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) > 0) {\n        wn++;\n      }\n    } else if (y2 <= y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) < 0) {\n      wn--;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return wn !== 0;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y) {\n  if (ends.length === 0) {\n    return false;\n  }\n  if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n    return false;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingssContainsXY(flatCoordinates, offset, endss, stride, x, y) {\n  if (endss.length === 0) {\n    return false;\n  }\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n","/**\n * @module ol/style/Text\n */\nimport Fill from './Fill.js';\nimport TextPlacement from './TextPlacement.js';\n\n\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n */\nconst DEFAULT_FILL_COLOR = '#333';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [font] Font style as CSS 'font' value, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font. Default is '10px sans-serif'\n * @property {number} [maxAngle] When `placement` is set to `'line'`, allow a maximum angle between adjacent characters.\n * The expected value is in radians, and the default is 45 (`Math.PI / 4`).\n * @property {number} [offsetX=0] Horizontal text offset in pixels. A positive will shift the text right.\n * @property {number} [offsetY=0] Vertical text offset in pixels. A positive will shift the text down.\n * @property {boolean} [overflow=false] For polygon labels or when `placement` is set to `'line'`, allow text to exceed\n * the width of the polygon at the label position or the length of the path that it follows.\n * @property {import(\"./TextPlacement.js\").default|string} [placement] Text placement.\n * @property {number} [scale] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the text with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {string} [text] Text content.\n * @property {string} [textAlign] Text alignment. Possible values: 'left', 'right', 'center', 'end' or 'start'.\n * Default is 'center' for `placement: 'point'`. For `placement: 'line'`, the default is to let the renderer choose a\n * placement where `maxAngle` is not exceeded.\n * @property {string} [textBaseline='middle'] Text base line. Possible values: 'bottom', 'top', 'middle', 'alphabetic',\n * 'hanging', 'ideographic'.\n * @property {import(\"./Fill.js\").default} [fill] Fill style. If none is provided, we'll use a dark fill-style (#333).\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Fill.js\").default} [backgroundFill] Fill style for the text background when `placement` is\n * `'point'`. Default is no fill.\n * @property {import(\"./Stroke.js\").default} [backgroundStroke] Stroke style for the text background  when `placement`\n * is `'point'`. Default is no stroke.\n * @property {Array<number>} [padding=[0, 0, 0, 0]] Padding in pixels around the text for decluttering and background. The order of\n * values in the array is `[top, right, bottom, left]`.\n */\n\n\n/**\n * @classdesc\n * Set text style for vector features.\n * @api\n */\nclass Text {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n    * @private\n    * @type {string|undefined}\n    */\n    this.font_ = options.font;\n\n    /**\n    * @private\n    * @type {number|undefined}\n    */\n    this.rotation_ = options.rotation;\n\n    /**\n    * @private\n    * @type {boolean|undefined}\n    */\n    this.rotateWithView_ = options.rotateWithView;\n\n    /**\n    * @private\n    * @type {number|undefined}\n    */\n    this.scale_ = options.scale;\n\n    /**\n    * @private\n    * @type {string|undefined}\n    */\n    this.text_ = options.text;\n\n    /**\n    * @private\n    * @type {string|undefined}\n    */\n    this.textAlign_ = options.textAlign;\n\n    /**\n    * @private\n    * @type {string|undefined}\n    */\n    this.textBaseline_ = options.textBaseline;\n\n    /**\n    * @private\n    * @type {import(\"./Fill.js\").default}\n    */\n    this.fill_ = options.fill !== undefined ? options.fill :\n      new Fill({color: DEFAULT_FILL_COLOR});\n\n    /**\n    * @private\n    * @type {number}\n    */\n    this.maxAngle_ = options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n\n    /**\n    * @private\n    * @type {import(\"./TextPlacement.js\").default|string}\n    */\n    this.placement_ = options.placement !== undefined ? options.placement : TextPlacement.POINT;\n\n    /**\n    * @private\n    * @type {boolean}\n    */\n    this.overflow_ = !!options.overflow;\n\n    /**\n    * @private\n    * @type {import(\"./Stroke.js\").default}\n    */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n    * @private\n    * @type {number}\n    */\n    this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n\n    /**\n    * @private\n    * @type {number}\n    */\n    this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n\n    /**\n    * @private\n    * @type {import(\"./Fill.js\").default}\n    */\n    this.backgroundFill_ = options.backgroundFill ? options.backgroundFill : null;\n\n    /**\n    * @private\n    * @type {import(\"./Stroke.js\").default}\n    */\n    this.backgroundStroke_ = options.backgroundStroke ? options.backgroundStroke : null;\n\n    /**\n    * @private\n    * @type {Array<number>}\n    */\n    this.padding_ = options.padding === undefined ? null : options.padding;\n  }\n\n  /**\n  * Clones the style.\n  * @return {Text} The cloned style.\n  * @api\n  */\n  clone() {\n    return new Text({\n      font: this.getFont(),\n      placement: this.getPlacement(),\n      maxAngle: this.getMaxAngle(),\n      overflow: this.getOverflow(),\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      scale: this.getScale(),\n      text: this.getText(),\n      textAlign: this.getTextAlign(),\n      textBaseline: this.getTextBaseline(),\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      offsetX: this.getOffsetX(),\n      offsetY: this.getOffsetY(),\n      backgroundFill: this.getBackgroundFill() ? this.getBackgroundFill().clone() : undefined,\n      backgroundStroke: this.getBackgroundStroke() ? this.getBackgroundStroke().clone() : undefined\n    });\n  }\n\n  /**\n  * Get the `overflow` configuration.\n  * @return {boolean} Let text overflow the length of the path they follow.\n  * @api\n  */\n  getOverflow() {\n    return this.overflow_;\n  }\n\n  /**\n  * Get the font name.\n  * @return {string|undefined} Font.\n  * @api\n  */\n  getFont() {\n    return this.font_;\n  }\n\n  /**\n  * Get the maximum angle between adjacent characters.\n  * @return {number} Angle in radians.\n  * @api\n  */\n  getMaxAngle() {\n    return this.maxAngle_;\n  }\n\n  /**\n  * Get the label placement.\n  * @return {import(\"./TextPlacement.js\").default|string} Text placement.\n  * @api\n  */\n  getPlacement() {\n    return this.placement_;\n  }\n\n  /**\n  * Get the x-offset for the text.\n  * @return {number} Horizontal text offset.\n  * @api\n  */\n  getOffsetX() {\n    return this.offsetX_;\n  }\n\n  /**\n  * Get the y-offset for the text.\n  * @return {number} Vertical text offset.\n  * @api\n  */\n  getOffsetY() {\n    return this.offsetY_;\n  }\n\n  /**\n  * Get the fill style for the text.\n  * @return {import(\"./Fill.js\").default} Fill style.\n  * @api\n  */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n  * Determine whether the text rotates with the map.\n  * @return {boolean|undefined} Rotate with map.\n  * @api\n  */\n  getRotateWithView() {\n    return this.rotateWithView_;\n  }\n\n  /**\n  * Get the text rotation.\n  * @return {number|undefined} Rotation.\n  * @api\n  */\n  getRotation() {\n    return this.rotation_;\n  }\n\n  /**\n  * Get the text scale.\n  * @return {number|undefined} Scale.\n  * @api\n  */\n  getScale() {\n    return this.scale_;\n  }\n\n  /**\n  * Get the stroke style for the text.\n  * @return {import(\"./Stroke.js\").default} Stroke style.\n  * @api\n  */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n  * Get the text to be rendered.\n  * @return {string|undefined} Text.\n  * @api\n  */\n  getText() {\n    return this.text_;\n  }\n\n  /**\n  * Get the text alignment.\n  * @return {string|undefined} Text align.\n  * @api\n  */\n  getTextAlign() {\n    return this.textAlign_;\n  }\n\n  /**\n  * Get the text baseline.\n  * @return {string|undefined} Text baseline.\n  * @api\n  */\n  getTextBaseline() {\n    return this.textBaseline_;\n  }\n\n  /**\n  * Get the background fill style for the text.\n  * @return {import(\"./Fill.js\").default} Fill style.\n  * @api\n  */\n  getBackgroundFill() {\n    return this.backgroundFill_;\n  }\n\n  /**\n  * Get the background stroke style for the text.\n  * @return {import(\"./Stroke.js\").default} Stroke style.\n  * @api\n  */\n  getBackgroundStroke() {\n    return this.backgroundStroke_;\n  }\n\n  /**\n  * Get the padding for the text.\n  * @return {Array<number>} Padding.\n  * @api\n  */\n  getPadding() {\n    return this.padding_;\n  }\n\n  /**\n  * Set the `overflow` property.\n  *\n  * @param {boolean} overflow Let text overflow the path that it follows.\n  * @api\n  */\n  setOverflow(overflow) {\n    this.overflow_ = overflow;\n  }\n\n  /**\n  * Set the font.\n  *\n  * @param {string|undefined} font Font.\n  * @api\n  */\n  setFont(font) {\n    this.font_ = font;\n  }\n\n  /**\n  * Set the maximum angle between adjacent characters.\n  *\n  * @param {number} maxAngle Angle in radians.\n  * @api\n  */\n  setMaxAngle(maxAngle) {\n    this.maxAngle_ = maxAngle;\n  }\n\n  /**\n  * Set the x offset.\n  *\n  * @param {number} offsetX Horizontal text offset.\n  * @api\n  */\n  setOffsetX(offsetX) {\n    this.offsetX_ = offsetX;\n  }\n\n  /**\n  * Set the y offset.\n  *\n  * @param {number} offsetY Vertical text offset.\n  * @api\n  */\n  setOffsetY(offsetY) {\n    this.offsetY_ = offsetY;\n  }\n\n  /**\n  * Set the text placement.\n  *\n  * @param {import(\"./TextPlacement.js\").default|string} placement Placement.\n  * @api\n  */\n  setPlacement(placement) {\n    this.placement_ = placement;\n  }\n\n  /**\n  * Set the fill.\n  *\n  * @param {import(\"./Fill.js\").default} fill Fill style.\n  * @api\n  */\n  setFill(fill) {\n    this.fill_ = fill;\n  }\n\n  /**\n  * Set the rotation.\n  *\n  * @param {number|undefined} rotation Rotation.\n  * @api\n  */\n  setRotation(rotation) {\n    this.rotation_ = rotation;\n  }\n\n  /**\n  * Set the scale.\n  *\n  * @param {number|undefined} scale Scale.\n  * @api\n  */\n  setScale(scale) {\n    this.scale_ = scale;\n  }\n\n  /**\n  * Set the stroke.\n  *\n  * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n  * @api\n  */\n  setStroke(stroke) {\n    this.stroke_ = stroke;\n  }\n\n  /**\n  * Set the text.\n  *\n  * @param {string|undefined} text Text.\n  * @api\n  */\n  setText(text) {\n    this.text_ = text;\n  }\n\n  /**\n  * Set the text alignment.\n  *\n  * @param {string|undefined} textAlign Text align.\n  * @api\n  */\n  setTextAlign(textAlign) {\n    this.textAlign_ = textAlign;\n  }\n\n  /**\n  * Set the text baseline.\n  *\n  * @param {string|undefined} textBaseline Text baseline.\n  * @api\n  */\n  setTextBaseline(textBaseline) {\n    this.textBaseline_ = textBaseline;\n  }\n\n  /**\n  * Set the background fill.\n  *\n  * @param {import(\"./Fill.js\").default} fill Fill style.\n  * @api\n  */\n  setBackgroundFill(fill) {\n    this.backgroundFill_ = fill;\n  }\n\n  /**\n  * Set the background stroke.\n  *\n  * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n  * @api\n  */\n  setBackgroundStroke(stroke) {\n    this.backgroundStroke_ = stroke;\n  }\n\n  /**\n  * Set the padding (`[top, right, bottom, left]`).\n  *\n  * @param {!Array<number>} padding Padding.\n  * @api\n  */\n  setPadding(padding) {\n    this.padding_ = padding;\n  }\n}\n\nexport default Text;\n","/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return angleInRadians * 180 / Math.PI;\n}\n\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return angleInDegrees * Math.PI / 180;\n}\n","/**\n * @module ol/layer/Group\n */\nimport {getUid} from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport {getChangeEventType} from '../Object.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport {assert} from '../asserts.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getIntersection} from '../extent.js';\nimport BaseLayer from './Base.js';\nimport {assign, clear} from '../obj.js';\nimport SourceState from '../source/State.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {Array<import(\"./Base.js\").default>|import(\"../Collection.js\").default<import(\"./Base.js\").default>} [layers] Child layers.\n */\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LAYERS: 'layers'\n};\n\n\n/**\n * @classdesc\n * A {@link module:ol/Collection~Collection} of layers that are handled together.\n *\n * A generic `change` event is triggered when the group/Collection changes.\n *\n * @api\n */\nclass LayerGroup extends BaseLayer {\n  /**\n   * @param {Options=} opt_options Layer options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n    const baseOptions = /** @type {Options} */ (assign({}, options));\n    delete baseOptions.layers;\n\n    let layers = options.layers;\n\n    super(baseOptions);\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.layersListenerKeys_ = [];\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n     */\n    this.listenerKeys_ = {};\n\n    listen(this,\n      getChangeEventType(Property.LAYERS),\n      this.handleLayersChanged_, this);\n\n    if (layers) {\n      if (Array.isArray(layers)) {\n        layers = new Collection(layers.slice(), {unique: true});\n      } else {\n        assert(typeof /** @type {?} */ (layers).getArray === 'function',\n          43); // Expected `layers` to be an array or a `Collection`\n      }\n    } else {\n      layers = new Collection(undefined, {unique: true});\n    }\n\n    this.setLayers(layers);\n\n  }\n\n  /**\n   * @private\n   */\n  handleLayerChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleLayersChanged_() {\n    this.layersListenerKeys_.forEach(unlistenByKey);\n    this.layersListenerKeys_.length = 0;\n\n    const layers = this.getLayers();\n    this.layersListenerKeys_.push(\n      listen(layers, CollectionEventType.ADD, this.handleLayersAdd_, this),\n      listen(layers, CollectionEventType.REMOVE, this.handleLayersRemove_, this)\n    );\n\n    for (const id in this.listenerKeys_) {\n      this.listenerKeys_[id].forEach(unlistenByKey);\n    }\n    clear(this.listenerKeys_);\n\n    const layersArray = layers.getArray();\n    for (let i = 0, ii = layersArray.length; i < ii; i++) {\n      const layer = layersArray[i];\n      this.listenerKeys_[getUid(layer)] = [\n        listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n        listen(layer, EventType.CHANGE, this.handleLayerChange_, this)\n      ];\n    }\n\n    this.changed();\n  }\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n   * @private\n   */\n  handleLayersAdd_(collectionEvent) {\n    const layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n    this.listenerKeys_[getUid(layer)] = [\n      listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n      listen(layer, EventType.CHANGE, this.handleLayerChange_, this)\n    ];\n    this.changed();\n  }\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n   * @private\n   */\n  handleLayersRemove_(collectionEvent) {\n    const layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n    const key = getUid(layer);\n    this.listenerKeys_[key].forEach(unlistenByKey);\n    delete this.listenerKeys_[key];\n    this.changed();\n  }\n\n  /**\n   * Returns the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n   * in this group.\n   * @return {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} Collection of\n   *   {@link module:ol/layer/Base layers} that are part of this group.\n   * @observable\n   * @api\n   */\n  getLayers() {\n    return (\n      /** @type {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} */ (this.get(Property.LAYERS))\n    );\n  }\n\n  /**\n   * Set the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n   * in this group.\n   * @param {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} layers Collection of\n   *   {@link module:ol/layer/Base layers} that are part of this group.\n   * @observable\n   * @api\n   */\n  setLayers(layers) {\n    this.set(Property.LAYERS, layers);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayersArray(opt_array) {\n    const array = opt_array !== undefined ? opt_array : [];\n    this.getLayers().forEach(function(layer) {\n      layer.getLayersArray(array);\n    });\n    return array;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayerStatesArray(opt_states) {\n    const states = opt_states !== undefined ? opt_states : [];\n\n    const pos = states.length;\n\n    this.getLayers().forEach(function(layer) {\n      layer.getLayerStatesArray(states);\n    });\n\n    const ownLayerState = this.getLayerState();\n    for (let i = pos, ii = states.length; i < ii; i++) {\n      const layerState = states[i];\n      layerState.opacity *= ownLayerState.opacity;\n      layerState.visible = layerState.visible && ownLayerState.visible;\n      layerState.maxResolution = Math.min(\n        layerState.maxResolution, ownLayerState.maxResolution);\n      layerState.minResolution = Math.max(\n        layerState.minResolution, ownLayerState.minResolution);\n      if (ownLayerState.extent !== undefined) {\n        if (layerState.extent !== undefined) {\n          layerState.extent = getIntersection(layerState.extent, ownLayerState.extent);\n        } else {\n          layerState.extent = ownLayerState.extent;\n        }\n      }\n    }\n\n    return states;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSourceState() {\n    return SourceState.READY;\n  }\n}\n\n\nexport default LayerGroup;\n","/**\n * @module ol/style/Circle\n */\n\nimport RegularShape from './RegularShape.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./AtlasManager.js\").default} [atlasManager] The atlas manager to use for this circle.\n * When using WebGL it is recommended to use an atlas manager to avoid texture switching. If an atlas manager is given,\n * the circle is added to an atlas. By default no atlas manager is used.\n */\n\n\n/**\n * @classdesc\n * Set circle style for vector features.\n * @api\n */\nclass CircleStyle extends RegularShape {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || /** @type {Options} */ ({});\n\n    super({\n      points: Infinity,\n      fill: options.fill,\n      radius: options.radius,\n      stroke: options.stroke,\n      atlasManager: options.atlasManager\n    });\n\n  }\n\n  /**\n  * Clones the style.  If an atlasmanager was provided to the original style it will be used in the cloned style, too.\n  * @return {CircleStyle} The cloned style.\n  * @override\n  * @api\n  */\n  clone() {\n    const style = new CircleStyle({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      radius: this.getRadius(),\n      atlasManager: this.atlasManager_\n    });\n    style.setOpacity(this.getOpacity());\n    style.setScale(this.getScale());\n    return style;\n  }\n\n  /**\n  * Set the circle radius.\n  *\n  * @param {number} radius Circle radius.\n  * @api\n  */\n  setRadius(radius) {\n    this.radius_ = radius;\n    this.render_(this.atlasManager_);\n  }\n}\n\n\nexport default CircleStyle;\n","/**\n * @module ol/style/RegularShape\n */\n\nimport {asString} from '../color.js';\nimport {asColorLike} from '../colorlike.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {CANVAS_LINE_DASH} from '../has.js';\nimport ImageState from '../ImageState.js';\nimport {defaultStrokeStyle, defaultFillStyle, defaultLineCap, defaultLineWidth, defaultLineJoin, defaultMiterLimit} from '../render/canvas.js';\nimport ImageStyle from './Image.js';\n\n\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] Outer radius of a star.\n * @property {number} [radius2] Inner radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's point facing up.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n * @property {import(\"./AtlasManager.js\").default} [atlasManager] The atlas manager to use for this symbol. When\n * using WebGL it is recommended to use an atlas manager to avoid texture switching. If an atlas manager is given, the\n * symbol is added to an atlas. By default no atlas manager is used.\n */\n\n\n/**\n * @typedef {Object} RenderOptions\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle]\n * @property {number} strokeWidth\n * @property {number} size\n * @property {string} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {string} lineJoin\n * @property {number} miterLimit\n */\n\n\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n * @api\n */\nclass RegularShape extends ImageStyle {\n  /**\n   * @param {Options} options Options.\n   */\n  constructor(options) {\n    /**\n     * @type {boolean}\n     */\n    const rotateWithView = options.rotateWithView !== undefined ?\n      options.rotateWithView : false;\n\n    super({\n      opacity: 1,\n      rotateWithView: rotateWithView,\n      rotation: options.rotation !== undefined ? options.rotation : 0,\n      scale: 1\n    });\n\n    /**\n     * @private\n     * @type {Array<string|number>}\n     */\n    this.checksums_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.hitDetectionCanvas_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n    this.fill_ = options.fill !== undefined ? options.fill : null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = [0, 0];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.points_ = options.points;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.radius_ = /** @type {number} */ (options.radius !== undefined ?\n      options.radius : options.radius1);\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.radius2_ = options.radius2;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.angle_ = options.angle !== undefined ? options.angle : 0;\n\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.imageSize_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.hitDetectionImageSize_ = null;\n\n    /**\n     * @protected\n     * @type {import(\"./AtlasManager.js\").default|undefined}\n     */\n    this.atlasManager_ = options.atlasManager;\n\n    this.render_(this.atlasManager_);\n\n  }\n\n  /**\n   * Clones the style. If an atlasmanager was provided to the original style it will be used in the cloned style, too.\n   * @return {RegularShape} The cloned style.\n   * @api\n   */\n  clone() {\n    const style = new RegularShape({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      points: this.getPoints(),\n      radius: this.getRadius(),\n      radius2: this.getRadius2(),\n      angle: this.getAngle(),\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      atlasManager: this.atlasManager_\n    });\n    style.setOpacity(this.getOpacity());\n    style.setScale(this.getScale());\n    return style;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getAnchor() {\n    return this.anchor_;\n  }\n\n  /**\n   * Get the angle used in generating the shape.\n   * @return {number} Shape's rotation in radians.\n   * @api\n   */\n  getAngle() {\n    return this.angle_;\n  }\n\n  /**\n   * Get the fill style for the shape.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getHitDetectionImage(pixelRatio) {\n    return this.hitDetectionCanvas_;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getImage(pixelRatio) {\n    return this.canvas_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageSize() {\n    return this.imageSize_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getHitDetectionImageSize() {\n    return this.hitDetectionImageSize_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageState() {\n    return ImageState.LOADED;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getOrigin() {\n    return this.origin_;\n  }\n\n  /**\n   * Get the number of points for generating the shape.\n   * @return {number} Number of points for stars and regular polygons.\n   * @api\n   */\n  getPoints() {\n    return this.points_;\n  }\n\n  /**\n   * Get the (primary) radius for the shape.\n   * @return {number} Radius.\n   * @api\n   */\n  getRadius() {\n    return this.radius_;\n  }\n\n  /**\n   * Get the secondary radius for the shape.\n   * @return {number|undefined} Radius2.\n   * @api\n   */\n  getRadius2() {\n    return this.radius2_;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getSize() {\n    return this.size_;\n  }\n\n  /**\n   * Get the stroke style for the shape.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  listenImageChange(listener, thisArg) {\n    return undefined;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {}\n\n  /**\n   * @inheritDoc\n   */\n  unlistenImageChange(listener, thisArg) {}\n\n  /**\n   * @protected\n   * @param {import(\"./AtlasManager.js\").default|undefined} atlasManager An atlas manager.\n   */\n  render_(atlasManager) {\n    let imageSize;\n    let lineCap = '';\n    let lineJoin = '';\n    let miterLimit = 0;\n    let lineDash = null;\n    let lineDashOffset = 0;\n    let strokeStyle;\n    let strokeWidth = 0;\n\n    if (this.stroke_) {\n      strokeStyle = this.stroke_.getColor();\n      if (strokeStyle === null) {\n        strokeStyle = defaultStrokeStyle;\n      }\n      strokeStyle = asColorLike(strokeStyle);\n      strokeWidth = this.stroke_.getWidth();\n      if (strokeWidth === undefined) {\n        strokeWidth = defaultLineWidth;\n      }\n      lineDash = this.stroke_.getLineDash();\n      lineDashOffset = this.stroke_.getLineDashOffset();\n      if (!CANVAS_LINE_DASH) {\n        lineDash = null;\n        lineDashOffset = 0;\n      }\n      lineJoin = this.stroke_.getLineJoin();\n      if (lineJoin === undefined) {\n        lineJoin = defaultLineJoin;\n      }\n      lineCap = this.stroke_.getLineCap();\n      if (lineCap === undefined) {\n        lineCap = defaultLineCap;\n      }\n      miterLimit = this.stroke_.getMiterLimit();\n      if (miterLimit === undefined) {\n        miterLimit = defaultMiterLimit;\n      }\n    }\n\n    let size = 2 * (this.radius_ + strokeWidth) + 1;\n\n    /** @type {RenderOptions} */\n    const renderOptions = {\n      strokeStyle: strokeStyle,\n      strokeWidth: strokeWidth,\n      size: size,\n      lineCap: lineCap,\n      lineDash: lineDash,\n      lineDashOffset: lineDashOffset,\n      lineJoin: lineJoin,\n      miterLimit: miterLimit\n    };\n\n    if (atlasManager === undefined) {\n      // no atlas manager is used, create a new canvas\n      const context = createCanvasContext2D(size, size);\n      this.canvas_ = context.canvas;\n\n      // canvas.width and height are rounded to the closest integer\n      size = this.canvas_.width;\n      imageSize = size;\n\n      this.draw_(renderOptions, context, 0, 0);\n\n      this.createHitDetectionCanvas_(renderOptions);\n    } else {\n      // an atlas manager is used, add the symbol to an atlas\n      size = Math.round(size);\n\n      const hasCustomHitDetectionImage = !this.fill_;\n      let renderHitDetectionCallback;\n      if (hasCustomHitDetectionImage) {\n        // render the hit-detection image into a separate atlas image\n        renderHitDetectionCallback =\n            this.drawHitDetectionCanvas_.bind(this, renderOptions);\n      }\n\n      const id = this.getChecksum();\n      const info = atlasManager.add(\n        id, size, size, this.draw_.bind(this, renderOptions),\n        renderHitDetectionCallback);\n\n      this.canvas_ = info.image;\n      this.origin_ = [info.offsetX, info.offsetY];\n      imageSize = info.image.width;\n\n      if (hasCustomHitDetectionImage) {\n        this.hitDetectionCanvas_ = info.hitImage;\n        this.hitDetectionImageSize_ =\n            [info.hitImage.width, info.hitImage.height];\n      } else {\n        this.hitDetectionCanvas_ = this.canvas_;\n        this.hitDetectionImageSize_ = [imageSize, imageSize];\n      }\n    }\n\n    this.anchor_ = [size / 2, size / 2];\n    this.size_ = [size, size];\n    this.imageSize_ = [imageSize, imageSize];\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The rendering context.\n   * @param {number} x The origin for the symbol (x).\n   * @param {number} y The origin for the symbol (y).\n   */\n  draw_(renderOptions, context, x, y) {\n    let i, angle0, radiusC;\n    // reset transform\n    context.setTransform(1, 0, 0, 1, 0, 0);\n\n    // then move to (x, y)\n    context.translate(x, y);\n\n    context.beginPath();\n\n    let points = this.points_;\n    if (points === Infinity) {\n      context.arc(\n        renderOptions.size / 2, renderOptions.size / 2,\n        this.radius_, 0, 2 * Math.PI, true);\n    } else {\n      const radius2 = (this.radius2_ !== undefined) ? this.radius2_\n        : this.radius_;\n      if (radius2 !== this.radius_) {\n        points = 2 * points;\n      }\n      for (i = 0; i <= points; i++) {\n        angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n        radiusC = i % 2 === 0 ? this.radius_ : radius2;\n        context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0),\n          renderOptions.size / 2 + radiusC * Math.sin(angle0));\n      }\n    }\n\n\n    if (this.fill_) {\n      let color = this.fill_.getColor();\n      if (color === null) {\n        color = defaultFillStyle;\n      }\n      context.fillStyle = asColorLike(color);\n      context.fill();\n    }\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n      if (renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n      context.lineCap = /** @type {CanvasLineCap} */ (renderOptions.lineCap);\n      context.lineJoin = /** @type {CanvasLineJoin} */ (renderOptions.lineJoin);\n      context.miterLimit = renderOptions.miterLimit;\n      context.stroke();\n    }\n    context.closePath();\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   */\n  createHitDetectionCanvas_(renderOptions) {\n    this.hitDetectionImageSize_ = [renderOptions.size, renderOptions.size];\n    if (this.fill_) {\n      this.hitDetectionCanvas_ = this.canvas_;\n      return;\n    }\n\n    // if no fill style is set, create an extra hit-detection image with a\n    // default fill style\n    const context = createCanvasContext2D(renderOptions.size, renderOptions.size);\n    this.hitDetectionCanvas_ = context.canvas;\n\n    this.drawHitDetectionCanvas_(renderOptions, context, 0, 0);\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The context.\n   * @param {number} x The origin for the symbol (x).\n   * @param {number} y The origin for the symbol (y).\n   */\n  drawHitDetectionCanvas_(renderOptions, context, x, y) {\n    // reset transform\n    context.setTransform(1, 0, 0, 1, 0, 0);\n\n    // then move to (x, y)\n    context.translate(x, y);\n\n    context.beginPath();\n\n    let points = this.points_;\n    if (points === Infinity) {\n      context.arc(\n        renderOptions.size / 2, renderOptions.size / 2,\n        this.radius_, 0, 2 * Math.PI, true);\n    } else {\n      const radius2 = (this.radius2_ !== undefined) ? this.radius2_\n        : this.radius_;\n      if (radius2 !== this.radius_) {\n        points = 2 * points;\n      }\n      let i, radiusC, angle0;\n      for (i = 0; i <= points; i++) {\n        angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n        radiusC = i % 2 === 0 ? this.radius_ : radius2;\n        context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0),\n          renderOptions.size / 2 + radiusC * Math.sin(angle0));\n      }\n    }\n\n    context.fillStyle = asString(defaultFillStyle);\n    context.fill();\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n      if (renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n      context.stroke();\n    }\n    context.closePath();\n  }\n\n  /**\n   * @return {string} The checksum.\n   */\n  getChecksum() {\n    const strokeChecksum = this.stroke_ ?\n      this.stroke_.getChecksum() : '-';\n    const fillChecksum = this.fill_ ?\n      this.fill_.getChecksum() : '-';\n\n    const recalculate = !this.checksums_ ||\n        (strokeChecksum != this.checksums_[1] ||\n        fillChecksum != this.checksums_[2] ||\n        this.radius_ != this.checksums_[3] ||\n        this.radius2_ != this.checksums_[4] ||\n        this.angle_ != this.checksums_[5] ||\n        this.points_ != this.checksums_[6]);\n\n    if (recalculate) {\n      const checksum = 'r' + strokeChecksum + fillChecksum +\n          (this.radius_ !== undefined ? this.radius_.toString() : '-') +\n          (this.radius2_ !== undefined ? this.radius2_.toString() : '-') +\n          (this.angle_ !== undefined ? this.angle_.toString() : '-') +\n          (this.points_ !== undefined ? this.points_.toString() : '-');\n      this.checksums_ = [checksum, strokeChecksum, fillChecksum,\n        this.radius_, this.radius2_, this.angle_, this.points_];\n    }\n\n    return /** @type {string} */ (this.checksums_[0]);\n  }\n}\n\n\nexport default RegularShape;\n","/**\n * @module ol/proj/transforms\n */\nimport {isEmpty} from '../obj.js';\n\n\n/**\n * @private\n * @type {!Object<string, Object<string, import(\"../proj.js\").TransformFunction>>}\n */\nlet transforms = {};\n\n\n/**\n * Clear the transform cache.\n */\nexport function clear() {\n  transforms = {};\n}\n\n\n/**\n * Registers a conversion function to convert coordinates from the source\n * projection to the destination projection.\n *\n * @param {import(\"./Projection.js\").default} source Source.\n * @param {import(\"./Projection.js\").default} destination Destination.\n * @param {import(\"../proj.js\").TransformFunction} transformFn Transform.\n */\nexport function add(source, destination, transformFn) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  if (!(sourceCode in transforms)) {\n    transforms[sourceCode] = {};\n  }\n  transforms[sourceCode][destinationCode] = transformFn;\n}\n\n\n/**\n * Unregisters the conversion function to convert coordinates from the source\n * projection to the destination projection.  This method is used to clean up\n * cached transforms during testing.\n *\n * @param {import(\"./Projection.js\").default} source Source projection.\n * @param {import(\"./Projection.js\").default} destination Destination projection.\n * @return {import(\"../proj.js\").TransformFunction} transformFn The unregistered transform.\n */\nexport function remove(source, destination) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  const transform = transforms[sourceCode][destinationCode];\n  delete transforms[sourceCode][destinationCode];\n  if (isEmpty(transforms[sourceCode])) {\n    delete transforms[sourceCode];\n  }\n  return transform;\n}\n\n\n/**\n * Get a transform given a source code and a destination code.\n * @param {string} sourceCode The code for the source projection.\n * @param {string} destinationCode The code for the destination projection.\n * @return {import(\"../proj.js\").TransformFunction|undefined} The transform function (if found).\n */\nexport function get(sourceCode, destinationCode) {\n  let transform;\n  if (sourceCode in transforms && destinationCode in transforms[sourceCode]) {\n    transform = transforms[sourceCode][destinationCode];\n  }\n  return transform;\n}\n","/**\n * @module ol/layer/VectorTileRenderType\n */\n\n/**\n * @enum {string}\n * Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels\n *    are scaled during zoom animations. Point symbols and texts are accurately\n *    rendered as vectors and can stay upright on rotated views.\n *  * `'vector'`: Vector tiles are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance than the other options.\n * @api\n */\nexport default {\n  IMAGE: 'image',\n  HYBRID: 'hybrid',\n  VECTOR: 'vector'\n};\n","/**\n * @module ol/Tile\n */\nimport TileState from './TileState.js';\nimport {easeIn} from './easing.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n\n\n/**\n * A function that takes an {@link module:ol/Tile} for the tile and a\n * `{string}` for the url as arguments. The default is\n * ```js\n * source.setTileLoadFunction(function(tile, src) {\n *   tile.getImage().src = src;\n * });\n * ```\n * For more fine grained control, the load function can use fetch or XMLHttpRequest and involve\n * error handling:\n *\n * ```js\n * import TileState from 'ol/TileState';\n *\n * source.setTileLoadFunction(function(tile, src) {\n *   var xhr = new XMLHttpRequest();\n *   xhr.responseType = 'blob';\n *   xhr.addEventListener('loadend', function (evt) {\n *     var data = this.response;\n *     if (data !== undefined) {\n *       tile.getImage().src = URL.createObjectURL(data);\n *     } else {\n *       tile.setState(TileState.ERROR);\n *     }\n *   });\n *   xhr.addEventListener('error', function () {\n *     tile.setState(TileState.ERROR);\n *   });\n *   xhr.open('GET', src);\n *   xhr.send();\n * });\n * ```\n *\n * @typedef {function(Tile, string)} LoadFunction\n * @api\n */\n\n/**\n * {@link module:ol/source/Tile~Tile} sources use a function of this type to get\n * the url that provides a tile for a given tile coordinate.\n *\n * This function takes an {@link module:ol/tilecoord~TileCoord} for the tile\n * coordinate, a `{number}` representing the pixel ratio and a\n * {@link module:ol/proj/Projection} for the projection  as arguments\n * and returns a `{string}` representing the tile URL, or undefined if no tile\n * should be requested for the passed tile coordinate.\n *\n * @typedef {function(import(\"./tilecoord.js\").TileCoord, number,\n *           import(\"./proj/Projection.js\").default): (string|undefined)} UrlFunction\n * @api\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @api\n */\n\n\n/**\n * @classdesc\n * Base class for tiles.\n *\n * @abstract\n */\nclass Tile extends EventTarget {\n\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {TileState} state State.\n   * @param {Options=} opt_options Tile options.\n   */\n  constructor(tileCoord, state, opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @type {import(\"./tilecoord.js\").TileCoord}\n     */\n    this.tileCoord = tileCoord;\n\n    /**\n     * @protected\n     * @type {TileState}\n     */\n    this.state = state;\n\n    /**\n     * An \"interim\" tile for this tile. The interim tile may be used while this\n     * one is loading, for \"smooth\" transitions when changing params/dimensions\n     * on the source.\n     * @type {Tile}\n     */\n    this.interimTile = null;\n\n    /**\n     * A key assigned to the tile. This is used by the tile source to determine\n     * if this tile can effectively be used, or if a new tile should be created\n     * and this one be used as an interim tile for this new tile.\n     * @type {string}\n     */\n    this.key = '';\n\n    /**\n     * The duration for the opacity transition.\n     * @type {number}\n     */\n    this.transition_ = options.transition === undefined ? 250 : options.transition;\n\n    /**\n     * Lookup of start times for rendering transitions.  If the start time is\n     * equal to -1, the transition is complete.\n     * @type {Object<string, number>}\n     */\n    this.transitionStarts_ = {};\n\n  }\n\n  /**\n   * @protected\n   */\n  changed() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @return {string} Key.\n   */\n  getKey() {\n    return this.key + '/' + this.tileCoord;\n  }\n\n  /**\n   * Get the interim tile most suitable for rendering using the chain of interim\n   * tiles. This corresponds to the  most recent tile that has been loaded, if no\n   * such tile exists, the original tile is returned.\n   * @return {!Tile} Best tile for rendering.\n   */\n  getInterimTile() {\n    if (!this.interimTile) {\n      //empty chain\n      return this;\n    }\n    let tile = this.interimTile;\n\n    // find the first loaded tile and return it. Since the chain is sorted in\n    // decreasing order of creation time, there is no need to search the remainder\n    // of the list (all those tiles correspond to older requests and will be\n    // cleaned up by refreshInterimChain)\n    do {\n      if (tile.getState() == TileState.LOADED) {\n        return tile;\n      }\n      tile = tile.interimTile;\n    } while (tile);\n\n    // we can not find a better tile\n    return this;\n  }\n\n  /**\n   * Goes through the chain of interim tiles and discards sections of the chain\n   * that are no longer relevant.\n   */\n  refreshInterimChain() {\n    if (!this.interimTile) {\n      return;\n    }\n\n    let tile = this.interimTile;\n    let prev = /** @type {Tile} */ (this);\n\n    do {\n      if (tile.getState() == TileState.LOADED) {\n        //we have a loaded tile, we can discard the rest of the list\n        //we would could abort any LOADING tile request\n        //older than this tile (i.e. any LOADING tile following this entry in the chain)\n        tile.interimTile = null;\n        break;\n      } else if (tile.getState() == TileState.LOADING) {\n        //keep this LOADING tile any loaded tiles later in the chain are\n        //older than this tile, so we're still interested in the request\n        prev = tile;\n      } else if (tile.getState() == TileState.IDLE) {\n        //the head of the list is the most current tile, we don't need\n        //to start any other requests for this chain\n        prev.interimTile = tile.interimTile;\n      } else {\n        prev = tile;\n      }\n      tile = prev.interimTile;\n    } while (tile);\n  }\n\n  /**\n   * Get the tile coordinate for this tile.\n   * @return {import(\"./tilecoord.js\").TileCoord} The tile coordinate.\n   * @api\n   */\n  getTileCoord() {\n    return this.tileCoord;\n  }\n\n  /**\n   * @return {TileState} State.\n   */\n  getState() {\n    return this.state;\n  }\n\n  /**\n   * Sets the state of this tile. If you write your own {@link module:ol/Tile~LoadFunction tileLoadFunction} ,\n   * it is important to set the state correctly to {@link module:ol/TileState~ERROR}\n   * when the tile cannot be loaded. Otherwise the tile cannot be removed from\n   * the tile queue and will block other requests.\n   * @param {TileState} state State.\n   * @api\n   */\n  setState(state) {\n    this.state = state;\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @abstract\n   * @api\n   */\n  load() {}\n\n  /**\n   * Get the alpha value for rendering.\n   * @param {string} id An id for the renderer.\n   * @param {number} time The render frame time.\n   * @return {number} A number between 0 and 1.\n   */\n  getAlpha(id, time) {\n    if (!this.transition_) {\n      return 1;\n    }\n\n    let start = this.transitionStarts_[id];\n    if (!start) {\n      start = time;\n      this.transitionStarts_[id] = start;\n    } else if (start === -1) {\n      return 1;\n    }\n\n    const delta = time - start + (1000 / 60); // avoid rendering at 0\n    if (delta >= this.transition_) {\n      return 1;\n    }\n    return easeIn(delta / this.transition_);\n  }\n\n  /**\n   * Determine if a tile is in an alpha transition.  A tile is considered in\n   * transition if tile.getAlpha() has not yet been called or has been called\n   * and returned 1.\n   * @param {string} id An id for the renderer.\n   * @return {boolean} The tile is in transition.\n   */\n  inTransition(id) {\n    if (!this.transition_) {\n      return false;\n    }\n    return this.transitionStarts_[id] !== -1;\n  }\n\n  /**\n   * Mark a transition as complete.\n   * @param {string} id An id for the renderer.\n   */\n  endTransition(id) {\n    if (this.transition_) {\n      this.transitionStarts_[id] = -1;\n    }\n  }\n}\n\n\nexport default Tile;\n","/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\nimport {listenOnce, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\n\n\nclass ImageTile extends Tile {\n\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {TileState} state State.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"./Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n   * @param {import(\"./Tile.js\").Options=} opt_options Tile options.\n   */\n  constructor(tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options) {\n\n    super(tileCoord, state, opt_options);\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ = crossOrigin;\n\n    /**\n     * Image URI\n     *\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {Array<import(\"./events.js\").EventsKey>}\n     */\n    this.imageListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./Tile.js\").LoadFunction}\n     */\n    this.tileLoadFunction_ = tileLoadFunction;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.state == TileState.LOADING) {\n      this.unlistenImage_();\n      this.image_ = getBlankImage();\n    }\n    if (this.interimTile) {\n      this.interimTile.dispose();\n    }\n    this.state = TileState.ABORT;\n    this.changed();\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getKey() {\n    return this.src_;\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = TileState.ERROR;\n    this.unlistenImage_();\n    this.image_ = getBlankImage();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    const image = /** @type {HTMLImageElement} */ (this.image_);\n    if (image.naturalWidth && image.naturalHeight) {\n      this.state = TileState.LOADED;\n    } else {\n      this.state = TileState.EMPTY;\n    }\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  load() {\n    if (this.state == TileState.ERROR) {\n      this.state = TileState.IDLE;\n      this.image_ = new Image();\n      if (this.crossOrigin_ !== null) {\n        this.image_.crossOrigin = this.crossOrigin_;\n      }\n    }\n    if (this.state == TileState.IDLE) {\n      this.state = TileState.LOADING;\n      this.changed();\n      this.imageListenerKeys_ = [\n        listenOnce(this.image_, EventType.ERROR,\n          this.handleImageError_, this),\n        listenOnce(this.image_, EventType.LOAD,\n          this.handleImageLoad_, this)\n      ];\n      this.tileLoadFunction_(this, this.src_);\n    }\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    this.imageListenerKeys_.forEach(unlistenByKey);\n    this.imageListenerKeys_ = null;\n  }\n}\n\n\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n  const ctx = createCanvasContext2D(1, 1);\n  ctx.fillStyle = 'rgba(0,0,0,0)';\n  ctx.fillRect(0, 0, 1, 1);\n  return ctx.canvas;\n}\n\nexport default ImageTile;\n","/**\n * @module ol/TileCache\n */\nimport LRUCache from './structs/LRUCache.js';\nimport {fromKey, getKey} from './tilecoord.js';\n\nclass TileCache extends LRUCache {\n\n  /**\n   * @param {number=} opt_highWaterMark High water mark.\n   */\n  constructor(opt_highWaterMark) {\n\n    super(opt_highWaterMark);\n\n  }\n\n  /**\n   * @param {!Object<string, import(\"./TileRange.js\").default>} usedTiles Used tiles.\n   */\n  expireCache(usedTiles) {\n    while (this.canExpireCache()) {\n      const tile = this.peekLast();\n      const zKey = tile.tileCoord[0].toString();\n      if (zKey in usedTiles && usedTiles[zKey].contains(tile.tileCoord)) {\n        break;\n      } else {\n        this.pop().dispose();\n      }\n    }\n  }\n\n  /**\n   * Prune all tiles from the cache that don't have the same z as the newest tile.\n   */\n  pruneExceptNewestZ() {\n    if (this.getCount() === 0) {\n      return;\n    }\n    const key = this.peekFirstKey();\n    const tileCoord = fromKey(key);\n    const z = tileCoord[0];\n    this.forEach(function(tile) {\n      if (tile.tileCoord[0] !== z) {\n        this.remove(getKey(tile.tileCoord));\n        tile.dispose();\n      }\n    }, this);\n  }\n}\n\n\nexport default TileCache;\n","/**\n * @module ol/reproj/Tile\n */\nimport {ERROR_THRESHOLD} from './common.js';\n\nimport Tile from '../Tile.js';\nimport TileState from '../TileState.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getArea, getCenter, getIntersection} from '../extent.js';\nimport {clamp} from '../math.js';\nimport {calculateSourceResolution, render as renderReprojected} from '../reproj.js';\nimport Triangulation from './Triangulation.js';\n\n\n/**\n * @typedef {function(number, number, number, number) : import(\"../Tile.js\").default} FunctionType\n */\n\n\n/**\n * @classdesc\n * Class encapsulating single reprojected tile.\n * See {@link module:ol/source/TileImage~TileImage}.\n *\n */\nclass ReprojTile extends Tile {\n  /**\n   * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} sourceTileGrid Source tile grid.\n   * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} targetTileGrid Target tile grid.\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Coordinate of the tile.\n   * @param {import(\"../tilecoord.js\").TileCoord} wrappedTileCoord Coordinate of the tile wrapped in X.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {number} gutter Gutter of the source tiles.\n   * @param {FunctionType} getTileFunction\n   *     Function returning source tiles (z, x, y, pixelRatio).\n   * @param {number=} opt_errorThreshold Acceptable reprojection error (in px).\n   * @param {boolean=} opt_renderEdges Render reprojection edges.\n   */\n  constructor(\n    sourceProj,\n    sourceTileGrid,\n    targetProj,\n    targetTileGrid,\n    tileCoord,\n    wrappedTileCoord,\n    pixelRatio,\n    gutter,\n    getTileFunction,\n    opt_errorThreshold,\n    opt_renderEdges\n  ) {\n    super(tileCoord, TileState.IDLE);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderEdges_ = opt_renderEdges !== undefined ? opt_renderEdges : false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.gutter_ = gutter;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.sourceTileGrid_ = sourceTileGrid;\n\n    /**\n     * @private\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.targetTileGrid_ = targetTileGrid;\n\n    /**\n     * @private\n     * @type {import(\"../tilecoord.js\").TileCoord}\n     */\n    this.wrappedTileCoord_ = wrappedTileCoord ? wrappedTileCoord : tileCoord;\n\n    /**\n     * @private\n     * @type {!Array<import(\"../Tile.js\").default>}\n     */\n    this.sourceTiles_ = [];\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.sourcesListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.sourceZ_ = 0;\n\n    const targetExtent = targetTileGrid.getTileCoordExtent(this.wrappedTileCoord_);\n    const maxTargetExtent = this.targetTileGrid_.getExtent();\n    let maxSourceExtent = this.sourceTileGrid_.getExtent();\n\n    const limitedTargetExtent = maxTargetExtent ?\n      getIntersection(targetExtent, maxTargetExtent) : targetExtent;\n\n    if (getArea(limitedTargetExtent) === 0) {\n      // Tile is completely outside range -> EMPTY\n      // TODO: is it actually correct that the source even creates the tile ?\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    const sourceProjExtent = sourceProj.getExtent();\n    if (sourceProjExtent) {\n      if (!maxSourceExtent) {\n        maxSourceExtent = sourceProjExtent;\n      } else {\n        maxSourceExtent = getIntersection(maxSourceExtent, sourceProjExtent);\n      }\n    }\n\n    const targetResolution = targetTileGrid.getResolution(\n      this.wrappedTileCoord_[0]);\n\n    const targetCenter = getCenter(limitedTargetExtent);\n    const sourceResolution = calculateSourceResolution(\n      sourceProj, targetProj, targetCenter, targetResolution);\n\n    if (!isFinite(sourceResolution) || sourceResolution <= 0) {\n      // invalid sourceResolution -> EMPTY\n      // probably edges of the projections when no extent is defined\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    const errorThresholdInPixels = opt_errorThreshold !== undefined ?\n      opt_errorThreshold : ERROR_THRESHOLD;\n\n    /**\n     * @private\n     * @type {!import(\"./Triangulation.js\").default}\n     */\n    this.triangulation_ = new Triangulation(\n      sourceProj, targetProj, limitedTargetExtent, maxSourceExtent,\n      sourceResolution * errorThresholdInPixels);\n\n    if (this.triangulation_.getTriangles().length === 0) {\n      // no valid triangles -> EMPTY\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    this.sourceZ_ = sourceTileGrid.getZForResolution(sourceResolution);\n    let sourceExtent = this.triangulation_.calculateSourceExtent();\n\n    if (maxSourceExtent) {\n      if (sourceProj.canWrapX()) {\n        sourceExtent[1] = clamp(\n          sourceExtent[1], maxSourceExtent[1], maxSourceExtent[3]);\n        sourceExtent[3] = clamp(\n          sourceExtent[3], maxSourceExtent[1], maxSourceExtent[3]);\n      } else {\n        sourceExtent = getIntersection(sourceExtent, maxSourceExtent);\n      }\n    }\n\n    if (!getArea(sourceExtent)) {\n      this.state = TileState.EMPTY;\n    } else {\n      const sourceRange = sourceTileGrid.getTileRangeForExtentAndZ(\n        sourceExtent, this.sourceZ_);\n\n      for (let srcX = sourceRange.minX; srcX <= sourceRange.maxX; srcX++) {\n        for (let srcY = sourceRange.minY; srcY <= sourceRange.maxY; srcY++) {\n          const tile = getTileFunction(this.sourceZ_, srcX, srcY, pixelRatio);\n          if (tile) {\n            this.sourceTiles_.push(tile);\n          }\n        }\n      }\n\n      if (this.sourceTiles_.length === 0) {\n        this.state = TileState.EMPTY;\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.state == TileState.LOADING) {\n      this.unlistenSources_();\n    }\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the HTML Canvas element for this tile.\n   * @return {HTMLCanvasElement} Canvas.\n   */\n  getImage() {\n    return this.canvas_;\n  }\n\n  /**\n   * @private\n   */\n  reproject_() {\n    const sources = [];\n    this.sourceTiles_.forEach(function(tile, i, arr) {\n      if (tile && tile.getState() == TileState.LOADED) {\n        sources.push({\n          extent: this.sourceTileGrid_.getTileCoordExtent(tile.tileCoord),\n          image: tile.getImage()\n        });\n      }\n    }.bind(this));\n    this.sourceTiles_.length = 0;\n\n    if (sources.length === 0) {\n      this.state = TileState.ERROR;\n    } else {\n      const z = this.wrappedTileCoord_[0];\n      const size = this.targetTileGrid_.getTileSize(z);\n      const width = typeof size === 'number' ? size : size[0];\n      const height = typeof size === 'number' ? size : size[1];\n      const targetResolution = this.targetTileGrid_.getResolution(z);\n      const sourceResolution = this.sourceTileGrid_.getResolution(this.sourceZ_);\n\n      const targetExtent = this.targetTileGrid_.getTileCoordExtent(\n        this.wrappedTileCoord_);\n      this.canvas_ = renderReprojected(width, height, this.pixelRatio_,\n        sourceResolution, this.sourceTileGrid_.getExtent(),\n        targetResolution, targetExtent, this.triangulation_, sources,\n        this.gutter_, this.renderEdges_);\n\n      this.state = TileState.LOADED;\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {\n    if (this.state == TileState.IDLE) {\n      this.state = TileState.LOADING;\n      this.changed();\n\n      let leftToLoad = 0;\n\n      this.sourcesListenerKeys_ = [];\n      this.sourceTiles_.forEach(function(tile, i, arr) {\n        const state = tile.getState();\n        if (state == TileState.IDLE || state == TileState.LOADING) {\n          leftToLoad++;\n\n          const sourceListenKey = listen(tile, EventType.CHANGE,\n            function(e) {\n              const state = tile.getState();\n              if (state == TileState.LOADED ||\n                    state == TileState.ERROR ||\n                    state == TileState.EMPTY) {\n                unlistenByKey(sourceListenKey);\n                leftToLoad--;\n                if (leftToLoad === 0) {\n                  this.unlistenSources_();\n                  this.reproject_();\n                }\n              }\n            }, this);\n          this.sourcesListenerKeys_.push(sourceListenKey);\n        }\n      }.bind(this));\n\n      this.sourceTiles_.forEach(function(tile, i, arr) {\n        const state = tile.getState();\n        if (state == TileState.IDLE) {\n          tile.load();\n        }\n      });\n\n      if (leftToLoad === 0) {\n        setTimeout(this.reproject_.bind(this), 0);\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  unlistenSources_() {\n    this.sourcesListenerKeys_.forEach(unlistenByKey);\n    this.sourcesListenerKeys_ = null;\n  }\n}\n\n\nexport default ReprojTile;\n","/**\n * @module ol/source/Tile\n */\nimport {abstract} from '../util.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport Event from '../events/Event.js';\nimport {equivalent} from '../proj.js';\nimport {toSize, scale as scaleSize} from '../size.js';\nimport Source from './Source.js';\nimport {getKeyZXY, withinExtentAndZ} from '../tilecoord.js';\nimport {wrapX, getForProjection as getTileGridForProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions]\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize]\n * @property {boolean} [opaque]\n * @property {number} [tilePixelRatio]\n * @property {import(\"../proj.js\").ProjectionLike} [projection]\n * @property {import(\"./State.js\").default} [state]\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid]\n * @property {boolean} [wrapX=true]\n * @property {number} [transition]\n * @property {string} [key]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing images divided into a tile grid.\n * @abstract\n * @api\n */\nclass TileSource extends Source {\n  /**\n   * @param {Options} options SourceTile source options.\n   */\n  constructor(options) {\n\n    super({\n      attributions: options.attributions,\n      attributionsCollapsible: options.attributionsCollapsible,\n      projection: options.projection,\n      state: options.state,\n      wrapX: options.wrapX\n    });\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.opaque_ = options.opaque !== undefined ? options.opaque : false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tilePixelRatio_ = options.tilePixelRatio !== undefined ?\n      options.tilePixelRatio : 1;\n\n    /**\n     * @protected\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.tileGrid = options.tileGrid !== undefined ? options.tileGrid : null;\n\n    /**\n     * @protected\n     * @type {import(\"../TileCache.js\").default}\n     */\n    this.tileCache = new TileCache(options.cacheSize);\n\n    /**\n     * @protected\n     * @type {import(\"../size.js\").Size}\n     */\n    this.tmpSize = [0, 0];\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.key_ = options.key || '';\n\n    /**\n     * @protected\n     * @type {import(\"../Tile.js\").Options}\n     */\n    this.tileOptions = {transition: options.transition};\n\n  }\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    return this.tileCache.canExpireCache();\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {!Object<string, import(\"../TileRange.js\").default>} usedTiles Used tiles.\n   */\n  expireCache(projection, usedTiles) {\n    const tileCache = this.getTileCacheForProjection(projection);\n    if (tileCache) {\n      tileCache.expireCache(usedTiles);\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {number} z Zoom level.\n   * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n   * @param {function(import(\"../Tile.js\").default):(boolean|void)} callback Called with each\n   *     loaded tile.  If the callback returns `false`, the tile will not be\n   *     considered loaded.\n   * @return {boolean} The tile range is fully covered with loaded tiles.\n   */\n  forEachLoadedTile(projection, z, tileRange, callback) {\n    const tileCache = this.getTileCacheForProjection(projection);\n    if (!tileCache) {\n      return false;\n    }\n\n    let covered = true;\n    let tile, tileCoordKey, loaded;\n    for (let x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (let y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        tileCoordKey = getKeyZXY(z, x, y);\n        loaded = false;\n        if (tileCache.containsKey(tileCoordKey)) {\n          tile = /** @type {!import(\"../Tile.js\").default} */ (tileCache.get(tileCoordKey));\n          loaded = tile.getState() === TileState.LOADED;\n          if (loaded) {\n            loaded = (callback(tile) !== false);\n          }\n        }\n        if (!loaded) {\n          covered = false;\n        }\n      }\n    }\n    return covered;\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {number} Gutter.\n   */\n  getGutterForProjection(projection) {\n    return 0;\n  }\n\n  /**\n   * Return the key to be used for all tiles in the source.\n   * @return {string} The key for all tiles.\n   * @protected\n   */\n  getKey() {\n    return this.key_;\n  }\n\n  /**\n   * Set the value to be used as the key for all tiles in the source.\n   * @param {string} key The key for tiles.\n   * @protected\n   */\n  setKey(key) {\n    if (this.key_ !== key) {\n      this.key_ = key;\n      this.changed();\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {boolean} Opaque.\n   */\n  getOpaque(projection) {\n    return this.opaque_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getResolutions() {\n    return this.tileGrid.getResolutions();\n  }\n\n  /**\n   * @abstract\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!import(\"../Tile.js\").default} Tile.\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    return abstract();\n  }\n\n  /**\n   * Return the tile grid of the tile source.\n   * @return {import(\"../tilegrid/TileGrid.js\").default} Tile grid.\n   * @api\n   */\n  getTileGrid() {\n    return this.tileGrid;\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!import(\"../tilegrid/TileGrid.js\").default} Tile grid.\n   */\n  getTileGridForProjection(projection) {\n    if (!this.tileGrid) {\n      return getTileGridForProjection(projection);\n    } else {\n      return this.tileGrid;\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../TileCache.js\").default} Tile cache.\n   * @protected\n   */\n  getTileCacheForProjection(projection) {\n    const thisProj = this.getProjection();\n    if (thisProj && !equivalent(thisProj, projection)) {\n      return null;\n    } else {\n      return this.tileCache;\n    }\n  }\n\n  /**\n   * Get the tile pixel ratio for this source. Subclasses may override this\n   * method, which is meant to return a supported pixel ratio that matches the\n   * provided `pixelRatio` as close as possible.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Tile pixel ratio.\n   */\n  getTilePixelRatio(pixelRatio) {\n    return this.tilePixelRatio_;\n  }\n\n  /**\n   * @param {number} z Z.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../size.js\").Size} Tile size.\n   */\n  getTilePixelSize(z, pixelRatio, projection) {\n    const tileGrid = this.getTileGridForProjection(projection);\n    const tilePixelRatio = this.getTilePixelRatio(pixelRatio);\n    const tileSize = toSize(tileGrid.getTileSize(z), this.tmpSize);\n    if (tilePixelRatio == 1) {\n      return tileSize;\n    } else {\n      return scaleSize(tileSize, tilePixelRatio, this.tmpSize);\n    }\n  }\n\n  /**\n   * Returns a tile coordinate wrapped around the x-axis. When the tile coordinate\n   * is outside the resolution and extent range of the tile grid, `null` will be\n   * returned.\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../proj/Projection.js\").default=} opt_projection Projection.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate to be passed to the tileUrlFunction or\n   *     null if no tile URL should be created for the passed `tileCoord`.\n   */\n  getTileCoordForTileUrlFunction(tileCoord, opt_projection) {\n    const projection = opt_projection !== undefined ?\n      opt_projection : this.getProjection();\n    const tileGrid = this.getTileGridForProjection(projection);\n    if (this.getWrapX() && projection.isGlobal()) {\n      tileCoord = wrapX(tileGrid, tileCoord, projection);\n    }\n    return withinExtentAndZ(tileCoord, tileGrid) ? tileCoord : null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  refresh() {\n    this.tileCache.clear();\n    this.changed();\n  }\n\n  /**\n   * Marks a tile coord as being used, without triggering a load.\n   * @abstract\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   */\n  useTile(z, x, y, projection) {}\n\n}\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Tile~TileSource} instances are instances of this\n * type.\n */\nexport class TileSourceEvent extends Event {\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../Tile.js\").default} tile The tile.\n   */\n  constructor(type, tile) {\n\n    super(type);\n\n    /**\n     * The tile related to the event.\n     * @type {import(\"../Tile.js\").default}\n     * @api\n     */\n    this.tile = tile;\n\n  }\n\n}\n\nexport default TileSource;\n","/**\n * @module ol/source/TileEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n\n  /**\n   * Triggered when a tile starts loading.\n   * @event module:ol/source/Tile.TileSourceEvent#tileloadstart\n   * @api\n   */\n  TILELOADSTART: 'tileloadstart',\n\n  /**\n   * Triggered when a tile finishes loading, either when its data is loaded,\n   * or when loading was aborted because the tile is no longer needed.\n   * @event module:ol/source/Tile.TileSourceEvent#tileloadend\n   * @api\n   */\n  TILELOADEND: 'tileloadend',\n\n  /**\n   * Triggered if tile loading results in an error.\n   * @event module:ol/source/Tile.TileSourceEvent#tileloaderror\n   * @api\n   */\n  TILELOADERROR: 'tileloaderror'\n\n};\n","/**\n * @module ol/source/TileImage\n */\nimport {ENABLE_RASTER_REPROJECTION} from '../reproj/common.js';\nimport {getUid} from '../util.js';\nimport ImageTile from '../ImageTile.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {equivalent, get as getProjection} from '../proj.js';\nimport ReprojTile from '../reproj/Tile.js';\nimport UrlTile from './UrlTile.js';\nimport {getKey, getKeyZXY} from '../tilecoord.js';\nimport {getForProjection as getTileGridForProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} projection Projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"./State.js\").default} [state] Source state.\n * @property {typeof import(\"../ImageTile.js\").default} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service. For example, if the tile\n * service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] Optional function to get tile URL given a tile coordinate and the projection.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`, may be\n * used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX] Whether to wrap the world horizontally. The default, is to\n * request out-of-bounds tiles from the server. When set to `false`, only one\n * world will be rendered. When set to `true`, tiles will be requested for one\n * world only, but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {string} [key] Optional tile key for proper cache fetching\n */\n\n\n/**\n * @classdesc\n * Base class for sources providing images divided into a tile grid.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n * @api\n */\nclass TileImage extends UrlTile {\n  /**\n   * @param {!Options} options Image tile options.\n   */\n  constructor(options) {\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      opaque: options.opaque,\n      projection: options.projection,\n      state: options.state,\n      tileGrid: options.tileGrid,\n      tileLoadFunction: options.tileLoadFunction ?\n        options.tileLoadFunction : defaultTileLoadFunction,\n      tilePixelRatio: options.tilePixelRatio,\n      tileUrlFunction: options.tileUrlFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX,\n      transition: options.transition,\n      key: options.key,\n      attributionsCollapsible: options.attributionsCollapsible\n    });\n\n    /**\n     * @protected\n     * @type {?string}\n     */\n    this.crossOrigin =\n        options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @protected\n     * @type {typeof ImageTile}\n     */\n    this.tileClass = options.tileClass !== undefined ?\n      options.tileClass : ImageTile;\n\n    /**\n     * @protected\n     * @type {!Object<string, TileCache>}\n     */\n    this.tileCacheForProjection = {};\n\n    /**\n     * @protected\n     * @type {!Object<string, import(\"../tilegrid/TileGrid.js\").default>}\n     */\n    this.tileGridForProjection = {};\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.reprojectionErrorThreshold_ = options.reprojectionErrorThreshold;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderReprojectionEdges_ = false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  canExpireCache() {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      return super.canExpireCache();\n    }\n    if (this.tileCache.canExpireCache()) {\n      return true;\n    } else {\n      for (const key in this.tileCacheForProjection) {\n        if (this.tileCacheForProjection[key].canExpireCache()) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  expireCache(projection, usedTiles) {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      super.expireCache(projection, usedTiles);\n      return;\n    }\n    const usedTileCache = this.getTileCacheForProjection(projection);\n\n    this.tileCache.expireCache(this.tileCache == usedTileCache ? usedTiles : {});\n    for (const id in this.tileCacheForProjection) {\n      const tileCache = this.tileCacheForProjection[id];\n      tileCache.expireCache(tileCache == usedTileCache ? usedTiles : {});\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getGutterForProjection(projection) {\n    if (ENABLE_RASTER_REPROJECTION &&\n        this.getProjection() && projection && !equivalent(this.getProjection(), projection)) {\n      return 0;\n    } else {\n      return this.getGutter();\n    }\n  }\n\n  /**\n   * @return {number} Gutter.\n   */\n  getGutter() {\n    return 0;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getOpaque(projection) {\n    if (ENABLE_RASTER_REPROJECTION &&\n        this.getProjection() && projection && !equivalent(this.getProjection(), projection)) {\n      return false;\n    } else {\n      return super.getOpaque(projection);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTileGridForProjection(projection) {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      return super.getTileGridForProjection(projection);\n    }\n    const thisProj = this.getProjection();\n    if (this.tileGrid && (!thisProj || equivalent(thisProj, projection))) {\n      return this.tileGrid;\n    } else {\n      const projKey = getUid(projection);\n      if (!(projKey in this.tileGridForProjection)) {\n        this.tileGridForProjection[projKey] = getTileGridForProjection(projection);\n      }\n      return (\n        /** @type {!import(\"../tilegrid/TileGrid.js\").default} */ (this.tileGridForProjection[projKey])\n      );\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTileCacheForProjection(projection) {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      return super.getTileCacheForProjection(projection);\n    }\n    const thisProj = this.getProjection(); if (!thisProj || equivalent(thisProj, projection)) {\n      return this.tileCache;\n    } else {\n      const projKey = getUid(projection);\n      if (!(projKey in this.tileCacheForProjection)) {\n        this.tileCacheForProjection[projKey] = new TileCache(this.tileCache.highWaterMark);\n      }\n      return this.tileCacheForProjection[projKey];\n    }\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {string} key The key set on the tile.\n   * @return {!import(\"../Tile.js\").default} Tile.\n   * @private\n   */\n  createTile_(z, x, y, pixelRatio, projection, key) {\n    const tileCoord = [z, x, y];\n    const urlTileCoord = this.getTileCoordForTileUrlFunction(\n      tileCoord, projection);\n    const tileUrl = urlTileCoord ?\n      this.tileUrlFunction(urlTileCoord, pixelRatio, projection) : undefined;\n    const tile = new this.tileClass(\n      tileCoord,\n      tileUrl !== undefined ? TileState.IDLE : TileState.EMPTY,\n      tileUrl !== undefined ? tileUrl : '',\n      this.crossOrigin,\n      this.tileLoadFunction,\n      this.tileOptions);\n    tile.key = key;\n    listen(tile, EventType.CHANGE,\n      this.handleTileChange, this);\n    return tile;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    const sourceProjection = /** @type {!import(\"../proj/Projection.js\").default} */ (this.getProjection());\n    if (!ENABLE_RASTER_REPROJECTION ||\n        !sourceProjection || !projection || equivalent(sourceProjection, projection)) {\n      return this.getTileInternal(z, x, y, pixelRatio, sourceProjection || projection);\n    } else {\n      const cache = this.getTileCacheForProjection(projection);\n      const tileCoord = [z, x, y];\n      let tile;\n      const tileCoordKey = getKey(tileCoord);\n      if (cache.containsKey(tileCoordKey)) {\n        tile = /** @type {!import(\"../Tile.js\").default} */ (cache.get(tileCoordKey));\n      }\n      const key = this.getKey();\n      if (tile && tile.key == key) {\n        return tile;\n      } else {\n        const sourceTileGrid = this.getTileGridForProjection(sourceProjection);\n        const targetTileGrid = this.getTileGridForProjection(projection);\n        const wrappedTileCoord =\n            this.getTileCoordForTileUrlFunction(tileCoord, projection);\n        const newTile = new ReprojTile(\n          sourceProjection, sourceTileGrid,\n          projection, targetTileGrid,\n          tileCoord, wrappedTileCoord, this.getTilePixelRatio(pixelRatio),\n          this.getGutter(),\n          function(z, x, y, pixelRatio) {\n            return this.getTileInternal(z, x, y, pixelRatio, sourceProjection);\n          }.bind(this), this.reprojectionErrorThreshold_,\n          this.renderReprojectionEdges_);\n        newTile.key = key;\n\n        if (tile) {\n          newTile.interimTile = tile;\n          newTile.refreshInterimChain();\n          cache.replace(tileCoordKey, newTile);\n        } else {\n          cache.set(tileCoordKey, newTile);\n        }\n        return newTile;\n      }\n    }\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {!import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!import(\"../Tile.js\").default} Tile.\n   * @protected\n   */\n  getTileInternal(z, x, y, pixelRatio, projection) {\n    let tile = null;\n    const tileCoordKey = getKeyZXY(z, x, y);\n    const key = this.getKey();\n    if (!this.tileCache.containsKey(tileCoordKey)) {\n      tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n      this.tileCache.set(tileCoordKey, tile);\n    } else {\n      tile = this.tileCache.get(tileCoordKey);\n      if (tile.key != key) {\n        // The source's params changed. If the tile has an interim tile and if we\n        // can use it then we use it. Otherwise we create a new tile.  In both\n        // cases we attempt to assign an interim tile to the new tile.\n        const interimTile = tile;\n        tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n\n        //make the new tile the head of the list,\n        if (interimTile.getState() == TileState.IDLE) {\n          //the old tile hasn't begun loading yet, and is now outdated, so we can simply discard it\n          tile.interimTile = interimTile.interimTile;\n        } else {\n          tile.interimTile = interimTile;\n        }\n        tile.refreshInterimChain();\n        this.tileCache.replace(tileCoordKey, tile);\n      }\n    }\n    return tile;\n  }\n\n  /**\n   * Sets whether to render reprojection edges or not (usually for debugging).\n   * @param {boolean} render Render the edges.\n   * @api\n   */\n  setRenderReprojectionEdges(render) {\n    if (!ENABLE_RASTER_REPROJECTION ||\n        this.renderReprojectionEdges_ == render) {\n      return;\n    }\n    this.renderReprojectionEdges_ = render;\n    for (const id in this.tileCacheForProjection) {\n      this.tileCacheForProjection[id].clear();\n    }\n    this.changed();\n  }\n\n  /**\n   * Sets the tile grid to use when reprojecting the tiles to the given\n   * projection instead of the default tile grid for the projection.\n   *\n   * This can be useful when the default tile grid cannot be created\n   * (e.g. projection has no extent defined) or\n   * for optimization reasons (custom tile size, resolutions, ...).\n   *\n   * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} tilegrid Tile grid to use for the projection.\n   * @api\n   */\n  setTileGridForProjection(projection, tilegrid) {\n    if (ENABLE_RASTER_REPROJECTION) {\n      const proj = getProjection(projection);\n      if (proj) {\n        const projKey = getUid(proj);\n        if (!(projKey in this.tileGridForProjection)) {\n          this.tileGridForProjection[projKey] = tilegrid;\n        }\n      }\n    }\n  }\n}\n\n\n/**\n * @param {ImageTile} imageTile Image tile.\n * @param {string} src Source.\n */\nfunction defaultTileLoadFunction(imageTile, src) {\n  /** @type {HTMLImageElement|HTMLVideoElement} */ (imageTile.getImage()).src = src;\n}\n\nexport default TileImage;\n","/**\n * @module ol/source/UrlTile\n */\nimport {getUid} from '../util.js';\nimport TileState from '../TileState.js';\nimport {expandUrl, createFromTemplates, nullTileUrlFunction} from '../tileurlfunction.js';\nimport TileSource, {TileSourceEvent} from './Tile.js';\nimport TileEventType from './TileEventType.js';\nimport {getKeyZXY} from '../tilecoord.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions]\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize]\n * @property {boolean} [opaque]\n * @property {import(\"../proj.js\").ProjectionLike} [projection]\n * @property {import(\"./State.js\").default} [state]\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid]\n * @property {import(\"../Tile.js\").LoadFunction} tileLoadFunction\n * @property {number} [tilePixelRatio]\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction]\n * @property {string} [url]\n * @property {Array<string>} [urls]\n * @property {boolean} [wrapX=true]\n * @property {number} [transition]\n * @property {string} [key]\n */\n\n\n/**\n * @classdesc\n * Base class for sources providing tiles divided into a tile grid over http.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n */\nclass UrlTile extends TileSource {\n  /**\n   * @param {Options} options Image tile options.\n   */\n  constructor(options) {\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      opaque: options.opaque,\n      projection: options.projection,\n      state: options.state,\n      tileGrid: options.tileGrid,\n      tilePixelRatio: options.tilePixelRatio,\n      wrapX: options.wrapX,\n      transition: options.transition,\n      key: options.key,\n      attributionsCollapsible: options.attributionsCollapsible\n    });\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.generateTileUrlFunction_ = !options.tileUrlFunction;\n\n    /**\n     * @protected\n     * @type {import(\"../Tile.js\").LoadFunction}\n     */\n    this.tileLoadFunction = options.tileLoadFunction;\n\n    /**\n     * @protected\n     * @type {import(\"../Tile.js\").UrlFunction}\n     */\n    this.tileUrlFunction = options.tileUrlFunction ? options.tileUrlFunction.bind(this) : nullTileUrlFunction;\n\n    /**\n     * @protected\n     * @type {!Array<string>|null}\n     */\n    this.urls = null;\n\n    if (options.urls) {\n      this.setUrls(options.urls);\n    } else if (options.url) {\n      this.setUrl(options.url);\n    }\n\n    if (options.tileUrlFunction) {\n      this.setTileUrlFunction(options.tileUrlFunction, this.key_);\n    }\n\n    /**\n     * @private\n     * @type {!Object<string, boolean>}\n     */\n    this.tileLoadingKeys_ = {};\n\n  }\n\n  /**\n   * Return the tile load function of the source.\n   * @return {import(\"../Tile.js\").LoadFunction} TileLoadFunction\n   * @api\n   */\n  getTileLoadFunction() {\n    return this.tileLoadFunction;\n  }\n\n  /**\n   * Return the tile URL function of the source.\n   * @return {import(\"../Tile.js\").UrlFunction} TileUrlFunction\n   * @api\n   */\n  getTileUrlFunction() {\n    return this.tileUrlFunction;\n  }\n\n  /**\n   * Return the URLs used for this source.\n   * When a tileUrlFunction is used instead of url or urls,\n   * null will be returned.\n   * @return {!Array<string>|null} URLs.\n   * @api\n   */\n  getUrls() {\n    return this.urls;\n  }\n\n  /**\n   * Handle tile change events.\n   * @param {import(\"../events/Event.js\").default} event Event.\n   * @protected\n   */\n  handleTileChange(event) {\n    const tile = /** @type {import(\"../Tile.js\").default} */ (event.target);\n    const uid = getUid(tile);\n    const tileState = tile.getState();\n    let type;\n    if (tileState == TileState.LOADING) {\n      this.tileLoadingKeys_[uid] = true;\n      type = TileEventType.TILELOADSTART;\n    } else if (uid in this.tileLoadingKeys_) {\n      delete this.tileLoadingKeys_[uid];\n      type = tileState == TileState.ERROR ? TileEventType.TILELOADERROR :\n        (tileState == TileState.LOADED || tileState == TileState.ABORT) ?\n          TileEventType.TILELOADEND : undefined;\n    }\n    if (type != undefined) {\n      this.dispatchEvent(new TileSourceEvent(type, tile));\n    }\n  }\n\n  /**\n   * Set the tile load function of the source.\n   * @param {import(\"../Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n   * @api\n   */\n  setTileLoadFunction(tileLoadFunction) {\n    this.tileCache.clear();\n    this.tileLoadFunction = tileLoadFunction;\n    this.changed();\n  }\n\n  /**\n   * Set the tile URL function of the source.\n   * @param {import(\"../Tile.js\").UrlFunction} tileUrlFunction Tile URL function.\n   * @param {string=} key Optional new tile key for the source.\n   * @api\n   */\n  setTileUrlFunction(tileUrlFunction, key) {\n    this.tileUrlFunction = tileUrlFunction;\n    this.tileCache.pruneExceptNewestZ();\n    if (typeof key !== 'undefined') {\n      this.setKey(key);\n    } else {\n      this.changed();\n    }\n  }\n\n  /**\n   * Set the URL to use for requests.\n   * @param {string} url URL.\n   * @api\n   */\n  setUrl(url) {\n    const urls = this.urls = expandUrl(url);\n    this.setUrls(urls);\n  }\n\n  /**\n   * Set the URLs to use for requests.\n   * @param {Array<string>} urls URLs.\n   * @api\n   */\n  setUrls(urls) {\n    this.urls = urls;\n    const key = urls.join('\\n');\n    if (this.generateTileUrlFunction_) {\n      this.setTileUrlFunction(createFromTemplates(urls, this.tileGrid), key);\n    } else {\n      this.setKey(key);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  useTile(z, x, y) {\n    const tileCoordKey = getKeyZXY(z, x, y);\n    if (this.tileCache.containsKey(tileCoordKey)) {\n      this.tileCache.get(tileCoordKey);\n    }\n  }\n}\n\n\nexport default UrlTile;\n","/**\n * @module ol/ObjectEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a property is changed.\n   * @event module:ol/Object.ObjectEvent#propertychange\n   * @api\n   */\n  PROPERTYCHANGE: 'propertychange'\n};\n","/**\n * @module ol/reproj\n */\nimport {createCanvasContext2D} from './dom.js';\nimport {containsCoordinate, createEmpty, extend, getHeight, getTopLeft, getWidth} from './extent.js';\nimport {solveLinearSystem} from './math.js';\nimport {getPointResolution, transform} from './proj.js';\n\n\n/**\n * Calculates ideal resolution to use from the source in order to achieve\n * pixel mapping as close as possible to 1:1 during reprojection.\n * The resolution is calculated regardless of what resolutions\n * are actually available in the dataset (TileGrid, Image, ...).\n *\n * @param {import(\"./proj/Projection.js\").default} sourceProj Source projection.\n * @param {import(\"./proj/Projection.js\").default} targetProj Target projection.\n * @param {import(\"./coordinate.js\").Coordinate} targetCenter Target center.\n * @param {number} targetResolution Target resolution.\n * @return {number} The best resolution to use. Can be +-Infinity, NaN or 0.\n */\nexport function calculateSourceResolution(sourceProj, targetProj,\n  targetCenter, targetResolution) {\n\n  const sourceCenter = transform(targetCenter, targetProj, sourceProj);\n\n  // calculate the ideal resolution of the source data\n  let sourceResolution = getPointResolution(targetProj, targetResolution, targetCenter);\n\n  const targetMetersPerUnit = targetProj.getMetersPerUnit();\n  if (targetMetersPerUnit !== undefined) {\n    sourceResolution *= targetMetersPerUnit;\n  }\n  const sourceMetersPerUnit = sourceProj.getMetersPerUnit();\n  if (sourceMetersPerUnit !== undefined) {\n    sourceResolution /= sourceMetersPerUnit;\n  }\n\n  // Based on the projection properties, the point resolution at the specified\n  // coordinates may be slightly different. We need to reverse-compensate this\n  // in order to achieve optimal results.\n\n  const sourceExtent = sourceProj.getExtent();\n  if (!sourceExtent || containsCoordinate(sourceExtent, sourceCenter)) {\n    const compensationFactor = getPointResolution(sourceProj, sourceResolution, sourceCenter) /\n        sourceResolution;\n    if (isFinite(compensationFactor) && compensationFactor > 0) {\n      sourceResolution /= compensationFactor;\n    }\n  }\n\n  return sourceResolution;\n}\n\n\n/**\n * Enlarge the clipping triangle point by 1 pixel to ensure the edges overlap\n * in order to mask gaps caused by antialiasing.\n *\n * @param {number} centroidX Centroid of the triangle (x coordinate in pixels).\n * @param {number} centroidY Centroid of the triangle (y coordinate in pixels).\n * @param {number} x X coordinate of the point (in pixels).\n * @param {number} y Y coordinate of the point (in pixels).\n * @return {import(\"./coordinate.js\").Coordinate} New point 1 px farther from the centroid.\n */\nfunction enlargeClipPoint(centroidX, centroidY, x, y) {\n  const dX = x - centroidX;\n  const dY = y - centroidY;\n  const distance = Math.sqrt(dX * dX + dY * dY);\n  return [Math.round(x + dX / distance), Math.round(y + dY / distance)];\n}\n\n\n/**\n * Renders the source data into new canvas based on the triangulation.\n *\n * @param {number} width Width of the canvas.\n * @param {number} height Height of the canvas.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} sourceResolution Source resolution.\n * @param {import(\"./extent.js\").Extent} sourceExtent Extent of the data source.\n * @param {number} targetResolution Target resolution.\n * @param {import(\"./extent.js\").Extent} targetExtent Target extent.\n * @param {import(\"./reproj/Triangulation.js\").default} triangulation\n * Calculated triangulation.\n * @param {Array<{extent: import(\"./extent.js\").Extent,\n *                 image: (HTMLCanvasElement|HTMLImageElement|HTMLVideoElement)}>} sources\n * Array of sources.\n * @param {number} gutter Gutter of the sources.\n * @param {boolean=} opt_renderEdges Render reprojection edges.\n * @return {HTMLCanvasElement} Canvas with reprojected data.\n */\nexport function render(width, height, pixelRatio,\n  sourceResolution, sourceExtent, targetResolution, targetExtent,\n  triangulation, sources, gutter, opt_renderEdges) {\n\n  const context = createCanvasContext2D(Math.round(pixelRatio * width),\n    Math.round(pixelRatio * height));\n\n  if (sources.length === 0) {\n    return context.canvas;\n  }\n\n  context.scale(pixelRatio, pixelRatio);\n\n  const sourceDataExtent = createEmpty();\n  sources.forEach(function(src, i, arr) {\n    extend(sourceDataExtent, src.extent);\n  });\n\n  const canvasWidthInUnits = getWidth(sourceDataExtent);\n  const canvasHeightInUnits = getHeight(sourceDataExtent);\n  const stitchContext = createCanvasContext2D(\n    Math.round(pixelRatio * canvasWidthInUnits / sourceResolution),\n    Math.round(pixelRatio * canvasHeightInUnits / sourceResolution));\n\n  const stitchScale = pixelRatio / sourceResolution;\n\n  sources.forEach(function(src, i, arr) {\n    const xPos = src.extent[0] - sourceDataExtent[0];\n    const yPos = -(src.extent[3] - sourceDataExtent[3]);\n    const srcWidth = getWidth(src.extent);\n    const srcHeight = getHeight(src.extent);\n\n    stitchContext.drawImage(\n      src.image,\n      gutter, gutter,\n      src.image.width - 2 * gutter, src.image.height - 2 * gutter,\n      xPos * stitchScale, yPos * stitchScale,\n      srcWidth * stitchScale, srcHeight * stitchScale);\n  });\n\n  const targetTopLeft = getTopLeft(targetExtent);\n\n  triangulation.getTriangles().forEach(function(triangle, i, arr) {\n    /* Calculate affine transform (src -> dst)\n     * Resulting matrix can be used to transform coordinate\n     * from `sourceProjection` to destination pixels.\n     *\n     * To optimize number of context calls and increase numerical stability,\n     * we also do the following operations:\n     * trans(-topLeftExtentCorner), scale(1 / targetResolution), scale(1, -1)\n     * here before solving the linear system so [ui, vi] are pixel coordinates.\n     *\n     * Src points: xi, yi\n     * Dst points: ui, vi\n     * Affine coefficients: aij\n     *\n     * | x0 y0 1  0  0 0 |   |a00|   |u0|\n     * | x1 y1 1  0  0 0 |   |a01|   |u1|\n     * | x2 y2 1  0  0 0 | x |a02| = |u2|\n     * |  0  0 0 x0 y0 1 |   |a10|   |v0|\n     * |  0  0 0 x1 y1 1 |   |a11|   |v1|\n     * |  0  0 0 x2 y2 1 |   |a12|   |v2|\n     */\n    const source = triangle.source;\n    const target = triangle.target;\n    let x0 = source[0][0], y0 = source[0][1];\n    let x1 = source[1][0], y1 = source[1][1];\n    let x2 = source[2][0], y2 = source[2][1];\n    const u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n    const v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n    const u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n    const v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n    const u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n    const v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n\n    // Shift all the source points to improve numerical stability\n    // of all the subsequent calculations. The [x0, y0] is used here.\n    // This is also used to simplify the linear system.\n    const sourceNumericalShiftX = x0;\n    const sourceNumericalShiftY = y0;\n    x0 = 0;\n    y0 = 0;\n    x1 -= sourceNumericalShiftX;\n    y1 -= sourceNumericalShiftY;\n    x2 -= sourceNumericalShiftX;\n    y2 -= sourceNumericalShiftY;\n\n    const augmentedMatrix = [\n      [x1, y1, 0, 0, u1 - u0],\n      [x2, y2, 0, 0, u2 - u0],\n      [0, 0, x1, y1, v1 - v0],\n      [0, 0, x2, y2, v2 - v0]\n    ];\n    const affineCoefs = solveLinearSystem(augmentedMatrix);\n    if (!affineCoefs) {\n      return;\n    }\n\n    context.save();\n    context.beginPath();\n    const centroidX = (u0 + u1 + u2) / 3;\n    const centroidY = (v0 + v1 + v2) / 3;\n    const p0 = enlargeClipPoint(centroidX, centroidY, u0, v0);\n    const p1 = enlargeClipPoint(centroidX, centroidY, u1, v1);\n    const p2 = enlargeClipPoint(centroidX, centroidY, u2, v2);\n\n    context.moveTo(p1[0], p1[1]);\n    context.lineTo(p0[0], p0[1]);\n    context.lineTo(p2[0], p2[1]);\n    context.clip();\n\n    context.transform(\n      affineCoefs[0], affineCoefs[2], affineCoefs[1], affineCoefs[3], u0, v0);\n\n    context.translate(sourceDataExtent[0] - sourceNumericalShiftX,\n      sourceDataExtent[3] - sourceNumericalShiftY);\n\n    context.scale(sourceResolution / pixelRatio,\n      -sourceResolution / pixelRatio);\n\n    context.drawImage(stitchContext.canvas, 0, 0);\n    context.restore();\n  });\n\n  if (opt_renderEdges) {\n    context.save();\n\n    context.strokeStyle = 'black';\n    context.lineWidth = 1;\n\n    triangulation.getTriangles().forEach(function(triangle, i, arr) {\n      const target = triangle.target;\n      const u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n      const v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n      const u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n      const v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n      const u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n      const v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n\n      context.beginPath();\n      context.moveTo(u1, v1);\n      context.lineTo(u0, v0);\n      context.lineTo(u2, v2);\n      context.closePath();\n      context.stroke();\n    });\n\n    context.restore();\n  }\n  return context.canvas;\n}\n","/**\n * @module ol/rotationconstraint\n */\nimport {toRadians} from './math.js';\n\n\n/**\n * @typedef {function((number|undefined), number): (number|undefined)} Type\n */\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\nexport function disable(rotation, delta) {\n  if (rotation !== undefined) {\n    return 0;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\nexport function none(rotation, delta) {\n  if (rotation !== undefined) {\n    return rotation + delta;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {number} n N.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToN(n) {\n  const theta = 2 * Math.PI / n;\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, delta) {\n      if (rotation !== undefined) {\n        rotation = Math.floor((rotation + delta) / theta + 0.5) * theta;\n        return rotation;\n      } else {\n        return undefined;\n      }\n    });\n}\n\n\n/**\n * @param {number=} opt_tolerance Tolerance.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToZero(opt_tolerance) {\n  const tolerance = opt_tolerance || toRadians(5);\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, delta) {\n      if (rotation !== undefined) {\n        if (Math.abs(rotation + delta) <= tolerance) {\n          return 0;\n        } else {\n          return rotation + delta;\n        }\n      } else {\n        return undefined;\n      }\n    });\n}\n","/**\n * @module ol/layer/TileProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  PRELOAD: 'preload',\n  USE_INTERIM_TILES_ON_ERROR: 'useInterimTilesOnError'\n};\n","/**\n * @module ol/source/WMSServerType\n */\n\n/**\n * Available server types: `'carmentaserver'`, `'geoserver'`, `'mapserver'`,\n *     `'qgis'`. These are servers that have vendor parameters beyond the WMS\n *     specification that OpenLayers can make use of.\n * @enum {string}\n */\nexport default {\n  CARMENTA_SERVER: 'carmentaserver',\n  GEOSERVER: 'geoserver',\n  MAPSERVER: 'mapserver',\n  QGIS: 'qgis'\n};\n","/**\n * @module ol/layer/Image\n */\nimport LayerType from '../LayerType.js';\nimport Layer from './Layer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {import(\"../source/Image.js\").default} [source] Source for this layer.\n */\n\n\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @fires import(\"../render/Event.js\").RenderEvent\n * @api\n */\nclass ImageLayer extends Layer {\n\n  /**\n   * @param {Options=} opt_options Layer options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n    super(options);\n\n    /**\n     * The layer type.\n     * @protected\n     * @type {import(\"../LayerType.js\").default}\n     */\n    this.type = LayerType.IMAGE;\n\n  }\n\n}\n\n\n/**\n * Return the associated {@link module:ol/source/Image source} of the image layer.\n * @function\n * @return {import(\"../source/Image.js\").default} Source.\n * @api\n */\nImageLayer.prototype.getSource;\nexport default ImageLayer;\n","/**\n * @module ol/geom/MultiLineString\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport LineString from './LineString.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {assignClosestArrayPoint, arrayMaxSquaredDelta} from './flat/closest.js';\nimport {deflateCoordinatesArray} from './flat/deflate.js';\nimport {inflateCoordinatesArray} from './flat/inflate.js';\nimport {interpolatePoint, lineStringsCoordinateAtM} from './flat/interpolate.js';\nimport {intersectsLineStringArray} from './flat/intersectsextent.js';\nimport {douglasPeuckerArray} from './flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-linestring geometry.\n *\n * @api\n */\nclass MultiLineString extends SimpleGeometry {\n\n  /**\n   * @param {Array<Array<import(\"../coordinate.js\").Coordinate>|LineString>|Array<number>} coordinates\n   *     Coordinates or LineString geometries. (For internal use, flat coordinates in\n   *     combination with `opt_layout` and `opt_ends` are also accepted.)\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @param {Array<number>=} opt_ends Flat coordinate ends for internal use.\n   */\n  constructor(coordinates, opt_layout, opt_ends) {\n\n    super();\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.ends_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    if (Array.isArray(coordinates[0])) {\n      this.setCoordinates(/** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */ (coordinates), opt_layout);\n    } else if (opt_layout !== undefined && opt_ends) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n      this.ends_ = opt_ends;\n    } else {\n      let layout = this.getLayout();\n      const lineStrings = /** @type {Array<LineString>} */ (coordinates);\n      const flatCoordinates = [];\n      const ends = [];\n      for (let i = 0, ii = lineStrings.length; i < ii; ++i) {\n        const lineString = lineStrings[i];\n        if (i === 0) {\n          layout = lineString.getLayout();\n        }\n        extend(flatCoordinates, lineString.getFlatCoordinates());\n        ends.push(flatCoordinates.length);\n      }\n      this.setFlatCoordinates(layout, flatCoordinates);\n      this.ends_ = ends;\n    }\n\n  }\n\n  /**\n   * Append the passed linestring to the multilinestring.\n   * @param {LineString} lineString LineString.\n   * @api\n   */\n  appendLineString(lineString) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = lineString.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, lineString.getFlatCoordinates().slice());\n    }\n    this.ends_.push(this.flatCoordinates.length);\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiLineString} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new MultiLineString(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(\n        this.flatCoordinates, 0, this.ends_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestArrayPoint(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * Returns the coordinate at `m` using linear interpolation, or `null` if no\n   * such coordinate exists.\n   *\n   * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n   * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n   * M will return the first coordinate and Ms greater than the last M will\n   * return the last coordinate.\n   *\n   * `opt_interpolate` controls interpolation between consecutive LineStrings\n   * within the MultiLineString. If `opt_interpolate` is `true` the coordinates\n   * will be linearly interpolated between the last coordinate of one LineString\n   * and the first coordinate of the next LineString.  If `opt_interpolate` is\n   * `false` then the function will return `null` for Ms falling between\n   * LineStrings.\n   *\n   * @param {number} m M.\n   * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n   * @param {boolean=} opt_interpolate Interpolate. Default is `false`.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinate.\n   * @api\n   */\n  getCoordinateAtM(m, opt_extrapolate, opt_interpolate) {\n    if ((this.layout != GeometryLayout.XYM &&\n         this.layout != GeometryLayout.XYZM) ||\n        this.flatCoordinates.length === 0) {\n      return null;\n    }\n    const extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n    const interpolate = opt_interpolate !== undefined ? opt_interpolate : false;\n    return lineStringsCoordinateAtM(this.flatCoordinates, 0,\n      this.ends_, this.stride, m, extrapolate, interpolate);\n  }\n\n  /**\n   * Return the coordinates of the multilinestring.\n   * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinatesArray(\n      this.flatCoordinates, 0, this.ends_, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Ends.\n   */\n  getEnds() {\n    return this.ends_;\n  }\n\n  /**\n   * Return the linestring at the specified index.\n   * @param {number} index Index.\n   * @return {LineString} LineString.\n   * @api\n   */\n  getLineString(index) {\n    if (index < 0 || this.ends_.length <= index) {\n      return null;\n    }\n    return new LineString(this.flatCoordinates.slice(\n      index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n  }\n\n  /**\n   * Return the linestrings of this multilinestring.\n   * @return {Array<LineString>} LineStrings.\n   * @api\n   */\n  getLineStrings() {\n    const flatCoordinates = this.flatCoordinates;\n    const ends = this.ends_;\n    const layout = this.layout;\n    /** @type {Array<LineString>} */\n    const lineStrings = [];\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const lineString = new LineString(flatCoordinates.slice(offset, end), layout);\n      lineStrings.push(lineString);\n      offset = end;\n    }\n    return lineStrings;\n  }\n\n  /**\n   * @return {Array<number>} Flat midpoints.\n   */\n  getFlatMidpoints() {\n    const midpoints = [];\n    const flatCoordinates = this.flatCoordinates;\n    let offset = 0;\n    const ends = this.ends_;\n    const stride = this.stride;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const midpoint = interpolatePoint(\n        flatCoordinates, offset, end, stride, 0.5);\n      extend(midpoints, midpoint);\n      offset = end;\n    }\n    return midpoints;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    const simplifiedEnds = [];\n    simplifiedFlatCoordinates.length = douglasPeuckerArray(\n      this.flatCoordinates, 0, this.ends_, this.stride, squaredTolerance,\n      simplifiedFlatCoordinates, 0, simplifiedEnds);\n    return new MultiLineString(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.MULTI_LINE_STRING;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLineStringArray(\n      this.flatCoordinates, 0, this.ends_, this.stride, extent);\n  }\n\n  /**\n   * Set the coordinates of the multilinestring.\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = deflateCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n}\n\n\nexport default MultiLineString;\n","/**\n * @module ol/proj/Projection\n */\nimport {METERS_PER_UNIT} from './Units.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} code The SRS identifier code, e.g. `EPSG:4326`.\n * @property {import(\"./Units.js\").default|string} [units] Units. Required unless a\n * proj4 projection is defined for `code`.\n * @property {import(\"../extent.js\").Extent} [extent] The validity extent for the SRS.\n * @property {string} [axisOrientation='enu'] The axis orientation as specified in Proj4.\n * @property {boolean} [global=false] Whether the projection is valid for the whole globe.\n * @property {number} [metersPerUnit] The meters per unit for the SRS.\n * If not provided, the `units` are used to get the meters per unit from the {@link module:ol/proj/Units~METERS_PER_UNIT}\n * lookup table.\n * @property {import(\"../extent.js\").Extent} [worldExtent] The world extent for the SRS.\n * @property {function(number, import(\"../coordinate.js\").Coordinate):number} [getPointResolution]\n * Function to determine resolution at a point. The function is called with a\n * `{number}` view resolution and an `{import(\"../coordinate.js\").Coordinate}` as arguments, and returns\n * the `{number}` resolution at the passed coordinate. If this is `undefined`,\n * the default {@link module:ol/proj#getPointResolution} function will be used.\n */\n\n\n/**\n * @classdesc\n * Projection definition class. One of these is created for each projection\n * supported in the application and stored in the {@link module:ol/proj} namespace.\n * You can use these in applications, but this is not required, as API params\n * and options use {@link module:ol/proj~ProjectionLike} which means the simple string\n * code will suffice.\n *\n * You can use {@link module:ol/proj~get} to retrieve the object for a particular\n * projection.\n *\n * The library includes definitions for `EPSG:4326` and `EPSG:3857`, together\n * with the following aliases:\n * * `EPSG:4326`: CRS:84, urn:ogc:def:crs:EPSG:6.6:4326,\n *     urn:ogc:def:crs:OGC:1.3:CRS84, urn:ogc:def:crs:OGC:2:84,\n *     http://www.opengis.net/gml/srs/epsg.xml#4326,\n *     urn:x-ogc:def:crs:EPSG:4326\n * * `EPSG:3857`: EPSG:102100, EPSG:102113, EPSG:900913,\n *     urn:ogc:def:crs:EPSG:6.18:3:3857,\n *     http://www.opengis.net/gml/srs/epsg.xml#3857\n *\n * If you use [proj4js](https://github.com/proj4js/proj4js), aliases can\n * be added using `proj4.defs()`. After all required projection definitions are\n * added, call the {@link module:ol/proj/proj4~register} function.\n *\n * @api\n */\nclass Projection {\n\n  /**\n   * @param {Options} options Projection options.\n   */\n  constructor(options) {\n    /**\n     * @private\n     * @type {string}\n     */\n    this.code_ = options.code;\n\n    /**\n     * Units of projected coordinates. When set to `TILE_PIXELS`, a\n     * `this.extent_` and `this.worldExtent_` must be configured properly for each\n     * tile.\n     * @private\n     * @type {import(\"./Units.js\").default}\n     */\n    this.units_ = /** @type {import(\"./Units.js\").default} */ (options.units);\n\n    /**\n     * Validity extent of the projection in projected coordinates. For projections\n     * with `TILE_PIXELS` units, this is the extent of the tile in\n     * tile pixel space.\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = options.extent !== undefined ? options.extent : null;\n\n    /**\n     * Extent of the world in EPSG:4326. For projections with\n     * `TILE_PIXELS` units, this is the extent of the tile in\n     * projected coordinate space.\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.worldExtent_ = options.worldExtent !== undefined ?\n      options.worldExtent : null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.axisOrientation_ = options.axisOrientation !== undefined ?\n      options.axisOrientation : 'enu';\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.global_ = options.global !== undefined ? options.global : false;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.canWrapX_ = !!(this.global_ && this.extent_);\n\n    /**\n     * @private\n     * @type {function(number, import(\"../coordinate.js\").Coordinate):number|undefined}\n     */\n    this.getPointResolutionFunc_ = options.getPointResolution;\n\n    /**\n     * @private\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.defaultTileGrid_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.metersPerUnit_ = options.metersPerUnit;\n  }\n\n  /**\n   * @return {boolean} The projection is suitable for wrapping the x-axis\n   */\n  canWrapX() {\n    return this.canWrapX_;\n  }\n\n  /**\n   * Get the code for this projection, e.g. 'EPSG:4326'.\n   * @return {string} Code.\n   * @api\n   */\n  getCode() {\n    return this.code_;\n  }\n\n  /**\n   * Get the validity extent for this projection.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getExtent() {\n    return this.extent_;\n  }\n\n  /**\n   * Get the units of this projection.\n   * @return {import(\"./Units.js\").default} Units.\n   * @api\n   */\n  getUnits() {\n    return this.units_;\n  }\n\n  /**\n   * Get the amount of meters per unit of this projection.  If the projection is\n   * not configured with `metersPerUnit` or a units identifier, the return is\n   * `undefined`.\n   * @return {number|undefined} Meters.\n   * @api\n   */\n  getMetersPerUnit() {\n    return this.metersPerUnit_ || METERS_PER_UNIT[this.units_];\n  }\n\n  /**\n   * Get the world extent for this projection.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getWorldExtent() {\n    return this.worldExtent_;\n  }\n\n  /**\n   * Get the axis orientation of this projection.\n   * Example values are:\n   * enu - the default easting, northing, elevation.\n   * neu - northing, easting, up - useful for \"lat/long\" geographic coordinates,\n   *     or south orientated transverse mercator.\n   * wnu - westing, northing, up - some planetary coordinate systems have\n   *     \"west positive\" coordinate systems\n   * @return {string} Axis orientation.\n   * @api\n   */\n  getAxisOrientation() {\n    return this.axisOrientation_;\n  }\n\n  /**\n   * Is this projection a global projection which spans the whole world?\n   * @return {boolean} Whether the projection is global.\n   * @api\n   */\n  isGlobal() {\n    return this.global_;\n  }\n\n  /**\n   * Set if the projection is a global projection which spans the whole world\n   * @param {boolean} global Whether the projection is global.\n   * @api\n   */\n  setGlobal(global) {\n    this.global_ = global;\n    this.canWrapX_ = !!(global && this.extent_);\n  }\n\n  /**\n   * @return {import(\"../tilegrid/TileGrid.js\").default} The default tile grid.\n   */\n  getDefaultTileGrid() {\n    return this.defaultTileGrid_;\n  }\n\n  /**\n   * @param {import(\"../tilegrid/TileGrid.js\").default} tileGrid The default tile grid.\n   */\n  setDefaultTileGrid(tileGrid) {\n    this.defaultTileGrid_ = tileGrid;\n  }\n\n  /**\n   * Set the validity extent for this projection.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  setExtent(extent) {\n    this.extent_ = extent;\n    this.canWrapX_ = !!(this.global_ && extent);\n  }\n\n  /**\n   * Set the world extent for this projection.\n   * @param {import(\"../extent.js\").Extent} worldExtent World extent\n   *     [minlon, minlat, maxlon, maxlat].\n   * @api\n   */\n  setWorldExtent(worldExtent) {\n    this.worldExtent_ = worldExtent;\n  }\n\n  /**\n   * Set the getPointResolution function (see {@link module:ol/proj~getPointResolution}\n   * for this projection.\n   * @param {function(number, import(\"../coordinate.js\").Coordinate):number} func Function\n   * @api\n   */\n  setGetPointResolution(func) {\n    this.getPointResolutionFunc_ = func;\n  }\n\n  /**\n   * Get the custom point resolution function for this projection (if set).\n   * @return {function(number, import(\"../coordinate.js\").Coordinate):number|undefined} The custom point\n   * resolution function (if set).\n   */\n  getPointResolutionFunc() {\n    return this.getPointResolutionFunc_;\n  }\n}\n\nexport default Projection;\n","/**\n * @module ol/geom/flat/intersectsextent\n */\nimport {containsExtent, createEmpty, extendFlatCoordinates, intersects, intersectsSegment} from '../../extent.js';\nimport {linearRingContainsXY, linearRingContainsExtent} from './contains.js';\nimport {forEach as forEachSegment} from './segments.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineString(flatCoordinates, offset, end, stride, extent) {\n  const coordinatesExtent = extendFlatCoordinates(\n    createEmpty(), flatCoordinates, offset, end, stride);\n  if (!intersects(extent, coordinatesExtent)) {\n    return false;\n  }\n  if (containsExtent(extent, coordinatesExtent)) {\n    return true;\n  }\n  if (coordinatesExtent[0] >= extent[0] &&\n      coordinatesExtent[2] <= extent[2]) {\n    return true;\n  }\n  if (coordinatesExtent[1] >= extent[1] &&\n      coordinatesExtent[3] <= extent[3]) {\n    return true;\n  }\n  return forEachSegment(flatCoordinates, offset, end, stride,\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} point1 Start point.\n     * @param {import(\"../../coordinate.js\").Coordinate} point2 End point.\n     * @return {boolean} `true` if the segment and the extent intersect,\n     *     `false` otherwise.\n     */\n    function(point1, point2) {\n      return intersectsSegment(extent, point1, point2);\n    });\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineStringArray(flatCoordinates, offset, ends, stride, extent) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    if (intersectsLineString(\n      flatCoordinates, offset, ends[i], stride, extent)) {\n      return true;\n    }\n    offset = ends[i];\n  }\n  return false;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRing(flatCoordinates, offset, end, stride, extent) {\n  if (intersectsLineString(\n    flatCoordinates, offset, end, stride, extent)) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[1])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[3])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[1])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[3])) {\n    return true;\n  }\n  return false;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingArray(flatCoordinates, offset, ends, stride, extent) {\n  if (!intersectsLinearRing(\n    flatCoordinates, offset, ends[0], stride, extent)) {\n    return false;\n  }\n  if (ends.length === 1) {\n    return true;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (linearRingContainsExtent(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n      if (!intersectsLineString(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingMultiArray(flatCoordinates, offset, endss, stride, extent) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (intersectsLinearRingArray(\n      flatCoordinates, offset, ends, stride, extent)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n","/**\n * @module ol/geom/MultiPoint\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY, containsXY} from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {deflateCoordinates} from './flat/deflate.js';\nimport {inflateCoordinates} from './flat/inflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Multi-point geometry.\n *\n * @api\n */\nclass MultiPoint extends SimpleGeometry {\n\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n    super();\n    if (opt_layout && !Array.isArray(coordinates[0])) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n    } else {\n      this.setCoordinates(/** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n    }\n  }\n\n  /**\n   * Append the passed point to this multipoint.\n   * @param {Point} point Point.\n   * @api\n   */\n  appendPoint(point) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = point.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, point.getFlatCoordinates());\n    }\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiPoint} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const multiPoint = new MultiPoint(this.flatCoordinates.slice(), this.layout);\n    return multiPoint;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    const flatCoordinates = this.flatCoordinates;\n    const stride = this.stride;\n    for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      const squaredDistance = squaredDx(\n        x, y, flatCoordinates[i], flatCoordinates[i + 1]);\n      if (squaredDistance < minSquaredDistance) {\n        minSquaredDistance = squaredDistance;\n        for (let j = 0; j < stride; ++j) {\n          closestPoint[j] = flatCoordinates[i + j];\n        }\n        closestPoint.length = stride;\n      }\n    }\n    return minSquaredDistance;\n  }\n\n  /**\n   * Return the coordinates of the multipoint.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * Return the point at the specified index.\n   * @param {number} index Index.\n   * @return {Point} Point.\n   * @api\n   */\n  getPoint(index) {\n    const n = !this.flatCoordinates ? 0 : this.flatCoordinates.length / this.stride;\n    if (index < 0 || n <= index) {\n      return null;\n    }\n    return new Point(this.flatCoordinates.slice(\n      index * this.stride, (index + 1) * this.stride), this.layout);\n  }\n\n  /**\n   * Return the points of this multipoint.\n   * @return {Array<Point>} Points.\n   * @api\n   */\n  getPoints() {\n    const flatCoordinates = this.flatCoordinates;\n    const layout = this.layout;\n    const stride = this.stride;\n    /** @type {Array<Point>} */\n    const points = [];\n    for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      const point = new Point(flatCoordinates.slice(i, i + stride), layout);\n      points.push(point);\n    }\n    return points;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.MULTI_POINT;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    const flatCoordinates = this.flatCoordinates;\n    const stride = this.stride;\n    for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      const x = flatCoordinates[i];\n      const y = flatCoordinates[i + 1];\n      if (containsXY(extent, x, y)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Set the coordinates of the multipoint.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default MultiPoint;\n","/**\n * @module ol/Kinetic\n */\n\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nclass Kinetic {\n\n  /**\n   * @param {number} decay Rate of decay (must be negative).\n   * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n   * @param {number} delay Delay to consider to calculate the kinetic\n   *     initial values (milliseconds).\n   */\n  constructor(decay, minVelocity, delay) {\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.decay_ = decay;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minVelocity_ = minVelocity;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delay_ = delay;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.points_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.angle_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  begin() {\n    this.points_.length = 0;\n    this.angle_ = 0;\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   */\n  update(x, y) {\n    this.points_.push(x, y, Date.now());\n  }\n\n  /**\n   * @return {boolean} Whether we should do kinetic animation.\n   */\n  end() {\n    if (this.points_.length < 6) {\n      // at least 2 points are required (i.e. there must be at least 6 elements\n      // in the array)\n      return false;\n    }\n    const delay = Date.now() - this.delay_;\n    const lastIndex = this.points_.length - 3;\n    if (this.points_[lastIndex + 2] < delay) {\n      // the last tracked point is too old, which means that the user stopped\n      // panning before releasing the map\n      return false;\n    }\n\n    // get the first point which still falls into the delay time\n    let firstIndex = lastIndex - 3;\n    while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n      firstIndex -= 3;\n    }\n\n    const duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n    // we don't want a duration of 0 (divide by zero)\n    // we also make sure the user panned for a duration of at least one frame\n    // (1/60s) to compute sane displacement values\n    if (duration < 1000 / 60) {\n      return false;\n    }\n\n    const dx = this.points_[lastIndex] - this.points_[firstIndex];\n    const dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n    this.angle_ = Math.atan2(dy, dx);\n    this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n    return this.initialVelocity_ > this.minVelocity_;\n  }\n\n  /**\n   * @return {number} Total distance travelled (pixels).\n   */\n  getDistance() {\n    return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n  }\n\n  /**\n   * @return {number} Angle of the kinetic panning animation (radians).\n   */\n  getAngle() {\n    return this.angle_;\n  }\n}\n\nexport default Kinetic;\n","/**\n * @module ol/interaction/DoubleClickZoom\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport Interaction, {zoomByDelta} from './Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [delta=1] The zoom delta applied on each double click.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom by double-clicking on the map.\n * @api\n */\nclass DoubleClickZoom extends Interaction {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super({\n      handleEvent: handleEvent\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = options.delta ? options.delta : 1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a\n * doubleclick) and eventually zooms the map.\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {DoubleClickZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  if (mapBrowserEvent.type == MapBrowserEventType.DBLCLICK) {\n    const browserEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent);\n    const map = mapBrowserEvent.map;\n    const anchor = mapBrowserEvent.coordinate;\n    const delta = browserEvent.shiftKey ? -this.delta_ : this.delta_;\n    const view = map.getView();\n    zoomByDelta(view, delta, anchor, this.duration_);\n    mapBrowserEvent.preventDefault();\n    stopEvent = true;\n  }\n  return !stopEvent;\n}\n\nexport default DoubleClickZoom;\n","/**\n * @module ol/events/condition\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport {assert} from '../asserts.js';\nimport {TRUE, FALSE} from '../functions.js';\nimport {WEBKIT, MAC} from '../has.js';\n\n\n/**\n * A function that takes an {@link module:ol/MapBrowserEvent} and returns a\n * `{boolean}`. If the condition is met, true should be returned.\n *\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default): boolean} Condition\n */\n\n\n/**\n * Return `true` if only the alt-key is pressed, `false` otherwise (e.g. when\n * additionally the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt key is pressed.\n * @api\n */\nexport const altKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return (\n    originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      !originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if only the alt-key and shift-key is pressed, `false` otherwise\n * (e.g. when additionally the platform-modifier-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt and shift keys are pressed.\n * @api\n */\nexport const altShiftKeysOnly = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return (\n    originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if the map has the focus. This condition requires a map target\n * element with a `tabindex` attribute, e.g. `<div id=\"map\" tabindex=\"1\">`.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} event Map browser event.\n * @return {boolean} The map has the focus.\n * @api\n */\nexport const focus = function(event) {\n  return event.target.getTargetElement() === document.activeElement;\n};\n\n\n/**\n * Return always true.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True.\n * @api\n */\nexport const always = TRUE;\n\n\n/**\n * Return `true` if the event is a `click` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `click` event.\n * @api\n */\nexport const click = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.CLICK;\n};\n\n\n/**\n * Return `true` if the event has an \"action\"-producing mouse button.\n *\n * By definition, this includes left-click on windows/linux, and left-click\n * without the ctrl key on Macs.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} The result.\n */\nexport const mouseActionButton = function(mapBrowserEvent) {\n  const originalEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent);\n  return originalEvent.button == 0 &&\n      !(WEBKIT && MAC && originalEvent.ctrlKey);\n};\n\n\n/**\n * Return always false.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} False.\n * @api\n */\nexport const never = FALSE;\n\n\n/**\n * Return `true` if the browser event is a `pointermove` event, `false`\n * otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the browser event is a `pointermove` event.\n * @api\n */\nexport const pointerMove = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == 'pointermove';\n};\n\n\n/**\n * Return `true` if the event is a map `singleclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `singleclick` event.\n * @api\n */\nexport const singleClick = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.SINGLECLICK;\n};\n\n\n/**\n * Return `true` if the event is a map `dblclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `dblclick` event.\n * @api\n */\nexport const doubleClick = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.DBLCLICK;\n};\n\n\n/**\n * Return `true` if no modifier key (alt-, shift- or platform-modifier-key) is\n * pressed.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if there no modifier keys are pressed.\n * @api\n */\nexport const noModifierKeys = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return (\n    !originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      !originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if only the platform-modifier-key (the meta-key on Mac,\n * ctrl-key otherwise) is pressed, `false` otherwise (e.g. when additionally\n * the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the platform modifier key is pressed.\n * @api\n */\nexport const platformModifierKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return !originalEvent.altKey &&\n    (MAC ? originalEvent.metaKey : originalEvent.ctrlKey) &&\n    !originalEvent.shiftKey;\n};\n\n\n/**\n * Return `true` if only the shift-key is pressed, `false` otherwise (e.g. when\n * additionally the alt-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the shift key is pressed.\n * @api\n */\nexport const shiftKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return (\n    !originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if the target element is not editable, i.e. not a `<input>`-,\n * `<select>`- or `<textarea>`-element, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if the target element is not editable.\n * @api\n */\nexport const targetNotEditable = function(mapBrowserEvent) {\n  const target = mapBrowserEvent.originalEvent.target;\n  const tagName = /** @type {Element} */ (target).tagName;\n  return (\n    tagName !== 'INPUT' &&\n      tagName !== 'SELECT' &&\n      tagName !== 'TEXTAREA');\n};\n\n\n/**\n * Return `true` if the event originates from a mouse device.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a mouse device.\n * @api\n */\nexport const mouseOnly = function(mapBrowserEvent) {\n  const pointerEvent = /** @type {import(\"../MapBrowserPointerEvent\").default} */ (mapBrowserEvent).pointerEvent;\n  assert(pointerEvent !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n  // see http://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n  return pointerEvent.pointerType == 'mouse';\n};\n\n\n/**\n * Return `true` if the event originates from a primary pointer in\n * contact with the surface or if the left mouse button is pressed.\n * See http://www.w3.org/TR/pointerevents/#button-states.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a primary pointer.\n * @api\n */\nexport const primaryAction = function(mapBrowserEvent) {\n  const pointerEvent = /** @type {import(\"../MapBrowserPointerEvent\").default} */ (mapBrowserEvent).pointerEvent;\n  assert(pointerEvent !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n  return pointerEvent.isPrimary && pointerEvent.button === 0;\n};\n","/**\n * @module ol/interaction/Pointer\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport Interaction from './Interaction.js';\nimport {getValues} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default):boolean} [handleDownEvent]\n * Function handling \"down\" events. If the function returns `true` then a drag\n * sequence is started.\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default)} [handleDragEvent]\n * Function handling \"drag\" events. This function is called on \"move\" events\n * during a drag sequence.\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleEvent]\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. The function may return `false` to prevent the\n * propagation of the event to other interactions in the map's interactions\n * chain.\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default)} [handleMoveEvent]\n * Function handling \"move\" events. This function is called on \"move\" events,\n * also during a drag sequence (so during a drag sequence both the\n * `handleDragEvent` function and this function are called).\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default):boolean} [handleUpEvent]\n *  Function handling \"up\" events. If the function returns `false` then the\n * current drag sequence is stopped.\n * @property {function(boolean):boolean} [stopDown]\n * Should the down event be propagated to other interactions, or should be\n * stopped?\n */\n\n\n/**\n * @classdesc\n * Base class that calls user-defined functions on `down`, `move` and `up`\n * events. This class also manages \"drag sequences\".\n *\n * When the `handleDownEvent` user function returns `true` a drag sequence is\n * started. During a drag sequence the `handleDragEvent` user function is\n * called on `move` events. The drag sequence ends when the `handleUpEvent`\n * user function is called and returns `false`.\n * @api\n */\nclass PointerInteraction extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super(/** @type {import(\"./Interaction.js\").InteractionOptions} */ (options));\n\n    if (options.handleDownEvent) {\n      this.handleDownEvent = options.handleDownEvent;\n    }\n\n    if (options.handleDragEvent) {\n      this.handleDragEvent = options.handleDragEvent;\n    }\n\n    if (options.handleMoveEvent) {\n      this.handleMoveEvent = options.handleMoveEvent;\n    }\n\n    if (options.handleUpEvent) {\n      this.handleUpEvent = options.handleUpEvent;\n    }\n\n    if (options.stopDown) {\n      this.stopDown = options.stopDown;\n    }\n\n    /**\n     * @type {boolean}\n     * @protected\n     */\n    this.handlingDownUpSequence = false;\n\n    /**\n     * @type {!Object<string, import(\"../pointer/PointerEvent.js\").default>}\n     * @private\n     */\n    this.trackedPointers_ = {};\n\n    /**\n     * @type {Array<import(\"../pointer/PointerEvent.js\").default>}\n     * @protected\n     */\n    this.targetPointers = [];\n\n  }\n\n  /**\n   * Handle pointer down events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   * @protected\n   */\n  handleDownEvent(mapBrowserEvent) {\n    return false;\n  }\n\n  /**\n   * Handle pointer drag events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @protected\n   */\n  handleDragEvent(mapBrowserEvent) {}\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event} and may call into\n   * other functions, if event sequences like e.g. 'drag' or 'down-up' etc. are\n   * detected.\n   * @override\n   * @api\n   */\n  handleEvent(mapBrowserEvent) {\n    if (!(/** @type {import(\"../MapBrowserPointerEvent.js\").default} */ (mapBrowserEvent).pointerEvent)) {\n      return true;\n    }\n\n    let stopEvent = false;\n    this.updateTrackedPointers_(mapBrowserEvent);\n    if (this.handlingDownUpSequence) {\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERDRAG) {\n        this.handleDragEvent(mapBrowserEvent);\n      } else if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n        const handledUp = this.handleUpEvent(mapBrowserEvent);\n        this.handlingDownUpSequence = handledUp && this.targetPointers.length > 0;\n      }\n    } else {\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERDOWN) {\n        const handled = this.handleDownEvent(mapBrowserEvent);\n        if (handled) {\n          mapBrowserEvent.preventDefault();\n        }\n        this.handlingDownUpSequence = handled;\n        stopEvent = this.stopDown(handled);\n      } else if (mapBrowserEvent.type == MapBrowserEventType.POINTERMOVE) {\n        this.handleMoveEvent(mapBrowserEvent);\n      }\n    }\n    return !stopEvent;\n  }\n\n  /**\n   * Handle pointer move events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @protected\n   */\n  handleMoveEvent(mapBrowserEvent) {}\n\n  /**\n   * Handle pointer up events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   * @protected\n   */\n  handleUpEvent(mapBrowserEvent) {\n    return false;\n  }\n\n  /**\n   * This function is used to determine if \"down\" events should be propagated\n   * to other interactions or should be stopped.\n   * @param {boolean} handled Was the event handled by the interaction?\n   * @return {boolean} Should the `down` event be stopped?\n   */\n  stopDown(handled) {\n    return handled;\n  }\n\n  /**\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @private\n   */\n  updateTrackedPointers_(mapBrowserEvent) {\n    if (isPointerDraggingEvent(mapBrowserEvent)) {\n      const event = mapBrowserEvent.pointerEvent;\n\n      const id = event.pointerId.toString();\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n        delete this.trackedPointers_[id];\n      } else if (mapBrowserEvent.type ==\n          MapBrowserEventType.POINTERDOWN) {\n        this.trackedPointers_[id] = event;\n      } else if (id in this.trackedPointers_) {\n        // update only when there was a pointerdown event for this pointer\n        this.trackedPointers_[id] = event;\n      }\n      this.targetPointers = getValues(this.trackedPointers_);\n    }\n  }\n\n}\n\n\n/**\n * @param {Array<import(\"../pointer/PointerEvent.js\").default>} pointerEvents List of events.\n * @return {import(\"../pixel.js\").Pixel} Centroid pixel.\n */\nexport function centroid(pointerEvents) {\n  const length = pointerEvents.length;\n  let clientX = 0;\n  let clientY = 0;\n  for (let i = 0; i < length; i++) {\n    clientX += pointerEvents[i].clientX;\n    clientY += pointerEvents[i].clientY;\n  }\n  return [clientX / length, clientY / length];\n}\n\n\n/**\n * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n * @return {boolean} Whether the event is a pointerdown, pointerdrag\n *     or pointerup event.\n */\nfunction isPointerDraggingEvent(mapBrowserEvent) {\n  const type = mapBrowserEvent.type;\n  return type === MapBrowserEventType.POINTERDOWN ||\n    type === MapBrowserEventType.POINTERDRAG ||\n    type === MapBrowserEventType.POINTERUP;\n}\n\n\nexport default PointerInteraction;\n","/**\n * @module ol/interaction/DragPan\n */\nimport ViewHint from '../ViewHint.js';\nimport {scale as scaleCoordinate, rotate as rotateCoordinate, add as addCoordinate} from '../coordinate.js';\nimport {easeOut} from '../easing.js';\nimport {noModifierKeys} from '../events/condition.js';\nimport {FALSE} from '../functions.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from './Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~noModifierKeys}.\n * @property {import(\"../Kinetic.js\").default} [kinetic] Kinetic inertia to apply to the pan.\n */\n\n\n/**\n * @classdesc\n * Allows the user to pan the map by dragging the map.\n * @api\n */\nclass DragPan extends PointerInteraction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      stopDown: FALSE\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {import(\"../Kinetic.js\").default|undefined}\n     */\n    this.kinetic_ = options.kinetic;\n\n    /**\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.lastCentroid = null;\n\n    /**\n     * @type {number}\n     */\n    this.lastPointersCount_;\n\n    /**\n     * @type {boolean}\n     */\n    this.panning_ = false;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : noModifierKeys;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.noKinetic_ = false;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    if (!this.panning_) {\n      this.panning_ = true;\n      this.getMap().getView().setHint(ViewHint.INTERACTING, 1);\n    }\n    const targetPointers = this.targetPointers;\n    const centroid = centroidFromPointers(targetPointers);\n    if (targetPointers.length == this.lastPointersCount_) {\n      if (this.kinetic_) {\n        this.kinetic_.update(centroid[0], centroid[1]);\n      }\n      if (this.lastCentroid) {\n        const deltaX = this.lastCentroid[0] - centroid[0];\n        const deltaY = centroid[1] - this.lastCentroid[1];\n        const map = mapBrowserEvent.map;\n        const view = map.getView();\n        let center = [deltaX, deltaY];\n        scaleCoordinate(center, view.getResolution());\n        rotateCoordinate(center, view.getRotation());\n        addCoordinate(center, view.getCenter());\n        center = view.constrainCenter(center);\n        view.setCenter(center);\n      }\n    } else if (this.kinetic_) {\n      // reset so we don't overestimate the kinetic energy after\n      // after one finger down, tiny drag, second finger down\n      this.kinetic_.begin();\n    }\n    this.lastCentroid = centroid;\n    this.lastPointersCount_ = targetPointers.length;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    if (this.targetPointers.length === 0) {\n      if (!this.noKinetic_ && this.kinetic_ && this.kinetic_.end()) {\n        const distance = this.kinetic_.getDistance();\n        const angle = this.kinetic_.getAngle();\n        const center = /** @type {!import(\"../coordinate.js\").Coordinate} */ (view.getCenter());\n        const centerpx = map.getPixelFromCoordinate(center);\n        const dest = map.getCoordinateFromPixel([\n          centerpx[0] - distance * Math.cos(angle),\n          centerpx[1] - distance * Math.sin(angle)\n        ]);\n        view.animate({\n          center: view.constrainCenter(dest),\n          duration: 500,\n          easing: easeOut\n        });\n      }\n      if (this.panning_) {\n        this.panning_ = false;\n        view.setHint(ViewHint.INTERACTING, -1);\n      }\n      return false;\n    } else {\n      if (this.kinetic_) {\n        // reset so we don't overestimate the kinetic energy after\n        // after one finger up, tiny drag, second finger up\n        this.kinetic_.begin();\n      }\n      this.lastCentroid = null;\n      return true;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (this.targetPointers.length > 0 && this.condition_(mapBrowserEvent)) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      this.lastCentroid = null;\n      // stop any current animation\n      if (view.getAnimating()) {\n        view.setCenter(mapBrowserEvent.frameState.viewState.center);\n      }\n      if (this.kinetic_) {\n        this.kinetic_.begin();\n      }\n      // No kinetic as soon as more than one pointer on the screen is\n      // detected. This is to prevent nasty pans after pinch.\n      this.noKinetic_ = this.targetPointers.length > 1;\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default DragPan;\n","/**\n * @module ol/interaction/DragRotate\n */\nimport {disable} from '../rotationconstraint.js';\nimport ViewHint from '../ViewHint.js';\nimport {altShiftKeysOnly, mouseOnly, mouseActionButton} from '../events/condition.js';\nimport {FALSE} from '../functions.js';\nimport {rotate, rotateWithoutConstraints} from './Interaction.js';\nimport PointerInteraction from './Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an\n * {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~altShiftKeysOnly}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n */\n\n\n/**\n * @classdesc\n * Allows the user to rotate the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the alt and shift keys are held down.\n *\n * This interaction is only supported for mouse devices.\n * @api\n */\nclass DragRotate extends PointerInteraction {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      stopDown: FALSE\n    });\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : altShiftKeysOnly;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastAngle_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return;\n    }\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    if (view.getConstraints().rotation === disable) {\n      return;\n    }\n    const size = map.getSize();\n    const offset = mapBrowserEvent.pixel;\n    const theta =\n        Math.atan2(size[1] / 2 - offset[1], offset[0] - size[0] / 2);\n    if (this.lastAngle_ !== undefined) {\n      const delta = theta - this.lastAngle_;\n      const rotation = view.getRotation();\n      rotateWithoutConstraints(view, rotation - delta);\n    }\n    this.lastAngle_ = theta;\n  }\n\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return true;\n    }\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    view.setHint(ViewHint.INTERACTING, -1);\n    const rotation = view.getRotation();\n    rotate(view, rotation, undefined, this.duration_);\n    return false;\n  }\n\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return false;\n    }\n\n    if (mouseActionButton(mapBrowserEvent) && this.condition_(mapBrowserEvent)) {\n      const map = mapBrowserEvent.map;\n      map.getView().setHint(ViewHint.INTERACTING, 1);\n      this.lastAngle_ = undefined;\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default DragRotate;\n","/**\n * @module ol/render/Box\n */\n\nimport Disposable from '../Disposable.js';\nimport Polygon from '../geom/Polygon.js';\n\nclass RenderBox extends Disposable {\n  /**\n   * @param {string} className CSS class name.\n   */\n  constructor(className) {\n    super();\n\n    /**\n     * @type {import(\"../geom/Polygon.js\").default}\n     * @private\n     */\n    this.geometry_ = null;\n\n    /**\n     * @type {HTMLDivElement}\n     * @private\n     */\n    this.element_ = /** @type {HTMLDivElement} */ (document.createElement('div'));\n    this.element_.style.position = 'absolute';\n    this.element_.className = 'ol-box ' + className;\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").default}\n     */\n    this.map_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.startPixel_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.endPixel_ = null;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.setMap(null);\n  }\n\n  /**\n   * @private\n   */\n  render_() {\n    const startPixel = this.startPixel_;\n    const endPixel = this.endPixel_;\n    const px = 'px';\n    const style = this.element_.style;\n    style.left = Math.min(startPixel[0], endPixel[0]) + px;\n    style.top = Math.min(startPixel[1], endPixel[1]) + px;\n    style.width = Math.abs(endPixel[0] - startPixel[0]) + px;\n    style.height = Math.abs(endPixel[1] - startPixel[1]) + px;\n  }\n\n  /**\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  setMap(map) {\n    if (this.map_) {\n      this.map_.getOverlayContainer().removeChild(this.element_);\n      const style = this.element_.style;\n      style.left = style.top = style.width = style.height = 'inherit';\n    }\n    this.map_ = map;\n    if (this.map_) {\n      this.map_.getOverlayContainer().appendChild(this.element_);\n    }\n  }\n\n  /**\n   * @param {import(\"../pixel.js\").Pixel} startPixel Start pixel.\n   * @param {import(\"../pixel.js\").Pixel} endPixel End pixel.\n   */\n  setPixels(startPixel, endPixel) {\n    this.startPixel_ = startPixel;\n    this.endPixel_ = endPixel;\n    this.createOrUpdateGeometry();\n    this.render_();\n  }\n\n  /**\n   * Creates or updates the cached geometry.\n   */\n  createOrUpdateGeometry() {\n    const startPixel = this.startPixel_;\n    const endPixel = this.endPixel_;\n    const pixels = [\n      startPixel,\n      [startPixel[0], endPixel[1]],\n      endPixel,\n      [endPixel[0], startPixel[1]]\n    ];\n    const coordinates = pixels.map(this.map_.getCoordinateFromPixel, this.map_);\n    // close the polygon\n    coordinates[4] = coordinates[0].slice();\n    if (!this.geometry_) {\n      this.geometry_ = new Polygon([coordinates]);\n    } else {\n      this.geometry_.setCoordinates([coordinates]);\n    }\n  }\n\n  /**\n   * @return {import(\"../geom/Polygon.js\").default} Geometry.\n   */\n  getGeometry() {\n    return this.geometry_;\n  }\n}\n\n\nexport default RenderBox;\n","/**\n * @module ol/interaction/DragBox\n */\n// FIXME draw drag box\nimport Event from '../events/Event.js';\nimport {always, mouseOnly, mouseActionButton} from '../events/condition.js';\nimport {VOID} from '../functions.js';\nimport PointerInteraction from './Pointer.js';\nimport RenderBox from '../render/Box.js';\n\n\n/**\n * A function that takes a {@link module:ol/MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s and returns a `{boolean}`. If the condition is met,\n * true should be returned.\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default, import(\"../pixel.js\").Pixel, import(\"../pixel.js\").Pixel):boolean} EndCondition\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragbox'] CSS class name for styling the box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link ol/events/condition~always}.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the default\n * `boxEndCondition` function.\n * @property {EndCondition} [boxEndCondition] A function that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s to indicate whether a `boxend` event should be fired.\n * Default is `true` if the area of the box is bigger than the `minArea` option.\n * @property {function(this:DragBox, import(\"../MapBrowserEvent.js\").default)} onBoxEnd Code to execute just\n * before `boxend` is fired.\n */\n\n\n/**\n * @enum {string}\n */\nconst DragBoxEventType = {\n  /**\n   * Triggered upon drag box start.\n   * @event DragBoxEvent#boxstart\n   * @api\n   */\n  BOXSTART: 'boxstart',\n\n  /**\n   * Triggered on drag when box is active.\n   * @event DragBoxEvent#boxdrag\n   * @api\n   */\n  BOXDRAG: 'boxdrag',\n\n  /**\n   * Triggered upon drag box end.\n   * @event DragBoxEvent#boxend\n   * @api\n   */\n  BOXEND: 'boxend'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragBox~DragBox} instances are instances of\n * this type.\n */\nclass DragBoxEvent extends Event {\n\n  /**\n   * @param {string} type The event type.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate The event coordinate.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Originating event.\n   */\n  constructor(type, coordinate, mapBrowserEvent) {\n    super(type);\n\n    /**\n     * The coordinate of the drag event.\n     * @const\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @api\n     */\n    this.coordinate = coordinate;\n\n    /**\n     * @const\n     * @type {import(\"../MapBrowserEvent.js\").default}\n     * @api\n     */\n    this.mapBrowserEvent = mapBrowserEvent;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Allows the user to draw a vector box by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the shift or other key is held down. This is used, for example,\n * for zooming to a specific area of the map\n * (see {@link module:ol/interaction/DragZoom~DragZoom} and\n * {@link module:ol/interaction/DragRotateAndZoom}).\n *\n * This interaction is only supported for mouse devices.\n *\n * @fires DragBoxEvent\n * @api\n */\nclass DragBox extends PointerInteraction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n    * @type {import(\"../render/Box.js\").default}\n    * @private\n    */\n    this.box_ = new RenderBox(options.className || 'ol-dragbox');\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.minArea_ = options.minArea !== undefined ? options.minArea : 64;\n\n    /**\n     * Function to execute just before `onboxend` is fired\n     * @type {function(this:DragBox, import(\"../MapBrowserEvent.js\").default)}\n     * @private\n     */\n    this.onBoxEnd_ = options.onBoxEnd ? options.onBoxEnd : VOID;\n\n    /**\n    * @type {import(\"../pixel.js\").Pixel}\n    * @private\n    */\n    this.startPixel_ = null;\n\n    /**\n    * @private\n    * @type {import(\"../events/condition.js\").Condition}\n    */\n    this.condition_ = options.condition ? options.condition : always;\n\n    /**\n    * @private\n    * @type {EndCondition}\n    */\n    this.boxEndCondition_ = options.boxEndCondition ?\n      options.boxEndCondition : this.defaultBoxEndCondition;\n  }\n\n  /**\n   * The default condition for determining whether the boxend event\n   * should fire.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent The originating MapBrowserEvent\n   *     leading to the box end.\n   * @param {import(\"../pixel.js\").Pixel} startPixel The starting pixel of the box.\n   * @param {import(\"../pixel.js\").Pixel} endPixel The end pixel of the box.\n   * @return {boolean} Whether or not the boxend condition should be fired.\n   */\n  defaultBoxEndCondition(mapBrowserEvent, startPixel, endPixel) {\n    const width = endPixel[0] - startPixel[0];\n    const height = endPixel[1] - startPixel[1];\n    return width * width + height * height >= this.minArea_;\n  }\n\n  /**\n  * Returns geometry of last drawn box.\n  * @return {import(\"../geom/Polygon.js\").default} Geometry.\n  * @api\n  */\n  getGeometry() {\n    return this.box_.getGeometry();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return;\n    }\n\n    this.box_.setPixels(this.startPixel_, mapBrowserEvent.pixel);\n\n    this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,\n      mapBrowserEvent.coordinate, mapBrowserEvent));\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return true;\n    }\n\n    this.box_.setMap(null);\n\n    if (this.boxEndCondition_(mapBrowserEvent, this.startPixel_, mapBrowserEvent.pixel)) {\n      this.onBoxEnd_(mapBrowserEvent);\n      this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXEND,\n        mapBrowserEvent.coordinate, mapBrowserEvent));\n    }\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return false;\n    }\n\n    if (mouseActionButton(mapBrowserEvent) &&\n        this.condition_(mapBrowserEvent)) {\n      this.startPixel_ = mapBrowserEvent.pixel;\n      this.box_.setMap(mapBrowserEvent.map);\n      this.box_.setPixels(this.startPixel_, this.startPixel_);\n      this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,\n        mapBrowserEvent.coordinate, mapBrowserEvent));\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\n\nexport default DragBox;\n","/**\n * @module ol/interaction/DragZoom\n */\nimport {easeOut} from '../easing.js';\nimport {shiftKeyOnly} from '../events/condition.js';\nimport {createOrUpdateFromCoordinates, getBottomLeft, getCenter, getTopRight, scaleFromCenter} from '../extent.js';\nimport DragBox from './DragBox.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragzoom'] CSS class name for styling the\n * box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~shiftKeyOnly}.\n * @property {number} [duration=200] Animation duration in milliseconds.\n * @property {boolean} [out=false] Use interaction for zooming out.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when a key, shift by default, is held down.\n *\n * To change the style of the box, use CSS and the `.ol-dragzoom` selector, or\n * your custom one configured with `className`.\n * @api\n */\nclass DragZoom extends DragBox {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n\n    const condition = options.condition ? options.condition : shiftKeyOnly;\n\n    super({\n      condition: condition,\n      className: options.className || 'ol-dragzoom',\n      onBoxEnd: onBoxEnd\n    });\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 200;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.out_ = options.out !== undefined ? options.out : false;\n  }\n}\n\n\n/**\n * @this {DragZoom}\n */\nfunction onBoxEnd() {\n  const map = this.getMap();\n  const view = /** @type {!import(\"../View.js\").default} */ (map.getView());\n  const size = /** @type {!import(\"../size.js\").Size} */ (map.getSize());\n  let extent = this.getGeometry().getExtent();\n\n  if (this.out_) {\n    const mapExtent = view.calculateExtent(size);\n    const boxPixelExtent = createOrUpdateFromCoordinates([\n      map.getPixelFromCoordinate(getBottomLeft(extent)),\n      map.getPixelFromCoordinate(getTopRight(extent))]);\n    const factor = view.getResolutionForExtent(boxPixelExtent, size);\n\n    scaleFromCenter(mapExtent, 1 / factor);\n    extent = mapExtent;\n  }\n\n  const resolution = view.constrainResolution(\n    view.getResolutionForExtent(extent, size));\n\n  let center = getCenter(extent);\n  center = view.constrainCenter(center);\n\n  view.animate({\n    resolution: resolution,\n    center: center,\n    duration: this.duration_,\n    easing: easeOut\n  });\n}\n\n\nexport default DragZoom;\n","/**\n * @module ol/events/KeyCode\n */\n\n/**\n * @enum {number}\n * @const\n */\nexport default {\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40\n};\n","/**\n * @module ol/interaction/KeyboardPan\n */\nimport {rotate as rotateCoordinate} from '../coordinate.js';\nimport EventType from '../events/EventType.js';\nimport KeyCode from '../events/KeyCode.js';\nimport {noModifierKeys, targetNotEditable} from '../events/condition.js';\nimport Interaction, {pan} from './Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~noModifierKeys} and\n * {@link module:ol/events/condition~targetNotEditable}.\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {number} [pixelDelta=128] The amount of pixels to pan on each key\n * press.\n */\n\n\n/**\n * @classdesc\n * Allows the user to pan the map using keyboard arrows.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}.\n * @api\n */\nclass KeyboardPan extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      handleEvent: handleEvent\n    });\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Browser event.\n     * @return {boolean} Combined condition result.\n     */\n    this.defaultCondition_ = function(mapBrowserEvent) {\n      return noModifierKeys(mapBrowserEvent) &&\n        targetNotEditable(mapBrowserEvent);\n    };\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition !== undefined ?\n      options.condition : this.defaultCondition_;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelDelta_ = options.pixelDelta !== undefined ?\n      options.pixelDelta : 128;\n\n  }\n\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides the direction to pan to (if an arrow key was\n * pressed).\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {KeyboardPan}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  if (mapBrowserEvent.type == EventType.KEYDOWN) {\n    const keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n    const keyCode = keyEvent.keyCode;\n    if (this.condition_(mapBrowserEvent) &&\n        (keyCode == KeyCode.DOWN ||\n        keyCode == KeyCode.LEFT ||\n        keyCode == KeyCode.RIGHT ||\n        keyCode == KeyCode.UP)) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      const mapUnitsDelta = view.getResolution() * this.pixelDelta_;\n      let deltaX = 0, deltaY = 0;\n      if (keyCode == KeyCode.DOWN) {\n        deltaY = -mapUnitsDelta;\n      } else if (keyCode == KeyCode.LEFT) {\n        deltaX = -mapUnitsDelta;\n      } else if (keyCode == KeyCode.RIGHT) {\n        deltaX = mapUnitsDelta;\n      } else {\n        deltaY = mapUnitsDelta;\n      }\n      const delta = [deltaX, deltaY];\n      rotateCoordinate(delta, view.getRotation());\n      pan(view, delta, this.duration_);\n      mapBrowserEvent.preventDefault();\n      stopEvent = true;\n    }\n  }\n  return !stopEvent;\n}\n\nexport default KeyboardPan;\n","/**\n * @module ol/interaction/KeyboardZoom\n */\nimport EventType from '../events/EventType.js';\nimport {targetNotEditable} from '../events/condition.js';\nimport Interaction, {zoomByDelta} from './Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~targetNotEditable}.\n * @property {number} [delta=1] The zoom level delta on each key press.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map using keyboard + and -.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardPan~KeyboardPan}.\n * @api\n */\nclass KeyboardZoom extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      handleEvent: handleEvent\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : targetNotEditable;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = options.delta ? options.delta : 1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n  }\n\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides whether to zoom in or out (depending on whether the\n * key pressed was '+' or '-').\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {KeyboardZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  if (mapBrowserEvent.type == EventType.KEYDOWN ||\n      mapBrowserEvent.type == EventType.KEYPRESS) {\n    const keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n    const charCode = keyEvent.charCode;\n    if (this.condition_(mapBrowserEvent) &&\n        (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n      const map = mapBrowserEvent.map;\n      const delta = (charCode == '+'.charCodeAt(0)) ? this.delta_ : -this.delta_;\n      const view = map.getView();\n      zoomByDelta(view, delta, undefined, this.duration_);\n      mapBrowserEvent.preventDefault();\n      stopEvent = true;\n    }\n  }\n  return !stopEvent;\n}\n\nexport default KeyboardZoom;\n","/**\n * @module ol/interaction/MouseWheelZoom\n */\nimport ViewHint from '../ViewHint.js';\nimport {always} from '../events/condition.js';\nimport {easeOut} from '../easing.js';\nimport EventType from '../events/EventType.js';\nimport {DEVICE_PIXEL_RATIO, FIREFOX, SAFARI} from '../has.js';\nimport Interaction, {zoomByDelta} from './Interaction.js';\nimport {clamp} from '../math.js';\n\n\n/**\n * Maximum mouse wheel delta.\n * @type {number}\n */\nconst MAX_DELTA = 1;\n\n\n/**\n * @enum {string}\n */\nexport const Mode = {\n  TRACKPAD: 'trackpad',\n  WHEEL: 'wheel'\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~always}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [timeout=80] Mouse wheel timeout duration in milliseconds.\n * @property {boolean} [constrainResolution=false] When using a trackpad or\n * magic mouse, zoom to the closest integer zoom level after the scroll gesture\n * ends.\n * @property {boolean} [useAnchor=true] Enable zooming using the mouse's\n * location as the anchor. When set to `false`, zooming in and out will zoom to\n * the center of the screen instead of zooming on the mouse's location.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n * @api\n */\nclass MouseWheelZoom extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super(/** @type {import(\"./Interaction.js\").InteractionOptions} */ (options));\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.useAnchor_ = options.useAnchor !== undefined ? options.useAnchor : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.constrainResolution_ = options.constrainResolution || false;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : always;\n\n    /**\n     * @private\n     * @type {?import(\"../coordinate.js\").Coordinate}\n     */\n    this.lastAnchor_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.startTime_ = undefined;\n\n    /**\n     * @private\n     * @type {?}\n     */\n    this.timeoutId_;\n\n    /**\n     * @private\n     * @type {Mode|undefined}\n     */\n    this.mode_ = undefined;\n\n    /**\n     * Trackpad events separated by this delay will be considered separate\n     * interactions.\n     * @type {number}\n     */\n    this.trackpadEventGap_ = 400;\n\n    /**\n     * @type {?}\n     */\n    this.trackpadTimeoutId_;\n\n    /**\n     * The number of delta values per zoom level\n     * @private\n     * @type {number}\n     */\n    this.trackpadDeltaPerZoom_ = 300;\n\n    /**\n     * The zoom factor by which scroll zooming is allowed to exceed the limits.\n     * @private\n     * @type {number}\n     */\n    this.trackpadZoomBuffer_ = 1.5;\n\n  }\n\n  /**\n   * @private\n   */\n  decrementInteractingHint_() {\n    this.trackpadTimeoutId_ = undefined;\n    const view = this.getMap().getView();\n    view.setHint(ViewHint.INTERACTING, -1);\n  }\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a mousewheel-event) and eventually\n   * zooms the map.\n   * @override\n   */\n  handleEvent(mapBrowserEvent) {\n    if (!this.condition_(mapBrowserEvent)) {\n      return true;\n    }\n    const type = mapBrowserEvent.type;\n    if (type !== EventType.WHEEL && type !== EventType.MOUSEWHEEL) {\n      return true;\n    }\n\n    mapBrowserEvent.preventDefault();\n\n    const map = mapBrowserEvent.map;\n    const wheelEvent = /** @type {WheelEvent} */ (mapBrowserEvent.originalEvent);\n\n    if (this.useAnchor_) {\n      this.lastAnchor_ = mapBrowserEvent.coordinate;\n    }\n\n    // Delta normalisation inspired by\n    // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n    let delta;\n    if (mapBrowserEvent.type == EventType.WHEEL) {\n      delta = wheelEvent.deltaY;\n      if (FIREFOX &&\n          wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n        delta /= DEVICE_PIXEL_RATIO;\n      }\n      if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n        delta *= 40;\n      }\n    } else if (mapBrowserEvent.type == EventType.MOUSEWHEEL) {\n      delta = -wheelEvent.wheelDeltaY;\n      if (SAFARI) {\n        delta /= 3;\n      }\n    }\n\n    if (delta === 0) {\n      return false;\n    }\n\n    const now = Date.now();\n\n    if (this.startTime_ === undefined) {\n      this.startTime_ = now;\n    }\n\n    if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n      this.mode_ = Math.abs(delta) < 4 ?\n        Mode.TRACKPAD :\n        Mode.WHEEL;\n    }\n\n    if (this.mode_ === Mode.TRACKPAD) {\n      const view = map.getView();\n      if (this.trackpadTimeoutId_) {\n        clearTimeout(this.trackpadTimeoutId_);\n      } else {\n        view.setHint(ViewHint.INTERACTING, 1);\n      }\n      this.trackpadTimeoutId_ = setTimeout(this.decrementInteractingHint_.bind(this), this.trackpadEventGap_);\n      let resolution = view.getResolution() * Math.pow(2, delta / this.trackpadDeltaPerZoom_);\n      const minResolution = view.getMinResolution();\n      const maxResolution = view.getMaxResolution();\n      let rebound = 0;\n      if (resolution < minResolution) {\n        resolution = Math.max(resolution, minResolution / this.trackpadZoomBuffer_);\n        rebound = 1;\n      } else if (resolution > maxResolution) {\n        resolution = Math.min(resolution, maxResolution * this.trackpadZoomBuffer_);\n        rebound = -1;\n      }\n      if (this.lastAnchor_) {\n        const center = view.calculateCenterZoom(resolution, this.lastAnchor_);\n        view.setCenter(view.constrainCenter(center));\n      }\n      view.setResolution(resolution);\n\n      if (rebound === 0 && this.constrainResolution_) {\n        view.animate({\n          resolution: view.constrainResolution(resolution, delta > 0 ? -1 : 1),\n          easing: easeOut,\n          anchor: this.lastAnchor_,\n          duration: this.duration_\n        });\n      }\n\n      if (rebound > 0) {\n        view.animate({\n          resolution: minResolution,\n          easing: easeOut,\n          anchor: this.lastAnchor_,\n          duration: 500\n        });\n      } else if (rebound < 0) {\n        view.animate({\n          resolution: maxResolution,\n          easing: easeOut,\n          anchor: this.lastAnchor_,\n          duration: 500\n        });\n      }\n      this.startTime_ = now;\n      return false;\n    }\n\n    this.delta_ += delta;\n\n    const timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n\n    clearTimeout(this.timeoutId_);\n    this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n\n    return false;\n  }\n\n  /**\n   * @private\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  handleWheelZoom_(map) {\n    const view = map.getView();\n    if (view.getAnimating()) {\n      view.cancelAnimations();\n    }\n    const maxDelta = MAX_DELTA;\n    const delta = clamp(this.delta_, -maxDelta, maxDelta);\n    zoomByDelta(view, -delta, this.lastAnchor_, this.duration_);\n    this.mode_ = undefined;\n    this.delta_ = 0;\n    this.lastAnchor_ = null;\n    this.startTime_ = undefined;\n    this.timeoutId_ = undefined;\n  }\n\n  /**\n   * Enable or disable using the mouse's location as an anchor when zooming\n   * @param {boolean} useAnchor true to zoom to the mouse's location, false\n   * to zoom to the center of the map\n   * @api\n   */\n  setMouseAnchor(useAnchor) {\n    this.useAnchor_ = useAnchor;\n    if (!useAnchor) {\n      this.lastAnchor_ = null;\n    }\n  }\n}\n\nexport default MouseWheelZoom;\n","/**\n * @module ol/interaction/PinchRotate\n */\nimport ViewHint from '../ViewHint.js';\nimport {FALSE} from '../functions.js';\nimport {rotate, rotateWithoutConstraints} from './Interaction.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from './Pointer.js';\nimport {disable} from '../rotationconstraint.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] The duration of the animation in\n * milliseconds.\n * @property {number} [threshold=0.3] Minimal angle in radians to start a rotation.\n */\n\n\n/**\n * @classdesc\n * Allows the user to rotate the map by twisting with two fingers\n * on a touch screen.\n * @api\n */\nclass PinchRotate extends PointerInteraction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    const pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n\n    if (!pointerOptions.stopDown) {\n      pointerOptions.stopDown = FALSE;\n    }\n\n    super(pointerOptions);\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastAngle_ = undefined;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.rotating_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.rotationDelta_ = 0.0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.threshold_ = options.threshold !== undefined ? options.threshold : 0.3;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    let rotationDelta = 0.0;\n\n    const touch0 = this.targetPointers[0];\n    const touch1 = this.targetPointers[1];\n\n    // angle between touches\n    const angle = Math.atan2(\n      touch1.clientY - touch0.clientY,\n      touch1.clientX - touch0.clientX);\n\n    if (this.lastAngle_ !== undefined) {\n      const delta = angle - this.lastAngle_;\n      this.rotationDelta_ += delta;\n      if (!this.rotating_ &&\n          Math.abs(this.rotationDelta_) > this.threshold_) {\n        this.rotating_ = true;\n      }\n      rotationDelta = delta;\n    }\n    this.lastAngle_ = angle;\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    if (view.getConstraints().rotation === disable) {\n      return;\n    }\n\n    // rotate anchor point.\n    // FIXME: should be the intersection point between the lines:\n    //     touch0,touch1 and previousTouch0,previousTouch1\n    const viewportPosition = map.getViewport().getBoundingClientRect();\n    const centroid = centroidFromPointers(this.targetPointers);\n    centroid[0] -= viewportPosition.left;\n    centroid[1] -= viewportPosition.top;\n    this.anchor_ = map.getCoordinateFromPixel(centroid);\n\n    // rotate\n    if (this.rotating_) {\n      const rotation = view.getRotation();\n      map.render();\n      rotateWithoutConstraints(view, rotation + rotationDelta, this.anchor_);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (this.targetPointers.length < 2) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      view.setHint(ViewHint.INTERACTING, -1);\n      if (this.rotating_) {\n        const rotation = view.getRotation();\n        rotate(view, rotation, this.anchor_, this.duration_);\n      }\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (this.targetPointers.length >= 2) {\n      const map = mapBrowserEvent.map;\n      this.anchor_ = null;\n      this.lastAngle_ = undefined;\n      this.rotating_ = false;\n      this.rotationDelta_ = 0.0;\n      if (!this.handlingDownUpSequence) {\n        map.getView().setHint(ViewHint.INTERACTING, 1);\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default PinchRotate;\n","/**\n * @module ol/interaction/PinchZoom\n */\nimport ViewHint from '../ViewHint.js';\nimport {FALSE} from '../functions.js';\nimport {zoom, zoomWithoutConstraints} from './Interaction.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from './Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=400] Animation duration in milliseconds.\n * @property {boolean} [constrainResolution=false] Zoom to the closest integer\n * zoom level after the pinch gesture ends.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by pinching with two fingers\n * on a touch screen.\n * @api\n */\nclass PinchZoom extends PointerInteraction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    const pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n\n    if (!pointerOptions.stopDown) {\n      pointerOptions.stopDown = FALSE;\n    }\n\n    super(pointerOptions);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.constrainResolution_ = options.constrainResolution || false;\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 400;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastDistance_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.lastScaleDelta_ = 1;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    let scaleDelta = 1.0;\n\n    const touch0 = this.targetPointers[0];\n    const touch1 = this.targetPointers[1];\n    const dx = touch0.clientX - touch1.clientX;\n    const dy = touch0.clientY - touch1.clientY;\n\n    // distance between touches\n    const distance = Math.sqrt(dx * dx + dy * dy);\n\n    if (this.lastDistance_ !== undefined) {\n      scaleDelta = this.lastDistance_ / distance;\n    }\n    this.lastDistance_ = distance;\n\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    const resolution = view.getResolution();\n    const maxResolution = view.getMaxResolution();\n    const minResolution = view.getMinResolution();\n    let newResolution = resolution * scaleDelta;\n    if (newResolution > maxResolution) {\n      scaleDelta = maxResolution / resolution;\n      newResolution = maxResolution;\n    } else if (newResolution < minResolution) {\n      scaleDelta = minResolution / resolution;\n      newResolution = minResolution;\n    }\n\n    if (scaleDelta != 1.0) {\n      this.lastScaleDelta_ = scaleDelta;\n    }\n\n    // scale anchor point.\n    const viewportPosition = map.getViewport().getBoundingClientRect();\n    const centroid = centroidFromPointers(this.targetPointers);\n    centroid[0] -= viewportPosition.left;\n    centroid[1] -= viewportPosition.top;\n    this.anchor_ = map.getCoordinateFromPixel(centroid);\n\n    // scale, bypass the resolution constraint\n    map.render();\n    zoomWithoutConstraints(view, newResolution, this.anchor_);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (this.targetPointers.length < 2) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      view.setHint(ViewHint.INTERACTING, -1);\n      const resolution = view.getResolution();\n      if (this.constrainResolution_ ||\n          resolution < view.getMinResolution() ||\n          resolution > view.getMaxResolution()) {\n        // Zoom to final resolution, with an animation, and provide a\n        // direction not to zoom out/in if user was pinching in/out.\n        // Direction is > 0 if pinching out, and < 0 if pinching in.\n        const direction = this.lastScaleDelta_ - 1;\n        zoom(view, resolution, this.anchor_, this.duration_, direction);\n      }\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (this.targetPointers.length >= 2) {\n      const map = mapBrowserEvent.map;\n      this.anchor_ = null;\n      this.lastDistance_ = undefined;\n      this.lastScaleDelta_ = 1;\n      if (!this.handlingDownUpSequence) {\n        map.getView().setHint(ViewHint.INTERACTING, 1);\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default PinchZoom;\n","/**\n * @module ol/interaction\n */\nimport Collection from './Collection.js';\nimport Kinetic from './Kinetic.js';\nimport DoubleClickZoom from './interaction/DoubleClickZoom.js';\nimport DragPan from './interaction/DragPan.js';\nimport DragRotate from './interaction/DragRotate.js';\nimport DragZoom from './interaction/DragZoom.js';\nimport KeyboardPan from './interaction/KeyboardPan.js';\nimport KeyboardZoom from './interaction/KeyboardZoom.js';\nimport MouseWheelZoom from './interaction/MouseWheelZoom.js';\nimport PinchRotate from './interaction/PinchRotate.js';\nimport PinchZoom from './interaction/PinchZoom.js';\nimport {focus} from './events/condition.js';\n\nexport {default as DoubleClickZoom} from './interaction/DoubleClickZoom.js';\nexport {default as DragAndDrop} from './interaction/DragAndDrop.js';\nexport {default as DragBox} from './interaction/DragBox.js';\nexport {default as DragPan} from './interaction/DragPan.js';\nexport {default as DragRotate} from './interaction/DragRotate.js';\nexport {default as DragRotateAndZoom} from './interaction/DragRotateAndZoom.js';\nexport {default as DragZoom} from './interaction/DragZoom.js';\nexport {default as Draw} from './interaction/Draw.js';\nexport {default as Extent} from './interaction/Extent.js';\nexport {default as Interaction} from './interaction/Interaction.js';\nexport {default as KeyboardPan} from './interaction/KeyboardPan.js';\nexport {default as KeyboardZoom} from './interaction/KeyboardZoom.js';\nexport {default as Modify} from './interaction/Modify.js';\nexport {default as MouseWheelZoom} from './interaction/MouseWheelZoom.js';\nexport {default as PinchRotate} from './interaction/PinchRotate.js';\nexport {default as PinchZoom} from './interaction/PinchZoom.js';\nexport {default as Pointer} from './interaction/Pointer.js';\nexport {default as Select} from './interaction/Select.js';\nexport {default as Snap} from './interaction/Snap.js';\nexport {default as Translate} from './interaction/Translate.js';\n\n\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [altShiftDragRotate=true] Whether Alt-Shift-drag rotate is\n * desired.\n * @property {boolean} [onFocusOnly=false] Interact only when the map has the\n * focus. This affects the `MouseWheelZoom` and `DragPan` interactions and is\n * useful when page scroll is desired for maps that do not have the browser's\n * focus.\n * @property {boolean} [constrainResolution=false] Zoom to the closest integer\n * zoom level after the wheel/trackpad or pinch gesture ends.\n * @property {boolean} [doubleClickZoom=true] Whether double click zoom is\n * desired.\n * @property {boolean} [keyboard=true] Whether keyboard interaction is desired.\n * @property {boolean} [mouseWheelZoom=true] Whether mousewheel zoom is desired.\n * @property {boolean} [shiftDragZoom=true] Whether Shift-drag zoom is desired.\n * @property {boolean} [dragPan=true] Whether drag pan is desired.\n * @property {boolean} [pinchRotate=true] Whether pinch rotate is desired.\n * @property {boolean} [pinchZoom=true] Whether pinch zoom is desired.\n * @property {number} [zoomDelta] Zoom level delta when using keyboard or\n * mousewheel zoom.\n * @property {number} [zoomDuration] Duration of the zoom animation in\n * milliseconds.\n */\n\n\n/**\n * Set of interactions included in maps by default. Specific interactions can be\n * excluded by setting the appropriate option to false in the constructor\n * options, but the order of the interactions is fixed.  If you want to specify\n * a different order for interactions, you will need to create your own\n * {@link module:ol/interaction/Interaction} instances and insert\n * them into a {@link module:ol/Collection} in the order you want\n * before creating your {@link module:ol/Map~Map} instance. The default set of\n * interactions, in sequence, is:\n * * {@link module:ol/interaction/DragRotate~DragRotate}\n * * {@link module:ol/interaction/DoubleClickZoom~DoubleClickZoom}\n * * {@link module:ol/interaction/DragPan~DragPan}\n * * {@link module:ol/interaction/PinchRotate~PinchRotate}\n * * {@link module:ol/interaction/PinchZoom~PinchZoom}\n * * {@link module:ol/interaction/KeyboardPan~KeyboardPan}\n * * {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}\n * * {@link module:ol/interaction/MouseWheelZoom~MouseWheelZoom}\n * * {@link module:ol/interaction/DragZoom~DragZoom}\n *\n * @param {DefaultsOptions=} opt_options Defaults options.\n * @return {import(\"./Collection.js\").default<import(\"./interaction/Interaction.js\").default>}\n * A collection of interactions to be used with the {@link module:ol/Map~Map}\n * constructor's `interactions` option.\n * @api\n */\nexport function defaults(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  const interactions = new Collection();\n\n  const kinetic = new Kinetic(-0.005, 0.05, 100);\n\n  const altShiftDragRotate = options.altShiftDragRotate !== undefined ?\n    options.altShiftDragRotate : true;\n  if (altShiftDragRotate) {\n    interactions.push(new DragRotate());\n  }\n\n  const doubleClickZoom = options.doubleClickZoom !== undefined ?\n    options.doubleClickZoom : true;\n  if (doubleClickZoom) {\n    interactions.push(new DoubleClickZoom({\n      delta: options.zoomDelta,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const dragPan = options.dragPan !== undefined ? options.dragPan : true;\n  if (dragPan) {\n    interactions.push(new DragPan({\n      condition: options.onFocusOnly ? focus : undefined,\n      kinetic: kinetic\n    }));\n  }\n\n  const pinchRotate = options.pinchRotate !== undefined ? options.pinchRotate :\n    true;\n  if (pinchRotate) {\n    interactions.push(new PinchRotate());\n  }\n\n  const pinchZoom = options.pinchZoom !== undefined ? options.pinchZoom : true;\n  if (pinchZoom) {\n    interactions.push(new PinchZoom({\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const keyboard = options.keyboard !== undefined ? options.keyboard : true;\n  if (keyboard) {\n    interactions.push(new KeyboardPan());\n    interactions.push(new KeyboardZoom({\n      delta: options.zoomDelta,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const mouseWheelZoom = options.mouseWheelZoom !== undefined ?\n    options.mouseWheelZoom : true;\n  if (mouseWheelZoom) {\n    interactions.push(new MouseWheelZoom({\n      condition: options.onFocusOnly ? focus : undefined,\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const shiftDragZoom = options.shiftDragZoom !== undefined ?\n    options.shiftDragZoom : true;\n  if (shiftDragZoom) {\n    interactions.push(new DragZoom({\n      duration: options.zoomDuration\n    }));\n  }\n\n  return interactions;\n\n}\n","/**\n * @module ol/geom/MultiPolygon\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport MultiPoint from './MultiPoint.js';\nimport Polygon from './Polygon.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {linearRingss as linearRingssArea} from './flat/area.js';\nimport {linearRingss as linearRingssCenter} from './flat/center.js';\nimport {assignClosestMultiArrayPoint, multiArrayMaxSquaredDelta} from './flat/closest.js';\nimport {linearRingssContainsXY} from './flat/contains.js';\nimport {deflateMultiCoordinatesArray} from './flat/deflate.js';\nimport {inflateMultiCoordinatesArray} from './flat/inflate.js';\nimport {getInteriorPointsOfMultiArray} from './flat/interiorpoint.js';\nimport {intersectsLinearRingMultiArray} from './flat/intersectsextent.js';\nimport {linearRingsAreOriented, orientLinearRingsArray} from './flat/orient.js';\nimport {quantizeMultiArray} from './flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-polygon geometry.\n *\n * @api\n */\nclass MultiPolygon extends SimpleGeometry {\n\n  /**\n   * @param {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>|Polygon>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` and `opt_endss` are also accepted.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @param {Array<Array<number>>=} opt_endss Array of ends for internal use with flat coordinates.\n   */\n  constructor(coordinates, opt_layout, opt_endss) {\n\n    super();\n\n    /**\n     * @type {Array<Array<number>>}\n     * @private\n     */\n    this.endss_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.flatInteriorPointsRevision_ = -1;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.flatInteriorPoints_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.orientedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.orientedFlatCoordinates_ = null;\n\n    if (!opt_endss && !Array.isArray(coordinates[0])) {\n      let layout = this.getLayout();\n      const polygons = /** @type {Array<Polygon>} */ (coordinates);\n      const flatCoordinates = [];\n      const endss = [];\n      for (let i = 0, ii = polygons.length; i < ii; ++i) {\n        const polygon = polygons[i];\n        if (i === 0) {\n          layout = polygon.getLayout();\n        }\n        const offset = flatCoordinates.length;\n        const ends = polygon.getEnds();\n        for (let j = 0, jj = ends.length; j < jj; ++j) {\n          ends[j] += offset;\n        }\n        extend(flatCoordinates, polygon.getFlatCoordinates());\n        endss.push(ends);\n      }\n      opt_layout = layout;\n      coordinates = flatCoordinates;\n      opt_endss = endss;\n    }\n    if (opt_layout !== undefined && opt_endss) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n      this.endss_ = opt_endss;\n    } else {\n      this.setCoordinates(/** @type {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} */ (coordinates),\n        opt_layout);\n    }\n\n  }\n\n  /**\n   * Append the passed polygon to this multipolygon.\n   * @param {Polygon} polygon Polygon.\n   * @api\n   */\n  appendPolygon(polygon) {\n    /** @type {Array<number>} */\n    let ends;\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = polygon.getFlatCoordinates().slice();\n      ends = polygon.getEnds().slice();\n      this.endss_.push();\n    } else {\n      const offset = this.flatCoordinates.length;\n      extend(this.flatCoordinates, polygon.getFlatCoordinates());\n      ends = polygon.getEnds().slice();\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        ends[i] += offset;\n      }\n    }\n    this.endss_.push(ends);\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiPolygon} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const len = this.endss_.length;\n    const newEndss = new Array(len);\n    for (let i = 0; i < len; ++i) {\n      newEndss[i] = this.endss_[i].slice();\n    }\n\n    return new MultiPolygon(\n      this.flatCoordinates.slice(), this.layout, newEndss);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(multiArrayMaxSquaredDelta(\n        this.flatCoordinates, 0, this.endss_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestMultiArrayPoint(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    return linearRingssContainsXY(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, x, y);\n  }\n\n  /**\n   * Return the area of the multipolygon on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingssArea(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);\n  }\n\n  /**\n   * Get the coordinate array for this geometry.  This array has the structure\n   * of a GeoJSON coordinate array for multi-polygons.\n   *\n   * @param {boolean=} opt_right Orient coordinates according to the right-hand\n   *     rule (counter-clockwise for exterior and clockwise for interior rings).\n   *     If `false`, coordinates will be oriented according to the left-hand rule\n   *     (clockwise for exterior and counter-clockwise for interior rings).\n   *     By default, coordinate orientation will depend on how the geometry was\n   *     constructed.\n   * @return {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates(opt_right) {\n    let flatCoordinates;\n    if (opt_right !== undefined) {\n      flatCoordinates = this.getOrientedFlatCoordinates().slice();\n      orientLinearRingsArray(\n        flatCoordinates, 0, this.endss_, this.stride, opt_right);\n    } else {\n      flatCoordinates = this.flatCoordinates;\n    }\n\n    return inflateMultiCoordinatesArray(\n      flatCoordinates, 0, this.endss_, this.stride);\n  }\n\n  /**\n   * @return {Array<Array<number>>} Endss.\n   */\n  getEndss() {\n    return this.endss_;\n  }\n\n  /**\n   * @return {Array<number>} Flat interior points.\n   */\n  getFlatInteriorPoints() {\n    if (this.flatInteriorPointsRevision_ != this.getRevision()) {\n      const flatCenters = linearRingssCenter(\n        this.flatCoordinates, 0, this.endss_, this.stride);\n      this.flatInteriorPoints_ = getInteriorPointsOfMultiArray(\n        this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n        flatCenters);\n      this.flatInteriorPointsRevision_ = this.getRevision();\n    }\n    return this.flatInteriorPoints_;\n  }\n\n  /**\n   * Return the interior points as {@link module:ol/geom/MultiPoint multipoint}.\n   * @return {MultiPoint} Interior points as XYM coordinates, where M is\n   * the length of the horizontal intersection that the point belongs to.\n   * @api\n   */\n  getInteriorPoints() {\n    return new MultiPoint(this.getFlatInteriorPoints().slice(), GeometryLayout.XYM);\n  }\n\n  /**\n   * @return {Array<number>} Oriented flat coordinates.\n   */\n  getOrientedFlatCoordinates() {\n    if (this.orientedRevision_ != this.getRevision()) {\n      const flatCoordinates = this.flatCoordinates;\n      if (linearRingsAreOriented(\n        flatCoordinates, 0, this.endss_, this.stride)) {\n        this.orientedFlatCoordinates_ = flatCoordinates;\n      } else {\n        this.orientedFlatCoordinates_ = flatCoordinates.slice();\n        this.orientedFlatCoordinates_.length =\n            orientLinearRingsArray(\n              this.orientedFlatCoordinates_, 0, this.endss_, this.stride);\n      }\n      this.orientedRevision_ = this.getRevision();\n    }\n    return this.orientedFlatCoordinates_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    const simplifiedEndss = [];\n    simplifiedFlatCoordinates.length = quantizeMultiArray(\n      this.flatCoordinates, 0, this.endss_, this.stride,\n      Math.sqrt(squaredTolerance),\n      simplifiedFlatCoordinates, 0, simplifiedEndss);\n    return new MultiPolygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEndss);\n  }\n\n  /**\n   * Return the polygon at the specified index.\n   * @param {number} index Index.\n   * @return {Polygon} Polygon.\n   * @api\n   */\n  getPolygon(index) {\n    if (index < 0 || this.endss_.length <= index) {\n      return null;\n    }\n    let offset;\n    if (index === 0) {\n      offset = 0;\n    } else {\n      const prevEnds = this.endss_[index - 1];\n      offset = prevEnds[prevEnds.length - 1];\n    }\n    const ends = this.endss_[index].slice();\n    const end = ends[ends.length - 1];\n    if (offset !== 0) {\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        ends[i] -= offset;\n      }\n    }\n    return new Polygon(this.flatCoordinates.slice(offset, end), this.layout, ends);\n  }\n\n  /**\n   * Return the polygons of this multipolygon.\n   * @return {Array<Polygon>} Polygons.\n   * @api\n   */\n  getPolygons() {\n    const layout = this.layout;\n    const flatCoordinates = this.flatCoordinates;\n    const endss = this.endss_;\n    const polygons = [];\n    let offset = 0;\n    for (let i = 0, ii = endss.length; i < ii; ++i) {\n      const ends = endss[i].slice();\n      const end = ends[ends.length - 1];\n      if (offset !== 0) {\n        for (let j = 0, jj = ends.length; j < jj; ++j) {\n          ends[j] -= offset;\n        }\n      }\n      const polygon = new Polygon(flatCoordinates.slice(offset, end), layout, ends);\n      polygons.push(polygon);\n      offset = end;\n    }\n    return polygons;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.MULTI_POLYGON;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLinearRingMultiArray(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, extent);\n  }\n\n  /**\n   * Set the coordinates of the multipolygon.\n   * @param {!Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 3);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const endss = deflateMultiCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.endss_);\n    if (endss.length === 0) {\n      this.flatCoordinates.length = 0;\n    } else {\n      const lastEnds = endss[endss.length - 1];\n      this.flatCoordinates.length = lastEnds.length === 0 ?\n        0 : lastEnds[lastEnds.length - 1];\n    }\n    this.changed();\n  }\n}\n\n\nexport default MultiPolygon;\n","/**\n * @module ol/geom/flat/center\n */\nimport {createEmpty, createOrUpdateFromFlatCoordinates} from '../../extent.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {Array<number>} Flat centers.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  const flatCenters = [];\n  let extent = createEmpty();\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    extent = createOrUpdateFromFlatCoordinates(flatCoordinates, offset, ends[0], stride);\n    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2);\n    offset = ends[ends.length - 1];\n  }\n  return flatCenters;\n}\n","/**\n * @module ol/tileurlfunction\n */\nimport {assert} from './asserts.js';\nimport {modulo} from './math.js';\nimport {hash as tileCoordHash} from './tilecoord.js';\n\n\n/**\n * @param {string} template Template.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTemplate(template, tileGrid) {\n  const zRegEx = /\\{z\\}/g;\n  const xRegEx = /\\{x\\}/g;\n  const yRegEx = /\\{y\\}/g;\n  const dashYRegEx = /\\{-y\\}/g;\n  return (\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function(tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        return template.replace(zRegEx, tileCoord[0].toString())\n          .replace(xRegEx, tileCoord[1].toString())\n          .replace(yRegEx, function() {\n            const y = -tileCoord[2] - 1;\n            return y.toString();\n          })\n          .replace(dashYRegEx, function() {\n            const z = tileCoord[0];\n            const range = tileGrid.getFullTileRange(z);\n            assert(range, 55); // The {-y} placeholder requires a tile grid with extent\n            const y = range.getHeight() + tileCoord[2];\n            return y.toString();\n          });\n      }\n    }\n  );\n}\n\n\n/**\n * @param {Array<string>} templates Templates.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTemplates(templates, tileGrid) {\n  const len = templates.length;\n  const tileUrlFunctions = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    tileUrlFunctions[i] = createFromTemplate(templates[i], tileGrid);\n  }\n  return createFromTileUrlFunctions(tileUrlFunctions);\n}\n\n\n/**\n * @param {Array<import(\"./Tile.js\").UrlFunction>} tileUrlFunctions Tile URL Functions.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTileUrlFunctions(tileUrlFunctions) {\n  if (tileUrlFunctions.length === 1) {\n    return tileUrlFunctions[0];\n  }\n  return (\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function(tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        const h = tileCoordHash(tileCoord);\n        const index = modulo(h, tileUrlFunctions.length);\n        return tileUrlFunctions[index](tileCoord, pixelRatio, projection);\n      }\n    }\n  );\n}\n\n\n/**\n * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @param {number} pixelRatio Pixel ratio.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {string|undefined} Tile URL.\n */\nexport function nullTileUrlFunction(tileCoord, pixelRatio, projection) {\n  return undefined;\n}\n\n\n/**\n * @param {string} url URL.\n * @return {Array<string>} Array of urls.\n */\nexport function expandUrl(url) {\n  const urls = [];\n  let match = /\\{([a-z])-([a-z])\\}/.exec(url);\n  if (match) {\n    // char range\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      urls.push(url.replace(match[0], String.fromCharCode(charCode)));\n    }\n    return urls;\n  }\n  match = match = /\\{(\\d+)-(\\d+)\\}/.exec(url);\n  if (match) {\n    // number range\n    const stop = parseInt(match[2], 10);\n    for (let i = parseInt(match[1], 10); i <= stop; i++) {\n      urls.push(url.replace(match[0], i.toString()));\n    }\n    return urls;\n  }\n  urls.push(url);\n  return urls;\n}\n","/**\n * @module ol/MapEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n\n  /**\n   * Triggered after a map frame is rendered.\n   * @event module:ol/MapEvent~MapEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered when the map starts moving.\n   * @event module:ol/MapEvent~MapEvent#movestart\n   * @api\n   */\n  MOVESTART: 'movestart',\n\n  /**\n   * Triggered after the map is moved.\n   * @event module:ol/MapEvent~MapEvent#moveend\n   * @api\n   */\n  MOVEEND: 'moveend'\n\n};\n","/**\n * @module ol/reproj/Image\n */\nimport {ERROR_THRESHOLD} from './common.js';\n\nimport ImageBase from '../ImageBase.js';\nimport ImageState from '../ImageState.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getCenter, getIntersection, getHeight, getWidth} from '../extent.js';\nimport {calculateSourceResolution, render as renderReprojected} from '../reproj.js';\nimport Triangulation from './Triangulation.js';\n\n\n/**\n * @typedef {function(import(\"../extent.js\").Extent, number, number) : import(\"../ImageBase.js\").default} FunctionType\n */\n\n\n/**\n * @classdesc\n * Class encapsulating single reprojected image.\n * See {@link module:ol/source/Image~ImageSource}.\n */\nclass ReprojImage extends ImageBase {\n  /**\n   * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection (of the data).\n   * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n   * @param {import(\"../extent.js\").Extent} targetExtent Target extent.\n   * @param {number} targetResolution Target resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {FunctionType} getImageFunction\n   *     Function returning source images (extent, resolution, pixelRatio).\n   */\n  constructor(sourceProj, targetProj, targetExtent, targetResolution, pixelRatio, getImageFunction) {\n    const maxSourceExtent = sourceProj.getExtent();\n    const maxTargetExtent = targetProj.getExtent();\n\n    const limitedTargetExtent = maxTargetExtent ?\n      getIntersection(targetExtent, maxTargetExtent) : targetExtent;\n\n    const targetCenter = getCenter(limitedTargetExtent);\n    const sourceResolution = calculateSourceResolution(\n      sourceProj, targetProj, targetCenter, targetResolution);\n\n    const errorThresholdInPixels = ERROR_THRESHOLD;\n\n    const triangulation = new Triangulation(\n      sourceProj, targetProj, limitedTargetExtent, maxSourceExtent,\n      sourceResolution * errorThresholdInPixels);\n\n    const sourceExtent = triangulation.calculateSourceExtent();\n    const sourceImage = getImageFunction(sourceExtent, sourceResolution, pixelRatio);\n    let state = ImageState.LOADED;\n    if (sourceImage) {\n      state = ImageState.IDLE;\n    }\n    const sourcePixelRatio = sourceImage ? sourceImage.getPixelRatio() : 1;\n\n    super(targetExtent, targetResolution, sourcePixelRatio, state);\n\n    /**\n     * @private\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.targetProj_ = targetProj;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.maxSourceExtent_ = maxSourceExtent;\n\n    /**\n     * @private\n     * @type {!import(\"./Triangulation.js\").default}\n     */\n    this.triangulation_ = triangulation;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.targetResolution_ = targetResolution;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.targetExtent_ = targetExtent;\n\n    /**\n     * @private\n     * @type {import(\"../ImageBase.js\").default}\n     */\n    this.sourceImage_ = sourceImage;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.sourcePixelRatio_ = sourcePixelRatio;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.sourceListenerKey_ = null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.state == ImageState.LOADING) {\n      this.unlistenSource_();\n    }\n    super.disposeInternal();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImage() {\n    return this.canvas_;\n  }\n\n  /**\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  getProjection() {\n    return this.targetProj_;\n  }\n\n  /**\n   * @private\n   */\n  reproject_() {\n    const sourceState = this.sourceImage_.getState();\n    if (sourceState == ImageState.LOADED) {\n      const width = getWidth(this.targetExtent_) / this.targetResolution_;\n      const height = getHeight(this.targetExtent_) / this.targetResolution_;\n\n      this.canvas_ = renderReprojected(width, height, this.sourcePixelRatio_,\n        this.sourceImage_.getResolution(), this.maxSourceExtent_,\n        this.targetResolution_, this.targetExtent_, this.triangulation_, [{\n          extent: this.sourceImage_.getExtent(),\n          image: this.sourceImage_.getImage()\n        }], 0);\n    }\n    this.state = sourceState;\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {\n    if (this.state == ImageState.IDLE) {\n      this.state = ImageState.LOADING;\n      this.changed();\n\n      const sourceState = this.sourceImage_.getState();\n      if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n        this.reproject_();\n      } else {\n        this.sourceListenerKey_ = listen(this.sourceImage_,\n          EventType.CHANGE, function(e) {\n            const sourceState = this.sourceImage_.getState();\n            if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n              this.unlistenSource_();\n              this.reproject_();\n            }\n          }, this);\n        this.sourceImage_.load();\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  unlistenSource_() {\n    unlistenByKey(/** @type {!import(\"../events.js\").EventsKey} */ (this.sourceListenerKey_));\n    this.sourceListenerKey_ = null;\n  }\n}\n\n\nexport default ReprojImage;\n","/**\n * @module ol/source/Image\n */\nimport {abstract} from '../util.js';\nimport {ENABLE_RASTER_REPROJECTION} from '../reproj/common.js';\nimport ImageState from '../ImageState.js';\nimport {linearFindNearest} from '../array.js';\nimport Event from '../events/Event.js';\nimport {equals} from '../extent.js';\nimport {equivalent} from '../proj.js';\nimport ReprojImage from '../reproj/Image.js';\nimport Source from './Source.js';\n\n\n/**\n * @enum {string}\n */\nconst ImageSourceEventType = {\n\n  /**\n   * Triggered when an image starts loading.\n   * @event ol/source/Image~ImageSourceEvent#imageloadstart\n   * @api\n   */\n  IMAGELOADSTART: 'imageloadstart',\n\n  /**\n   * Triggered when an image finishes loading.\n   * @event ol/source/Image~ImageSourceEvent#imageloadend\n   * @api\n   */\n  IMAGELOADEND: 'imageloadend',\n\n  /**\n   * Triggered if image loading results in an error.\n   * @event ol/source/Image~ImageSourceEvent#imageloaderror\n   * @api\n   */\n  IMAGELOADERROR: 'imageloaderror'\n\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Image~ImageSource} instances are instances of this\n * type.\n */\nclass ImageSourceEvent extends Event {\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../Image.js\").default} image The image.\n   */\n  constructor(type, image) {\n\n    super(type);\n\n    /**\n     * The image related to the event.\n     * @type {import(\"../Image.js\").default}\n     * @api\n     */\n    this.image = image;\n\n  }\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions]\n * @property {import(\"../proj.js\").ProjectionLike} projection\n * @property {Array<number>} [resolutions]\n * @property {import(\"./State.js\").default} [state]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing a single image.\n * @abstract\n * @api\n */\nclass ImageSource extends Source {\n  /**\n   * @param {Options} options Single image source options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      projection: options.projection,\n      state: options.state\n    });\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.resolutions_ = options.resolutions !== undefined ?\n      options.resolutions : null;\n\n\n    /**\n     * @private\n     * @type {import(\"../reproj/Image.js\").default}\n     */\n    this.reprojectedImage_ = null;\n\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.reprojectedRevision_ = 0;\n  }\n\n  /**\n   * @return {Array<number>} Resolutions.\n   * @override\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * @protected\n   * @param {number} resolution Resolution.\n   * @return {number} Resolution.\n   */\n  findNearestResolution(resolution) {\n    if (this.resolutions_) {\n      const idx = linearFindNearest(this.resolutions_, resolution, 0);\n      resolution = this.resolutions_[idx];\n    }\n    return resolution;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../ImageBase.js\").default} Single image.\n   */\n  getImage(extent, resolution, pixelRatio, projection) {\n    const sourceProjection = this.getProjection();\n    if (!ENABLE_RASTER_REPROJECTION ||\n        !sourceProjection ||\n        !projection ||\n        equivalent(sourceProjection, projection)) {\n      if (sourceProjection) {\n        projection = sourceProjection;\n      }\n      return this.getImageInternal(extent, resolution, pixelRatio, projection);\n    } else {\n      if (this.reprojectedImage_) {\n        if (this.reprojectedRevision_ == this.getRevision() &&\n            equivalent(\n              this.reprojectedImage_.getProjection(), projection) &&\n            this.reprojectedImage_.getResolution() == resolution &&\n            equals(this.reprojectedImage_.getExtent(), extent)) {\n          return this.reprojectedImage_;\n        }\n        this.reprojectedImage_.dispose();\n        this.reprojectedImage_ = null;\n      }\n\n      this.reprojectedImage_ = new ReprojImage(\n        sourceProjection, projection, extent, resolution, pixelRatio,\n        function(extent, resolution, pixelRatio) {\n          return this.getImageInternal(extent, resolution,\n            pixelRatio, sourceProjection);\n        }.bind(this));\n      this.reprojectedRevision_ = this.getRevision();\n\n      return this.reprojectedImage_;\n    }\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../ImageBase.js\").default} Single image.\n   * @protected\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n    return abstract();\n  }\n\n  /**\n   * Handle image change events.\n   * @param {import(\"../events/Event.js\").default} event Event.\n   * @protected\n   */\n  handleImageChange(event) {\n    const image = /** @type {import(\"../Image.js\").default} */ (event.target);\n    switch (image.getState()) {\n      case ImageState.LOADING:\n        this.loading = true;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADSTART,\n            image));\n        break;\n      case ImageState.LOADED:\n        this.loading = false;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADEND,\n            image));\n        break;\n      case ImageState.ERROR:\n        this.loading = false;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADERROR,\n            image));\n        break;\n      default:\n        // pass\n    }\n  }\n}\n\n\n/**\n * Default image load function for image sources that use import(\"../Image.js\").Image image\n * instances.\n * @param {import(\"../Image.js\").default} image Image.\n * @param {string} src Source.\n */\nexport function defaultImageLoadFunction(image, src) {\n  /** @type {HTMLImageElement|HTMLVideoElement} */ (image.getImage()).src = src;\n}\n\n\nexport default ImageSource;\n","/**\n * @module ol/source/common\n */\n\n/**\n * Default WMS version.\n * @type {string}\n */\nexport const DEFAULT_WMS_VERSION = '1.3.0';\n","/**\n * @module ol/geom/flat/reverse\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\nexport function coordinates(flatCoordinates, offset, end, stride) {\n  while (offset < end - stride) {\n    for (let i = 0; i < stride; ++i) {\n      const tmp = flatCoordinates[offset + i];\n      flatCoordinates[offset + i] = flatCoordinates[end - stride + i];\n      flatCoordinates[end - stride + i] = tmp;\n    }\n    offset += stride;\n    end -= stride;\n  }\n}\n","/**\n * @module ol/geom/flat/orient\n */\nimport {coordinates as reverseCoordinates} from './reverse.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean} Is clockwise.\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n  // http://tinyurl.com/clockwise-method\n  // https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrlinearring.cpp\n  let edge = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    edge += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  return edge > 0;\n}\n\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingIsOriented(flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates, offset, end, stride);\n    if (i === 0) {\n      if ((right && isClockwise) || (!right && !isClockwise)) {\n        return false;\n      }\n    } else {\n      if ((right && !isClockwise) || (!right && isClockwise)) {\n        return false;\n      }\n    }\n    offset = end;\n  }\n  return true;\n}\n\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingsAreOriented(flatCoordinates, offset, endss, stride, opt_right) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    if (!linearRingIsOriented(\n      flatCoordinates, offset, endss[i], stride, opt_right)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRings(flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates, offset, end, stride);\n    const reverse = i === 0 ?\n      (right && isClockwise) || (!right && !isClockwise) :\n      (right && !isClockwise) || (!right && isClockwise);\n    if (reverse) {\n      reverseCoordinates(flatCoordinates, offset, end, stride);\n    }\n    offset = end;\n  }\n  return offset;\n}\n\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRingsArray(flatCoordinates, offset, endss, stride, opt_right) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    offset = orientLinearRings(\n      flatCoordinates, offset, endss[i], stride, opt_right);\n  }\n  return offset;\n}\n","/**\n * @module ol/tilegrid/common\n */\n\n/**\n * Default maximum zoom for default tile grids.\n * @type {number}\n */\nexport const DEFAULT_MAX_ZOOM = 42;\n\n/**\n * Default tile size.\n * @type {number}\n */\nexport const DEFAULT_TILE_SIZE = 256;\n","/**\n * @module ol/geom/Geometry\n */\nimport {abstract} from '../util.js';\nimport BaseObject from '../Object.js';\nimport {createEmpty, getHeight, returnOrUpdate} from '../extent.js';\nimport {transform2D} from './flat/transform.js';\nimport {get as getProjection, getTransform} from '../proj.js';\nimport Units from '../proj/Units.js';\nimport {create as createTransform, compose as composeTransform} from '../transform.js';\n\n\n/**\n * @type {import(\"../transform.js\").Transform}\n */\nconst tmpTransform = createTransform();\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for vector geometries.\n *\n * To get notified of changes to the geometry, register a listener for the\n * generic `change` event on your geometry instance.\n *\n * @abstract\n * @api\n */\nclass Geometry extends BaseObject {\n  constructor() {\n\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = createEmpty();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.extentRevision_ = -1;\n\n    /**\n     * @protected\n     * @type {Object<string, Geometry>}\n     */\n    this.simplifiedGeometryCache = {};\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.simplifiedGeometryRevision = 0;\n\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @abstract\n   * @return {!Geometry} Clone.\n   */\n  clone() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    return abstract();\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @return {boolean} Contains (x, y).\n   */\n  containsXY(x, y) {\n    return false;\n  }\n\n  /**\n   * Return the closest point of the geometry to the passed point as\n   * {@link module:ol/coordinate~Coordinate coordinate}.\n   * @param {import(\"../coordinate.js\").Coordinate} point Point.\n   * @param {import(\"../coordinate.js\").Coordinate=} opt_closestPoint Closest point.\n   * @return {import(\"../coordinate.js\").Coordinate} Closest point.\n   * @api\n   */\n  getClosestPoint(point, opt_closestPoint) {\n    const closestPoint = opt_closestPoint ? opt_closestPoint : [NaN, NaN];\n    this.closestPointXY(point[0], point[1], closestPoint, Infinity);\n    return closestPoint;\n  }\n\n  /**\n   * Returns true if this geometry includes the specified coordinate. If the\n   * coordinate is on the boundary of the geometry, returns false.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @return {boolean} Contains coordinate.\n   * @api\n   */\n  intersectsCoordinate(coordinate) {\n    return this.containsXY(coordinate[0], coordinate[1]);\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @protected\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   */\n  computeExtent(extent) {\n    return abstract();\n  }\n\n  /**\n   * Get the extent of the geometry.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Extent.\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  getExtent(opt_extent) {\n    if (this.extentRevision_ != this.getRevision()) {\n      this.extent_ = this.computeExtent(this.extent_);\n      this.extentRevision_ = this.getRevision();\n    }\n    return returnOrUpdate(this.extent_, opt_extent);\n  }\n\n  /**\n   * Rotate the geometry around a given coordinate. This modifies the geometry\n   * coordinates in place.\n   * @abstract\n   * @param {number} angle Rotation angle in radians.\n   * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n   * @api\n   */\n  rotate(angle, anchor) {\n    abstract();\n  }\n\n  /**\n   * Scale the geometry (with an optional origin).  This modifies the geometry\n   * coordinates in place.\n   * @abstract\n   * @param {number} sx The scaling factor in the x-direction.\n   * @param {number=} opt_sy The scaling factor in the y-direction (defaults to\n   *     sx).\n   * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor The scale origin (defaults to the center\n   *     of the geometry extent).\n   * @api\n   */\n  scale(sx, opt_sy, opt_anchor) {\n    abstract();\n  }\n\n  /**\n   * Create a simplified version of this geometry.  For linestrings, this uses\n   * the the {@link\n   * https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm\n   * Douglas Peucker} algorithm.  For polygons, a quantization-based\n   * simplification is used to preserve topology.\n   * @param {number} tolerance The tolerance distance for simplification.\n   * @return {Geometry} A new, simplified version of the original geometry.\n   * @api\n   */\n  simplify(tolerance) {\n    return this.getSimplifiedGeometry(tolerance * tolerance);\n  }\n\n  /**\n   * Create a simplified version of this geometry using the Douglas Peucker\n   * algorithm.\n   * See https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm.\n   * @abstract\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {Geometry} Simplified geometry.\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    return abstract();\n  }\n\n  /**\n   * Get the type of this geometry.\n   * @abstract\n   * @return {import(\"./GeometryType.js\").default} Geometry type.\n   */\n  getType() {\n    return abstract();\n  }\n\n  /**\n   * Apply a transform function to each coordinate of the geometry.\n   * The geometry is modified in place.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   * @abstract\n   * @param {import(\"../proj.js\").TransformFunction} transformFn Transform.\n   */\n  applyTransform(transformFn) {\n    abstract();\n  }\n\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   */\n  intersectsExtent(extent) {\n    return abstract();\n  }\n\n  /**\n   * Translate the geometry.  This modifies the geometry coordinates in place.  If\n   * instead you want a new geometry, first `clone()` this geometry.\n   * @abstract\n   * @param {number} deltaX Delta X.\n   * @param {number} deltaY Delta Y.\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    abstract();\n  }\n\n  /**\n   * Transform each coordinate of the geometry from one coordinate reference\n   * system to another. The geometry is modified in place.\n   * For example, a line will be transformed to a line and a circle to a circle.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   *\n   * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n   *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n   * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n   *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n   * @return {Geometry} This geometry.  Note that original geometry is\n   *     modified in place.\n   * @api\n   */\n  transform(source, destination) {\n    /** @type {import(\"../proj/Projection.js\").default} */\n    const sourceProj = getProjection(source);\n    const transformFn = sourceProj.getUnits() == Units.TILE_PIXELS ?\n      function(inCoordinates, outCoordinates, stride) {\n        const pixelExtent = sourceProj.getExtent();\n        const projectedExtent = sourceProj.getWorldExtent();\n        const scale = getHeight(projectedExtent) / getHeight(pixelExtent);\n        composeTransform(tmpTransform,\n          projectedExtent[0], projectedExtent[3],\n          scale, -scale, 0,\n          0, 0);\n        transform2D(inCoordinates, 0, inCoordinates.length, stride,\n          tmpTransform, outCoordinates);\n        return getTransform(sourceProj, destination)(inCoordinates, outCoordinates, stride);\n      } :\n      getTransform(sourceProj, destination);\n    this.applyTransform(transformFn);\n    return this;\n  }\n\n}\n\n\nexport default Geometry;\n","/**\n * @module ol/format/GeoJSON\n */\n\nimport {assert} from '../asserts.js';\nimport Feature from '../Feature.js';\nimport {transformWithOptions} from './Feature.js';\nimport JSONFeature from './JSONFeature.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {assign, isEmpty} from '../obj.js';\nimport {get as getProjection} from '../proj.js';\nimport GeometryType from '../geom/GeometryType.js';\n\n/**\n * @typedef {import(\"geojson\").GeoJSON} GeoJSONObject\n * @typedef {import(\"geojson\").Feature} GeoJSONFeature\n * @typedef {import(\"geojson\").FeatureCollection} GeoJSONFeatureCollection\n * @typedef {import(\"geojson\").Geometry} GeoJSONGeometry\n * @typedef {import(\"geojson\").Point} GeoJSONPoint\n * @typedef {import(\"geojson\").LineString} GeoJSONLineString\n * @typedef {import(\"geojson\").Polygon} GeoJSONPolygon\n * @typedef {import(\"geojson\").MultiPoint} GeoJSONMultiPoint\n * @typedef {import(\"geojson\").MultiLineString} GeoJSONMultiLineString\n * @typedef {import(\"geojson\").MultiPolygon} GeoJSONMultiPolygon\n * @typedef {import(\"geojson\").GeometryCollection} GeoJSONGeometryCollection\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection for features read or\n * written by the format.  Options passed to read or write methods will take precedence.\n * @property {string} [geometryName] Geometry name to use when creating features.\n * @property {boolean} [extractGeometryName=false] Certain GeoJSON providers include\n * the geometry_name field in the feature GeoJSON. If set to `true` the GeoJSON reader\n * will look for that field to set the geometry name. If both this field is set to `true`\n * and a `geometryName` is provided, the `geometryName` will take precedence.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GeoJSON format.\n *\n  * @api\n */\nclass GeoJSON extends JSONFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super();\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection(\n      options.dataProjection ?\n        options.dataProjection : 'EPSG:4326');\n\n    if (options.featureProjection) {\n      this.defaultFeatureProjection = getProjection(options.featureProjection);\n    }\n\n    /**\n     * Name of the geometry attribute for features.\n     * @type {string|undefined}\n     * @private\n     */\n    this.geometryName_ = options.geometryName;\n\n    /**\n     * Look for the geometry name in the feature GeoJSON\n     * @type {boolean|undefined}\n     * @private\n     */\n    this.extractGeometryName_ = options.extractGeometryName;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromObject(object, opt_options) {\n    /**\n     * @type {GeoJSONFeature}\n     */\n    let geoJSONFeature = null;\n    if (object['type'] === 'Feature') {\n      geoJSONFeature = /** @type {GeoJSONFeature} */ (object);\n    } else {\n      geoJSONFeature = {\n        'type': 'Feature',\n        'geometry': /** @type {GeoJSONGeometry} */ (object),\n        'properties': null\n      };\n    }\n\n    const geometry = readGeometry(geoJSONFeature['geometry'], opt_options);\n    const feature = new Feature();\n    if (this.geometryName_) {\n      feature.setGeometryName(this.geometryName_);\n    } else if (this.extractGeometryName_ && 'geometry_name' in geoJSONFeature !== undefined) {\n      feature.setGeometryName(geoJSONFeature['geometry_name']);\n    }\n    feature.setGeometry(geometry);\n\n    if ('id' in geoJSONFeature) {\n      feature.setId(geoJSONFeature['id']);\n    }\n\n    if (geoJSONFeature['properties']) {\n      feature.setProperties(geoJSONFeature['properties']);\n    }\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromObject(object, opt_options) {\n    const geoJSONObject = /** @type {GeoJSONObject} */ (object);\n    /** @type {Array<import(\"../Feature.js\").default>} */\n    let features = null;\n    if (geoJSONObject['type'] === 'FeatureCollection') {\n      const geoJSONFeatureCollection = /** @type {GeoJSONFeatureCollection} */ (object);\n      features = [];\n      const geoJSONFeatures = geoJSONFeatureCollection['features'];\n      for (let i = 0, ii = geoJSONFeatures.length; i < ii; ++i) {\n        features.push(this.readFeatureFromObject(geoJSONFeatures[i], opt_options));\n      }\n    } else {\n      features = [this.readFeatureFromObject(object, opt_options)];\n    }\n    return features;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readGeometryFromObject(object, opt_options) {\n    return readGeometry(/** @type {GeoJSONGeometry} */ (object), opt_options);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readProjectionFromObject(object) {\n    const crs = object['crs'];\n    let projection;\n    if (crs) {\n      if (crs['type'] == 'name') {\n        projection = getProjection(crs['properties']['name']);\n      } else {\n        assert(false, 36); // Unknown SRS type\n      }\n    } else {\n      projection = this.dataProjection;\n    }\n    return (\n      /** @type {import(\"../proj/Projection.js\").default} */ (projection)\n    );\n  }\n\n  /**\n   * Encode a feature as a GeoJSON Feature object.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {GeoJSONFeature} Object.\n   * @override\n   * @api\n   */\n  writeFeatureObject(feature, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n\n    /** @type {GeoJSONFeature} */\n    const object = {\n      'type': 'Feature',\n      geometry: null,\n      properties: null\n    };\n\n    const id = feature.getId();\n    if (id !== undefined) {\n      object.id = id;\n    }\n\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      object.geometry = writeGeometry(geometry, opt_options);\n    }\n\n    const properties = feature.getProperties();\n    delete properties[feature.getGeometryName()];\n    if (!isEmpty(properties)) {\n      object.properties = properties;\n    }\n    return object;\n  }\n\n  /**\n   * Encode an array of features as a GeoJSON object.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {GeoJSONFeatureCollection} GeoJSON Object.\n   * @override\n   * @api\n   */\n  writeFeaturesObject(features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    const objects = [];\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      objects.push(this.writeFeatureObject(features[i], opt_options));\n    }\n    return {\n      type: 'FeatureCollection',\n      features: objects\n    };\n  }\n\n  /**\n   * Encode a geometry as a GeoJSON object.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {GeoJSONGeometry|GeoJSONGeometryCollection} Object.\n   * @override\n   * @api\n   */\n  writeGeometryObject(geometry, opt_options) {\n    return writeGeometry(geometry, this.adaptOptions(opt_options));\n  }\n}\n\n\n/**\n * @param {GeoJSONGeometry|GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {import(\"../geom/Geometry.js\").default} Geometry.\n */\nfunction readGeometry(object, opt_options) {\n  if (!object) {\n    return null;\n  }\n\n  /**\n   * @type {import(\"../geom/Geometry.js\").default}\n   */\n  let geometry;\n  switch (object['type']) {\n    case GeometryType.POINT: {\n      geometry = readPointGeometry(/** @type {GeoJSONPoint} */ (object));\n      break;\n    }\n    case GeometryType.LINE_STRING: {\n      geometry = readLineStringGeometry(/** @type {GeoJSONLineString} */ (object));\n      break;\n    }\n    case GeometryType.POLYGON: {\n      geometry = readPolygonGeometry(/** @type {GeoJSONPolygon} */ (object));\n      break;\n    }\n    case GeometryType.MULTI_POINT: {\n      geometry = readMultiPointGeometry(/** @type {GeoJSONMultiPoint} */ (object));\n      break;\n    }\n    case GeometryType.MULTI_LINE_STRING: {\n      geometry = readMultiLineStringGeometry(/** @type {GeoJSONMultiLineString} */ (object));\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      geometry = readMultiPolygonGeometry(/** @type {GeoJSONMultiPolygon} */ (object));\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      geometry = readGeometryCollectionGeometry(/** @type {GeoJSONGeometryCollection} */ (object));\n      break;\n    }\n    default: {\n      throw new Error('Unsupported GeoJSON type: ' + object.type);\n    }\n  }\n  return /** @type {import(\"../geom/Geometry.js\").default} */ (transformWithOptions(geometry, false, opt_options));\n}\n\n\n/**\n * @param {GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {GeometryCollection} Geometry collection.\n */\nfunction readGeometryCollectionGeometry(object, opt_options) {\n  const geometries = object['geometries'].map(\n    /**\n     * @param {GeoJSONGeometry} geometry Geometry.\n     * @return {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     */\n    function(geometry) {\n      return readGeometry(geometry, opt_options);\n    });\n  return new GeometryCollection(geometries);\n}\n\n\n/**\n * @param {GeoJSONPoint} object Object.\n * @return {Point} Point.\n */\nfunction readPointGeometry(object) {\n  return new Point(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONLineString} object Object.\n * @return {LineString} LineString.\n */\nfunction readLineStringGeometry(object) {\n  return new LineString(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONMultiLineString} object Object.\n * @return {MultiLineString} MultiLineString.\n */\nfunction readMultiLineStringGeometry(object) {\n  return new MultiLineString(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONMultiPoint} object Object.\n * @return {MultiPoint} MultiPoint.\n */\nfunction readMultiPointGeometry(object) {\n  return new MultiPoint(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONMultiPolygon} object Object.\n * @return {MultiPolygon} MultiPolygon.\n */\nfunction readMultiPolygonGeometry(object) {\n  return new MultiPolygon(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONPolygon} object Object.\n * @return {Polygon} Polygon.\n */\nfunction readPolygonGeometry(object) {\n  return new Polygon(object['coordinates']);\n}\n\n\n/**\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeGeometry(geometry, opt_options) {\n  geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (transformWithOptions(geometry, true, opt_options));\n  const type = geometry.getType();\n\n  /** @type {GeoJSONGeometry} */\n  let geoJSON;\n  switch (type) {\n    case GeometryType.POINT: {\n      geoJSON = writePointGeometry(/** @type {Point} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.LINE_STRING: {\n      geoJSON = writeLineStringGeometry(/** @type {LineString} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.POLYGON: {\n      geoJSON = writePolygonGeometry(/** @type {Polygon} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.MULTI_POINT: {\n      geoJSON = writeMultiPointGeometry(/** @type {MultiPoint} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.MULTI_LINE_STRING: {\n      geoJSON = writeMultiLineStringGeometry(/** @type {MultiLineString} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      geoJSON = writeMultiPolygonGeometry(/** @type {MultiPolygon} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      geoJSON = writeGeometryCollectionGeometry(/** @type {GeometryCollection} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.CIRCLE: {\n      geoJSON = {\n        type: 'GeometryCollection',\n        geometries: []\n      };\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return geoJSON;\n}\n\n\n/**\n * @param {GeometryCollection} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometryCollection} GeoJSON geometry collection.\n */\nfunction writeGeometryCollectionGeometry(geometry, opt_options) {\n  const geometries = geometry.getGeometriesArray().map(function(geometry) {\n    const options = assign({}, opt_options);\n    delete options.featureProjection;\n    return writeGeometry(geometry, options);\n  });\n  return {\n    type: 'GeometryCollection',\n    geometries: geometries\n  };\n}\n\n\n/**\n * @param {LineString} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeLineStringGeometry(geometry, opt_options) {\n  return {\n    type: 'LineString',\n    coordinates: geometry.getCoordinates()\n  };\n}\n\n\n/**\n * @param {MultiLineString} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiLineStringGeometry(geometry, opt_options) {\n  return {\n    type: 'MultiLineString',\n    coordinates: geometry.getCoordinates()\n  };\n}\n\n\n/**\n * @param {MultiPoint} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiPointGeometry(geometry, opt_options) {\n  return {\n    type: 'MultiPoint',\n    coordinates: geometry.getCoordinates()\n  };\n}\n\n\n/**\n * @param {MultiPolygon} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiPolygonGeometry(geometry, opt_options) {\n  let right;\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n  return {\n    type: 'MultiPolygon',\n    coordinates: geometry.getCoordinates(right)\n  };\n}\n\n\n/**\n * @param {Point} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writePointGeometry(geometry, opt_options) {\n  return {\n    type: 'Point',\n    coordinates: geometry.getCoordinates()\n  };\n}\n\n\n/**\n * @param {Polygon} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writePolygonGeometry(geometry, opt_options) {\n  let right;\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n  return {\n    type: 'Polygon',\n    coordinates: geometry.getCoordinates(right)\n  };\n}\n\n\nexport default GeoJSON;\n","/**\n * @module ol/extent/Corner\n */\n\n/**\n * Extent corner.\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/TileRange\n */\n\n/**\n * A representation of a contiguous block of tiles.  A tile range is specified\n * by its min/max tile coordinates and is inclusive of coordinates.\n */\nclass TileRange {\n\n  /**\n   * @param {number} minX Minimum X.\n   * @param {number} maxX Maximum X.\n   * @param {number} minY Minimum Y.\n   * @param {number} maxY Maximum Y.\n   */\n  constructor(minX, maxX, minY, maxY) {\n\n    /**\n     * @type {number}\n     */\n    this.minX = minX;\n\n    /**\n     * @type {number}\n     */\n    this.maxX = maxX;\n\n    /**\n     * @type {number}\n     */\n    this.minY = minY;\n\n    /**\n     * @type {number}\n     */\n    this.maxY = maxY;\n\n  }\n\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @return {boolean} Contains tile coordinate.\n   */\n  contains(tileCoord) {\n    return this.containsXY(tileCoord[1], tileCoord[2]);\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   * @return {boolean} Contains.\n   */\n  containsTileRange(tileRange) {\n    return this.minX <= tileRange.minX && tileRange.maxX <= this.maxX &&\n       this.minY <= tileRange.minY && tileRange.maxY <= this.maxY;\n  }\n\n  /**\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @return {boolean} Contains coordinate.\n   */\n  containsXY(x, y) {\n    return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY;\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   * @return {boolean} Equals.\n   */\n  equals(tileRange) {\n    return this.minX == tileRange.minX && this.minY == tileRange.minY &&\n       this.maxX == tileRange.maxX && this.maxY == tileRange.maxY;\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   */\n  extend(tileRange) {\n    if (tileRange.minX < this.minX) {\n      this.minX = tileRange.minX;\n    }\n    if (tileRange.maxX > this.maxX) {\n      this.maxX = tileRange.maxX;\n    }\n    if (tileRange.minY < this.minY) {\n      this.minY = tileRange.minY;\n    }\n    if (tileRange.maxY > this.maxY) {\n      this.maxY = tileRange.maxY;\n    }\n  }\n\n  /**\n   * @return {number} Height.\n   */\n  getHeight() {\n    return this.maxY - this.minY + 1;\n  }\n\n  /**\n   * @return {import(\"./size.js\").Size} Size.\n   */\n  getSize() {\n    return [this.getWidth(), this.getHeight()];\n  }\n\n  /**\n   * @return {number} Width.\n   */\n  getWidth() {\n    return this.maxX - this.minX + 1;\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   * @return {boolean} Intersects.\n   */\n  intersects(tileRange) {\n    return this.minX <= tileRange.maxX &&\n       this.maxX >= tileRange.minX &&\n       this.minY <= tileRange.maxY &&\n       this.maxY >= tileRange.minY;\n  }\n}\n\n\n/**\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @param {TileRange=} tileRange TileRange.\n * @return {TileRange} Tile range.\n */\nexport function createOrUpdate(minX, maxX, minY, maxY, tileRange) {\n  if (tileRange !== undefined) {\n    tileRange.minX = minX;\n    tileRange.maxX = maxX;\n    tileRange.minY = minY;\n    tileRange.maxY = maxY;\n    return tileRange;\n  } else {\n    return new TileRange(minX, maxX, minY, maxY);\n  }\n}\n\n\nexport default TileRange;\n","/**\n * @module ol/Disposable\n */\n\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nclass Disposable {\n\n  constructor() {\n    /**\n     * The object has already been disposed.\n     * @type {boolean}\n     * @private\n     */\n    this.disposed_ = false;\n  }\n\n  /**\n   * Clean up.\n   */\n  dispose() {\n    if (!this.disposed_) {\n      this.disposed_ = true;\n      this.disposeInternal();\n    }\n  }\n\n  /**\n   * Extension point for disposable objects.\n   * @protected\n   */\n  disposeInternal() {}\n}\n\nexport default Disposable;\n","/**\n * @module ol/source/ImageWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\n\nimport ImageWrapper from '../Image.js';\nimport {assert} from '../asserts.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, getCenter, getForViewAndSize, getHeight, getWidth} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection, transform} from '../proj.js';\nimport {calculateSourceResolution} from '../reproj.js';\nimport ImageSource, {defaultImageLoadFunction} from './Image.js';\nimport WMSServerType from './WMSServerType.js';\nimport {compareVersions} from '../string.js';\nimport {appendParams} from '../uri.js';\n\n\n/**\n * @const\n * @type {import(\"../size.js\").Size}\n */\nconst GETFEATUREINFO_IMAGE_SIZE = [101, 101];\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {import(\"./WMSServerType.js\").default|string} [serverType] The type of\n * the remote WMS server: `mapserver`, `geoserver` or `qgis`. Only needed if `hidpi` is `true`.\n * @property {import(\"../Image.js\").LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {Object<string,*>} params WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {import(\"../proj.js\").ProjectionLike} projection Projection.\n * @property {number} [ratio=1.5] Ratio. `1` means image requests are the size of the map viewport, `2` means\n * twice the width and height of the map viewport, and so on. Must be `1` or\n * higher.\n * @property {Array<number>} [resolutions] Resolutions.\n * If specified, requests will be made for these resolutions only.\n * @property {string} url WMS service URL.\n */\n\n\n/**\n * @classdesc\n * Source for WMS servers providing single, untiled images.\n *\n * @fires ol/source/Image~ImageSourceEvent\n * @api\n */\nclass ImageWMS extends ImageSource {\n  /**\n   * @param {Options=} [opt_options] ImageWMS options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || /** @type {Options} */ ({});\n\n    super({\n      attributions: options.attributions,\n      projection: options.projection,\n      resolutions: options.resolutions\n    });\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n        options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.url_ = options.url;\n\n    /**\n     * @private\n     * @type {import(\"../Image.js\").LoadFunction}\n     */\n    this.imageLoadFunction_ = options.imageLoadFunction !== undefined ?\n      options.imageLoadFunction : defaultImageLoadFunction;\n\n    /**\n     * @private\n     * @type {!Object}\n     */\n    this.params_ = options.params || {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.v13_ = true;\n    this.updateV13_();\n\n    /**\n     * @private\n     * @type {import(\"./WMSServerType.js\").default|undefined}\n     */\n    this.serverType_ = /** @type {import(\"./WMSServerType.js\").default|undefined} */ (options.serverType);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n    /**\n     * @private\n     * @type {import(\"../Image.js\").default}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.imageSize_ = [0, 0];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedRevision_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.ratio_ = options.ratio !== undefined ? options.ratio : 1.5;\n\n  }\n\n  /**\n   * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n   * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n   * constructed.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n   * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n   *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n   *     in the `LAYERS` parameter will be used. `VERSION` should not be\n   *     specified here.\n   * @return {string|undefined} GetFeatureInfo URL.\n   * @api\n   */\n  getGetFeatureInfoUrl(coordinate, resolution, projection, params) {\n    if (this.url_ === undefined) {\n      return undefined;\n    }\n    const projectionObj = getProjection(projection);\n    const sourceProjectionObj = this.getProjection();\n\n    if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n      resolution = calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, resolution);\n      coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n    }\n\n    const extent = getForViewAndSize(coordinate, resolution, 0,\n      GETFEATUREINFO_IMAGE_SIZE);\n\n    const baseParams = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetFeatureInfo',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true,\n      'QUERY_LAYERS': this.params_['LAYERS']\n    };\n    assign(baseParams, this.params_, params);\n\n    const x = Math.floor((coordinate[0] - extent[0]) / resolution);\n    const y = Math.floor((extent[3] - coordinate[1]) / resolution);\n    baseParams[this.v13_ ? 'I' : 'X'] = x;\n    baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n    return this.getRequestUrl_(\n      extent, GETFEATUREINFO_IMAGE_SIZE,\n      1, sourceProjectionObj || projectionObj, baseParams);\n  }\n\n  /**\n   * Get the user-provided params, i.e. those passed to the constructor through\n   * the \"params\" option, and possibly updated using the updateParams method.\n   * @return {Object} Params.\n   * @api\n   */\n  getParams() {\n    return this.params_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n\n    if (this.url_ === undefined) {\n      return null;\n    }\n\n    resolution = this.findNearestResolution(resolution);\n\n    if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n      pixelRatio = 1;\n    }\n\n    const imageResolution = resolution / pixelRatio;\n\n    const center = getCenter(extent);\n    const viewWidth = Math.ceil(getWidth(extent) / imageResolution);\n    const viewHeight = Math.ceil(getHeight(extent) / imageResolution);\n    const viewExtent = getForViewAndSize(center, imageResolution, 0,\n      [viewWidth, viewHeight]);\n    const requestWidth = Math.ceil(this.ratio_ * getWidth(extent) / imageResolution);\n    const requestHeight = Math.ceil(this.ratio_ * getHeight(extent) / imageResolution);\n    const requestExtent = getForViewAndSize(center, imageResolution, 0,\n      [requestWidth, requestHeight]);\n\n    const image = this.image_;\n    if (image &&\n        this.renderedRevision_ == this.getRevision() &&\n        image.getResolution() == resolution &&\n        image.getPixelRatio() == pixelRatio &&\n        containsExtent(image.getExtent(), viewExtent)) {\n      return image;\n    }\n\n    const params = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetMap',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true\n    };\n    assign(params, this.params_);\n\n    this.imageSize_[0] = Math.round(getWidth(requestExtent) / imageResolution);\n    this.imageSize_[1] = Math.round(getHeight(requestExtent) / imageResolution);\n\n    const url = this.getRequestUrl_(requestExtent, this.imageSize_, pixelRatio,\n      projection, params);\n\n    this.image_ = new ImageWrapper(requestExtent, resolution, pixelRatio,\n      url, this.crossOrigin_, this.imageLoadFunction_);\n\n    this.renderedRevision_ = this.getRevision();\n\n    listen(this.image_, EventType.CHANGE,\n      this.handleImageChange, this);\n\n    return this.image_;\n\n  }\n\n  /**\n   * Return the image load function of the source.\n   * @return {import(\"../Image.js\").LoadFunction} The image load function.\n   * @api\n   */\n  getImageLoadFunction() {\n    return this.imageLoadFunction_;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {import(\"../size.js\").Size} size Size.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {Object} params Params.\n   * @return {string} Request URL.\n   * @private\n   */\n  getRequestUrl_(extent, size, pixelRatio, projection, params) {\n\n    assert(this.url_ !== undefined, 9); // `url` must be configured or set using `#setUrl()`\n\n    params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n    if (!('STYLES' in this.params_)) {\n      params['STYLES'] = '';\n    }\n\n    if (pixelRatio != 1) {\n      switch (this.serverType_) {\n        case WMSServerType.GEOSERVER:\n          const dpi = (90 * pixelRatio + 0.5) | 0;\n          if ('FORMAT_OPTIONS' in params) {\n            params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n          } else {\n            params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n          }\n          break;\n        case WMSServerType.MAPSERVER:\n          params['MAP_RESOLUTION'] = 90 * pixelRatio;\n          break;\n        case WMSServerType.CARMENTA_SERVER:\n        case WMSServerType.QGIS:\n          params['DPI'] = 90 * pixelRatio;\n          break;\n        default:\n          assert(false, 8); // Unknown `serverType` configured\n          break;\n      }\n    }\n\n    params['WIDTH'] = size[0];\n    params['HEIGHT'] = size[1];\n\n    const axisOrientation = projection.getAxisOrientation();\n    let bbox;\n    if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n      bbox = [extent[1], extent[0], extent[3], extent[2]];\n    } else {\n      bbox = extent;\n    }\n    params['BBOX'] = bbox.join(',');\n\n    return appendParams(/** @type {string} */ (this.url_), params);\n  }\n\n  /**\n   * Return the URL used for this WMS source.\n   * @return {string|undefined} URL.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n  /**\n   * Set the image load function of the source.\n   * @param {import(\"../Image.js\").LoadFunction} imageLoadFunction Image load function.\n   * @api\n   */\n  setImageLoadFunction(imageLoadFunction) {\n    this.image_ = null;\n    this.imageLoadFunction_ = imageLoadFunction;\n    this.changed();\n  }\n\n  /**\n   * Set the URL to use for requests.\n   * @param {string|undefined} url URL.\n   * @api\n   */\n  setUrl(url) {\n    if (url != this.url_) {\n      this.url_ = url;\n      this.image_ = null;\n      this.changed();\n    }\n  }\n\n  /**\n   * Update the user-provided params.\n   * @param {Object} params Params.\n   * @api\n   */\n  updateParams(params) {\n    assign(this.params_, params);\n    this.updateV13_();\n    this.image_ = null;\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  updateV13_() {\n    const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n    this.v13_ = compareVersions(version, '1.3') >= 0;\n  }\n}\n\n\nexport default ImageWMS;\n","/**\n * @module ol/ImageBase\n */\nimport {abstract} from './util.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @abstract\n */\nclass ImageBase extends EventTarget {\n\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"./ImageState.js\").default} state State.\n   */\n  constructor(extent, resolution, pixelRatio, state) {\n\n    super();\n\n    /**\n     * @protected\n     * @type {import(\"./extent.js\").Extent}\n     */\n    this.extent = extent;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number|undefined}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @protected\n     * @type {import(\"./ImageState.js\").default}\n     */\n    this.state = state;\n\n  }\n\n  /**\n   * @protected\n   */\n  changed() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @return {import(\"./extent.js\").Extent} Extent.\n   */\n  getExtent() {\n    return this.extent;\n  }\n\n  /**\n   * @abstract\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   */\n  getImage() {\n    return abstract();\n  }\n\n  /**\n   * @return {number} PixelRatio.\n   */\n  getPixelRatio() {\n    return this.pixelRatio_;\n  }\n\n  /**\n   * @return {number} Resolution.\n   */\n  getResolution() {\n    return /** @type {number} */ (this.resolution);\n  }\n\n  /**\n   * @return {import(\"./ImageState.js\").default} State.\n   */\n  getState() {\n    return this.state;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n  load() {\n    abstract();\n  }\n}\n\n\nexport default ImageBase;\n","/**\n * @module ol/source/Source\n */\nimport {abstract} from '../util.js';\nimport BaseObject from '../Object.js';\nimport {get as getProjection} from '../proj.js';\nimport SourceState from './State.js';\n\n\n/**\n * A function that returns a string or an array of strings representing source\n * attributions.\n *\n * @typedef {function(import(\"../PluggableMap.js\").FrameState): (string|Array<string>)} Attribution\n */\n\n\n/**\n * A type that can be used to provide attribution information for data sources.\n *\n * It represents either\n * * a simple string (e.g. `' Acme Inc.'`)\n * * an array of simple strings (e.g. `[' Acme Inc.', ' Bacme Inc.']`)\n * * a function that returns a string or array of strings (`{@link module:ol/source/Source~Attribution}`)\n *\n * @typedef {string|Array<string>|Attribution} AttributionLike\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {AttributionLike} [attributions]\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {import(\"../proj.js\").ProjectionLike} projection\n * @property {SourceState} [state='ready']\n * @property {boolean} [wrapX=false]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for {@link module:ol/layer/Layer~Layer} sources.\n *\n * A generic `change` event is triggered when the state of the source changes.\n * @abstract\n * @api\n */\nclass Source extends BaseObject {\n  /**\n   * @param {Options} options Source options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.projection_ = getProjection(options.projection);\n\n    /**\n     * @private\n     * @type {?Attribution}\n     */\n    this.attributions_ = adaptAttributions(options.attributions);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.attributionsCollapsible_ = options.attributionsCollapsible !== undefined ?\n      options.attributionsCollapsible : true;\n\n    /**\n     * This source is currently loading data. Sources that defer loading to the\n     * map's tile queue never set this to `true`.\n     * @type {boolean}\n     */\n    this.loading = false;\n\n    /**\n     * @private\n     * @type {SourceState}\n     */\n    this.state_ = options.state !== undefined ?\n      options.state : SourceState.READY;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.wrapX_ = options.wrapX !== undefined ? options.wrapX : false;\n\n  }\n\n  /**\n   * Get the attribution function for the source.\n   * @return {?Attribution} Attribution function.\n   */\n  getAttributions() {\n    return this.attributions_;\n  }\n\n  /**\n   * @return {boolean} Aattributions are collapsible.\n   */\n  getAttributionsCollapsible() {\n    return this.attributionsCollapsible_;\n  }\n\n  /**\n   * Get the projection of the source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n  getProjection() {\n    return this.projection_;\n  }\n\n  /**\n   * @abstract\n   * @return {Array<number>|undefined} Resolutions.\n   */\n  getResolutions() {\n    return abstract();\n  }\n\n  /**\n   * Get the state of the source, see {@link module:ol/source/State~State} for possible states.\n   * @return {SourceState} State.\n   * @api\n   */\n  getState() {\n    return this.state_;\n  }\n\n  /**\n   * @return {boolean|undefined} Wrap X.\n   */\n  getWrapX() {\n    return this.wrapX_;\n  }\n\n  /**\n   * Refreshes the source and finally dispatches a 'change' event.\n   * @api\n   */\n  refresh() {\n    this.changed();\n  }\n\n  /**\n   * Set the attributions of the source.\n   * @param {AttributionLike|undefined} attributions Attributions.\n   *     Can be passed as `string`, `Array<string>`, `{@link module:ol/source/Source~Attribution}`,\n   *     or `undefined`.\n   * @api\n   */\n  setAttributions(attributions) {\n    this.attributions_ = adaptAttributions(attributions);\n    this.changed();\n  }\n\n  /**\n   * Set the state of the source.\n   * @param {SourceState} state State.\n   * @protected\n   */\n  setState(state) {\n    this.state_ = state;\n    this.changed();\n  }\n}\n\n\n/**\n * Turns the attributions option into an attributions function.\n * @param {AttributionLike|undefined} attributionLike The attribution option.\n * @return {?Attribution} An attribution function (or null).\n */\nfunction adaptAttributions(attributionLike) {\n  if (!attributionLike) {\n    return null;\n  }\n  if (Array.isArray(attributionLike)) {\n    return function(frameState) {\n      return attributionLike;\n    };\n  }\n\n  if (typeof attributionLike === 'function') {\n    return attributionLike;\n  }\n\n  return function(frameState) {\n    return [attributionLike];\n  };\n}\n\n\nexport default Source;\n","'use strict';\n\nmodule.exports = rbush;\nmodule.exports.default = rbush;\n\nvar quickselect = require('quickselect');\n\nfunction rbush(maxEntries, format) {\n    if (!(this instanceof rbush)) return new rbush(maxEntries, format);\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries || 9);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n\n    if (format) {\n        this._initFormat(format);\n    }\n\n    this.clear();\n}\n\nrbush.prototype = {\n\n    all: function () {\n        return this._all(this.data, []);\n    },\n\n    search: function (bbox) {\n\n        var node = this.data,\n            result = [],\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return result;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf) result.push(child);\n                    else if (contains(bbox, childBBox)) this._all(child, result);\n                    else nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return result;\n    },\n\n    collides: function (bbox) {\n\n        var node = this.data,\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return false;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf || contains(bbox, childBBox)) return true;\n                    nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return false;\n    },\n\n    load: function (data) {\n        if (!(data && data.length)) return this;\n\n        if (data.length < this._minEntries) {\n            for (var i = 0, len = data.length; i < len; i++) {\n                this.insert(data[i]);\n            }\n            return this;\n        }\n\n        // recursively build the tree with the given data from scratch using OMT algorithm\n        var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n        if (!this.data.children.length) {\n            // save as is if tree is empty\n            this.data = node;\n\n        } else if (this.data.height === node.height) {\n            // split root if trees have the same height\n            this._splitRoot(this.data, node);\n\n        } else {\n            if (this.data.height < node.height) {\n                // swap trees if inserted one is bigger\n                var tmpNode = this.data;\n                this.data = node;\n                node = tmpNode;\n            }\n\n            // insert the small tree into the large tree at appropriate level\n            this._insert(node, this.data.height - node.height - 1, true);\n        }\n\n        return this;\n    },\n\n    insert: function (item) {\n        if (item) this._insert(item, this.data.height - 1);\n        return this;\n    },\n\n    clear: function () {\n        this.data = createNode([]);\n        return this;\n    },\n\n    remove: function (item, equalsFn) {\n        if (!item) return this;\n\n        var node = this.data,\n            bbox = this.toBBox(item),\n            path = [],\n            indexes = [],\n            i, parent, index, goingUp;\n\n        // depth-first iterative tree traversal\n        while (node || path.length) {\n\n            if (!node) { // go up\n                node = path.pop();\n                parent = path[path.length - 1];\n                i = indexes.pop();\n                goingUp = true;\n            }\n\n            if (node.leaf) { // check current node\n                index = findItem(item, node.children, equalsFn);\n\n                if (index !== -1) {\n                    // item found, remove the item and condense tree upwards\n                    node.children.splice(index, 1);\n                    path.push(node);\n                    this._condense(path);\n                    return this;\n                }\n            }\n\n            if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n                path.push(node);\n                indexes.push(i);\n                i = 0;\n                parent = node;\n                node = node.children[0];\n\n            } else if (parent) { // go right\n                i++;\n                node = parent.children[i];\n                goingUp = false;\n\n            } else node = null; // nothing found\n        }\n\n        return this;\n    },\n\n    toBBox: function (item) { return item; },\n\n    compareMinX: compareNodeMinX,\n    compareMinY: compareNodeMinY,\n\n    toJSON: function () { return this.data; },\n\n    fromJSON: function (data) {\n        this.data = data;\n        return this;\n    },\n\n    _all: function (node, result) {\n        var nodesToSearch = [];\n        while (node) {\n            if (node.leaf) result.push.apply(result, node.children);\n            else nodesToSearch.push.apply(nodesToSearch, node.children);\n\n            node = nodesToSearch.pop();\n        }\n        return result;\n    },\n\n    _build: function (items, left, right, height) {\n\n        var N = right - left + 1,\n            M = this._maxEntries,\n            node;\n\n        if (N <= M) {\n            // reached leaf level; return leaf\n            node = createNode(items.slice(left, right + 1));\n            calcBBox(node, this.toBBox);\n            return node;\n        }\n\n        if (!height) {\n            // target height of the bulk-loaded tree\n            height = Math.ceil(Math.log(N) / Math.log(M));\n\n            // target number of root entries to maximize storage utilization\n            M = Math.ceil(N / Math.pow(M, height - 1));\n        }\n\n        node = createNode([]);\n        node.leaf = false;\n        node.height = height;\n\n        // split the items into M mostly square tiles\n\n        var N2 = Math.ceil(N / M),\n            N1 = N2 * Math.ceil(Math.sqrt(M)),\n            i, j, right2, right3;\n\n        multiSelect(items, left, right, N1, this.compareMinX);\n\n        for (i = left; i <= right; i += N1) {\n\n            right2 = Math.min(i + N1 - 1, right);\n\n            multiSelect(items, i, right2, N2, this.compareMinY);\n\n            for (j = i; j <= right2; j += N2) {\n\n                right3 = Math.min(j + N2 - 1, right2);\n\n                // pack each entry recursively\n                node.children.push(this._build(items, j, right3, height - 1));\n            }\n        }\n\n        calcBBox(node, this.toBBox);\n\n        return node;\n    },\n\n    _chooseSubtree: function (bbox, node, level, path) {\n\n        var i, len, child, targetNode, area, enlargement, minArea, minEnlargement;\n\n        while (true) {\n            path.push(node);\n\n            if (node.leaf || path.length - 1 === level) break;\n\n            minArea = minEnlargement = Infinity;\n\n            for (i = 0, len = node.children.length; i < len; i++) {\n                child = node.children[i];\n                area = bboxArea(child);\n                enlargement = enlargedArea(bbox, child) - area;\n\n                // choose entry with the least area enlargement\n                if (enlargement < minEnlargement) {\n                    minEnlargement = enlargement;\n                    minArea = area < minArea ? area : minArea;\n                    targetNode = child;\n\n                } else if (enlargement === minEnlargement) {\n                    // otherwise choose one with the smallest area\n                    if (area < minArea) {\n                        minArea = area;\n                        targetNode = child;\n                    }\n                }\n            }\n\n            node = targetNode || node.children[0];\n        }\n\n        return node;\n    },\n\n    _insert: function (item, level, isNode) {\n\n        var toBBox = this.toBBox,\n            bbox = isNode ? item : toBBox(item),\n            insertPath = [];\n\n        // find the best node for accommodating the item, saving all nodes along the path too\n        var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n        // put the item into the node\n        node.children.push(item);\n        extend(node, bbox);\n\n        // split on node overflow; propagate upwards if necessary\n        while (level >= 0) {\n            if (insertPath[level].children.length > this._maxEntries) {\n                this._split(insertPath, level);\n                level--;\n            } else break;\n        }\n\n        // adjust bboxes along the insertion path\n        this._adjustParentBBoxes(bbox, insertPath, level);\n    },\n\n    // split overflowed node into two\n    _split: function (insertPath, level) {\n\n        var node = insertPath[level],\n            M = node.children.length,\n            m = this._minEntries;\n\n        this._chooseSplitAxis(node, m, M);\n\n        var splitIndex = this._chooseSplitIndex(node, m, M);\n\n        var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n        newNode.height = node.height;\n        newNode.leaf = node.leaf;\n\n        calcBBox(node, this.toBBox);\n        calcBBox(newNode, this.toBBox);\n\n        if (level) insertPath[level - 1].children.push(newNode);\n        else this._splitRoot(node, newNode);\n    },\n\n    _splitRoot: function (node, newNode) {\n        // split root node\n        this.data = createNode([node, newNode]);\n        this.data.height = node.height + 1;\n        this.data.leaf = false;\n        calcBBox(this.data, this.toBBox);\n    },\n\n    _chooseSplitIndex: function (node, m, M) {\n\n        var i, bbox1, bbox2, overlap, area, minOverlap, minArea, index;\n\n        minOverlap = minArea = Infinity;\n\n        for (i = m; i <= M - m; i++) {\n            bbox1 = distBBox(node, 0, i, this.toBBox);\n            bbox2 = distBBox(node, i, M, this.toBBox);\n\n            overlap = intersectionArea(bbox1, bbox2);\n            area = bboxArea(bbox1) + bboxArea(bbox2);\n\n            // choose distribution with minimum overlap\n            if (overlap < minOverlap) {\n                minOverlap = overlap;\n                index = i;\n\n                minArea = area < minArea ? area : minArea;\n\n            } else if (overlap === minOverlap) {\n                // otherwise choose distribution with minimum area\n                if (area < minArea) {\n                    minArea = area;\n                    index = i;\n                }\n            }\n        }\n\n        return index;\n    },\n\n    // sorts node children by the best axis for split\n    _chooseSplitAxis: function (node, m, M) {\n\n        var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX,\n            compareMinY = node.leaf ? this.compareMinY : compareNodeMinY,\n            xMargin = this._allDistMargin(node, m, M, compareMinX),\n            yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n        // if total distributions margin value is minimal for x, sort by minX,\n        // otherwise it's already sorted by minY\n        if (xMargin < yMargin) node.children.sort(compareMinX);\n    },\n\n    // total margin of all possible split distributions where each node is at least m full\n    _allDistMargin: function (node, m, M, compare) {\n\n        node.children.sort(compare);\n\n        var toBBox = this.toBBox,\n            leftBBox = distBBox(node, 0, m, toBBox),\n            rightBBox = distBBox(node, M - m, M, toBBox),\n            margin = bboxMargin(leftBBox) + bboxMargin(rightBBox),\n            i, child;\n\n        for (i = m; i < M - m; i++) {\n            child = node.children[i];\n            extend(leftBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(leftBBox);\n        }\n\n        for (i = M - m - 1; i >= m; i--) {\n            child = node.children[i];\n            extend(rightBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(rightBBox);\n        }\n\n        return margin;\n    },\n\n    _adjustParentBBoxes: function (bbox, path, level) {\n        // adjust bboxes along the given tree path\n        for (var i = level; i >= 0; i--) {\n            extend(path[i], bbox);\n        }\n    },\n\n    _condense: function (path) {\n        // go through the path, removing empty nodes and updating bboxes\n        for (var i = path.length - 1, siblings; i >= 0; i--) {\n            if (path[i].children.length === 0) {\n                if (i > 0) {\n                    siblings = path[i - 1].children;\n                    siblings.splice(siblings.indexOf(path[i]), 1);\n\n                } else this.clear();\n\n            } else calcBBox(path[i], this.toBBox);\n        }\n    },\n\n    _initFormat: function (format) {\n        // data format (minX, minY, maxX, maxY accessors)\n\n        // uses eval-type function compilation instead of just accepting a toBBox function\n        // because the algorithms are very sensitive to sorting functions performance,\n        // so they should be dead simple and without inner calls\n\n        var compareArr = ['return a', ' - b', ';'];\n\n        this.compareMinX = new Function('a', 'b', compareArr.join(format[0]));\n        this.compareMinY = new Function('a', 'b', compareArr.join(format[1]));\n\n        this.toBBox = new Function('a',\n            'return {minX: a' + format[0] +\n            ', minY: a' + format[1] +\n            ', maxX: a' + format[2] +\n            ', maxY: a' + format[3] + '};');\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) return items.indexOf(item);\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) return i;\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) destNode = createNode(null);\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k, child; i < p; i++) {\n        child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX),\n        minY = Math.max(a.minY, b.minY),\n        maxX = Math.min(a.maxX, b.maxX),\n        maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right],\n        mid;\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) continue;\n\n        mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n","/**\n * @module ol/geom/flat/area\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRing(flatCoordinates, offset, end, stride) {\n  let twiceArea = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    twiceArea += y1 * x2 - x1 * y2;\n    x1 = x2;\n    y1 = y2;\n  }\n  return twiceArea / 2;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRings(flatCoordinates, offset, ends, stride) {\n  let area = 0;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    area += linearRing(flatCoordinates, offset, end, stride);\n    offset = end;\n  }\n  return area;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  let area = 0;\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    area += linearRings(flatCoordinates, offset, ends, stride);\n    offset = ends[ends.length - 1];\n  }\n  return area;\n}\n","/**\n * @module ol/geom/GeometryCollection\n */\nimport {listen, unlisten} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {createOrUpdateEmpty, closestSquaredDistanceXY, extend, getCenter} from '../extent.js';\nimport Geometry from './Geometry.js';\nimport GeometryType from './GeometryType.js';\nimport {clear} from '../obj.js';\n\n/**\n * @classdesc\n * An array of {@link module:ol/geom/Geometry} objects.\n *\n * @api\n */\nclass GeometryCollection extends Geometry {\n\n  /**\n   * @param {Array<Geometry>=} opt_geometries Geometries.\n   */\n  constructor(opt_geometries) {\n\n    super();\n\n    /**\n     * @private\n     * @type {Array<Geometry>}\n     */\n    this.geometries_ = opt_geometries ? opt_geometries : null;\n\n    this.listenGeometriesChange_();\n  }\n\n  /**\n   * @private\n   */\n  unlistenGeometriesChange_() {\n    if (!this.geometries_) {\n      return;\n    }\n    for (let i = 0, ii = this.geometries_.length; i < ii; ++i) {\n      unlisten(\n        this.geometries_[i], EventType.CHANGE,\n        this.changed, this);\n    }\n  }\n\n  /**\n   * @private\n   */\n  listenGeometriesChange_() {\n    if (!this.geometries_) {\n      return;\n    }\n    for (let i = 0, ii = this.geometries_.length; i < ii; ++i) {\n      listen(\n        this.geometries_[i], EventType.CHANGE,\n        this.changed, this);\n    }\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!GeometryCollection} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const geometryCollection = new GeometryCollection(null);\n    geometryCollection.setGeometries(this.geometries_);\n    return geometryCollection;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      minSquaredDistance = geometries[i].closestPointXY(\n        x, y, closestPoint, minSquaredDistance);\n    }\n    return minSquaredDistance;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      if (geometries[i].containsXY(x, y)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    createOrUpdateEmpty(extent);\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      extend(extent, geometries[i].getExtent());\n    }\n    return extent;\n  }\n\n  /**\n   * Return the geometries that make up this geometry collection.\n   * @return {Array<Geometry>} Geometries.\n   * @api\n   */\n  getGeometries() {\n    return cloneGeometries(this.geometries_);\n  }\n\n  /**\n   * @return {Array<Geometry>} Geometries.\n   */\n  getGeometriesArray() {\n    return this.geometries_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    if (this.simplifiedGeometryRevision != this.getRevision()) {\n      clear(this.simplifiedGeometryCache);\n      this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n      this.simplifiedGeometryRevision = this.getRevision();\n    }\n    if (squaredTolerance < 0 ||\n        (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n         squaredTolerance < this.simplifiedGeometryMaxMinSquaredTolerance)) {\n      return this;\n    }\n    const key = squaredTolerance.toString();\n    if (this.simplifiedGeometryCache.hasOwnProperty(key)) {\n      return this.simplifiedGeometryCache[key];\n    } else {\n      const simplifiedGeometries = [];\n      const geometries = this.geometries_;\n      let simplified = false;\n      for (let i = 0, ii = geometries.length; i < ii; ++i) {\n        const geometry = geometries[i];\n        const simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n        simplifiedGeometries.push(simplifiedGeometry);\n        if (simplifiedGeometry !== geometry) {\n          simplified = true;\n        }\n      }\n      if (simplified) {\n        const simplifiedGeometryCollection = new GeometryCollection(null);\n        simplifiedGeometryCollection.setGeometriesArray(simplifiedGeometries);\n        this.simplifiedGeometryCache[key] = simplifiedGeometryCollection;\n        return simplifiedGeometryCollection;\n      } else {\n        this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n        return this;\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.GEOMETRY_COLLECTION;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      if (geometries[i].intersectsExtent(extent)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return this.geometries_.length === 0;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  rotate(angle, anchor) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].rotate(angle, anchor);\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  scale(sx, opt_sy, opt_anchor) {\n    let anchor = opt_anchor;\n    if (!anchor) {\n      anchor = getCenter(this.getExtent());\n    }\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].scale(sx, opt_sy, anchor);\n    }\n    this.changed();\n  }\n\n  /**\n   * Set the geometries that make up this geometry collection.\n   * @param {Array<Geometry>} geometries Geometries.\n   * @api\n   */\n  setGeometries(geometries) {\n    this.setGeometriesArray(cloneGeometries(geometries));\n  }\n\n  /**\n   * @param {Array<Geometry>} geometries Geometries.\n   */\n  setGeometriesArray(geometries) {\n    this.unlistenGeometriesChange_();\n    this.geometries_ = geometries;\n    this.listenGeometriesChange_();\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  applyTransform(transformFn) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].applyTransform(transformFn);\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].translate(deltaX, deltaY);\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.unlistenGeometriesChange_();\n    super.disposeInternal();\n  }\n}\n\n\n/**\n * @param {Array<Geometry>} geometries Geometries.\n * @return {Array<Geometry>} Cloned geometries.\n */\nfunction cloneGeometries(geometries) {\n  const clonedGeometries = [];\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    clonedGeometries.push(geometries[i].clone());\n  }\n  return clonedGeometries;\n}\n\n\nexport default GeometryCollection;\n","/**\n * @module ol/geom/flat/interpolate\n */\nimport {binarySearch} from '../../array.js';\nimport {lerp} from '../../math.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} fraction Fraction.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Destination.\n */\nexport function interpolatePoint(flatCoordinates, offset, end, stride, fraction, opt_dest) {\n  let pointX = NaN;\n  let pointY = NaN;\n  const n = (end - offset) / stride;\n  if (n === 1) {\n    pointX = flatCoordinates[offset];\n    pointY = flatCoordinates[offset + 1];\n  } else if (n == 2) {\n    pointX = (1 - fraction) * flatCoordinates[offset] +\n        fraction * flatCoordinates[offset + stride];\n    pointY = (1 - fraction) * flatCoordinates[offset + 1] +\n        fraction * flatCoordinates[offset + stride + 1];\n  } else if (n !== 0) {\n    let x1 = flatCoordinates[offset];\n    let y1 = flatCoordinates[offset + 1];\n    let length = 0;\n    const cumulativeLengths = [0];\n    for (let i = offset + stride; i < end; i += stride) {\n      const x2 = flatCoordinates[i];\n      const y2 = flatCoordinates[i + 1];\n      length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n      cumulativeLengths.push(length);\n      x1 = x2;\n      y1 = y2;\n    }\n    const target = fraction * length;\n    const index = binarySearch(cumulativeLengths, target);\n    if (index < 0) {\n      const t = (target - cumulativeLengths[-index - 2]) /\n          (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n      const o = offset + (-index - 2) * stride;\n      pointX = lerp(\n        flatCoordinates[o], flatCoordinates[o + stride], t);\n      pointY = lerp(\n        flatCoordinates[o + 1], flatCoordinates[o + stride + 1], t);\n    } else {\n      pointX = flatCoordinates[offset + index * stride];\n      pointY = flatCoordinates[offset + index * stride + 1];\n    }\n  }\n  if (opt_dest) {\n    opt_dest[0] = pointX;\n    opt_dest[1] = pointY;\n    return opt_dest;\n  } else {\n    return [pointX, pointY];\n  }\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n */\nexport function lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, extrapolate) {\n  if (end == offset) {\n    return null;\n  }\n  let coordinate;\n  if (m < flatCoordinates[offset + stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(offset, offset + stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  } else if (flatCoordinates[end - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(end - stride, end);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  // FIXME use O(1) search\n  if (m == flatCoordinates[offset + stride - 1]) {\n    return flatCoordinates.slice(offset, offset + stride);\n  }\n  let lo = offset / stride;\n  let hi = end / stride;\n  while (lo < hi) {\n    const mid = (lo + hi) >> 1;\n    if (m < flatCoordinates[(mid + 1) * stride - 1]) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n  const m0 = flatCoordinates[lo * stride - 1];\n  if (m == m0) {\n    return flatCoordinates.slice((lo - 1) * stride, (lo - 1) * stride + stride);\n  }\n  const m1 = flatCoordinates[(lo + 1) * stride - 1];\n  const t = (m - m0) / (m1 - m0);\n  coordinate = [];\n  for (let i = 0; i < stride - 1; ++i) {\n    coordinate.push(lerp(flatCoordinates[(lo - 1) * stride + i],\n      flatCoordinates[lo * stride + i], t));\n  }\n  coordinate.push(m);\n  return coordinate;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @param {boolean} interpolate Interpolate.\n * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n */\nexport function lineStringsCoordinateAtM(\n  flatCoordinates, offset, ends, stride, m, extrapolate, interpolate) {\n  if (interpolate) {\n    return lineStringCoordinateAtM(\n      flatCoordinates, offset, ends[ends.length - 1], stride, m, extrapolate);\n  }\n  let coordinate;\n  if (m < flatCoordinates[stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(0, stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  if (flatCoordinates[flatCoordinates.length - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(flatCoordinates.length - stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    if (offset == end) {\n      continue;\n    }\n    if (m < flatCoordinates[offset + stride - 1]) {\n      return null;\n    } else if (m <= flatCoordinates[end - 1]) {\n      return lineStringCoordinateAtM(\n        flatCoordinates, offset, end, stride, m, false);\n    }\n    offset = end;\n  }\n  return null;\n}\n","/**\n * @module ol/source/TileJSON\n */\n// FIXME check order of async callbacks\n\n/**\n * See http://mapbox.com/developers/api/.\n */\n\n\nimport {createFromTemplates} from '../tileurlfunction.js';\nimport {assert} from '../asserts.js';\nimport {applyTransform, intersects} from '../extent.js';\nimport {jsonp as requestJSONP} from '../net.js';\nimport {get as getProjection, getTransformFromProjections} from '../proj.js';\nimport SourceState from './State.js';\nimport TileImage from './TileImage.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n\n/**\n * @typedef {Object} Config\n * @property {string} [name] The name.\n * @property {string} [description] The description.\n * @property {string} [version] The version.\n * @property {string} [attribution] The attribution.\n * @property {string} [template] The template.\n * @property {string} [legend] The legend.\n * @property {string} [scheme] The scheme.\n * @property {Array<string>} tiles The tile URL templates.\n * @property {Array<string>} [grids] Optional grids.\n * @property {number} [minzoom] Minimum zoom level.\n * @property {number} [maxzoom] Maximum zoom level.\n * @property {Array<number>} [bounds] Optional bounds.\n * @property {Array<number>} [center] Optional center.\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [jsonp=false] Use JSONP with callback to load the TileJSON.\n * Useful when the server does not support CORS..\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {Config} [tileJSON] TileJSON configuration for this source.\n * If not provided, `url` must be configured.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] URL to the TileJSON file. If not provided, `tileJSON` must be configured.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data in TileJSON format.\n * @api\n */\nclass TileJSON extends TileImage {\n  /**\n   * @param {Options} options TileJSON options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      projection: getProjection('EPSG:3857'),\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      state: SourceState.LOADING,\n      tileLoadFunction: options.tileLoadFunction,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition\n    });\n\n    /**\n     * @type {Config}\n     * @private\n     */\n    this.tileJSON_ = null;\n\n\n    if (options.url) {\n      if (options.jsonp) {\n        requestJSONP(options.url, this.handleTileJSONResponse.bind(this),\n          this.handleTileJSONError.bind(this));\n      } else {\n        const client = new XMLHttpRequest();\n        client.addEventListener('load', this.onXHRLoad_.bind(this));\n        client.addEventListener('error', this.onXHRError_.bind(this));\n        client.open('GET', options.url);\n        client.send();\n      }\n    } else if (options.tileJSON) {\n      this.handleTileJSONResponse(options.tileJSON);\n    } else {\n      assert(false, 51); // Either `url` or `tileJSON` options must be provided\n    }\n\n  }\n\n  /**\n   * @private\n   * @param {Event} event The load event.\n   */\n  onXHRLoad_(event) {\n    const client = /** @type {XMLHttpRequest} */ (event.target);\n    // status will be 0 for file:// urls\n    if (!client.status || client.status >= 200 && client.status < 300) {\n      let response;\n      try {\n        response = /** @type {TileJSON} */(JSON.parse(client.responseText));\n      } catch (err) {\n        this.handleTileJSONError();\n        return;\n      }\n      this.handleTileJSONResponse(response);\n    } else {\n      this.handleTileJSONError();\n    }\n  }\n\n  /**\n   * @private\n   * @param {Event} event The error event.\n   */\n  onXHRError_(event) {\n    this.handleTileJSONError();\n  }\n\n  /**\n   * @return {Config} The tilejson object.\n   * @api\n   */\n  getTileJSON() {\n    return this.tileJSON_;\n  }\n\n  /**\n   * @protected\n   * @param {Config} tileJSON Tile JSON.\n   */\n  handleTileJSONResponse(tileJSON) {\n\n    const epsg4326Projection = getProjection('EPSG:4326');\n\n    const sourceProjection = this.getProjection();\n    let extent;\n    if (tileJSON['bounds'] !== undefined) {\n      const transform = getTransformFromProjections(\n        epsg4326Projection, sourceProjection);\n      extent = applyTransform(tileJSON['bounds'], transform);\n    }\n\n    const minZoom = tileJSON['minzoom'] || 0;\n    const maxZoom = tileJSON['maxzoom'] || 22;\n    const tileGrid = createXYZ({\n      extent: extentFromProjection(sourceProjection),\n      maxZoom: maxZoom,\n      minZoom: minZoom\n    });\n    this.tileGrid = tileGrid;\n\n    this.tileUrlFunction = createFromTemplates(tileJSON['tiles'], tileGrid);\n\n    if (tileJSON['attribution'] !== undefined && !this.getAttributions()) {\n      const attributionExtent = extent !== undefined ?\n        extent : epsg4326Projection.getExtent();\n\n      this.setAttributions(function(frameState) {\n        if (intersects(attributionExtent, frameState.extent)) {\n          return [tileJSON['attribution']];\n        }\n        return null;\n      });\n\n    }\n    this.tileJSON_ = tileJSON;\n    this.setState(SourceState.READY);\n\n  }\n\n  /**\n   * @protected\n   */\n  handleTileJSONError() {\n    this.setState(SourceState.ERROR);\n  }\n}\n\n\nexport default TileJSON;\n","/**\n * @module ol/OverlayPositioning\n */\n\n/**\n * Overlay position: `'bottom-left'`, `'bottom-center'`,  `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, `'top-right'`\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_CENTER: 'bottom-center',\n  BOTTOM_RIGHT: 'bottom-right',\n  CENTER_LEFT: 'center-left',\n  CENTER_CENTER: 'center-center',\n  CENTER_RIGHT: 'center-right',\n  TOP_LEFT: 'top-left',\n  TOP_CENTER: 'top-center',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/Overlay\n */\nimport MapEventType from './MapEventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport OverlayPositioning from './OverlayPositioning.js';\nimport {CLASS_SELECTABLE} from './css.js';\nimport {removeNode, removeChildren, outerWidth, outerHeight} from './dom.js';\nimport {listen, unlistenByKey} from './events.js';\nimport {containsExtent} from './extent.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number|string} [id] Set the overlay id. The overlay id can be used\n * with the {@link module:ol/Map~Map#getOverlayById} method.\n * @property {HTMLElement} [element] The overlay element.\n * @property {Array<number>} [offset=[0, 0]] Offsets in pixels used when positioning\n * the overlay. The first element in the\n * array is the horizontal offset. A positive value shifts the overlay right.\n * The second element in the array is the vertical offset. A positive value\n * shifts the overlay down.\n * @property {import(\"./coordinate.js\").Coordinate} [position] The overlay position\n * in map projection.\n * @property {OverlayPositioning} [positioning='top-left'] Defines how\n * the overlay is actually positioned with respect to its `position` property.\n * Possible values are `'bottom-left'`, `'bottom-center'`, `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, and `'top-right'`.\n * @property {boolean} [stopEvent=true] Whether event propagation to the map\n * viewport should be stopped. If `true` the overlay is placed in the same\n * container as that of the controls (CSS class name\n * `ol-overlaycontainer-stopevent`); if `false` it is placed in the container\n * with CSS class name specified by the `className` property.\n * @property {boolean} [insertFirst=true] Whether the overlay is inserted first\n * in the overlay container, or appended. If the overlay is placed in the same\n * container as that of the controls (see the `stopEvent` option) you will\n * probably set `insertFirst` to `true` so the overlay is displayed below the\n * controls.\n * @property {boolean} [autoPan=false] If set to `true` the map is panned when\n * calling `setPosition`, so that the overlay is entirely visible in the current\n * viewport.\n * @property {PanOptions} [autoPanAnimation] The\n * animation options used to pan the overlay into view. This animation is only\n * used when `autoPan` is enabled. A `duration` and `easing` may be provided to\n * customize the animation.\n * @property {number} [autoPanMargin=20] The margin (in pixels) between the\n * overlay and the borders of the map when autopanning.\n * @property {string} [className='ol-overlay-container ol-selectable'] CSS class\n * name.\n */\n\n\n/**\n * @typedef {Object} PanOptions\n * @property {number} [duration=1000] The duration of the animation in\n * milliseconds.\n * @property {function(number):number} [easing] The easing function to use. Can\n * be one from {@link module:ol/easing} or a custom function.\n * Default is {@link module:ol/easing~inAndOut}.\n */\n\n\n/**\n * @enum {string}\n * @protected\n */\nconst Property = {\n  ELEMENT: 'element',\n  MAP: 'map',\n  OFFSET: 'offset',\n  POSITION: 'position',\n  POSITIONING: 'positioning'\n};\n\n\n/**\n * @classdesc\n * An element to be displayed over the map and attached to a single map\n * location.  Like {@link module:ol/control/Control~Control}, Overlays are\n * visible widgets. Unlike Controls, they are not in a fixed position on the\n * screen, but are tied to a geographical coordinate, so panning the map will\n * move an Overlay but not a Control.\n *\n * Example:\n *\n *     import Overlay from 'ol/Overlay';\n *\n *     var popup = new Overlay({\n *       element: document.getElementById('popup')\n *     });\n *     popup.setPosition(coordinate);\n *     map.addOverlay(popup);\n *\n * @api\n */\nclass Overlay extends BaseObject {\n\n  /**\n   * @param {Options} options Overlay options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n     * @protected\n     * @type {Options}\n     */\n    this.options = options;\n\n    /**\n     * @protected\n     * @type {number|string|undefined}\n     */\n    this.id = options.id;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.insertFirst = options.insertFirst !== undefined ?\n      options.insertFirst : true;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.stopEvent = options.stopEvent !== undefined ? options.stopEvent : true;\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.element = document.createElement('div');\n    this.element.className = options.className !== undefined ?\n      options.className : 'ol-overlay-container ' + CLASS_SELECTABLE;\n    this.element.style.position = 'absolute';\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.autoPan = options.autoPan !== undefined ? options.autoPan : false;\n\n    /**\n     * @protected\n     * @type {PanOptions}\n     */\n    this.autoPanAnimation = options.autoPanAnimation || /** @type {PanOptions} */ ({});\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.autoPanMargin = options.autoPanMargin !== undefined ?\n      options.autoPanMargin : 20;\n\n    /**\n     * @protected\n     * @type {{bottom_: string,\n     *         left_: string,\n     *         right_: string,\n     *         top_: string,\n     *         visible: boolean}}\n     */\n    this.rendered = {\n      bottom_: '',\n      left_: '',\n      right_: '',\n      top_: '',\n      visible: true\n    };\n\n    /**\n     * @protected\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.mapPostrenderListenerKey = null;\n\n    listen(\n      this, getChangeEventType(Property.ELEMENT),\n      this.handleElementChanged, this);\n\n    listen(\n      this, getChangeEventType(Property.MAP),\n      this.handleMapChanged, this);\n\n    listen(\n      this, getChangeEventType(Property.OFFSET),\n      this.handleOffsetChanged, this);\n\n    listen(\n      this, getChangeEventType(Property.POSITION),\n      this.handlePositionChanged, this);\n\n    listen(\n      this, getChangeEventType(Property.POSITIONING),\n      this.handlePositioningChanged, this);\n\n    if (options.element !== undefined) {\n      this.setElement(options.element);\n    }\n\n    this.setOffset(options.offset !== undefined ? options.offset : [0, 0]);\n\n    this.setPositioning(options.positioning !== undefined ?\n      /** @type {OverlayPositioning} */ (options.positioning) :\n      OverlayPositioning.TOP_LEFT);\n\n    if (options.position !== undefined) {\n      this.setPosition(options.position);\n    }\n\n  }\n\n  /**\n   * Get the DOM element of this overlay.\n   * @return {HTMLElement|undefined} The Element containing the overlay.\n   * @observable\n   * @api\n   */\n  getElement() {\n    return /** @type {HTMLElement|undefined} */ (this.get(Property.ELEMENT));\n  }\n\n  /**\n   * Get the overlay identifier which is set on constructor.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id;\n  }\n\n  /**\n   * Get the map associated with this overlay.\n   * @return {import(\"./PluggableMap.js\").default|undefined} The map that the\n   * overlay is part of.\n   * @observable\n   * @api\n   */\n  getMap() {\n    return (\n      /** @type {import(\"./PluggableMap.js\").default|undefined} */ (this.get(Property.MAP))\n    );\n  }\n\n  /**\n   * Get the offset of this overlay.\n   * @return {Array<number>} The offset.\n   * @observable\n   * @api\n   */\n  getOffset() {\n    return /** @type {Array<number>} */ (this.get(Property.OFFSET));\n  }\n\n  /**\n   * Get the current position of this overlay.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} The spatial point that the overlay is\n   *     anchored at.\n   * @observable\n   * @api\n   */\n  getPosition() {\n    return (\n      /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(Property.POSITION))\n    );\n  }\n\n  /**\n   * Get the current positioning of this overlay.\n   * @return {OverlayPositioning} How the overlay is positioned\n   *     relative to its point on the map.\n   * @observable\n   * @api\n   */\n  getPositioning() {\n    return (\n      /** @type {OverlayPositioning} */ (this.get(Property.POSITIONING))\n    );\n  }\n\n  /**\n   * @protected\n   */\n  handleElementChanged() {\n    removeChildren(this.element);\n    const element = this.getElement();\n    if (element) {\n      this.element.appendChild(element);\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handleMapChanged() {\n    if (this.mapPostrenderListenerKey) {\n      removeNode(this.element);\n      unlistenByKey(this.mapPostrenderListenerKey);\n      this.mapPostrenderListenerKey = null;\n    }\n    const map = this.getMap();\n    if (map) {\n      this.mapPostrenderListenerKey = listen(map,\n        MapEventType.POSTRENDER, this.render, this);\n      this.updatePixelPosition();\n      const container = this.stopEvent ?\n        map.getOverlayContainerStopEvent() : map.getOverlayContainer();\n      if (this.insertFirst) {\n        container.insertBefore(this.element, container.childNodes[0] || null);\n      } else {\n        container.appendChild(this.element);\n      }\n    }\n  }\n\n  /**\n   * @protected\n   */\n  render() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * @protected\n   */\n  handleOffsetChanged() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * @protected\n   */\n  handlePositionChanged() {\n    this.updatePixelPosition();\n    if (this.get(Property.POSITION) && this.autoPan) {\n      this.panIntoView();\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handlePositioningChanged() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * Set the DOM element to be associated with this overlay.\n   * @param {HTMLElement|undefined} element The Element containing the overlay.\n   * @observable\n   * @api\n   */\n  setElement(element) {\n    this.set(Property.ELEMENT, element);\n  }\n\n  /**\n   * Set the map to be associated with this overlay.\n   * @param {import(\"./PluggableMap.js\").default|undefined} map The map that the\n   * overlay is part of.\n   * @observable\n   * @api\n   */\n  setMap(map) {\n    this.set(Property.MAP, map);\n  }\n\n  /**\n   * Set the offset for this overlay.\n   * @param {Array<number>} offset Offset.\n   * @observable\n   * @api\n   */\n  setOffset(offset) {\n    this.set(Property.OFFSET, offset);\n  }\n\n  /**\n   * Set the position for this overlay. If the position is `undefined` the\n   * overlay is hidden.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} position The spatial point that the overlay\n   *     is anchored at.\n   * @observable\n   * @api\n   */\n  setPosition(position) {\n    this.set(Property.POSITION, position);\n  }\n\n  /**\n   * Pan the map so that the overlay is entirely visible in the current viewport\n   * (if necessary).\n   * @protected\n   */\n  panIntoView() {\n    const map = this.getMap();\n\n    if (!map || !map.getTargetElement()) {\n      return;\n    }\n\n    const mapRect = this.getRect(map.getTargetElement(), map.getSize());\n    const element = this.getElement();\n    const overlayRect = this.getRect(element, [outerWidth(element), outerHeight(element)]);\n\n    const margin = this.autoPanMargin;\n    if (!containsExtent(mapRect, overlayRect)) {\n      // the overlay is not completely inside the viewport, so pan the map\n      const offsetLeft = overlayRect[0] - mapRect[0];\n      const offsetRight = mapRect[2] - overlayRect[2];\n      const offsetTop = overlayRect[1] - mapRect[1];\n      const offsetBottom = mapRect[3] - overlayRect[3];\n\n      const delta = [0, 0];\n      if (offsetLeft < 0) {\n        // move map to the left\n        delta[0] = offsetLeft - margin;\n      } else if (offsetRight < 0) {\n        // move map to the right\n        delta[0] = Math.abs(offsetRight) + margin;\n      }\n      if (offsetTop < 0) {\n        // move map up\n        delta[1] = offsetTop - margin;\n      } else if (offsetBottom < 0) {\n        // move map down\n        delta[1] = Math.abs(offsetBottom) + margin;\n      }\n\n      if (delta[0] !== 0 || delta[1] !== 0) {\n        const center = /** @type {import(\"./coordinate.js\").Coordinate} */ (map.getView().getCenter());\n        const centerPx = map.getPixelFromCoordinate(center);\n        const newCenterPx = [\n          centerPx[0] + delta[0],\n          centerPx[1] + delta[1]\n        ];\n\n        map.getView().animate({\n          center: map.getCoordinateFromPixel(newCenterPx),\n          duration: this.autoPanAnimation.duration,\n          easing: this.autoPanAnimation.easing\n        });\n      }\n    }\n  }\n\n  /**\n   * Get the extent of an element relative to the document\n   * @param {HTMLElement|undefined} element The element.\n   * @param {import(\"./size.js\").Size|undefined} size The size of the element.\n   * @return {import(\"./extent.js\").Extent} The extent.\n   * @protected\n   */\n  getRect(element, size) {\n    const box = element.getBoundingClientRect();\n    const offsetX = box.left + window.pageXOffset;\n    const offsetY = box.top + window.pageYOffset;\n    return [\n      offsetX,\n      offsetY,\n      offsetX + size[0],\n      offsetY + size[1]\n    ];\n  }\n\n  /**\n   * Set the positioning for this overlay.\n   * @param {OverlayPositioning} positioning how the overlay is\n   *     positioned relative to its point on the map.\n   * @observable\n   * @api\n   */\n  setPositioning(positioning) {\n    this.set(Property.POSITIONING, positioning);\n  }\n\n  /**\n   * Modify the visibility of the element.\n   * @param {boolean} visible Element visibility.\n   * @protected\n   */\n  setVisible(visible) {\n    if (this.rendered.visible !== visible) {\n      this.element.style.display = visible ? '' : 'none';\n      this.rendered.visible = visible;\n    }\n  }\n\n  /**\n   * Update pixel position.\n   * @protected\n   */\n  updatePixelPosition() {\n    const map = this.getMap();\n    const position = this.getPosition();\n    if (!map || !map.isRendered() || !position) {\n      this.setVisible(false);\n      return;\n    }\n\n    const pixel = map.getPixelFromCoordinate(position);\n    const mapSize = map.getSize();\n    this.updateRenderedPosition(pixel, mapSize);\n  }\n\n  /**\n   * @param {import(\"./pixel.js\").Pixel} pixel The pixel location.\n   * @param {import(\"./size.js\").Size|undefined} mapSize The map size.\n   * @protected\n   */\n  updateRenderedPosition(pixel, mapSize) {\n    const style = this.element.style;\n    const offset = this.getOffset();\n\n    const positioning = this.getPositioning();\n\n    this.setVisible(true);\n\n    let offsetX = offset[0];\n    let offsetY = offset[1];\n    if (positioning == OverlayPositioning.BOTTOM_RIGHT ||\n        positioning == OverlayPositioning.CENTER_RIGHT ||\n        positioning == OverlayPositioning.TOP_RIGHT) {\n      if (this.rendered.left_ !== '') {\n        this.rendered.left_ = style.left = '';\n      }\n      const right = Math.round(mapSize[0] - pixel[0] - offsetX) + 'px';\n      if (this.rendered.right_ != right) {\n        this.rendered.right_ = style.right = right;\n      }\n    } else {\n      if (this.rendered.right_ !== '') {\n        this.rendered.right_ = style.right = '';\n      }\n      if (positioning == OverlayPositioning.BOTTOM_CENTER ||\n          positioning == OverlayPositioning.CENTER_CENTER ||\n          positioning == OverlayPositioning.TOP_CENTER) {\n        offsetX -= this.element.offsetWidth / 2;\n      }\n      const left = Math.round(pixel[0] + offsetX) + 'px';\n      if (this.rendered.left_ != left) {\n        this.rendered.left_ = style.left = left;\n      }\n    }\n    if (positioning == OverlayPositioning.BOTTOM_LEFT ||\n        positioning == OverlayPositioning.BOTTOM_CENTER ||\n        positioning == OverlayPositioning.BOTTOM_RIGHT) {\n      if (this.rendered.top_ !== '') {\n        this.rendered.top_ = style.top = '';\n      }\n      const bottom = Math.round(mapSize[1] - pixel[1] - offsetY) + 'px';\n      if (this.rendered.bottom_ != bottom) {\n        this.rendered.bottom_ = style.bottom = bottom;\n      }\n    } else {\n      if (this.rendered.bottom_ !== '') {\n        this.rendered.bottom_ = style.bottom = '';\n      }\n      if (positioning == OverlayPositioning.CENTER_LEFT ||\n          positioning == OverlayPositioning.CENTER_CENTER ||\n          positioning == OverlayPositioning.CENTER_RIGHT) {\n        offsetY -= this.element.offsetHeight / 2;\n      }\n      const top = Math.round(pixel[1] + offsetY) + 'px';\n      if (this.rendered.top_ != top) {\n        this.rendered.top_ = style.top = top;\n      }\n    }\n  }\n\n  /**\n   * returns the options this Overlay has been created with\n   * @return {Options} overlay options\n   */\n  getOptions() {\n    return this.options;\n  }\n}\n\n\nexport default Overlay;\n","/**\n * @license\n * Latitude/longitude spherical geodesy formulae taken from\n * http://www.movable-type.co.uk/scripts/latlong.html\n * Licensed under CC-BY-3.0.\n */\n\n/**\n * @module ol/sphere\n */\nimport {toRadians, toDegrees} from './math.js';\nimport GeometryType from './geom/GeometryType.js';\n\n\n/**\n * Object literal with options for the {@link getLength} or {@link getArea}\n * functions.\n * @typedef {Object} SphereMetricOptions\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857']\n * Projection of the  geometry.  By default, the geometry is assumed to be in\n * Web Mercator.\n * @property {number} [radius=6371008.8] Sphere radius.  By default, the radius of the\n * earth is used (Clarke 1866 Authalic Sphere).\n */\n\n\n/**\n * The mean Earth radius (1/3 * (2a + b)) for the WGS84 ellipsoid.\n * https://en.wikipedia.org/wiki/Earth_radius#Mean_radius\n * @type {number}\n */\nexport const DEFAULT_RADIUS = 6371008.8;\n\n\n/**\n * Get the great circle distance (in meters) between two geographic coordinates.\n * @param {Array} c1 Starting coordinate.\n * @param {Array} c2 Ending coordinate.\n * @param {number=} opt_radius The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {number} The great circle distance between the points (in meters).\n * @api\n */\nexport function getDistance(c1, c2, opt_radius) {\n  const radius = opt_radius || DEFAULT_RADIUS;\n  const lat1 = toRadians(c1[1]);\n  const lat2 = toRadians(c2[1]);\n  const deltaLatBy2 = (lat2 - lat1) / 2;\n  const deltaLonBy2 = toRadians(c2[0] - c1[0]) / 2;\n  const a = Math.sin(deltaLatBy2) * Math.sin(deltaLatBy2) +\n      Math.sin(deltaLonBy2) * Math.sin(deltaLonBy2) *\n      Math.cos(lat1) * Math.cos(lat2);\n  return 2 * radius * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n}\n\n\n/**\n * Get the cumulative great circle length of linestring coordinates (geographic).\n * @param {Array} coordinates Linestring coordinates.\n * @param {number} radius The sphere radius to use.\n * @return {number} The length (in meters).\n */\nfunction getLengthInternal(coordinates, radius) {\n  let length = 0;\n  for (let i = 0, ii = coordinates.length; i < ii - 1; ++i) {\n    length += getDistance(coordinates[i], coordinates[i + 1], radius);\n  }\n  return length;\n}\n\n\n/**\n * Get the spherical length of a geometry.  This length is the sum of the\n * great circle distances between coordinates.  For polygons, the length is\n * the sum of all rings.  For points, the length is zero.  For multi-part\n * geometries, the length is the sum of the length of each part.\n * @param {import(\"./geom/Geometry.js\").default} geometry A geometry.\n * @param {SphereMetricOptions=} opt_options Options for the\n * length calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n * You can change this by providing a `projection` option.\n * @return {number} The spherical length (in meters).\n * @api\n */\nexport function getLength(geometry, opt_options) {\n  const options = opt_options || {};\n  const radius = options.radius || DEFAULT_RADIUS;\n  const projection = options.projection || 'EPSG:3857';\n  const type = geometry.getType();\n  if (type !== GeometryType.GEOMETRY_COLLECTION) {\n    geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  }\n  let length = 0;\n  let coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case GeometryType.POINT:\n    case GeometryType.MULTI_POINT: {\n      break;\n    }\n    case GeometryType.LINE_STRING:\n    case GeometryType.LINEAR_RING: {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n      length = getLengthInternal(coordinates, radius);\n      break;\n    }\n    case GeometryType.MULTI_LINE_STRING:\n    case GeometryType.POLYGON: {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        length += getLengthInternal(coordinates[i], radius);\n      }\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        for (j = 0, jj = coords.length; j < jj; ++j) {\n          length += getLengthInternal(coords[j], radius);\n        }\n      }\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      const geometries = /** @type {import(\"./geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        length += getLength(geometries[i], opt_options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return length;\n}\n\n\n/**\n * Returns the spherical area for a list of coordinates.\n *\n * [Reference](https://trs-new.jpl.nasa.gov/handle/2014/40409)\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n * Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n * Laboratory, Pasadena, CA, June 2007\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates List of coordinates of a linear\n * ring. If the ring is oriented clockwise, the area will be positive,\n * otherwise it will be negative.\n * @param {number} radius The sphere radius.\n * @return {number} Area (in square meters).\n */\nfunction getAreaInternal(coordinates, radius) {\n  let area = 0;\n  const len = coordinates.length;\n  let x1 = coordinates[len - 1][0];\n  let y1 = coordinates[len - 1][1];\n  for (let i = 0; i < len; i++) {\n    const x2 = coordinates[i][0];\n    const y2 = coordinates[i][1];\n    area += toRadians(x2 - x1) *\n        (2 + Math.sin(toRadians(y1)) +\n        Math.sin(toRadians(y2)));\n    x1 = x2;\n    y1 = y2;\n  }\n  return area * radius * radius / 2.0;\n}\n\n\n/**\n * Get the spherical area of a geometry.  This is the area (in meters) assuming\n * that polygon edges are segments of great circles on a sphere.\n * @param {import(\"./geom/Geometry.js\").default} geometry A geometry.\n * @param {SphereMetricOptions=} opt_options Options for the area\n *     calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n *     You can change this by providing a `projection` option.\n * @return {number} The spherical area (in square meters).\n * @api\n */\nexport function getArea(geometry, opt_options) {\n  const options = opt_options || {};\n  const radius = options.radius || DEFAULT_RADIUS;\n  const projection = options.projection || 'EPSG:3857';\n  const type = geometry.getType();\n  if (type !== GeometryType.GEOMETRY_COLLECTION) {\n    geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  }\n  let area = 0;\n  let coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case GeometryType.POINT:\n    case GeometryType.MULTI_POINT:\n    case GeometryType.LINE_STRING:\n    case GeometryType.MULTI_LINE_STRING:\n    case GeometryType.LINEAR_RING: {\n      break;\n    }\n    case GeometryType.POLYGON: {\n      coordinates = /** @type {import(\"./geom/Polygon.js\").default} */ (geometry).getCoordinates();\n      area = Math.abs(getAreaInternal(coordinates[0], radius));\n      for (i = 1, ii = coordinates.length; i < ii; ++i) {\n        area -= Math.abs(getAreaInternal(coordinates[i], radius));\n      }\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        area += Math.abs(getAreaInternal(coords[0], radius));\n        for (j = 1, jj = coords.length; j < jj; ++j) {\n          area -= Math.abs(getAreaInternal(coords[j], radius));\n        }\n      }\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      const geometries = /** @type {import(\"./geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        area += getArea(geometries[i], opt_options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return area;\n}\n\n\n/**\n * Returns the coordinate at the given distance and bearing from `c1`.\n *\n * @param {import(\"./coordinate.js\").Coordinate} c1 The origin point (`[lon, lat]` in degrees).\n * @param {number} distance The great-circle distance between the origin\n *     point and the target point.\n * @param {number} bearing The bearing (in radians).\n * @param {number=} opt_radius The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {import(\"./coordinate.js\").Coordinate} The target point.\n */\nexport function offset(c1, distance, bearing, opt_radius) {\n  const radius = opt_radius || DEFAULT_RADIUS;\n  const lat1 = toRadians(c1[1]);\n  const lon1 = toRadians(c1[0]);\n  const dByR = distance / radius;\n  const lat = Math.asin(\n    Math.sin(lat1) * Math.cos(dByR) +\n      Math.cos(lat1) * Math.sin(dByR) * Math.cos(bearing));\n  const lon = lon1 + Math.atan2(\n    Math.sin(bearing) * Math.sin(dByR) * Math.cos(lat1),\n    Math.cos(dByR) - Math.sin(lat1) * Math.sin(lat));\n  return [toDegrees(lon), toDegrees(lat)];\n}\n","/**\n * @module ol/style/IconImageCache\n */\nimport {asString} from '../color.js';\n\n/**\n * @classdesc\n * Singleton class. Available through {@link module:ol/style/IconImageCache~shared}.\n */\nclass IconImageCache {\n  constructor() {\n\n    /**\n    * @type {!Object<string, import(\"./IconImage.js\").default>}\n    * @private\n    */\n    this.cache_ = {};\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.cacheSize_ = 0;\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.maxCacheSize_ = 32;\n  }\n\n  /**\n  * FIXME empty description for jsdoc\n  */\n  clear() {\n    this.cache_ = {};\n    this.cacheSize_ = 0;\n  }\n\n  /**\n  * FIXME empty description for jsdoc\n  */\n  expire() {\n    if (this.cacheSize_ > this.maxCacheSize_) {\n      let i = 0;\n      for (const key in this.cache_) {\n        const iconImage = this.cache_[key];\n        if ((i++ & 3) === 0 && !iconImage.hasListener()) {\n          delete this.cache_[key];\n          --this.cacheSize_;\n        }\n      }\n    }\n  }\n\n  /**\n  * @param {string} src Src.\n  * @param {?string} crossOrigin Cross origin.\n  * @param {import(\"../color.js\").Color} color Color.\n  * @return {import(\"./IconImage.js\").default} Icon image.\n  */\n  get(src, crossOrigin, color) {\n    const key = getKey(src, crossOrigin, color);\n    return key in this.cache_ ? this.cache_[key] : null;\n  }\n\n  /**\n  * @param {string} src Src.\n  * @param {?string} crossOrigin Cross origin.\n  * @param {import(\"../color.js\").Color} color Color.\n  * @param {import(\"./IconImage.js\").default} iconImage Icon image.\n  */\n  set(src, crossOrigin, color, iconImage) {\n    const key = getKey(src, crossOrigin, color);\n    this.cache_[key] = iconImage;\n    ++this.cacheSize_;\n  }\n\n  /**\n  * Set the cache size of the icon cache. Default is `32`. Change this value when\n  * your map uses more than 32 different icon images and you are not caching icon\n  * styles on the application level.\n  * @param {number} maxCacheSize Cache max size.\n  * @api\n  */\n  setSize(maxCacheSize) {\n    this.maxCacheSize_ = maxCacheSize;\n    this.expire();\n  }\n}\n\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {string} Cache key.\n */\nfunction getKey(src, crossOrigin, color) {\n  const colorString = color ? asString(color) : 'null';\n  return crossOrigin + ':' + src + ':' + colorString;\n}\n\n\nexport default IconImageCache;\n\n\n/**\n * The {@link module:ol/style/IconImageCache~IconImageCache} for\n * {@link module:ol/style/Icon~Icon} images.\n * @api\n */\nexport const shared = new IconImageCache();\n","/**\n * @module ol/geom/Circle\n */\nimport {createOrUpdate, forEachCorner, intersects} from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {deflateCoordinate} from './flat/deflate.js';\n\n/**\n * @classdesc\n * Circle geometry.\n *\n * @api\n */\nclass Circle extends SimpleGeometry {\n\n  /**\n   * @param {!import(\"../coordinate.js\").Coordinate} center Center.\n   *     For internal use, flat coordinates in combination with `opt_layout` and no\n   *     `opt_radius` are also accepted.\n   * @param {number=} opt_radius Radius.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   */\n  constructor(center, opt_radius, opt_layout) {\n    super();\n    if (opt_layout !== undefined && opt_radius === undefined) {\n      this.setFlatCoordinates(opt_layout, center);\n    } else {\n      const radius = opt_radius ? opt_radius : 0;\n      this.setCenterAndRadius(center, radius, opt_layout);\n    }\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!Circle} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new Circle(this.flatCoordinates.slice(), undefined, this.layout);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    const flatCoordinates = this.flatCoordinates;\n    const dx = x - flatCoordinates[0];\n    const dy = y - flatCoordinates[1];\n    const squaredDistance = dx * dx + dy * dy;\n    if (squaredDistance < minSquaredDistance) {\n      if (squaredDistance === 0) {\n        for (let i = 0; i < this.stride; ++i) {\n          closestPoint[i] = flatCoordinates[i];\n        }\n      } else {\n        const delta = this.getRadius() / Math.sqrt(squaredDistance);\n        closestPoint[0] = flatCoordinates[0] + delta * dx;\n        closestPoint[1] = flatCoordinates[1] + delta * dy;\n        for (let i = 2; i < this.stride; ++i) {\n          closestPoint[i] = flatCoordinates[i];\n        }\n      }\n      closestPoint.length = this.stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    const flatCoordinates = this.flatCoordinates;\n    const dx = x - flatCoordinates[0];\n    const dy = y - flatCoordinates[1];\n    return dx * dx + dy * dy <= this.getRadiusSquared_();\n  }\n\n  /**\n   * Return the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n   * @return {import(\"../coordinate.js\").Coordinate} Center.\n   * @api\n   */\n  getCenter() {\n    return this.flatCoordinates.slice(0, this.stride);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    const flatCoordinates = this.flatCoordinates;\n    const radius = flatCoordinates[this.stride] - flatCoordinates[0];\n    return createOrUpdate(\n      flatCoordinates[0] - radius, flatCoordinates[1] - radius,\n      flatCoordinates[0] + radius, flatCoordinates[1] + radius,\n      extent);\n  }\n\n  /**\n   * Return the radius of the circle.\n   * @return {number} Radius.\n   * @api\n   */\n  getRadius() {\n    return Math.sqrt(this.getRadiusSquared_());\n  }\n\n  /**\n   * @private\n   * @return {number} Radius squared.\n   */\n  getRadiusSquared_() {\n    const dx = this.flatCoordinates[this.stride] - this.flatCoordinates[0];\n    const dy = this.flatCoordinates[this.stride + 1] - this.flatCoordinates[1];\n    return dx * dx + dy * dy;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.CIRCLE;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    const circleExtent = this.getExtent();\n    if (intersects(extent, circleExtent)) {\n      const center = this.getCenter();\n\n      if (extent[0] <= center[0] && extent[2] >= center[0]) {\n        return true;\n      }\n      if (extent[1] <= center[1] && extent[3] >= center[1]) {\n        return true;\n      }\n\n      return forEachCorner(extent, this.intersectsCoordinate, this);\n    }\n    return false;\n\n  }\n\n  /**\n   * Set the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n   * @param {import(\"../coordinate.js\").Coordinate} center Center.\n   * @api\n   */\n  setCenter(center) {\n    const stride = this.stride;\n    const radius = this.flatCoordinates[stride] - this.flatCoordinates[0];\n    const flatCoordinates = center.slice();\n    flatCoordinates[stride] = flatCoordinates[0] + radius;\n    for (let i = 1; i < stride; ++i) {\n      flatCoordinates[stride + i] = center[i];\n    }\n    this.setFlatCoordinates(this.layout, flatCoordinates);\n    this.changed();\n  }\n\n  /**\n   * Set the center (as {@link module:ol/coordinate~Coordinate coordinate}) and the radius (as\n   * number) of the circle.\n   * @param {!import(\"../coordinate.js\").Coordinate} center Center.\n   * @param {number} radius Radius.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   * @api\n   */\n  setCenterAndRadius(center, radius, opt_layout) {\n    this.setLayout(opt_layout, center, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    /** @type {Array<number>} */\n    const flatCoordinates = this.flatCoordinates;\n    let offset = deflateCoordinate(\n      flatCoordinates, 0, center, this.stride);\n    flatCoordinates[offset++] = flatCoordinates[0] + radius;\n    for (let i = 1, ii = this.stride; i < ii; ++i) {\n      flatCoordinates[offset++] = flatCoordinates[i];\n    }\n    flatCoordinates.length = offset;\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getCoordinates() {\n    return null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setCoordinates(coordinates, opt_layout) {}\n\n  /**\n   * Set the radius of the circle. The radius is in the units of the projection.\n   * @param {number} radius Radius.\n   * @api\n   */\n  setRadius(radius) {\n    this.flatCoordinates[this.stride] = this.flatCoordinates[0] + radius;\n    this.changed();\n  }\n}\n\n\n/**\n * Transform each coordinate of the circle from one coordinate reference system\n * to another. The geometry is modified in place.\n * If you do not want the geometry modified in place, first clone() it and\n * then use this function on the clone.\n *\n * Internally a circle is currently represented by two points: the center of\n * the circle `[cx, cy]`, and the point to the right of the circle\n * `[cx + r, cy]`. This `transform` function just transforms these two points.\n * So the resulting geometry is also a circle, and that circle does not\n * correspond to the shape that would be obtained by transforming every point\n * of the original circle.\n *\n * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @return {Circle} This geometry.  Note that original geometry is\n *     modified in place.\n * @function\n * @api\n */\nCircle.prototype.transform;\nexport default Circle;\n","/**\n * @module ol/interaction/DragAndDrop\n */\n// FIXME should handle all geo-referenced data, not just vector data\n\nimport {TRUE} from '../functions.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport Interaction from './Interaction.js';\nimport {get as getProjection} from '../proj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {Array<typeof import(\"../format/Feature.js\").default>} [formatConstructors] Format constructors.\n * @property {import(\"../source/Vector.js\").default} [source] Optional vector source where features will be added.  If a source is provided\n * all existing features will be removed and new features will be added when\n * they are dropped on the target.  If you want to add features to a vector\n * source without removing the existing features (append only), instead of\n * providing the source option listen for the \"addfeatures\" event.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Target projection. By default, the map's view's projection is used.\n * @property {HTMLElement} [target] The element that is used as the drop target, default is the viewport element.\n */\n\n\n/**\n * @enum {string}\n */\nconst DragAndDropEventType = {\n  /**\n   * Triggered when features are added\n   * @event DragAndDropEvent#addfeatures\n   * @api\n   */\n  ADD_FEATURES: 'addfeatures'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragAndDrop~DragAndDrop} instances are instances\n * of this type.\n */\nclass DragAndDropEvent extends Event {\n\n  /**\n   * @param {DragAndDropEventType} type Type.\n   * @param {File} file File.\n   * @param {Array<import(\"../Feature.js\").default>=} opt_features Features.\n   * @param {import(\"../proj/Projection.js\").default=} opt_projection Projection.\n   */\n  constructor(type, file, opt_features, opt_projection) {\n\n    super(type);\n\n    /**\n     * The features parsed from dropped data.\n     * @type {Array<import(\"../Feature.js\").FeatureLike>|undefined}\n     * @api\n     */\n    this.features = opt_features;\n\n    /**\n     * The dropped file.\n     * @type {File}\n     * @api\n     */\n    this.file = file;\n\n    /**\n     * The feature projection.\n     * @type {import(\"../proj/Projection.js\").default|undefined}\n     * @api\n     */\n    this.projection = opt_projection;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Handles input of vector data by drag and drop.\n * @api\n *\n * @fires DragAndDropEvent\n */\nclass DragAndDrop extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      handleEvent: TRUE\n    });\n\n    /**\n     * @private\n     * @type {Array<typeof import(\"../format/Feature.js\").default>}\n     */\n    this.formatConstructors_ = options.formatConstructors ?\n      options.formatConstructors : [];\n\n    /**\n     * @private\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.projection_ = options.projection ?\n      getProjection(options.projection) : null;\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.dropListenKeys_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../source/Vector.js\").default}\n     */\n    this.source_ = options.source || null;\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.target = options.target ? options.target : null;\n\n  }\n\n  /**\n   * @param {File} file File.\n   * @param {Event} event Load event.\n   * @private\n   */\n  handleResult_(file, event) {\n    const result = event.target.result;\n    const map = this.getMap();\n    let projection = this.projection_;\n    if (!projection) {\n      const view = map.getView();\n      projection = view.getProjection();\n    }\n\n    const formatConstructors = this.formatConstructors_;\n    let features = [];\n    for (let i = 0, ii = formatConstructors.length; i < ii; ++i) {\n      const format = new formatConstructors[i]();\n      features = this.tryReadFeatures_(format, result, {\n        featureProjection: projection\n      });\n      if (features && features.length > 0) {\n        break;\n      }\n    }\n    if (this.source_) {\n      this.source_.clear();\n      this.source_.addFeatures(features);\n    }\n    this.dispatchEvent(\n      new DragAndDropEvent(\n        DragAndDropEventType.ADD_FEATURES, file,\n        features, projection));\n  }\n\n  /**\n   * @private\n   */\n  registerListeners_() {\n    const map = this.getMap();\n    if (map) {\n      const dropArea = this.target ? this.target : map.getViewport();\n      this.dropListenKeys_ = [\n        listen(dropArea, EventType.DROP, handleDrop, this),\n        listen(dropArea, EventType.DRAGENTER, handleStop, this),\n        listen(dropArea, EventType.DRAGOVER, handleStop, this),\n        listen(dropArea, EventType.DROP, handleStop, this)\n      ];\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setActive(active) {\n    super.setActive(active);\n    if (active) {\n      this.registerListeners_();\n    } else {\n      this.unregisterListeners_();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setMap(map) {\n    this.unregisterListeners_();\n    super.setMap(map);\n    if (this.getActive()) {\n      this.registerListeners_();\n    }\n  }\n\n  /**\n   * @param {import(\"../format/Feature.js\").default} format Format.\n   * @param {string} text Text.\n   * @param {import(\"../format/Feature.js\").ReadOptions} options Read options.\n   * @private\n   * @return {Array<import(\"../Feature.js\").FeatureLike>} Features.\n   */\n  tryReadFeatures_(format, text, options) {\n    try {\n      return format.readFeatures(text, options);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  /**\n   * @private\n   */\n  unregisterListeners_() {\n    if (this.dropListenKeys_) {\n      this.dropListenKeys_.forEach(unlistenByKey);\n      this.dropListenKeys_ = null;\n    }\n  }\n}\n\n\n/**\n * @param {DragEvent} event Event.\n * @this {DragAndDrop}\n */\nfunction handleDrop(event) {\n  const files = event.dataTransfer.files;\n  for (let i = 0, ii = files.length; i < ii; ++i) {\n    const file = files.item(i);\n    const reader = new FileReader();\n    reader.addEventListener(EventType.LOAD, this.handleResult_.bind(this, file));\n    reader.readAsText(file);\n  }\n}\n\n\n/**\n * @param {DragEvent} event Event.\n */\nfunction handleStop(event) {\n  event.stopPropagation();\n  event.preventDefault();\n  event.dataTransfer.dropEffect = 'copy';\n}\n\n\nexport default DragAndDrop;\n","/**\n * @module ol/AssertionError\n */\nimport {VERSION} from './util.js';\n\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nclass AssertionError extends Error {\n\n  /**\n   * @param {number} code Error code.\n   */\n  constructor(code) {\n    const path = VERSION === 'latest' ? VERSION : 'v' + VERSION.split('-')[0];\n    const message = 'Assertion failed. See https://openlayers.org/en/' + path +\n    '/doc/errors/#' + code + ' for details.';\n\n    super(message);\n\n    /**\n     * Error code. The meaning of the code can be found on\n     * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n     * the version found in the OpenLayers script's header comment if a version\n     * other than the latest is used).\n     * @type {number}\n     * @api\n     */\n    this.code = code;\n\n    /**\n     * @type {string}\n     */\n    this.name = 'AssertionError';\n\n    // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n    this.message = message;\n  }\n\n}\n\nexport default AssertionError;\n","/**\n * @module ol/layer/Base\n */\nimport {abstract} from '../util.js';\nimport BaseObject from '../Object.js';\nimport LayerProperty from './Property.js';\nimport {clamp} from '../math.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with {@link module:ol/layer/Base} and all its subclasses, any property set in\n * the options is set as a {@link module:ol/Object} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @api\n */\nclass BaseLayer extends BaseObject {\n  /**\n   * @param {Options} options Layer options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n     * @type {Object<string, *>}\n     */\n    const properties = assign({}, options);\n    properties[LayerProperty.OPACITY] =\n       options.opacity !== undefined ? options.opacity : 1;\n    properties[LayerProperty.VISIBLE] =\n       options.visible !== undefined ? options.visible : true;\n    properties[LayerProperty.Z_INDEX] = options.zIndex;\n    properties[LayerProperty.MAX_RESOLUTION] =\n       options.maxResolution !== undefined ? options.maxResolution : Infinity;\n    properties[LayerProperty.MIN_RESOLUTION] =\n       options.minResolution !== undefined ? options.minResolution : 0;\n\n    this.setProperties(properties);\n\n    /**\n     * @type {import(\"./Layer.js\").State}\n     * @private\n     */\n    this.state_ = null;\n\n    /**\n     * The layer type.\n     * @type {import(\"../LayerType.js\").default}\n     * @protected;\n     */\n    this.type;\n\n  }\n\n  /**\n   * Get the layer type (used when creating a layer renderer).\n   * @return {import(\"../LayerType.js\").default} The layer type.\n   */\n  getType() {\n    return this.type;\n  }\n\n  /**\n   * @return {import(\"./Layer.js\").State} Layer state.\n   */\n  getLayerState() {\n    /** @type {import(\"./Layer.js\").State} */\n    const state = this.state_ || /** @type {?} */ ({\n      layer: this,\n      managed: true\n    });\n    state.opacity = clamp(this.getOpacity(), 0, 1);\n    state.sourceState = this.getSourceState();\n    state.visible = this.getVisible();\n    state.extent = this.getExtent();\n    state.zIndex = this.getZIndex() || 0;\n    state.maxResolution = this.getMaxResolution();\n    state.minResolution = Math.max(this.getMinResolution(), 0);\n    this.state_ = state;\n\n    return state;\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"./Layer.js\").default>=} opt_array Array of layers (to be\n   *     modified in place).\n   * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n   */\n  getLayersArray(opt_array) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"./Layer.js\").State>=} opt_states Optional list of layer\n   *     states (to be modified in place).\n   * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n   */\n  getLayerStatesArray(opt_states) {\n    return abstract();\n  }\n\n  /**\n   * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\n   * will be visible regardless of extent.\n   * @return {import(\"../extent.js\").Extent|undefined} The layer extent.\n   * @observable\n   * @api\n   */\n  getExtent() {\n    return (\n      /** @type {import(\"../extent.js\").Extent|undefined} */ (this.get(LayerProperty.EXTENT))\n    );\n  }\n\n  /**\n   * Return the maximum resolution of the layer.\n   * @return {number} The maximum resolution of the layer.\n   * @observable\n   * @api\n   */\n  getMaxResolution() {\n    return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\n  }\n\n  /**\n   * Return the minimum resolution of the layer.\n   * @return {number} The minimum resolution of the layer.\n   * @observable\n   * @api\n   */\n  getMinResolution() {\n    return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\n  }\n\n  /**\n   * Return the opacity of the layer (between 0 and 1).\n   * @return {number} The opacity of the layer.\n   * @observable\n   * @api\n   */\n  getOpacity() {\n    return /** @type {number} */ (this.get(LayerProperty.OPACITY));\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../source/State.js\").default} Source state.\n   */\n  getSourceState() {\n    return abstract();\n  }\n\n  /**\n   * Return the visibility of the layer (`true` or `false`).\n   * @return {boolean} The visibility of the layer.\n   * @observable\n   * @api\n   */\n  getVisible() {\n    return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\n  }\n\n  /**\n   * Return the Z-index of the layer, which is used to order layers before\n   * rendering. The default Z-index is 0.\n   * @return {number} The Z-index of the layer.\n   * @observable\n   * @api\n   */\n  getZIndex() {\n    return /** @type {number} */ (this.get(LayerProperty.Z_INDEX));\n  }\n\n  /**\n   * Set the extent at which the layer is visible.  If `undefined`, the layer\n   * will be visible at all extents.\n   * @param {import(\"../extent.js\").Extent|undefined} extent The extent of the layer.\n   * @observable\n   * @api\n   */\n  setExtent(extent) {\n    this.set(LayerProperty.EXTENT, extent);\n  }\n\n  /**\n   * Set the maximum resolution at which the layer is visible.\n   * @param {number} maxResolution The maximum resolution of the layer.\n   * @observable\n   * @api\n   */\n  setMaxResolution(maxResolution) {\n    this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\n  }\n\n  /**\n   * Set the minimum resolution at which the layer is visible.\n   * @param {number} minResolution The minimum resolution of the layer.\n   * @observable\n   * @api\n   */\n  setMinResolution(minResolution) {\n    this.set(LayerProperty.MIN_RESOLUTION, minResolution);\n  }\n\n  /**\n   * Set the opacity of the layer, allowed values range from 0 to 1.\n   * @param {number} opacity The opacity of the layer.\n   * @observable\n   * @api\n   */\n  setOpacity(opacity) {\n    this.set(LayerProperty.OPACITY, opacity);\n  }\n\n  /**\n   * Set the visibility of the layer (`true` or `false`).\n   * @param {boolean} visible The visibility of the layer.\n   * @observable\n   * @api\n   */\n  setVisible(visible) {\n    this.set(LayerProperty.VISIBLE, visible);\n  }\n\n  /**\n   * Set Z-index of the layer, which is used to order layers before rendering.\n   * The default Z-index is 0.\n   * @param {number} zindex The z-index of the layer.\n   * @observable\n   * @api\n   */\n  setZIndex(zindex) {\n    this.set(LayerProperty.Z_INDEX, zindex);\n  }\n}\n\n\nexport default BaseLayer;\n","/**\n * @module ol/reproj/Triangulation\n */\nimport {boundingExtent, createEmpty, extendCoordinate, getBottomLeft, getBottomRight,\n  getTopLeft, getTopRight, getWidth, intersects} from '../extent.js';\nimport {modulo} from '../math.js';\nimport {getTransform} from '../proj.js';\n\n\n/**\n * Single triangle; consists of 3 source points and 3 target points.\n * @typedef {Object} Triangle\n * @property {Array<import(\"../coordinate.js\").Coordinate>} source\n * @property {Array<import(\"../coordinate.js\").Coordinate>} target\n */\n\n\n/**\n * Maximum number of subdivision steps during raster reprojection triangulation.\n * Prevents high memory usage and large number of proj4 calls (for certain\n * transformations and areas). At most `2*(2^this)` triangles are created for\n * each triangulated extent (tile/image).\n * @type {number}\n */\nconst MAX_SUBDIVISION = 10;\n\n\n/**\n * Maximum allowed size of triangle relative to world width. When transforming\n * corners of world extent between certain projections, the resulting\n * triangulation seems to have zero error and no subdivision is performed. If\n * the triangle width is more than this (relative to world width; 0-1),\n * subdivison is forced (up to `MAX_SUBDIVISION`). Default is `0.25`.\n * @type {number}\n */\nconst MAX_TRIANGLE_WIDTH = 0.25;\n\n\n/**\n * @classdesc\n * Class containing triangulation of the given target extent.\n * Used for determining source data and the reprojection itself.\n */\nclass Triangulation {\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection.\n   * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n   * @param {import(\"../extent.js\").Extent} targetExtent Target extent to triangulate.\n   * @param {import(\"../extent.js\").Extent} maxSourceExtent Maximal source extent that can be used.\n   * @param {number} errorThreshold Acceptable error (in source units).\n   */\n  constructor(sourceProj, targetProj, targetExtent, maxSourceExtent, errorThreshold) {\n\n    /**\n     * @type {import(\"../proj/Projection.js\").default}\n     * @private\n     */\n    this.sourceProj_ = sourceProj;\n\n    /**\n     * @type {import(\"../proj/Projection.js\").default}\n     * @private\n     */\n    this.targetProj_ = targetProj;\n\n    /** @type {!Object<string, import(\"../coordinate.js\").Coordinate>} */\n    let transformInvCache = {};\n    const transformInv = getTransform(this.targetProj_, this.sourceProj_);\n\n    /**\n     * @param {import(\"../coordinate.js\").Coordinate} c A coordinate.\n     * @return {import(\"../coordinate.js\").Coordinate} Transformed coordinate.\n     * @private\n     */\n    this.transformInv_ = function(c) {\n      const key = c[0] + '/' + c[1];\n      if (!transformInvCache[key]) {\n        transformInvCache[key] = transformInv(c);\n      }\n      return transformInvCache[key];\n    };\n\n    /**\n     * @type {import(\"../extent.js\").Extent}\n     * @private\n     */\n    this.maxSourceExtent_ = maxSourceExtent;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.errorThresholdSquared_ = errorThreshold * errorThreshold;\n\n    /**\n     * @type {Array<Triangle>}\n     * @private\n     */\n    this.triangles_ = [];\n\n    /**\n     * Indicates that the triangulation crosses edge of the source projection.\n     * @type {boolean}\n     * @private\n     */\n    this.wrapsXInSource_ = false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.canWrapXInSource_ = this.sourceProj_.canWrapX() &&\n        !!maxSourceExtent &&\n        !!this.sourceProj_.getExtent() &&\n        (getWidth(maxSourceExtent) == getWidth(this.sourceProj_.getExtent()));\n\n    /**\n     * @type {?number}\n     * @private\n     */\n    this.sourceWorldWidth_ = this.sourceProj_.getExtent() ?\n      getWidth(this.sourceProj_.getExtent()) : null;\n\n    /**\n     * @type {?number}\n     * @private\n     */\n    this.targetWorldWidth_ = this.targetProj_.getExtent() ?\n      getWidth(this.targetProj_.getExtent()) : null;\n\n    const destinationTopLeft = getTopLeft(targetExtent);\n    const destinationTopRight = getTopRight(targetExtent);\n    const destinationBottomRight = getBottomRight(targetExtent);\n    const destinationBottomLeft = getBottomLeft(targetExtent);\n    const sourceTopLeft = this.transformInv_(destinationTopLeft);\n    const sourceTopRight = this.transformInv_(destinationTopRight);\n    const sourceBottomRight = this.transformInv_(destinationBottomRight);\n    const sourceBottomLeft = this.transformInv_(destinationBottomLeft);\n\n    this.addQuad_(\n      destinationTopLeft, destinationTopRight,\n      destinationBottomRight, destinationBottomLeft,\n      sourceTopLeft, sourceTopRight, sourceBottomRight, sourceBottomLeft,\n      MAX_SUBDIVISION);\n\n    if (this.wrapsXInSource_) {\n      let leftBound = Infinity;\n      this.triangles_.forEach(function(triangle, i, arr) {\n        leftBound = Math.min(leftBound,\n          triangle.source[0][0], triangle.source[1][0], triangle.source[2][0]);\n      });\n\n      // Shift triangles to be as close to `leftBound` as possible\n      // (if the distance is more than `worldWidth / 2` it can be closer.\n      this.triangles_.forEach(function(triangle) {\n        if (Math.max(triangle.source[0][0], triangle.source[1][0],\n          triangle.source[2][0]) - leftBound > this.sourceWorldWidth_ / 2) {\n          const newTriangle = [[triangle.source[0][0], triangle.source[0][1]],\n            [triangle.source[1][0], triangle.source[1][1]],\n            [triangle.source[2][0], triangle.source[2][1]]];\n          if ((newTriangle[0][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n            newTriangle[0][0] -= this.sourceWorldWidth_;\n          }\n          if ((newTriangle[1][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n            newTriangle[1][0] -= this.sourceWorldWidth_;\n          }\n          if ((newTriangle[2][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n            newTriangle[2][0] -= this.sourceWorldWidth_;\n          }\n\n          // Rarely (if the extent contains both the dateline and prime meridian)\n          // the shift can in turn break some triangles.\n          // Detect this here and don't shift in such cases.\n          const minX = Math.min(\n            newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n          const maxX = Math.max(\n            newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n          if ((maxX - minX) < this.sourceWorldWidth_ / 2) {\n            triangle.source = newTriangle;\n          }\n        }\n      }.bind(this));\n    }\n\n    transformInvCache = {};\n  }\n\n  /**\n   * Adds triangle to the triangulation.\n   * @param {import(\"../coordinate.js\").Coordinate} a The target a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} b The target b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} c The target c coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} aSrc The source a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} bSrc The source b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} cSrc The source c coordinate.\n   * @private\n   */\n  addTriangle_(a, b, c, aSrc, bSrc, cSrc) {\n    this.triangles_.push({\n      source: [aSrc, bSrc, cSrc],\n      target: [a, b, c]\n    });\n  }\n\n  /**\n   * Adds quad (points in clock-wise order) to the triangulation\n   * (and reprojects the vertices) if valid.\n   * Performs quad subdivision if needed to increase precision.\n   *\n   * @param {import(\"../coordinate.js\").Coordinate} a The target a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} b The target b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} c The target c coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} d The target d coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} aSrc The source a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} bSrc The source b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} cSrc The source c coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} dSrc The source d coordinate.\n   * @param {number} maxSubdivision Maximal allowed subdivision of the quad.\n   * @private\n   */\n  addQuad_(a, b, c, d, aSrc, bSrc, cSrc, dSrc, maxSubdivision) {\n\n    const sourceQuadExtent = boundingExtent([aSrc, bSrc, cSrc, dSrc]);\n    const sourceCoverageX = this.sourceWorldWidth_ ?\n      getWidth(sourceQuadExtent) / this.sourceWorldWidth_ : null;\n    const sourceWorldWidth = /** @type {number} */ (this.sourceWorldWidth_);\n\n    // when the quad is wrapped in the source projection\n    // it covers most of the projection extent, but not fully\n    const wrapsX = this.sourceProj_.canWrapX() &&\n                 sourceCoverageX > 0.5 && sourceCoverageX < 1;\n\n    let needsSubdivision = false;\n\n    if (maxSubdivision > 0) {\n      if (this.targetProj_.isGlobal() && this.targetWorldWidth_) {\n        const targetQuadExtent = boundingExtent([a, b, c, d]);\n        const targetCoverageX = getWidth(targetQuadExtent) / this.targetWorldWidth_;\n        needsSubdivision = targetCoverageX > MAX_TRIANGLE_WIDTH ||\n          needsSubdivision;\n      }\n      if (!wrapsX && this.sourceProj_.isGlobal() && sourceCoverageX) {\n        needsSubdivision = sourceCoverageX > MAX_TRIANGLE_WIDTH ||\n            needsSubdivision;\n      }\n    }\n\n    if (!needsSubdivision && this.maxSourceExtent_) {\n      if (!intersects(sourceQuadExtent, this.maxSourceExtent_)) {\n        // whole quad outside source projection extent -> ignore\n        return;\n      }\n    }\n\n    if (!needsSubdivision) {\n      if (!isFinite(aSrc[0]) || !isFinite(aSrc[1]) ||\n          !isFinite(bSrc[0]) || !isFinite(bSrc[1]) ||\n          !isFinite(cSrc[0]) || !isFinite(cSrc[1]) ||\n          !isFinite(dSrc[0]) || !isFinite(dSrc[1])) {\n        if (maxSubdivision > 0) {\n          needsSubdivision = true;\n        } else {\n          return;\n        }\n      }\n    }\n\n    if (maxSubdivision > 0) {\n      if (!needsSubdivision) {\n        const center = [(a[0] + c[0]) / 2, (a[1] + c[1]) / 2];\n        const centerSrc = this.transformInv_(center);\n\n        let dx;\n        if (wrapsX) {\n          const centerSrcEstimX =\n              (modulo(aSrc[0], sourceWorldWidth) +\n               modulo(cSrc[0], sourceWorldWidth)) / 2;\n          dx = centerSrcEstimX -\n              modulo(centerSrc[0], sourceWorldWidth);\n        } else {\n          dx = (aSrc[0] + cSrc[0]) / 2 - centerSrc[0];\n        }\n        const dy = (aSrc[1] + cSrc[1]) / 2 - centerSrc[1];\n        const centerSrcErrorSquared = dx * dx + dy * dy;\n        needsSubdivision = centerSrcErrorSquared > this.errorThresholdSquared_;\n      }\n      if (needsSubdivision) {\n        if (Math.abs(a[0] - c[0]) <= Math.abs(a[1] - c[1])) {\n          // split horizontally (top & bottom)\n          const bc = [(b[0] + c[0]) / 2, (b[1] + c[1]) / 2];\n          const bcSrc = this.transformInv_(bc);\n          const da = [(d[0] + a[0]) / 2, (d[1] + a[1]) / 2];\n          const daSrc = this.transformInv_(da);\n\n          this.addQuad_(\n            a, b, bc, da, aSrc, bSrc, bcSrc, daSrc, maxSubdivision - 1);\n          this.addQuad_(\n            da, bc, c, d, daSrc, bcSrc, cSrc, dSrc, maxSubdivision - 1);\n        } else {\n          // split vertically (left & right)\n          const ab = [(a[0] + b[0]) / 2, (a[1] + b[1]) / 2];\n          const abSrc = this.transformInv_(ab);\n          const cd = [(c[0] + d[0]) / 2, (c[1] + d[1]) / 2];\n          const cdSrc = this.transformInv_(cd);\n\n          this.addQuad_(\n            a, ab, cd, d, aSrc, abSrc, cdSrc, dSrc, maxSubdivision - 1);\n          this.addQuad_(\n            ab, b, c, cd, abSrc, bSrc, cSrc, cdSrc, maxSubdivision - 1);\n        }\n        return;\n      }\n    }\n\n    if (wrapsX) {\n      if (!this.canWrapXInSource_) {\n        return;\n      }\n      this.wrapsXInSource_ = true;\n    }\n\n    this.addTriangle_(a, c, d, aSrc, cSrc, dSrc);\n    this.addTriangle_(a, b, c, aSrc, bSrc, cSrc);\n  }\n\n  /**\n   * Calculates extent of the 'source' coordinates from all the triangles.\n   *\n   * @return {import(\"../extent.js\").Extent} Calculated extent.\n   */\n  calculateSourceExtent() {\n    const extent = createEmpty();\n\n    this.triangles_.forEach(function(triangle, i, arr) {\n      const src = triangle.source;\n      extendCoordinate(extent, src[0]);\n      extendCoordinate(extent, src[1]);\n      extendCoordinate(extent, src[2]);\n    });\n\n    return extent;\n  }\n\n  /**\n   * @return {Array<Triangle>} Array of the calculated triangles.\n   */\n  getTriangles() {\n    return this.triangles_;\n  }\n}\n\nexport default Triangulation;\n","/**\n * @module ol/Image\n */\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport {listenOnce, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\nimport {getHeight} from './extent.js';\n\n\n/**\n * A function that takes an {@link module:ol/Image~Image} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~Image#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(ImageWrapper, string)} LoadFunction\n * @api\n */\n\n\nclass ImageWrapper extends ImageBase {\n\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {LoadFunction} imageLoadFunction Image load function.\n   */\n  constructor(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n\n    super(extent, resolution, pixelRatio, ImageState.IDLE);\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {Array<import(\"./events.js\").EventsKey>}\n     */\n    this.imageListenerKeys_ = null;\n\n    /**\n     * @protected\n     * @type {ImageState}\n     */\n    this.state = ImageState.IDLE;\n\n    /**\n     * @private\n     * @type {LoadFunction}\n     */\n    this.imageLoadFunction_ = imageLoadFunction;\n\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = ImageState.ERROR;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    if (this.resolution === undefined) {\n      this.resolution = getHeight(this.extent) / this.image_.height;\n    }\n    this.state = ImageState.LOADED;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @override\n   * @api\n   */\n  load() {\n    if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n      this.state = ImageState.LOADING;\n      this.changed();\n      this.imageListenerKeys_ = [\n        listenOnce(this.image_, EventType.ERROR,\n          this.handleImageError_, this),\n        listenOnce(this.image_, EventType.LOAD,\n          this.handleImageLoad_, this)\n      ];\n      this.imageLoadFunction_(this, this.src_);\n    }\n  }\n\n  /**\n   * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n   */\n  setImage(image) {\n    this.image_ = image;\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    this.imageListenerKeys_.forEach(unlistenByKey);\n    this.imageListenerKeys_ = null;\n  }\n}\n\n\nexport default ImageWrapper;\n","/**\n * @module ol/uri\n */\n\n\n/**\n * Appends query parameters to a URI.\n *\n * @param {string} uri The original URI, which may already have query data.\n * @param {!Object} params An object where keys are URI-encoded parameter keys,\n *     and the values are arbitrary types or arrays.\n * @return {string} The new URI.\n */\nexport function appendParams(uri, params) {\n  const keyParams = [];\n  // Skip any null or undefined parameter values\n  Object.keys(params).forEach(function(k) {\n    if (params[k] !== null && params[k] !== undefined) {\n      keyParams.push(k + '=' + encodeURIComponent(params[k]));\n    }\n  });\n  const qs = keyParams.join('&');\n  // remove any trailing ? or &\n  uri = uri.replace(/[?&]$/, '');\n  // append ? or & depending on whether uri has existing parameters\n  uri = uri.indexOf('?') === -1 ? uri + '?' : uri + '&';\n  return uri + qs;\n}\n","/**\n * @module ol/source/TileWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\n\nimport {assert} from '../asserts.js';\nimport {buffer, createEmpty} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {modulo} from '../math.js';\nimport {get as getProjection, transform, transformExtent} from '../proj.js';\nimport {calculateSourceResolution} from '../reproj.js';\nimport {toSize, buffer as bufferSize, scale as scaleSize} from '../size.js';\nimport TileImage from './TileImage.js';\nimport WMSServerType from './WMSServerType.js';\nimport {hash as tileCoordHash} from '../tilecoord.js';\nimport {compareVersions} from '../string.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {Object<string,*>} params WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {number} [gutter=0]\n * The size in pixels of the gutter around image tiles to ignore. By setting\n * this property to a non-zero value, images will be requested that are wider\n * and taller than the tile size by a value of `2 x gutter`.\n * Using a non-zero value allows artifacts of rendering at tile edges to be\n * ignored. If you control the WMS service it is recommended to address\n * \"artifacts at tile edges\" issues by properly configuring the WMS service. For\n * example, MapServer has a `tile_map_edge_buffer` configuration parameter for\n * this. See http://mapserver.org/output/tile_mode.html.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {import(\"../proj.js\").ProjectionLike} projection Projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {typeof import(\"../ImageTile.js\").default} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid. Base this on the resolutions,\n * tilesize and extent supported by the server.\n * If this is not defined, a default grid will be used: if there is a projection\n * extent, the grid will be based on that; if not, a grid based on a global\n * extent with origin at 0,0 will be used..\n * @property {import(\"./WMSServerType.js\").default|string} [serverType]\n * The type of the remote WMS server. Currently only used when `hidpi` is\n * `true`.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] WMS service URL.\n * @property {Array<string>} [urls] WMS service urls.\n * Use this instead of `url` when the WMS supports multiple urls for GetMap requests.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * When set to `false`, only one world\n * will be rendered. When `true`, tiles will be requested for one world only,\n * but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data from WMS servers.\n * @api\n */\nclass TileWMS extends TileImage {\n  /**\n   * @param {Options=} [opt_options] Tile WMS options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || /** @type {Options} */ ({});\n\n    const params = options.params || {};\n\n    const transparent = 'TRANSPARENT' in params ? params['TRANSPARENT'] : true;\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      opaque: !transparent,\n      projection: options.projection,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileClass: options.tileClass,\n      tileGrid: options.tileGrid,\n      tileLoadFunction: options.tileLoadFunction,\n      tileUrlFunction: tileUrlFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition\n    });\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.gutter_ = options.gutter !== undefined ? options.gutter : 0;\n\n    /**\n     * @private\n     * @type {!Object}\n     */\n    this.params_ = params;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.v13_ = true;\n\n    /**\n     * @private\n     * @type {import(\"./WMSServerType.js\").default|undefined}\n     */\n    this.serverType_ = /** @type {import(\"./WMSServerType.js\").default|undefined} */ (options.serverType);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.tmpExtent_ = createEmpty();\n\n    this.updateV13_();\n    this.setKey(this.getKeyForParams_());\n\n  }\n\n  /**\n   * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n   * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n   * constructed.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n   * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n   *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n   *     in the `LAYERS` parameter will be used. `VERSION` should not be\n   *     specified here.\n   * @return {string|undefined} GetFeatureInfo URL.\n   * @api\n   */\n  getGetFeatureInfoUrl(coordinate, resolution, projection, params) {\n    const projectionObj = getProjection(projection);\n    const sourceProjectionObj = this.getProjection();\n\n    let tileGrid = this.getTileGrid();\n    if (!tileGrid) {\n      tileGrid = this.getTileGridForProjection(projectionObj);\n    }\n\n    const tileCoord = tileGrid.getTileCoordForCoordAndResolution(coordinate, resolution);\n\n    if (tileGrid.getResolutions().length <= tileCoord[0]) {\n      return undefined;\n    }\n\n    let tileResolution = tileGrid.getResolution(tileCoord[0]);\n    let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n    let tileSize = toSize(tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n\n    const gutter = this.gutter_;\n    if (gutter !== 0) {\n      tileSize = bufferSize(tileSize, gutter, this.tmpSize);\n      tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n    }\n\n    if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n      tileResolution = calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, tileResolution);\n      tileExtent = transformExtent(tileExtent, projectionObj, sourceProjectionObj);\n      coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n    }\n\n    const baseParams = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetFeatureInfo',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true,\n      'QUERY_LAYERS': this.params_['LAYERS']\n    };\n    assign(baseParams, this.params_, params);\n\n    const x = Math.floor((coordinate[0] - tileExtent[0]) / tileResolution);\n    const y = Math.floor((tileExtent[3] - coordinate[1]) / tileResolution);\n\n    baseParams[this.v13_ ? 'I' : 'X'] = x;\n    baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n    return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n      1, sourceProjectionObj || projectionObj, baseParams);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getGutter() {\n    return this.gutter_;\n  }\n\n  /**\n   * Get the user-provided params, i.e. those passed to the constructor through\n   * the \"params\" option, and possibly updated using the updateParams method.\n   * @return {Object} Params.\n   * @api\n   */\n  getParams() {\n    return this.params_;\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../size.js\").Size} tileSize Tile size.\n   * @param {import(\"../extent.js\").Extent} tileExtent Tile extent.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {Object} params Params.\n   * @return {string|undefined} Request URL.\n   * @private\n   */\n  getRequestUrl_(tileCoord, tileSize, tileExtent, pixelRatio, projection, params) {\n\n    const urls = this.urls;\n    if (!urls) {\n      return undefined;\n    }\n\n    params['WIDTH'] = tileSize[0];\n    params['HEIGHT'] = tileSize[1];\n\n    params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n    if (!('STYLES' in this.params_)) {\n      params['STYLES'] = '';\n    }\n\n    if (pixelRatio != 1) {\n      switch (this.serverType_) {\n        case WMSServerType.GEOSERVER:\n          const dpi = (90 * pixelRatio + 0.5) | 0;\n          if ('FORMAT_OPTIONS' in params) {\n            params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n          } else {\n            params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n          }\n          break;\n        case WMSServerType.MAPSERVER:\n          params['MAP_RESOLUTION'] = 90 * pixelRatio;\n          break;\n        case WMSServerType.CARMENTA_SERVER:\n        case WMSServerType.QGIS:\n          params['DPI'] = 90 * pixelRatio;\n          break;\n        default:\n          assert(false, 52); // Unknown `serverType` configured\n          break;\n      }\n    }\n\n    const axisOrientation = projection.getAxisOrientation();\n    const bbox = tileExtent;\n    if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n      let tmp;\n      tmp = tileExtent[0];\n      bbox[0] = tileExtent[1];\n      bbox[1] = tmp;\n      tmp = tileExtent[2];\n      bbox[2] = tileExtent[3];\n      bbox[3] = tmp;\n    }\n    params['BBOX'] = bbox.join(',');\n\n    let url;\n    if (urls.length == 1) {\n      url = urls[0];\n    } else {\n      const index = modulo(tileCoordHash(tileCoord), urls.length);\n      url = urls[index];\n    }\n    return appendParams(url, params);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTilePixelRatio(pixelRatio) {\n    return (!this.hidpi_ || this.serverType_ === undefined) ? 1 :\n    /** @type {number} */ (pixelRatio);\n  }\n\n  /**\n   * @private\n   * @return {string} The key for the current params.\n   */\n  getKeyForParams_() {\n    let i = 0;\n    const res = [];\n    for (const key in this.params_) {\n      res[i++] = key + '-' + this.params_[key];\n    }\n    return res.join('/');\n  }\n\n  /**\n   * Update the user-provided params.\n   * @param {Object} params Params.\n   * @api\n   */\n  updateParams(params) {\n    assign(this.params_, params);\n    this.updateV13_();\n    this.setKey(this.getKeyForParams_());\n  }\n\n  /**\n   * @private\n   */\n  updateV13_() {\n    const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n    this.v13_ = compareVersions(version, '1.3') >= 0;\n  }\n}\n\n/**\n * @param {import(\"../tilecoord.js\").TileCoord} tileCoord The tile coordinate\n * @param {number} pixelRatio The pixel ratio\n * @param {import(\"../proj/Projection.js\").default} projection The projection\n * @return {string|undefined} The tile URL\n * @this {TileWMS}\n */\nfunction tileUrlFunction(tileCoord, pixelRatio, projection) {\n\n  let tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projection);\n  }\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  const tileResolution = tileGrid.getResolution(tileCoord[0]);\n  let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  let tileSize = toSize(\n    tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n  const gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = bufferSize(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (pixelRatio != 1) {\n    tileSize = scaleSize(tileSize, pixelRatio, this.tmpSize);\n  }\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  assign(baseParams, this.params_);\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n    pixelRatio, projection, baseParams);\n}\n\n\nexport default TileWMS;\n","/**\n * @module ol/structs/LRUCache\n */\n\nimport {assert} from '../asserts.js';\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\n\n\n/**\n * @typedef {Object} Entry\n * @property {string} key_\n * @property {Object} newer\n * @property {Object} older\n * @property {*} value_\n */\n\n\n/**\n * @classdesc\n * Implements a Least-Recently-Used cache where the keys do not conflict with\n * Object's properties (e.g. 'hasOwnProperty' is not allowed as a key). Expiring\n * items from the cache is the responsibility of the user.\n *\n * @fires import(\"../events/Event.js\").Event\n * @template T\n */\nclass LRUCache extends EventTarget {\n\n  /**\n   * @param {number=} opt_highWaterMark High water mark.\n   */\n  constructor(opt_highWaterMark) {\n\n    super();\n\n    /**\n     * @type {number}\n     */\n    this.highWaterMark = opt_highWaterMark !== undefined ? opt_highWaterMark : 2048;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.count_ = 0;\n\n    /**\n     * @private\n     * @type {!Object<string, Entry>}\n     */\n    this.entries_ = {};\n\n    /**\n     * @private\n     * @type {?Entry}\n     */\n    this.oldest_ = null;\n\n    /**\n     * @private\n     * @type {?Entry}\n     */\n    this.newest_ = null;\n\n  }\n\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    return this.getCount() > this.highWaterMark;\n  }\n\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  clear() {\n    this.count_ = 0;\n    this.entries_ = {};\n    this.oldest_ = null;\n    this.newest_ = null;\n    this.dispatchEvent(EventType.CLEAR);\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @return {boolean} Contains key.\n   */\n  containsKey(key) {\n    return this.entries_.hasOwnProperty(key);\n  }\n\n\n  /**\n   * @param {function(this: S, T, string, LRUCache): ?} f The function\n   *     to call for every entry from the oldest to the newer. This function takes\n   *     3 arguments (the entry value, the entry key and the LRUCache object).\n   *     The return value is ignored.\n   * @param {S=} opt_this The object to use as `this` in `f`.\n   * @template S\n   */\n  forEach(f, opt_this) {\n    let entry = this.oldest_;\n    while (entry) {\n      f.call(opt_this, entry.value_, entry.key_, this);\n      entry = entry.newer;\n    }\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @return {T} Value.\n   */\n  get(key) {\n    const entry = this.entries_[key];\n    assert(entry !== undefined,\n      15); // Tried to get a value for a key that does not exist in the cache\n    if (entry === this.newest_) {\n      return entry.value_;\n    } else if (entry === this.oldest_) {\n      this.oldest_ = /** @type {Entry} */ (this.oldest_.newer);\n      this.oldest_.older = null;\n    } else {\n      entry.newer.older = entry.older;\n      entry.older.newer = entry.newer;\n    }\n    entry.newer = null;\n    entry.older = this.newest_;\n    this.newest_.newer = entry;\n    this.newest_ = entry;\n    return entry.value_;\n  }\n\n\n  /**\n   * Remove an entry from the cache.\n   * @param {string} key The entry key.\n   * @return {T} The removed entry.\n   */\n  remove(key) {\n    const entry = this.entries_[key];\n    assert(entry !== undefined, 15); // Tried to get a value for a key that does not exist in the cache\n    if (entry === this.newest_) {\n      this.newest_ = /** @type {Entry} */ (entry.older);\n      if (this.newest_) {\n        this.newest_.newer = null;\n      }\n    } else if (entry === this.oldest_) {\n      this.oldest_ = /** @type {Entry} */ (entry.newer);\n      if (this.oldest_) {\n        this.oldest_.older = null;\n      }\n    } else {\n      entry.newer.older = entry.older;\n      entry.older.newer = entry.newer;\n    }\n    delete this.entries_[key];\n    --this.count_;\n    return entry.value_;\n  }\n\n\n  /**\n   * @return {number} Count.\n   */\n  getCount() {\n    return this.count_;\n  }\n\n\n  /**\n   * @return {Array<string>} Keys.\n   */\n  getKeys() {\n    const keys = new Array(this.count_);\n    let i = 0;\n    let entry;\n    for (entry = this.newest_; entry; entry = entry.older) {\n      keys[i++] = entry.key_;\n    }\n    return keys;\n  }\n\n\n  /**\n   * @return {Array<T>} Values.\n   */\n  getValues() {\n    const values = new Array(this.count_);\n    let i = 0;\n    let entry;\n    for (entry = this.newest_; entry; entry = entry.older) {\n      values[i++] = entry.value_;\n    }\n    return values;\n  }\n\n\n  /**\n   * @return {T} Last value.\n   */\n  peekLast() {\n    return this.oldest_.value_;\n  }\n\n\n  /**\n   * @return {string} Last key.\n   */\n  peekLastKey() {\n    return this.oldest_.key_;\n  }\n\n\n  /**\n   * Get the key of the newest item in the cache.  Throws if the cache is empty.\n   * @return {string} The newest key.\n   */\n  peekFirstKey() {\n    return this.newest_.key_;\n  }\n\n\n  /**\n   * @return {T} value Value.\n   */\n  pop() {\n    const entry = this.oldest_;\n    delete this.entries_[entry.key_];\n    if (entry.newer) {\n      entry.newer.older = null;\n    }\n    this.oldest_ = /** @type {Entry} */ (entry.newer);\n    if (!this.oldest_) {\n      this.newest_ = null;\n    }\n    --this.count_;\n    return entry.value_;\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @param {T} value Value.\n   */\n  replace(key, value) {\n    this.get(key); // update `newest_`\n    this.entries_[key].value_ = value;\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @param {T} value Value.\n   */\n  set(key, value) {\n    assert(!(key in this.entries_),\n      16); // Tried to set a value for a key that is used already\n    const entry = /** @type {Entry} */ ({\n      key_: key,\n      newer: null,\n      older: this.newest_,\n      value_: value\n    });\n    if (!this.newest_) {\n      this.oldest_ = entry;\n    } else {\n      this.newest_.newer = entry;\n    }\n    this.newest_ = entry;\n    this.entries_[key] = entry;\n    ++this.count_;\n  }\n\n\n  /**\n   * Set a maximum number of entries for the cache.\n   * @param {number} size Cache size.\n   * @api\n   */\n  setSize(size) {\n    this.highWaterMark = size;\n  }\n\n\n  /**\n   * Prune the cache.\n   */\n  prune() {\n    while (this.canExpireCache()) {\n      this.pop();\n    }\n  }\n\n}\n\nexport default LRUCache;\n","/**\n * @module ol/source/ImageStatic\n */\n\nimport ImageWrapper from '../Image.js';\nimport ImageState from '../ImageState.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {intersects, getHeight, getWidth} from '../extent.js';\nimport {get as getProjection} from '../proj.js';\nimport ImageSource, {defaultImageLoadFunction} from './Image.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {import(\"../extent.js\").Extent} [imageExtent] Extent of the image in map coordinates.\n * This is the [left, bottom, right, top] map coordinates of your image.\n * @property {import(\"../Image.js\").LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {import(\"../proj.js\").ProjectionLike} projection Projection.\n * @property {import(\"../size.js\").Size} [imageSize] Size of the image in pixels. Usually the image size is auto-detected, so this\n * only needs to be set if auto-detection fails for some reason.\n * @property {string} url Image URL.\n */\n\n\n/**\n * @classdesc\n * A layer source for displaying a single, static image.\n * @api\n */\nclass Static extends ImageSource {\n  /**\n   * @param {Options} options ImageStatic options.\n   */\n  constructor(options) {\n    const crossOrigin = options.crossOrigin !== undefined ?\n      options.crossOrigin : null;\n\n    const /** @type {import(\"../Image.js\").LoadFunction} */ imageLoadFunction =\n        options.imageLoadFunction !== undefined ?\n          options.imageLoadFunction : defaultImageLoadFunction;\n\n    super({\n      attributions: options.attributions,\n      projection: getProjection(options.projection)\n    });\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.url_ = options.url;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.imageExtent_ = options.imageExtent;\n\n    /**\n     * @private\n     * @type {import(\"../Image.js\").default}\n     */\n    this.image_ = new ImageWrapper(this.imageExtent_, undefined, 1, this.url_, crossOrigin, imageLoadFunction);\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.imageSize_ = options.imageSize ? options.imageSize : null;\n\n    listen(this.image_, EventType.CHANGE,\n      this.handleImageChange, this);\n\n  }\n\n  /**\n   * Returns the image extent\n   * @return {import(\"../extent.js\").Extent} image extent.\n   * @api\n   */\n  getImageExtent() {\n    return this.imageExtent_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n    if (intersects(extent, this.image_.getExtent())) {\n      return this.image_;\n    }\n    return null;\n  }\n\n  /**\n   * Return the URL used for this image source.\n   * @return {string} URL.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleImageChange(evt) {\n    if (this.image_.getState() == ImageState.LOADED) {\n      const imageExtent = this.image_.getExtent();\n      const image = this.image_.getImage();\n      let imageWidth, imageHeight;\n      if (this.imageSize_) {\n        imageWidth = this.imageSize_[0];\n        imageHeight = this.imageSize_[1];\n      } else {\n        imageWidth = image.width;\n        imageHeight = image.height;\n      }\n      const resolution = getHeight(imageExtent) / imageHeight;\n      const targetWidth = Math.ceil(getWidth(imageExtent) / resolution);\n      if (targetWidth != imageWidth) {\n        const context = createCanvasContext2D(targetWidth, imageHeight);\n        const canvas = context.canvas;\n        context.drawImage(image, 0, 0, imageWidth, imageHeight,\n          0, 0, canvas.width, canvas.height);\n        this.image_.setImage(canvas);\n      }\n    }\n    super.handleImageChange(evt);\n  }\n}\n\n\nexport default Static;\n","/**\n * @module ol/geom/flat/interiorpoint\n */\nimport {numberSafeCompareFunction} from '../../array.js';\nimport {linearRingsContainsXY} from './contains.js';\n\n\n/**\n * Calculates a point that is likely to lie in the interior of the linear rings.\n * Inspired by JTS's com.vividsolutions.jts.geom.Geometry#getInteriorPoint.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @param {number} flatCentersOffset Flat center offset.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Destination point as XYM coordinate, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointOfArray(flatCoordinates, offset,\n  ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n  let i, ii, x, x1, x2, y1, y2;\n  const y = flatCenters[flatCentersOffset + 1];\n  /** @type {Array<number>} */\n  const intersections = [];\n  // Calculate intersections with the horizontal line\n  for (let r = 0, rr = ends.length; r < rr; ++r) {\n    const end = ends[r];\n    x1 = flatCoordinates[end - stride];\n    y1 = flatCoordinates[end - stride + 1];\n    for (i = offset; i < end; i += stride) {\n      x2 = flatCoordinates[i];\n      y2 = flatCoordinates[i + 1];\n      if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n        x = (y - y1) / (y2 - y1) * (x2 - x1) + x1;\n        intersections.push(x);\n      }\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  // Find the longest segment of the horizontal line that has its center point\n  // inside the linear ring.\n  let pointX = NaN;\n  let maxSegmentLength = -Infinity;\n  intersections.sort(numberSafeCompareFunction);\n  x1 = intersections[0];\n  for (i = 1, ii = intersections.length; i < ii; ++i) {\n    x2 = intersections[i];\n    const segmentLength = Math.abs(x2 - x1);\n    if (segmentLength > maxSegmentLength) {\n      x = (x1 + x2) / 2;\n      if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n        pointX = x;\n        maxSegmentLength = segmentLength;\n      }\n    }\n    x1 = x2;\n  }\n  if (isNaN(pointX)) {\n    // There is no horizontal line that has its center point inside the linear\n    // ring.  Use the center of the the linear ring's extent.\n    pointX = flatCenters[flatCentersOffset];\n  }\n  if (opt_dest) {\n    opt_dest.push(pointX, y, maxSegmentLength);\n    return opt_dest;\n  } else {\n    return [pointX, y, maxSegmentLength];\n  }\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @return {Array<number>} Interior points as XYM coordinates, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointsOfMultiArray(flatCoordinates, offset, endss, stride, flatCenters) {\n  let interiorPoints = [];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    interiorPoints = getInteriorPointOfArray(flatCoordinates,\n      offset, ends, stride, flatCenters, 2 * i, interiorPoints);\n    offset = ends[ends.length - 1];\n  }\n  return interiorPoints;\n}\n","/**\n * @module ol/geom/flat/segments\n */\n\n\n/**\n * This function calls `callback` for each segment of the flat coordinates\n * array. If the callback returns a truthy value the function returns that\n * value immediately. Otherwise the function returns `false`.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {function(this: S, import(\"../../coordinate.js\").Coordinate, import(\"../../coordinate.js\").Coordinate): T} callback Function\n *     called for each segment.\n * @param {S=} opt_this The object to be used as the value of 'this'\n *     within callback.\n * @return {T|boolean} Value.\n * @template T,S\n */\nexport function forEach(flatCoordinates, offset, end, stride, callback, opt_this) {\n  const point1 = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n  const point2 = [];\n  let ret;\n  for (; (offset + stride) < end; offset += stride) {\n    point2[0] = flatCoordinates[offset + stride];\n    point2[1] = flatCoordinates[offset + stride + 1];\n    ret = callback.call(opt_this, point1, point2);\n    if (ret) {\n      return ret;\n    }\n    point1[0] = point2[0];\n    point1[1] = point2[1];\n  }\n  return false;\n}\n","/**\n * @module ol/style/Image\n */\nimport {abstract} from '../util.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} opacity\n * @property {boolean} rotateWithView\n * @property {number} rotation\n * @property {number} scale\n */\n\n\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @abstract\n * @api\n */\nclass ImageStyle {\n  /**\n   * @param {Options} options Options.\n   */\n  constructor(options) {\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.opacity_ = options.opacity;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.rotateWithView_ = options.rotateWithView;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.rotation_ = options.rotation;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.scale_ = options.scale;\n\n  }\n\n  /**\n   * Clones the style.\n   * @return {ImageStyle} The cloned style.\n   * @api\n   */\n  clone() {\n    return new ImageStyle({\n      opacity: this.getOpacity(),\n      scale: this.getScale(),\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView()\n    });\n  }\n\n  /**\n   * Get the symbolizer opacity.\n   * @return {number} Opacity.\n   * @api\n   */\n  getOpacity() {\n    return this.opacity_;\n  }\n\n  /**\n   * Determine whether the symbolizer rotates with the map.\n   * @return {boolean} Rotate with map.\n   * @api\n   */\n  getRotateWithView() {\n    return this.rotateWithView_;\n  }\n\n  /**\n   * Get the symoblizer rotation.\n   * @return {number} Rotation.\n   * @api\n   */\n  getRotation() {\n    return this.rotation_;\n  }\n\n  /**\n   * Get the symbolizer scale.\n   * @return {number} Scale.\n   * @api\n   */\n  getScale() {\n    return this.scale_;\n  }\n\n  /**\n   * This method is deprecated and always returns false.\n   * @return {boolean} false.\n   * @deprecated\n   * @api\n   */\n  getSnapToPixel() {\n    return false;\n  }\n\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @abstract\n   * @return {Array<number>} Anchor.\n   */\n  getAnchor() {\n    return abstract();\n  }\n\n  /**\n   * Get the image element for the symbolizer.\n   * @abstract\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n  getImage(pixelRatio) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n  getHitDetectionImage(pixelRatio) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getImageSize() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../size.js\").Size} Size of the hit-detection image.\n   */\n  getHitDetectionImageSize() {\n    return abstract();\n  }\n\n  /**\n   * Get the origin of the symbolizer.\n   * @abstract\n   * @return {Array<number>} Origin.\n   */\n  getOrigin() {\n    return abstract();\n  }\n\n  /**\n   * Get the size of the symbolizer (in pixels).\n   * @abstract\n   * @return {import(\"../size.js\").Size} Size.\n   */\n  getSize() {\n    return abstract();\n  }\n\n  /**\n   * Set the opacity.\n   *\n   * @param {number} opacity Opacity.\n   * @api\n   */\n  setOpacity(opacity) {\n    this.opacity_ = opacity;\n  }\n\n  /**\n   * Set whether to rotate the style with the view.\n   *\n   * @param {boolean} rotateWithView Rotate with map.\n   * @api\n   */\n  setRotateWithView(rotateWithView) {\n    this.rotateWithView_ = rotateWithView;\n  }\n\n  /**\n   * Set the rotation.\n   *\n   * @param {number} rotation Rotation.\n   * @api\n   */\n  setRotation(rotation) {\n    this.rotation_ = rotation;\n  }\n  /**\n   * Set the scale.\n   *\n   * @param {number} scale Scale.\n   * @api\n   */\n  setScale(scale) {\n    this.scale_ = scale;\n  }\n\n  /**\n   * This method is deprecated and does nothing.\n   * @param {boolean} snapToPixel Snap to pixel?\n   * @deprecated\n   * @api\n   */\n  setSnapToPixel(snapToPixel) {}\n\n  /**\n   * @abstract\n   * @param {function(this: T, import(\"../events/Event.js\").default)} listener Listener function.\n   * @param {T} thisArg Value to use as `this` when executing `listener`.\n   * @return {import(\"../events.js\").EventsKey|undefined} Listener key.\n   * @template T\n   */\n  listenImageChange(listener, thisArg) {\n    return abstract();\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n  load() {\n    abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {function(this: T, import(\"../events/Event.js\").default)} listener Listener function.\n   * @param {T} thisArg Value to use as `this` when executing `listener`.\n   * @template T\n   */\n  unlistenImageChange(listener, thisArg) {\n    abstract();\n  }\n}\n\nexport default ImageStyle;\n","/**\n * @module ol/layer/VectorRenderType\n */\n\n/**\n * @enum {string}\n * Render mode for vector layers:\n *  * `'image'`: Vector layers are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'vector'`: Vector layers are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance.\n * @api\n */\nexport default {\n  IMAGE: 'image',\n  VECTOR: 'vector'\n};\n","/**\n * @module ol/geom/flat/length\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Length.\n */\nexport function lineStringLength(flatCoordinates, offset, end, stride) {\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  let length = 0;\n  for (let i = offset + stride; i < end; i += stride) {\n    const x2 = flatCoordinates[i];\n    const y2 = flatCoordinates[i + 1];\n    length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    x1 = x2;\n    y1 = y2;\n  }\n  return length;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Perimeter.\n */\nexport function linearRingLength(flatCoordinates, offset, end, stride) {\n  let perimeter = lineStringLength(flatCoordinates, offset, end, stride);\n  const dx = flatCoordinates[end - stride] - flatCoordinates[offset];\n  const dy = flatCoordinates[end - stride + 1] - flatCoordinates[offset + 1];\n  perimeter += Math.sqrt(dx * dx + dy * dy);\n  return perimeter;\n}\n","/**\n * @module ol/style/TextPlacement\n */\n\n/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link module:ol/geom/LineString~LineString},\n * {@link module:ol/geom/Polygon~Polygon}, {@link module:ol/geom/MultiLineString~MultiLineString} or\n * {@link module:ol/geom/MultiPolygon~MultiPolygon}.\n * @enum {string}\n */\nexport default {\n  POINT: 'point',\n  LINE: 'line'\n};\n","/**\n * @module ol/net\n */\nimport {getUid} from './util.js';\n\n\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {function()=} opt_errback Callback on error.\n * @param {string=} opt_callbackParam Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\nexport function jsonp(url, callback, opt_errback, opt_callbackParam) {\n  const script = document.createElement('script');\n  const key = 'olc_' + getUid(callback);\n  function cleanup() {\n    delete window[key];\n    script.parentNode.removeChild(script);\n  }\n  script.async = true;\n  script.src = url + (url.indexOf('?') == -1 ? '?' : '&') +\n      (opt_callbackParam || 'callback') + '=' + key;\n  const timer = setTimeout(function() {\n    cleanup();\n    if (opt_errback) {\n      opt_errback();\n    }\n  }, 10000);\n  window[key] = function(data) {\n    clearTimeout(timer);\n    cleanup();\n    callback(data);\n  };\n  document.getElementsByTagName('head')[0].appendChild(script);\n}\n","/**\n * @module ol/source/XYZ\n */\n\nimport TileImage from './TileImage.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} [projection='EPSG:3857'] Projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {number} [maxZoom=18] Optional max zoom level.\n * @property {number} [minZoom=0] Optional min zoom level.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service.\n * For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {number|import(\"../size.js\").Size} [tileSize=[256, 256]] The tile size used by the tile service.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] Optional function to get\n * tile URL given a tile coordinate and the projection.\n * Required if url or urls are not provided.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`,\n * and `{z}` placeholders. A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`,\n * may be used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case,\n * {@link module:ol/source/TileImage} can be used with a `tileUrlFunction`\n * such as:\n *\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *        coordinate[1] + '/' + coordinate[2] + '.png';\n *    }\n *\n * @api\n */\nclass XYZ extends TileImage {\n  /**\n   * @param {Options=} opt_options XYZ options.\n   */\n  constructor(opt_options) {\n    const options = opt_options || {};\n    const projection = options.projection !== undefined ?\n      options.projection : 'EPSG:3857';\n\n    const tileGrid = options.tileGrid !== undefined ? options.tileGrid :\n      createXYZ({\n        extent: extentFromProjection(projection),\n        maxZoom: options.maxZoom,\n        minZoom: options.minZoom,\n        tileSize: options.tileSize\n      });\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      opaque: options.opaque,\n      projection: projection,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileGrid: tileGrid,\n      tileLoadFunction: options.tileLoadFunction,\n      tilePixelRatio: options.tilePixelRatio,\n      tileUrlFunction: options.tileUrlFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition,\n      attributionsCollapsible: options.attributionsCollapsible\n    });\n\n  }\n\n}\n\nexport default XYZ;\n","/**\n * @module ol/format/JSONFeature\n */\nimport {abstract} from '../util.js';\nimport FeatureFormat from './Feature.js';\nimport FormatType from './FormatType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for JSON feature formats.\n *\n * @abstract\n */\nclass JSONFeature extends FeatureFormat {\n  constructor() {\n    super();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getType() {\n    return FormatType.JSON;\n  }\n\n  /**\n   * Read a feature.  Only works for a single feature. Use `readFeatures` to\n   * read a feature collection.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   * @api\n   */\n  readFeature(source, opt_options) {\n    return this.readFeatureFromObject(\n      getObject(source), this.getReadOptions(source, opt_options));\n  }\n\n  /**\n   * Read all features.  Works with both a single feature and a feature\n   * collection.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  readFeatures(source, opt_options) {\n    return this.readFeaturesFromObject(\n      getObject(source), this.getReadOptions(source, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n  readFeatureFromObject(object, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n  readFeaturesFromObject(object, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read a geometry.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   * @api\n   */\n  readGeometry(source, opt_options) {\n    return this.readGeometryFromObject(\n      getObject(source), this.getReadOptions(source, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometryFromObject(object, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the projection.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n  readProjection(source) {\n    return this.readProjectionFromObject(getObject(source));\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjectionFromObject(object) {\n    return abstract();\n  }\n\n  /**\n   * Encode a feature as string.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded feature.\n   * @api\n   */\n  writeFeature(feature, opt_options) {\n    return JSON.stringify(this.writeFeatureObject(feature, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {Object} Object.\n   */\n  writeFeatureObject(feature, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded features.\n   * @api\n   */\n  writeFeatures(features, opt_options) {\n    return JSON.stringify(this.writeFeaturesObject(features, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {Object} Object.\n   */\n  writeFeaturesObject(features, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Encode a geometry as string.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded geometry.\n   * @api\n   */\n  writeGeometry(geometry, opt_options) {\n    return JSON.stringify(this.writeGeometryObject(geometry, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {Object} Object.\n   */\n  writeGeometryObject(geometry, opt_options) {\n    return abstract();\n  }\n}\n\n\n/**\n * @param {Document|Node|Object|string} source Source.\n * @return {Object} Object.\n */\nfunction getObject(source) {\n  if (typeof source === 'string') {\n    const object = JSON.parse(source);\n    return object ? /** @type {Object} */ (object) : null;\n  } else if (source !== null) {\n    return source;\n  } else {\n    return null;\n  }\n}\n\n\nexport default JSONFeature;\n","/**\n * @module ol/format/XMLFeature\n */\nimport {abstract} from '../util.js';\nimport {extend} from '../array.js';\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\nimport {isDocument, parse} from '../xml.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for XML feature formats.\n *\n * @abstract\n */\nclass XMLFeature extends FeatureFormat {\n  constructor() {\n    super();\n\n    /**\n     * @type {XMLSerializer}\n     * @private\n     */\n    this.xmlSerializer_ = new XMLSerializer();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getType() {\n    return FormatType.XML;\n  }\n\n  /**\n   * Read a single feature.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   * @api\n   */\n  readFeature(source, opt_options) {\n    if (!source) {\n      return null;\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readFeatureFromDocument(doc, opt_options);\n    } else if (isDocument(source)) {\n      return this.readFeatureFromDocument(/** @type {Document} */ (source), opt_options);\n    } else {\n      return this.readFeatureFromNode(/** @type {Node} */ (source), opt_options);\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n  readFeatureFromDocument(doc, opt_options) {\n    const features = this.readFeaturesFromDocument(doc, opt_options);\n    if (features.length > 0) {\n      return features[0];\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n  readFeatureFromNode(node, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * Read all features from a feature collection.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  readFeatures(source, opt_options) {\n    if (!source) {\n      return [];\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readFeaturesFromDocument(doc, opt_options);\n    } else if (isDocument(source)) {\n      return this.readFeaturesFromDocument(\n        /** @type {Document} */ (source), opt_options);\n    } else {\n      return this.readFeaturesFromNode(/** @type {Node} */ (source), opt_options);\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n  readFeaturesFromDocument(doc, opt_options) {\n    /** @type {Array<import(\"../Feature.js\").default>} */\n    const features = [];\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        extend(features, this.readFeaturesFromNode(n, opt_options));\n      }\n    }\n    return features;\n  }\n\n  /**\n   * @abstract\n   * @param {Node} node Node.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n  readFeaturesFromNode(node, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readGeometry(source, opt_options) {\n    if (!source) {\n      return null;\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readGeometryFromDocument(doc, opt_options);\n    } else if (isDocument(source)) {\n      return this.readGeometryFromDocument(\n        /** @type {Document} */ (source), opt_options);\n    } else {\n      return this.readGeometryFromNode(/** @type {Node} */ (source), opt_options);\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometryFromDocument(doc, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometryFromNode(node, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * Read the projection from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n  readProjection(source) {\n    if (!source) {\n      return null;\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readProjectionFromDocument(doc);\n    } else if (isDocument(source)) {\n      return this.readProjectionFromDocument(/** @type {Document} */ (source));\n    } else {\n      return this.readProjectionFromNode(/** @type {Node} */ (source));\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjectionFromDocument(doc) {\n    return this.dataProjection;\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjectionFromNode(node) {\n    return this.dataProjection;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  writeFeature(feature, opt_options) {\n    const node = this.writeFeatureNode(feature, opt_options);\n    return this.xmlSerializer_.serializeToString(node);\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @protected\n   * @return {Node} Node.\n   */\n  writeFeatureNode(feature, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   * @api\n   */\n  writeFeatures(features, opt_options) {\n    const node = this.writeFeaturesNode(features, opt_options);\n    return this.xmlSerializer_.serializeToString(node);\n  }\n\n  /**\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   */\n  writeFeaturesNode(features, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * @inheritDoc\n   */\n  writeGeometry(geometry, opt_options) {\n    const node = this.writeGeometryNode(geometry, opt_options);\n    return this.xmlSerializer_.serializeToString(node);\n  }\n\n  /**\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   */\n  writeGeometryNode(geometry, opt_options) {\n    return null; // not implemented\n  }\n}\n\n\nexport default XMLFeature;\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.proj4 = factory());\n}(this, (function () { 'use strict';\n\n\tvar globals = function(defs) {\n\t  defs('EPSG:4326', \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\");\n\t  defs('EPSG:4269', \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\");\n\t  defs('EPSG:3857', \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\");\n\n\t  defs.WGS84 = defs['EPSG:4326'];\n\t  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\n\t  defs.GOOGLE = defs['EPSG:3857'];\n\t  defs['EPSG:900913'] = defs['EPSG:3857'];\n\t  defs['EPSG:102113'] = defs['EPSG:3857'];\n\t};\n\n\tvar PJD_3PARAM = 1;\n\tvar PJD_7PARAM = 2;\n\tvar PJD_WGS84 = 4; // WGS84 or equivalent\n\tvar PJD_NODATUM = 5; // WGS84 or equivalent\n\tvar SEC_TO_RAD = 4.84813681109535993589914102357e-6;\n\tvar HALF_PI = Math.PI/2;\n\t// ellipoid pj_set_ell.c\n\tvar SIXTH = 0.1666666666666666667;\n\t/* 1/6 */\n\tvar RA4 = 0.04722222222222222222;\n\t/* 17/360 */\n\tvar RA6 = 0.02215608465608465608;\n\tvar EPSLN = 1.0e-10;\n\t// you'd think you could use Number.EPSILON above but that makes\n\t// Mollweide get into an infinate loop.\n\n\tvar D2R = 0.01745329251994329577;\n\tvar R2D = 57.29577951308232088;\n\tvar FORTPI = Math.PI/4;\n\tvar TWO_PI = Math.PI * 2;\n\t// SPI is slightly greater than Math.PI, so values that exceed the -180..180\n\t// degree range by a tiny amount don't get wrapped. This prevents points that\n\t// have drifted from their original location along the 180th meridian (due to\n\t// floating point error) from changing their sign.\n\tvar SPI = 3.14159265359;\n\n\tvar exports$1 = {};\n\texports$1.greenwich = 0.0; //\"0dE\",\n\texports$1.lisbon = -9.131906111111; //\"9d07'54.862\\\"W\",\n\texports$1.paris = 2.337229166667; //\"2d20'14.025\\\"E\",\n\texports$1.bogota = -74.080916666667; //\"74d04'51.3\\\"W\",\n\texports$1.madrid = -3.687938888889; //\"3d41'16.58\\\"W\",\n\texports$1.rome = 12.452333333333; //\"12d27'8.4\\\"E\",\n\texports$1.bern = 7.439583333333; //\"7d26'22.5\\\"E\",\n\texports$1.jakarta = 106.807719444444; //\"106d48'27.79\\\"E\",\n\texports$1.ferro = -17.666666666667; //\"17d40'W\",\n\texports$1.brussels = 4.367975; //\"4d22'4.71\\\"E\",\n\texports$1.stockholm = 18.058277777778; //\"18d3'29.8\\\"E\",\n\texports$1.athens = 23.7163375; //\"23d42'58.815\\\"E\",\n\texports$1.oslo = 10.722916666667; //\"10d43'22.5\\\"E\"\n\n\tvar units = {\n\t  ft: {to_meter: 0.3048},\n\t  'us-ft': {to_meter: 1200 / 3937}\n\t};\n\n\tvar ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\n\tfunction match(obj, key) {\n\t  if (obj[key]) {\n\t    return obj[key];\n\t  }\n\t  var keys = Object.keys(obj);\n\t  var lkey = key.toLowerCase().replace(ignoredChar, '');\n\t  var i = -1;\n\t  var testkey, processedKey;\n\t  while (++i < keys.length) {\n\t    testkey = keys[i];\n\t    processedKey = testkey.toLowerCase().replace(ignoredChar, '');\n\t    if (processedKey === lkey) {\n\t      return obj[testkey];\n\t    }\n\t  }\n\t}\n\n\tvar parseProj = function(defData) {\n\t  var self = {};\n\t  var paramObj = defData.split('+').map(function(v) {\n\t    return v.trim();\n\t  }).filter(function(a) {\n\t    return a;\n\t  }).reduce(function(p, a) {\n\t    var split = a.split('=');\n\t    split.push(true);\n\t    p[split[0].toLowerCase()] = split[1];\n\t    return p;\n\t  }, {});\n\t  var paramName, paramVal, paramOutname;\n\t  var params = {\n\t    proj: 'projName',\n\t    datum: 'datumCode',\n\t    rf: function(v) {\n\t      self.rf = parseFloat(v);\n\t    },\n\t    lat_0: function(v) {\n\t      self.lat0 = v * D2R;\n\t    },\n\t    lat_1: function(v) {\n\t      self.lat1 = v * D2R;\n\t    },\n\t    lat_2: function(v) {\n\t      self.lat2 = v * D2R;\n\t    },\n\t    lat_ts: function(v) {\n\t      self.lat_ts = v * D2R;\n\t    },\n\t    lon_0: function(v) {\n\t      self.long0 = v * D2R;\n\t    },\n\t    lon_1: function(v) {\n\t      self.long1 = v * D2R;\n\t    },\n\t    lon_2: function(v) {\n\t      self.long2 = v * D2R;\n\t    },\n\t    alpha: function(v) {\n\t      self.alpha = parseFloat(v) * D2R;\n\t    },\n\t    lonc: function(v) {\n\t      self.longc = v * D2R;\n\t    },\n\t    x_0: function(v) {\n\t      self.x0 = parseFloat(v);\n\t    },\n\t    y_0: function(v) {\n\t      self.y0 = parseFloat(v);\n\t    },\n\t    k_0: function(v) {\n\t      self.k0 = parseFloat(v);\n\t    },\n\t    k: function(v) {\n\t      self.k0 = parseFloat(v);\n\t    },\n\t    a: function(v) {\n\t      self.a = parseFloat(v);\n\t    },\n\t    b: function(v) {\n\t      self.b = parseFloat(v);\n\t    },\n\t    r_a: function() {\n\t      self.R_A = true;\n\t    },\n\t    zone: function(v) {\n\t      self.zone = parseInt(v, 10);\n\t    },\n\t    south: function() {\n\t      self.utmSouth = true;\n\t    },\n\t    towgs84: function(v) {\n\t      self.datum_params = v.split(\",\").map(function(a) {\n\t        return parseFloat(a);\n\t      });\n\t    },\n\t    to_meter: function(v) {\n\t      self.to_meter = parseFloat(v);\n\t    },\n\t    units: function(v) {\n\t      self.units = v;\n\t      var unit = match(units, v);\n\t      if (unit) {\n\t        self.to_meter = unit.to_meter;\n\t      }\n\t    },\n\t    from_greenwich: function(v) {\n\t      self.from_greenwich = v * D2R;\n\t    },\n\t    pm: function(v) {\n\t      var pm = match(exports$1, v);\n\t      self.from_greenwich = (pm ? pm : parseFloat(v)) * D2R;\n\t    },\n\t    nadgrids: function(v) {\n\t      if (v === '@null') {\n\t        self.datumCode = 'none';\n\t      }\n\t      else {\n\t        self.nadgrids = v;\n\t      }\n\t    },\n\t    axis: function(v) {\n\t      var legalAxis = \"ewnsud\";\n\t      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\n\t        self.axis = v;\n\t      }\n\t    }\n\t  };\n\t  for (paramName in paramObj) {\n\t    paramVal = paramObj[paramName];\n\t    if (paramName in params) {\n\t      paramOutname = params[paramName];\n\t      if (typeof paramOutname === 'function') {\n\t        paramOutname(paramVal);\n\t      }\n\t      else {\n\t        self[paramOutname] = paramVal;\n\t      }\n\t    }\n\t    else {\n\t      self[paramName] = paramVal;\n\t    }\n\t  }\n\t  if(typeof self.datumCode === 'string' && self.datumCode !== \"WGS84\"){\n\t    self.datumCode = self.datumCode.toLowerCase();\n\t  }\n\t  return self;\n\t};\n\n\tvar NEUTRAL = 1;\n\tvar KEYWORD = 2;\n\tvar NUMBER = 3;\n\tvar QUOTED = 4;\n\tvar AFTERQUOTE = 5;\n\tvar ENDED = -1;\n\tvar whitespace = /\\s/;\n\tvar latin = /[A-Za-z]/;\n\tvar keyword = /[A-Za-z84]/;\n\tvar endThings = /[,\\]]/;\n\tvar digets = /[\\d\\.E\\-\\+]/;\n\t// const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\n\tfunction Parser(text) {\n\t  if (typeof text !== 'string') {\n\t    throw new Error('not a string');\n\t  }\n\t  this.text = text.trim();\n\t  this.level = 0;\n\t  this.place = 0;\n\t  this.root = null;\n\t  this.stack = [];\n\t  this.currentObject = null;\n\t  this.state = NEUTRAL;\n\t}\n\tParser.prototype.readCharicter = function() {\n\t  var char = this.text[this.place++];\n\t  if (this.state !== QUOTED) {\n\t    while (whitespace.test(char)) {\n\t      if (this.place >= this.text.length) {\n\t        return;\n\t      }\n\t      char = this.text[this.place++];\n\t    }\n\t  }\n\t  switch (this.state) {\n\t    case NEUTRAL:\n\t      return this.neutral(char);\n\t    case KEYWORD:\n\t      return this.keyword(char)\n\t    case QUOTED:\n\t      return this.quoted(char);\n\t    case AFTERQUOTE:\n\t      return this.afterquote(char);\n\t    case NUMBER:\n\t      return this.number(char);\n\t    case ENDED:\n\t      return;\n\t  }\n\t};\n\tParser.prototype.afterquote = function(char) {\n\t  if (char === '\"') {\n\t    this.word += '\"';\n\t    this.state = QUOTED;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.word = this.word.trim();\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in afterquote yet, index ' + this.place);\n\t};\n\tParser.prototype.afterItem = function(char) {\n\t  if (char === ',') {\n\t    if (this.word !== null) {\n\t      this.currentObject.push(this.word);\n\t    }\n\t    this.word = null;\n\t    this.state = NEUTRAL;\n\t    return;\n\t  }\n\t  if (char === ']') {\n\t    this.level--;\n\t    if (this.word !== null) {\n\t      this.currentObject.push(this.word);\n\t      this.word = null;\n\t    }\n\t    this.state = NEUTRAL;\n\t    this.currentObject = this.stack.pop();\n\t    if (!this.currentObject) {\n\t      this.state = ENDED;\n\t    }\n\n\t    return;\n\t  }\n\t};\n\tParser.prototype.number = function(char) {\n\t  if (digets.test(char)) {\n\t    this.word += char;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.word = parseFloat(this.word);\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in number yet, index ' + this.place);\n\t};\n\tParser.prototype.quoted = function(char) {\n\t  if (char === '\"') {\n\t    this.state = AFTERQUOTE;\n\t    return;\n\t  }\n\t  this.word += char;\n\t  return;\n\t};\n\tParser.prototype.keyword = function(char) {\n\t  if (keyword.test(char)) {\n\t    this.word += char;\n\t    return;\n\t  }\n\t  if (char === '[') {\n\t    var newObjects = [];\n\t    newObjects.push(this.word);\n\t    this.level++;\n\t    if (this.root === null) {\n\t      this.root = newObjects;\n\t    } else {\n\t      this.currentObject.push(newObjects);\n\t    }\n\t    this.stack.push(this.currentObject);\n\t    this.currentObject = newObjects;\n\t    this.state = NEUTRAL;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in keyword yet, index ' + this.place);\n\t};\n\tParser.prototype.neutral = function(char) {\n\t  if (latin.test(char)) {\n\t    this.word = char;\n\t    this.state = KEYWORD;\n\t    return;\n\t  }\n\t  if (char === '\"') {\n\t    this.word = '';\n\t    this.state = QUOTED;\n\t    return;\n\t  }\n\t  if (digets.test(char)) {\n\t    this.word = char;\n\t    this.state = NUMBER;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in neutral yet, index ' + this.place);\n\t};\n\tParser.prototype.output = function() {\n\t  while (this.place < this.text.length) {\n\t    this.readCharicter();\n\t  }\n\t  if (this.state === ENDED) {\n\t    return this.root;\n\t  }\n\t  throw new Error('unable to parse string \"' +this.text + '\". State is ' + this.state);\n\t};\n\n\tfunction parseString(txt) {\n\t  var parser = new Parser(txt);\n\t  return parser.output();\n\t}\n\n\tfunction mapit(obj, key, value) {\n\t  if (Array.isArray(key)) {\n\t    value.unshift(key);\n\t    key = null;\n\t  }\n\t  var thing = key ? {} : obj;\n\n\t  var out = value.reduce(function(newObj, item) {\n\t    sExpr(item, newObj);\n\t    return newObj\n\t  }, thing);\n\t  if (key) {\n\t    obj[key] = out;\n\t  }\n\t}\n\n\tfunction sExpr(v, obj) {\n\t  if (!Array.isArray(v)) {\n\t    obj[v] = true;\n\t    return;\n\t  }\n\t  var key = v.shift();\n\t  if (key === 'PARAMETER') {\n\t    key = v.shift();\n\t  }\n\t  if (v.length === 1) {\n\t    if (Array.isArray(v[0])) {\n\t      obj[key] = {};\n\t      sExpr(v[0], obj[key]);\n\t      return;\n\t    }\n\t    obj[key] = v[0];\n\t    return;\n\t  }\n\t  if (!v.length) {\n\t    obj[key] = true;\n\t    return;\n\t  }\n\t  if (key === 'TOWGS84') {\n\t    obj[key] = v;\n\t    return;\n\t  }\n\t  if (!Array.isArray(key)) {\n\t    obj[key] = {};\n\t  }\n\n\t  var i;\n\t  switch (key) {\n\t    case 'UNIT':\n\t    case 'PRIMEM':\n\t    case 'VERT_DATUM':\n\t      obj[key] = {\n\t        name: v[0].toLowerCase(),\n\t        convert: v[1]\n\t      };\n\t      if (v.length === 3) {\n\t        sExpr(v[2], obj[key]);\n\t      }\n\t      return;\n\t    case 'SPHEROID':\n\t    case 'ELLIPSOID':\n\t      obj[key] = {\n\t        name: v[0],\n\t        a: v[1],\n\t        rf: v[2]\n\t      };\n\t      if (v.length === 4) {\n\t        sExpr(v[3], obj[key]);\n\t      }\n\t      return;\n\t    case 'PROJECTEDCRS':\n\t    case 'PROJCRS':\n\t    case 'GEOGCS':\n\t    case 'GEOCCS':\n\t    case 'PROJCS':\n\t    case 'LOCAL_CS':\n\t    case 'GEODCRS':\n\t    case 'GEODETICCRS':\n\t    case 'GEODETICDATUM':\n\t    case 'EDATUM':\n\t    case 'ENGINEERINGDATUM':\n\t    case 'VERT_CS':\n\t    case 'VERTCRS':\n\t    case 'VERTICALCRS':\n\t    case 'COMPD_CS':\n\t    case 'COMPOUNDCRS':\n\t    case 'ENGINEERINGCRS':\n\t    case 'ENGCRS':\n\t    case 'FITTED_CS':\n\t    case 'LOCAL_DATUM':\n\t    case 'DATUM':\n\t      v[0] = ['name', v[0]];\n\t      mapit(obj, key, v);\n\t      return;\n\t    default:\n\t      i = -1;\n\t      while (++i < v.length) {\n\t        if (!Array.isArray(v[i])) {\n\t          return sExpr(v, obj[key]);\n\t        }\n\t      }\n\t      return mapit(obj, key, v);\n\t  }\n\t}\n\n\tvar D2R$1 = 0.01745329251994329577;\n\tfunction rename(obj, params) {\n\t  var outName = params[0];\n\t  var inName = params[1];\n\t  if (!(outName in obj) && (inName in obj)) {\n\t    obj[outName] = obj[inName];\n\t    if (params.length === 3) {\n\t      obj[outName] = params[2](obj[outName]);\n\t    }\n\t  }\n\t}\n\n\tfunction d2r(input) {\n\t  return input * D2R$1;\n\t}\n\n\tfunction cleanWKT(wkt) {\n\t  if (wkt.type === 'GEOGCS') {\n\t    wkt.projName = 'longlat';\n\t  } else if (wkt.type === 'LOCAL_CS') {\n\t    wkt.projName = 'identity';\n\t    wkt.local = true;\n\t  } else {\n\t    if (typeof wkt.PROJECTION === 'object') {\n\t      wkt.projName = Object.keys(wkt.PROJECTION)[0];\n\t    } else {\n\t      wkt.projName = wkt.PROJECTION;\n\t    }\n\t  }\n\t  if (wkt.UNIT) {\n\t    wkt.units = wkt.UNIT.name.toLowerCase();\n\t    if (wkt.units === 'metre') {\n\t      wkt.units = 'meter';\n\t    }\n\t    if (wkt.UNIT.convert) {\n\t      if (wkt.type === 'GEOGCS') {\n\t        if (wkt.DATUM && wkt.DATUM.SPHEROID) {\n\t          wkt.to_meter = wkt.UNIT.convert*wkt.DATUM.SPHEROID.a;\n\t        }\n\t      } else {\n\t        wkt.to_meter = wkt.UNIT.convert, 10;\n\t      }\n\t    }\n\t  }\n\t  var geogcs = wkt.GEOGCS;\n\t  if (wkt.type === 'GEOGCS') {\n\t    geogcs = wkt;\n\t  }\n\t  if (geogcs) {\n\t    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\n\t    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\n\t    //}\n\t    if (geogcs.DATUM) {\n\t      wkt.datumCode = geogcs.DATUM.name.toLowerCase();\n\t    } else {\n\t      wkt.datumCode = geogcs.name.toLowerCase();\n\t    }\n\t    if (wkt.datumCode.slice(0, 2) === 'd_') {\n\t      wkt.datumCode = wkt.datumCode.slice(2);\n\t    }\n\t    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {\n\t      wkt.datumCode = 'nzgd49';\n\t    }\n\t    if (wkt.datumCode === 'wgs_1984') {\n\t      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\n\t        wkt.sphere = true;\n\t      }\n\t      wkt.datumCode = 'wgs84';\n\t    }\n\t    if (wkt.datumCode.slice(-6) === '_ferro') {\n\t      wkt.datumCode = wkt.datumCode.slice(0, - 6);\n\t    }\n\t    if (wkt.datumCode.slice(-8) === '_jakarta') {\n\t      wkt.datumCode = wkt.datumCode.slice(0, - 8);\n\t    }\n\t    if (~wkt.datumCode.indexOf('belge')) {\n\t      wkt.datumCode = 'rnb72';\n\t    }\n\t    if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\n\t      wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\n\t      if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\n\t        wkt.ellps = 'intl';\n\t      }\n\n\t      wkt.a = geogcs.DATUM.SPHEROID.a;\n\t      wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\n\t    }\n\n\t    if (geogcs.DATUM && geogcs.DATUM.TOWGS84) {\n\t      wkt.datum_params = geogcs.DATUM.TOWGS84;\n\t    }\n\t    if (~wkt.datumCode.indexOf('osgb_1936')) {\n\t      wkt.datumCode = 'osgb36';\n\t    }\n\t    if (~wkt.datumCode.indexOf('osni_1952')) {\n\t      wkt.datumCode = 'osni52';\n\t    }\n\t    if (~wkt.datumCode.indexOf('tm65')\n\t      || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\n\t      wkt.datumCode = 'ire65';\n\t    }\n\t    if (wkt.datumCode === 'ch1903+') {\n\t      wkt.datumCode = 'ch1903';\n\t    }\n\t    if (~wkt.datumCode.indexOf('israel')) {\n\t      wkt.datumCode = 'isr93';\n\t    }\n\t  }\n\t  if (wkt.b && !isFinite(wkt.b)) {\n\t    wkt.b = wkt.a;\n\t  }\n\n\t  function toMeter(input) {\n\t    var ratio = wkt.to_meter || 1;\n\t    return input * ratio;\n\t  }\n\t  var renamer = function(a) {\n\t    return rename(wkt, a);\n\t  };\n\t  var list = [\n\t    ['standard_parallel_1', 'Standard_Parallel_1'],\n\t    ['standard_parallel_2', 'Standard_Parallel_2'],\n\t    ['false_easting', 'False_Easting'],\n\t    ['false_northing', 'False_Northing'],\n\t    ['central_meridian', 'Central_Meridian'],\n\t    ['latitude_of_origin', 'Latitude_Of_Origin'],\n\t    ['latitude_of_origin', 'Central_Parallel'],\n\t    ['scale_factor', 'Scale_Factor'],\n\t    ['k0', 'scale_factor'],\n\t    ['latitude_of_center', 'Latitude_Of_Center'],\n\t    ['latitude_of_center', 'Latitude_of_center'],\n\t    ['lat0', 'latitude_of_center', d2r],\n\t    ['longitude_of_center', 'Longitude_Of_Center'],\n\t    ['longitude_of_center', 'Longitude_of_center'],\n\t    ['longc', 'longitude_of_center', d2r],\n\t    ['x0', 'false_easting', toMeter],\n\t    ['y0', 'false_northing', toMeter],\n\t    ['long0', 'central_meridian', d2r],\n\t    ['lat0', 'latitude_of_origin', d2r],\n\t    ['lat0', 'standard_parallel_1', d2r],\n\t    ['lat1', 'standard_parallel_1', d2r],\n\t    ['lat2', 'standard_parallel_2', d2r],\n\t    ['azimuth', 'Azimuth'],\n\t    ['alpha', 'azimuth', d2r],\n\t    ['srsCode', 'name']\n\t  ];\n\t  list.forEach(renamer);\n\t  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === 'Lambert_Azimuthal_Equal_Area')) {\n\t    wkt.long0 = wkt.longc;\n\t  }\n\t  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {\n\t    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\n\t    wkt.lat_ts = wkt.lat1;\n\t  }\n\t}\n\tvar wkt = function(wkt) {\n\t  var lisp = parseString(wkt);\n\t  var type = lisp.shift();\n\t  var name = lisp.shift();\n\t  lisp.unshift(['name', name]);\n\t  lisp.unshift(['type', type]);\n\t  var obj = {};\n\t  sExpr(lisp, obj);\n\t  cleanWKT(obj);\n\t  return obj;\n\t};\n\n\tfunction defs(name) {\n\t  /*global console*/\n\t  var that = this;\n\t  if (arguments.length === 2) {\n\t    var def = arguments[1];\n\t    if (typeof def === 'string') {\n\t      if (def.charAt(0) === '+') {\n\t        defs[name] = parseProj(arguments[1]);\n\t      }\n\t      else {\n\t        defs[name] = wkt(arguments[1]);\n\t      }\n\t    } else {\n\t      defs[name] = def;\n\t    }\n\t  }\n\t  else if (arguments.length === 1) {\n\t    if (Array.isArray(name)) {\n\t      return name.map(function(v) {\n\t        if (Array.isArray(v)) {\n\t          defs.apply(that, v);\n\t        }\n\t        else {\n\t          defs(v);\n\t        }\n\t      });\n\t    }\n\t    else if (typeof name === 'string') {\n\t      if (name in defs) {\n\t        return defs[name];\n\t      }\n\t    }\n\t    else if ('EPSG' in name) {\n\t      defs['EPSG:' + name.EPSG] = name;\n\t    }\n\t    else if ('ESRI' in name) {\n\t      defs['ESRI:' + name.ESRI] = name;\n\t    }\n\t    else if ('IAU2000' in name) {\n\t      defs['IAU2000:' + name.IAU2000] = name;\n\t    }\n\t    else {\n\t      console.log(name);\n\t    }\n\t    return;\n\t  }\n\n\n\t}\n\tglobals(defs);\n\n\tfunction testObj(code){\n\t  return typeof code === 'string';\n\t}\n\tfunction testDef(code){\n\t  return code in defs;\n\t}\n\t var codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS','GEOCCS','PROJCS','LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\n\tfunction testWKT(code){\n\t  return codeWords.some(function (word) {\n\t    return code.indexOf(word) > -1;\n\t  });\n\t}\n\tvar codes = ['3857', '900913', '3785', '102113'];\n\tfunction checkMercator(item) {\n\t  var auth = match(item, 'authority');\n\t  if (!auth) {\n\t    return;\n\t  }\n\t  var code = match(auth, 'epsg');\n\t  return code && codes.indexOf(code) > -1;\n\t}\n\tfunction checkProjStr(item) {\n\t  var ext = match(item, 'extension');\n\t  if (!ext) {\n\t    return;\n\t  }\n\t  return match(ext, 'proj4');\n\t}\n\tfunction testProj(code){\n\t  return code[0] === '+';\n\t}\n\tfunction parse(code){\n\t  if (testObj(code)) {\n\t    //check to see if this is a WKT string\n\t    if (testDef(code)) {\n\t      return defs[code];\n\t    }\n\t    if (testWKT(code)) {\n\t      var out = wkt(code);\n\t      // test of spetial case, due to this being a very common and often malformed\n\t      if (checkMercator(out)) {\n\t        return defs['EPSG:3857'];\n\t      }\n\t      var maybeProjStr = checkProjStr(out);\n\t      if (maybeProjStr) {\n\t        return parseProj(maybeProjStr);\n\t      }\n\t      return out;\n\t    }\n\t    if (testProj(code)) {\n\t      return parseProj(code);\n\t    }\n\t  }else{\n\t    return code;\n\t  }\n\t}\n\n\tvar extend = function(destination, source) {\n\t  destination = destination || {};\n\t  var value, property;\n\t  if (!source) {\n\t    return destination;\n\t  }\n\t  for (property in source) {\n\t    value = source[property];\n\t    if (value !== undefined) {\n\t      destination[property] = value;\n\t    }\n\t  }\n\t  return destination;\n\t};\n\n\tvar msfnz = function(eccent, sinphi, cosphi) {\n\t  var con = eccent * sinphi;\n\t  return cosphi / (Math.sqrt(1 - con * con));\n\t};\n\n\tvar sign = function(x) {\n\t  return x<0 ? -1 : 1;\n\t};\n\n\tvar adjust_lon = function(x) {\n\t  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n\t};\n\n\tvar tsfnz = function(eccent, phi, sinphi) {\n\t  var con = eccent * sinphi;\n\t  var com = 0.5 * eccent;\n\t  con = Math.pow(((1 - con) / (1 + con)), com);\n\t  return (Math.tan(0.5 * (HALF_PI - phi)) / con);\n\t};\n\n\tvar phi2z = function(eccent, ts) {\n\t  var eccnth = 0.5 * eccent;\n\t  var con, dphi;\n\t  var phi = HALF_PI - 2 * Math.atan(ts);\n\t  for (var i = 0; i <= 15; i++) {\n\t    con = eccent * Math.sin(phi);\n\t    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\n\t    phi += dphi;\n\t    if (Math.abs(dphi) <= 0.0000000001) {\n\t      return phi;\n\t    }\n\t  }\n\t  //console.log(\"phi2z has NoConvergence\");\n\t  return -9999;\n\t};\n\n\tfunction init() {\n\t  var con = this.b / this.a;\n\t  this.es = 1 - con * con;\n\t  if(!('x0' in this)){\n\t    this.x0 = 0;\n\t  }\n\t  if(!('y0' in this)){\n\t    this.y0 = 0;\n\t  }\n\t  this.e = Math.sqrt(this.es);\n\t  if (this.lat_ts) {\n\t    if (this.sphere) {\n\t      this.k0 = Math.cos(this.lat_ts);\n\t    }\n\t    else {\n\t      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n\t    }\n\t  }\n\t  else {\n\t    if (!this.k0) {\n\t      if (this.k) {\n\t        this.k0 = this.k;\n\t      }\n\t      else {\n\t        this.k0 = 1;\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/* Mercator forward equations--mapping lat,long to x,y\n\t  --------------------------------------------------*/\n\n\tfunction forward(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  // convert to radians\n\t  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {\n\t    return null;\n\t  }\n\n\t  var x, y;\n\t  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n\t    return null;\n\t  }\n\t  else {\n\t    if (this.sphere) {\n\t      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n\t      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));\n\t    }\n\t    else {\n\t      var sinphi = Math.sin(lat);\n\t      var ts = tsfnz(this.e, lat, sinphi);\n\t      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n\t      y = this.y0 - this.a * this.k0 * Math.log(ts);\n\t    }\n\t    p.x = x;\n\t    p.y = y;\n\t    return p;\n\t  }\n\t}\n\n\t/* Mercator inverse equations--mapping x,y to lat/long\n\t  --------------------------------------------------*/\n\tfunction inverse(p) {\n\n\t  var x = p.x - this.x0;\n\t  var y = p.y - this.y0;\n\t  var lon, lat;\n\n\t  if (this.sphere) {\n\t    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\n\t  }\n\t  else {\n\t    var ts = Math.exp(-y / (this.a * this.k0));\n\t    lat = phi2z(this.e, ts);\n\t    if (lat === -9999) {\n\t      return null;\n\t    }\n\t  }\n\t  lon = adjust_lon(this.long0 + x / (this.a * this.k0));\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$1 = [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"];\n\tvar merc = {\n\t  init: init,\n\t  forward: forward,\n\t  inverse: inverse,\n\t  names: names$1\n\t};\n\n\tfunction init$1() {\n\t  //no-op for longlat\n\t}\n\n\tfunction identity(pt) {\n\t  return pt;\n\t}\n\tvar names$2 = [\"longlat\", \"identity\"];\n\tvar longlat = {\n\t  init: init$1,\n\t  forward: identity,\n\t  inverse: identity,\n\t  names: names$2\n\t};\n\n\tvar projs = [merc, longlat];\n\tvar names = {};\n\tvar projStore = [];\n\n\tfunction add(proj, i) {\n\t  var len = projStore.length;\n\t  if (!proj.names) {\n\t    console.log(i);\n\t    return true;\n\t  }\n\t  projStore[len] = proj;\n\t  proj.names.forEach(function(n) {\n\t    names[n.toLowerCase()] = len;\n\t  });\n\t  return this;\n\t}\n\n\tfunction get(name) {\n\t  if (!name) {\n\t    return false;\n\t  }\n\t  var n = name.toLowerCase();\n\t  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {\n\t    return projStore[names[n]];\n\t  }\n\t}\n\n\tfunction start() {\n\t  projs.forEach(add);\n\t}\n\tvar projections = {\n\t  start: start,\n\t  add: add,\n\t  get: get\n\t};\n\n\tvar exports$2 = {};\n\texports$2.MERIT = {\n\t  a: 6378137.0,\n\t  rf: 298.257,\n\t  ellipseName: \"MERIT 1983\"\n\t};\n\n\texports$2.SGS85 = {\n\t  a: 6378136.0,\n\t  rf: 298.257,\n\t  ellipseName: \"Soviet Geodetic System 85\"\n\t};\n\n\texports$2.GRS80 = {\n\t  a: 6378137.0,\n\t  rf: 298.257222101,\n\t  ellipseName: \"GRS 1980(IUGG, 1980)\"\n\t};\n\n\texports$2.IAU76 = {\n\t  a: 6378140.0,\n\t  rf: 298.257,\n\t  ellipseName: \"IAU 1976\"\n\t};\n\n\texports$2.airy = {\n\t  a: 6377563.396,\n\t  b: 6356256.910,\n\t  ellipseName: \"Airy 1830\"\n\t};\n\n\texports$2.APL4 = {\n\t  a: 6378137,\n\t  rf: 298.25,\n\t  ellipseName: \"Appl. Physics. 1965\"\n\t};\n\n\texports$2.NWL9D = {\n\t  a: 6378145.0,\n\t  rf: 298.25,\n\t  ellipseName: \"Naval Weapons Lab., 1965\"\n\t};\n\n\texports$2.mod_airy = {\n\t  a: 6377340.189,\n\t  b: 6356034.446,\n\t  ellipseName: \"Modified Airy\"\n\t};\n\n\texports$2.andrae = {\n\t  a: 6377104.43,\n\t  rf: 300.0,\n\t  ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\n\t};\n\n\texports$2.aust_SA = {\n\t  a: 6378160.0,\n\t  rf: 298.25,\n\t  ellipseName: \"Australian Natl & S. Amer. 1969\"\n\t};\n\n\texports$2.GRS67 = {\n\t  a: 6378160.0,\n\t  rf: 298.2471674270,\n\t  ellipseName: \"GRS 67(IUGG 1967)\"\n\t};\n\n\texports$2.bessel = {\n\t  a: 6377397.155,\n\t  rf: 299.1528128,\n\t  ellipseName: \"Bessel 1841\"\n\t};\n\n\texports$2.bess_nam = {\n\t  a: 6377483.865,\n\t  rf: 299.1528128,\n\t  ellipseName: \"Bessel 1841 (Namibia)\"\n\t};\n\n\texports$2.clrk66 = {\n\t  a: 6378206.4,\n\t  b: 6356583.8,\n\t  ellipseName: \"Clarke 1866\"\n\t};\n\n\texports$2.clrk80 = {\n\t  a: 6378249.145,\n\t  rf: 293.4663,\n\t  ellipseName: \"Clarke 1880 mod.\"\n\t};\n\n\texports$2.clrk58 = {\n\t  a: 6378293.645208759,\n\t  rf: 294.2606763692654,\n\t  ellipseName: \"Clarke 1858\"\n\t};\n\n\texports$2.CPM = {\n\t  a: 6375738.7,\n\t  rf: 334.29,\n\t  ellipseName: \"Comm. des Poids et Mesures 1799\"\n\t};\n\n\texports$2.delmbr = {\n\t  a: 6376428.0,\n\t  rf: 311.5,\n\t  ellipseName: \"Delambre 1810 (Belgium)\"\n\t};\n\n\texports$2.engelis = {\n\t  a: 6378136.05,\n\t  rf: 298.2566,\n\t  ellipseName: \"Engelis 1985\"\n\t};\n\n\texports$2.evrst30 = {\n\t  a: 6377276.345,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1830\"\n\t};\n\n\texports$2.evrst48 = {\n\t  a: 6377304.063,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1948\"\n\t};\n\n\texports$2.evrst56 = {\n\t  a: 6377301.243,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1956\"\n\t};\n\n\texports$2.evrst69 = {\n\t  a: 6377295.664,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1969\"\n\t};\n\n\texports$2.evrstSS = {\n\t  a: 6377298.556,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest (Sabah & Sarawak)\"\n\t};\n\n\texports$2.fschr60 = {\n\t  a: 6378166.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Fischer (Mercury Datum) 1960\"\n\t};\n\n\texports$2.fschr60m = {\n\t  a: 6378155.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Fischer 1960\"\n\t};\n\n\texports$2.fschr68 = {\n\t  a: 6378150.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Fischer 1968\"\n\t};\n\n\texports$2.helmert = {\n\t  a: 6378200.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Helmert 1906\"\n\t};\n\n\texports$2.hough = {\n\t  a: 6378270.0,\n\t  rf: 297.0,\n\t  ellipseName: \"Hough\"\n\t};\n\n\texports$2.intl = {\n\t  a: 6378388.0,\n\t  rf: 297.0,\n\t  ellipseName: \"International 1909 (Hayford)\"\n\t};\n\n\texports$2.kaula = {\n\t  a: 6378163.0,\n\t  rf: 298.24,\n\t  ellipseName: \"Kaula 1961\"\n\t};\n\n\texports$2.lerch = {\n\t  a: 6378139.0,\n\t  rf: 298.257,\n\t  ellipseName: \"Lerch 1979\"\n\t};\n\n\texports$2.mprts = {\n\t  a: 6397300.0,\n\t  rf: 191.0,\n\t  ellipseName: \"Maupertius 1738\"\n\t};\n\n\texports$2.new_intl = {\n\t  a: 6378157.5,\n\t  b: 6356772.2,\n\t  ellipseName: \"New International 1967\"\n\t};\n\n\texports$2.plessis = {\n\t  a: 6376523.0,\n\t  rf: 6355863.0,\n\t  ellipseName: \"Plessis 1817 (France)\"\n\t};\n\n\texports$2.krass = {\n\t  a: 6378245.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Krassovsky, 1942\"\n\t};\n\n\texports$2.SEasia = {\n\t  a: 6378155.0,\n\t  b: 6356773.3205,\n\t  ellipseName: \"Southeast Asia\"\n\t};\n\n\texports$2.walbeck = {\n\t  a: 6376896.0,\n\t  b: 6355834.8467,\n\t  ellipseName: \"Walbeck\"\n\t};\n\n\texports$2.WGS60 = {\n\t  a: 6378165.0,\n\t  rf: 298.3,\n\t  ellipseName: \"WGS 60\"\n\t};\n\n\texports$2.WGS66 = {\n\t  a: 6378145.0,\n\t  rf: 298.25,\n\t  ellipseName: \"WGS 66\"\n\t};\n\n\texports$2.WGS7 = {\n\t  a: 6378135.0,\n\t  rf: 298.26,\n\t  ellipseName: \"WGS 72\"\n\t};\n\n\tvar WGS84 = exports$2.WGS84 = {\n\t  a: 6378137.0,\n\t  rf: 298.257223563,\n\t  ellipseName: \"WGS 84\"\n\t};\n\n\texports$2.sphere = {\n\t  a: 6370997.0,\n\t  b: 6370997.0,\n\t  ellipseName: \"Normal Sphere (r=6370997)\"\n\t};\n\n\tfunction eccentricity(a, b, rf, R_A) {\n\t  var a2 = a * a; // used in geocentric\n\t  var b2 = b * b; // used in geocentric\n\t  var es = (a2 - b2) / a2; // e ^ 2\n\t  var e = 0;\n\t  if (R_A) {\n\t    a *= 1 - es * (SIXTH + es * (RA4 + es * RA6));\n\t    a2 = a * a;\n\t    es = 0;\n\t  } else {\n\t    e = Math.sqrt(es); // eccentricity\n\t  }\n\t  var ep2 = (a2 - b2) / b2; // used in geocentric\n\t  return {\n\t    es: es,\n\t    e: e,\n\t    ep2: ep2\n\t  };\n\t}\n\tfunction sphere(a, b, rf, ellps, sphere) {\n\t  if (!a) { // do we have an ellipsoid?\n\t    var ellipse = match(exports$2, ellps);\n\t    if (!ellipse) {\n\t      ellipse = WGS84;\n\t    }\n\t    a = ellipse.a;\n\t    b = ellipse.b;\n\t    rf = ellipse.rf;\n\t  }\n\n\t  if (rf && !b) {\n\t    b = (1.0 - 1.0 / rf) * a;\n\t  }\n\t  if (rf === 0 || Math.abs(a - b) < EPSLN) {\n\t    sphere = true;\n\t    b = a;\n\t  }\n\t  return {\n\t    a: a,\n\t    b: b,\n\t    rf: rf,\n\t    sphere: sphere\n\t  };\n\t}\n\n\tvar exports$3 = {};\n\texports$3.wgs84 = {\n\t  towgs84: \"0,0,0\",\n\t  ellipse: \"WGS84\",\n\t  datumName: \"WGS84\"\n\t};\n\n\texports$3.ch1903 = {\n\t  towgs84: \"674.374,15.056,405.346\",\n\t  ellipse: \"bessel\",\n\t  datumName: \"swiss\"\n\t};\n\n\texports$3.ggrs87 = {\n\t  towgs84: \"-199.87,74.79,246.62\",\n\t  ellipse: \"GRS80\",\n\t  datumName: \"Greek_Geodetic_Reference_System_1987\"\n\t};\n\n\texports$3.nad83 = {\n\t  towgs84: \"0,0,0\",\n\t  ellipse: \"GRS80\",\n\t  datumName: \"North_American_Datum_1983\"\n\t};\n\n\texports$3.nad27 = {\n\t  nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\n\t  ellipse: \"clrk66\",\n\t  datumName: \"North_American_Datum_1927\"\n\t};\n\n\texports$3.potsdam = {\n\t  towgs84: \"606.0,23.0,413.0\",\n\t  ellipse: \"bessel\",\n\t  datumName: \"Potsdam Rauenberg 1950 DHDN\"\n\t};\n\n\texports$3.carthage = {\n\t  towgs84: \"-263.0,6.0,431.0\",\n\t  ellipse: \"clark80\",\n\t  datumName: \"Carthage 1934 Tunisia\"\n\t};\n\n\texports$3.hermannskogel = {\n\t  towgs84: \"653.0,-212.0,449.0\",\n\t  ellipse: \"bessel\",\n\t  datumName: \"Hermannskogel\"\n\t};\n\n\texports$3.osni52 = {\n\t  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n\t  ellipse: \"airy\",\n\t  datumName: \"Irish National\"\n\t};\n\n\texports$3.ire65 = {\n\t  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n\t  ellipse: \"mod_airy\",\n\t  datumName: \"Ireland 1965\"\n\t};\n\n\texports$3.rassadiran = {\n\t  towgs84: \"-133.63,-157.5,-158.62\",\n\t  ellipse: \"intl\",\n\t  datumName: \"Rassadiran\"\n\t};\n\n\texports$3.nzgd49 = {\n\t  towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\n\t  ellipse: \"intl\",\n\t  datumName: \"New Zealand Geodetic Datum 1949\"\n\t};\n\n\texports$3.osgb36 = {\n\t  towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\n\t  ellipse: \"airy\",\n\t  datumName: \"Airy 1830\"\n\t};\n\n\texports$3.s_jtsk = {\n\t  towgs84: \"589,76,480\",\n\t  ellipse: 'bessel',\n\t  datumName: 'S-JTSK (Ferro)'\n\t};\n\n\texports$3.beduaram = {\n\t  towgs84: '-106,-87,188',\n\t  ellipse: 'clrk80',\n\t  datumName: 'Beduaram'\n\t};\n\n\texports$3.gunung_segara = {\n\t  towgs84: '-403,684,41',\n\t  ellipse: 'bessel',\n\t  datumName: 'Gunung Segara Jakarta'\n\t};\n\n\texports$3.rnb72 = {\n\t  towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\n\t  ellipse: \"intl\",\n\t  datumName: \"Reseau National Belge 1972\"\n\t};\n\n\tfunction datum(datumCode, datum_params, a, b, es, ep2) {\n\t  var out = {};\n\n\t  if (datumCode === undefined || datumCode === 'none') {\n\t    out.datum_type = PJD_NODATUM;\n\t  } else {\n\t    out.datum_type = PJD_WGS84;\n\t  }\n\n\t  if (datum_params) {\n\t    out.datum_params = datum_params.map(parseFloat);\n\t    if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\n\t      out.datum_type = PJD_3PARAM;\n\t    }\n\t    if (out.datum_params.length > 3) {\n\t      if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\n\t        out.datum_type = PJD_7PARAM;\n\t        out.datum_params[3] *= SEC_TO_RAD;\n\t        out.datum_params[4] *= SEC_TO_RAD;\n\t        out.datum_params[5] *= SEC_TO_RAD;\n\t        out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\n\t      }\n\t    }\n\t  }\n\n\t  out.a = a; //datum object also uses these values\n\t  out.b = b;\n\t  out.es = es;\n\t  out.ep2 = ep2;\n\t  return out;\n\t}\n\n\tfunction Projection(srsCode,callback) {\n\t  if (!(this instanceof Projection)) {\n\t    return new Projection(srsCode);\n\t  }\n\t  callback = callback || function(error){\n\t    if(error){\n\t      throw error;\n\t    }\n\t  };\n\t  var json = parse(srsCode);\n\t  if(typeof json !== 'object'){\n\t    callback(srsCode);\n\t    return;\n\t  }\n\t  var ourProj = Projection.projections.get(json.projName);\n\t  if(!ourProj){\n\t    callback(srsCode);\n\t    return;\n\t  }\n\t  if (json.datumCode && json.datumCode !== 'none') {\n\t    var datumDef = match(exports$3, json.datumCode);\n\t    if (datumDef) {\n\t      json.datum_params = datumDef.towgs84 ? datumDef.towgs84.split(',') : null;\n\t      json.ellps = datumDef.ellipse;\n\t      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\n\t    }\n\t  }\n\t  json.k0 = json.k0 || 1.0;\n\t  json.axis = json.axis || 'enu';\n\t  json.ellps = json.ellps || 'wgs84';\n\t  var sphere_ = sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\n\t  var ecc = eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\n\t  var datumObj = json.datum || datum(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2);\n\n\t  extend(this, json); // transfer everything over from the projection because we don't know what we'll need\n\t  extend(this, ourProj); // transfer all the methods from the projection\n\n\t  // copy the 4 things over we calulated in deriveConstants.sphere\n\t  this.a = sphere_.a;\n\t  this.b = sphere_.b;\n\t  this.rf = sphere_.rf;\n\t  this.sphere = sphere_.sphere;\n\n\t  // copy the 3 things we calculated in deriveConstants.eccentricity\n\t  this.es = ecc.es;\n\t  this.e = ecc.e;\n\t  this.ep2 = ecc.ep2;\n\n\t  // add in the datum object\n\t  this.datum = datumObj;\n\n\t  // init the projection\n\t  this.init();\n\n\t  // legecy callback from back in the day when it went to spatialreference.org\n\t  callback(null, this);\n\n\t}\n\tProjection.projections = projections;\n\tProjection.projections.start();\n\n\t'use strict';\n\tfunction compareDatums(source, dest) {\n\t  if (source.datum_type !== dest.datum_type) {\n\t    return false; // false, datums are not equal\n\t  } else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\n\t    // the tolerance for es is to ensure that GRS80 and WGS84\n\t    // are considered identical\n\t    return false;\n\t  } else if (source.datum_type === PJD_3PARAM) {\n\t    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\n\t  } else if (source.datum_type === PJD_7PARAM) {\n\t    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\n\t  } else {\n\t    return true; // datums are equal\n\t  }\n\t} // cs_compare_datums()\n\n\t/*\n\t * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\n\t * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\n\t * according to the current ellipsoid parameters.\n\t *\n\t *    Latitude  : Geodetic latitude in radians                     (input)\n\t *    Longitude : Geodetic longitude in radians                    (input)\n\t *    Height    : Geodetic height, in meters                       (input)\n\t *    X         : Calculated Geocentric X coordinate, in meters    (output)\n\t *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\n\t *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\n\t *\n\t */\n\tfunction geodeticToGeocentric(p, es, a) {\n\t  var Longitude = p.x;\n\t  var Latitude = p.y;\n\t  var Height = p.z ? p.z : 0; //Z value not always supplied\n\n\t  var Rn; /*  Earth radius at location  */\n\t  var Sin_Lat; /*  Math.sin(Latitude)  */\n\t  var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\n\t  var Cos_Lat; /*  Math.cos(Latitude)  */\n\n\t  /*\n\t   ** Don't blow up if Latitude is just a little out of the value\n\t   ** range as it may just be a rounding issue.  Also removed longitude\n\t   ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\n\t   */\n\t  if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {\n\t    Latitude = -HALF_PI;\n\t  } else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {\n\t    Latitude = HALF_PI;\n\t  } else if (Latitude < -HALF_PI) {\n\t    /* Latitude out of range */\n\t    //..reportError('geocent:lat out of range:' + Latitude);\n\t    return { x: -Infinity, y: -Infinity, z: p.z };\n\t  } else if (Latitude > HALF_PI) {\n\t    /* Latitude out of range */\n\t    return { x: Infinity, y: Infinity, z: p.z };\n\t  }\n\n\t  if (Longitude > Math.PI) {\n\t    Longitude -= (2 * Math.PI);\n\t  }\n\t  Sin_Lat = Math.sin(Latitude);\n\t  Cos_Lat = Math.cos(Latitude);\n\t  Sin2_Lat = Sin_Lat * Sin_Lat;\n\t  Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\n\t  return {\n\t    x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\n\t    y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\n\t    z: ((Rn * (1 - es)) + Height) * Sin_Lat\n\t  };\n\t} // cs_geodetic_to_geocentric()\n\n\tfunction geocentricToGeodetic(p, es, a, b) {\n\t  /* local defintions and variables */\n\t  /* end-criterium of loop, accuracy of sin(Latitude) */\n\t  var genau = 1e-12;\n\t  var genau2 = (genau * genau);\n\t  var maxiter = 30;\n\n\t  var P; /* distance between semi-minor axis and location */\n\t  var RR; /* distance between center and location */\n\t  var CT; /* sin of geocentric latitude */\n\t  var ST; /* cos of geocentric latitude */\n\t  var RX;\n\t  var RK;\n\t  var RN; /* Earth radius at location */\n\t  var CPHI0; /* cos of start or old geodetic latitude in iterations */\n\t  var SPHI0; /* sin of start or old geodetic latitude in iterations */\n\t  var CPHI; /* cos of searched geodetic latitude */\n\t  var SPHI; /* sin of searched geodetic latitude */\n\t  var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\n\t  var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\n\n\t  var X = p.x;\n\t  var Y = p.y;\n\t  var Z = p.z ? p.z : 0.0; //Z value not always supplied\n\t  var Longitude;\n\t  var Latitude;\n\t  var Height;\n\n\t  P = Math.sqrt(X * X + Y * Y);\n\t  RR = Math.sqrt(X * X + Y * Y + Z * Z);\n\n\t  /*      special cases for latitude and longitude */\n\t  if (P / a < genau) {\n\n\t    /*  special case, if P=0. (X=0., Y=0.) */\n\t    Longitude = 0.0;\n\n\t    /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\n\t     *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\n\t    if (RR / a < genau) {\n\t      Latitude = HALF_PI;\n\t      Height = -b;\n\t      return {\n\t        x: p.x,\n\t        y: p.y,\n\t        z: p.z\n\t      };\n\t    }\n\t  } else {\n\t    /*  ellipsoidal (geodetic) longitude\n\t     *  interval: -PI < Longitude <= +PI */\n\t    Longitude = Math.atan2(Y, X);\n\t  }\n\n\t  /* --------------------------------------------------------------\n\t   * Following iterative algorithm was developped by\n\t   * \"Institut for Erdmessung\", University of Hannover, July 1988.\n\t   * Internet: www.ife.uni-hannover.de\n\t   * Iterative computation of CPHI,SPHI and Height.\n\t   * Iteration of CPHI and SPHI to 10**-12 radian resp.\n\t   * 2*10**-7 arcsec.\n\t   * --------------------------------------------------------------\n\t   */\n\t  CT = Z / RR;\n\t  ST = P / RR;\n\t  RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\n\t  CPHI0 = ST * (1.0 - es) * RX;\n\t  SPHI0 = CT * RX;\n\t  iter = 0;\n\n\t  /* loop to find sin(Latitude) resp. Latitude\n\t   * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\n\t  do {\n\t    iter++;\n\t    RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\n\n\t    /*  ellipsoidal (geodetic) height */\n\t    Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\n\n\t    RK = es * RN / (RN + Height);\n\t    RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\n\t    CPHI = ST * (1.0 - RK) * RX;\n\t    SPHI = CT * RX;\n\t    SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\n\t    CPHI0 = CPHI;\n\t    SPHI0 = SPHI;\n\t  }\n\t  while (SDPHI * SDPHI > genau2 && iter < maxiter);\n\n\t  /*      ellipsoidal (geodetic) latitude */\n\t  Latitude = Math.atan(SPHI / Math.abs(CPHI));\n\t  return {\n\t    x: Longitude,\n\t    y: Latitude,\n\t    z: Height\n\t  };\n\t} // cs_geocentric_to_geodetic()\n\n\t/****************************************************************/\n\t// pj_geocentic_to_wgs84( p )\n\t//  p = point to transform in geocentric coordinates (x,y,z)\n\n\n\t/** point object, nothing fancy, just allows values to be\n\t    passed back and forth by reference rather than by value.\n\t    Other point classes may be used as long as they have\n\t    x and y properties, which will get modified in the transform method.\n\t*/\n\tfunction geocentricToWgs84(p, datum_type, datum_params) {\n\n\t  if (datum_type === PJD_3PARAM) {\n\t    // if( x[io] === HUGE_VAL )\n\t    //    continue;\n\t    return {\n\t      x: p.x + datum_params[0],\n\t      y: p.y + datum_params[1],\n\t      z: p.z + datum_params[2],\n\t    };\n\t  } else if (datum_type === PJD_7PARAM) {\n\t    var Dx_BF = datum_params[0];\n\t    var Dy_BF = datum_params[1];\n\t    var Dz_BF = datum_params[2];\n\t    var Rx_BF = datum_params[3];\n\t    var Ry_BF = datum_params[4];\n\t    var Rz_BF = datum_params[5];\n\t    var M_BF = datum_params[6];\n\t    // if( x[io] === HUGE_VAL )\n\t    //    continue;\n\t    return {\n\t      x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\n\t      y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\n\t      z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\n\t    };\n\t  }\n\t} // cs_geocentric_to_wgs84\n\n\t/****************************************************************/\n\t// pj_geocentic_from_wgs84()\n\t//  coordinate system definition,\n\t//  point to transform in geocentric coordinates (x,y,z)\n\tfunction geocentricFromWgs84(p, datum_type, datum_params) {\n\n\t  if (datum_type === PJD_3PARAM) {\n\t    //if( x[io] === HUGE_VAL )\n\t    //    continue;\n\t    return {\n\t      x: p.x - datum_params[0],\n\t      y: p.y - datum_params[1],\n\t      z: p.z - datum_params[2],\n\t    };\n\n\t  } else if (datum_type === PJD_7PARAM) {\n\t    var Dx_BF = datum_params[0];\n\t    var Dy_BF = datum_params[1];\n\t    var Dz_BF = datum_params[2];\n\t    var Rx_BF = datum_params[3];\n\t    var Ry_BF = datum_params[4];\n\t    var Rz_BF = datum_params[5];\n\t    var M_BF = datum_params[6];\n\t    var x_tmp = (p.x - Dx_BF) / M_BF;\n\t    var y_tmp = (p.y - Dy_BF) / M_BF;\n\t    var z_tmp = (p.z - Dz_BF) / M_BF;\n\t    //if( x[io] === HUGE_VAL )\n\t    //    continue;\n\n\t    return {\n\t      x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\n\t      y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\n\t      z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\n\t    };\n\t  } //cs_geocentric_from_wgs84()\n\t}\n\n\tfunction checkParams(type) {\n\t  return (type === PJD_3PARAM || type === PJD_7PARAM);\n\t}\n\n\tvar datum_transform = function(source, dest, point) {\n\t  // Short cut if the datums are identical.\n\t  if (compareDatums(source, dest)) {\n\t    return point; // in this case, zero is sucess,\n\t    // whereas cs_compare_datums returns 1 to indicate TRUE\n\t    // confusing, should fix this\n\t  }\n\n\t  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\n\t  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {\n\t    return point;\n\t  }\n\n\t  // If this datum requires grid shifts, then apply it to geodetic coordinates.\n\n\t  // Do we need to go through geocentric coordinates?\n\t  if (source.es === dest.es && source.a === dest.a && !checkParams(source.datum_type) &&  !checkParams(dest.datum_type)) {\n\t    return point;\n\t  }\n\n\t  // Convert to geocentric coordinates.\n\t  point = geodeticToGeocentric(point, source.es, source.a);\n\t  // Convert between datums\n\t  if (checkParams(source.datum_type)) {\n\t    point = geocentricToWgs84(point, source.datum_type, source.datum_params);\n\t  }\n\t  if (checkParams(dest.datum_type)) {\n\t    point = geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\n\t  }\n\t  return geocentricToGeodetic(point, dest.es, dest.a, dest.b);\n\n\t};\n\n\tvar adjust_axis = function(crs, denorm, point) {\n\t  var xin = point.x,\n\t    yin = point.y,\n\t    zin = point.z || 0.0;\n\t  var v, t, i;\n\t  var out = {};\n\t  for (i = 0; i < 3; i++) {\n\t    if (denorm && i === 2 && point.z === undefined) {\n\t      continue;\n\t    }\n\t    if (i === 0) {\n\t      v = xin;\n\t      t = 'x';\n\t    }\n\t    else if (i === 1) {\n\t      v = yin;\n\t      t = 'y';\n\t    }\n\t    else {\n\t      v = zin;\n\t      t = 'z';\n\t    }\n\t    switch (crs.axis[i]) {\n\t    case 'e':\n\t      out[t] = v;\n\t      break;\n\t    case 'w':\n\t      out[t] = -v;\n\t      break;\n\t    case 'n':\n\t      out[t] = v;\n\t      break;\n\t    case 's':\n\t      out[t] = -v;\n\t      break;\n\t    case 'u':\n\t      if (point[t] !== undefined) {\n\t        out.z = v;\n\t      }\n\t      break;\n\t    case 'd':\n\t      if (point[t] !== undefined) {\n\t        out.z = -v;\n\t      }\n\t      break;\n\t    default:\n\t      //console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\n\t      return null;\n\t    }\n\t  }\n\t  return out;\n\t};\n\n\tvar toPoint = function (array){\n\t  var out = {\n\t    x: array[0],\n\t    y: array[1]\n\t  };\n\t  if (array.length>2) {\n\t    out.z = array[2];\n\t  }\n\t  if (array.length>3) {\n\t    out.m = array[3];\n\t  }\n\t  return out;\n\t};\n\n\tvar checkSanity = function (point) {\n\t  checkCoord(point.x);\n\t  checkCoord(point.y);\n\t};\n\tfunction checkCoord(num) {\n\t  if (typeof Number.isFinite === 'function') {\n\t    if (Number.isFinite(num)) {\n\t      return;\n\t    }\n\t    throw new TypeError('coordinates must be finite numbers');\n\t  }\n\t  if (typeof num !== 'number' || num !== num || !isFinite(num)) {\n\t    throw new TypeError('coordinates must be finite numbers');\n\t  }\n\t}\n\n\tfunction checkNotWGS(source, dest) {\n\t  return ((source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM) && dest.datumCode !== 'WGS84') || ((dest.datum.datum_type === PJD_3PARAM || dest.datum.datum_type === PJD_7PARAM) && source.datumCode !== 'WGS84');\n\t}\n\n\tfunction transform(source, dest, point) {\n\t  var wgs84;\n\t  if (Array.isArray(point)) {\n\t    point = toPoint(point);\n\t  }\n\t  checkSanity(point);\n\t  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\n\t  if (source.datum && dest.datum && checkNotWGS(source, dest)) {\n\t    wgs84 = new Projection('WGS84');\n\t    point = transform(source, wgs84, point);\n\t    source = wgs84;\n\t  }\n\t  // DGR, 2010/11/12\n\t  if (source.axis !== 'enu') {\n\t    point = adjust_axis(source, false, point);\n\t  }\n\t  // Transform source points to long/lat, if they aren't already.\n\t  if (source.projName === 'longlat') {\n\t    point = {\n\t      x: point.x * D2R,\n\t      y: point.y * D2R\n\t    };\n\t  }\n\t  else {\n\t    if (source.to_meter) {\n\t      point = {\n\t        x: point.x * source.to_meter,\n\t        y: point.y * source.to_meter\n\t      };\n\t    }\n\t    point = source.inverse(point); // Convert Cartesian to longlat\n\t  }\n\t  // Adjust for the prime meridian if necessary\n\t  if (source.from_greenwich) {\n\t    point.x += source.from_greenwich;\n\t  }\n\n\t  // Convert datums if needed, and if possible.\n\t  point = datum_transform(source.datum, dest.datum, point);\n\n\t  // Adjust for the prime meridian if necessary\n\t  if (dest.from_greenwich) {\n\t    point = {\n\t      x: point.x - dest.from_greenwich,\n\t      y: point.y\n\t    };\n\t  }\n\n\t  if (dest.projName === 'longlat') {\n\t    // convert radians to decimal degrees\n\t    point = {\n\t      x: point.x * R2D,\n\t      y: point.y * R2D\n\t    };\n\t  } else { // else project\n\t    point = dest.forward(point);\n\t    if (dest.to_meter) {\n\t      point = {\n\t        x: point.x / dest.to_meter,\n\t        y: point.y / dest.to_meter\n\t      };\n\t    }\n\t  }\n\n\t  // DGR, 2010/11/12\n\t  if (dest.axis !== 'enu') {\n\t    return adjust_axis(dest, true, point);\n\t  }\n\n\t  return point;\n\t}\n\n\tvar wgs84 = Projection('WGS84');\n\n\tfunction transformer(from, to, coords) {\n\t  var transformedArray, out, keys;\n\t  if (Array.isArray(coords)) {\n\t    transformedArray = transform(from, to, coords);\n\t    if (coords.length === 3) {\n\t      return [transformedArray.x, transformedArray.y, transformedArray.z];\n\t    }\n\t    else {\n\t      return [transformedArray.x, transformedArray.y];\n\t    }\n\t  }\n\t  else {\n\t    out = transform(from, to, coords);\n\t    keys = Object.keys(coords);\n\t    if (keys.length === 2) {\n\t      return out;\n\t    }\n\t    keys.forEach(function (key) {\n\t      if (key === 'x' || key === 'y') {\n\t        return;\n\t      }\n\t      out[key] = coords[key];\n\t    });\n\t    return out;\n\t  }\n\t}\n\n\tfunction checkProj(item) {\n\t  if (item instanceof Projection) {\n\t    return item;\n\t  }\n\t  if (item.oProj) {\n\t    return item.oProj;\n\t  }\n\t  return Projection(item);\n\t}\n\tfunction proj4$1(fromProj, toProj, coord) {\n\t  fromProj = checkProj(fromProj);\n\t  var single = false;\n\t  var obj;\n\t  if (typeof toProj === 'undefined') {\n\t    toProj = fromProj;\n\t    fromProj = wgs84;\n\t    single = true;\n\t  }\n\t  else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {\n\t    coord = toProj;\n\t    toProj = fromProj;\n\t    fromProj = wgs84;\n\t    single = true;\n\t  }\n\t  toProj = checkProj(toProj);\n\t  if (coord) {\n\t    return transformer(fromProj, toProj, coord);\n\t  }\n\t  else {\n\t    obj = {\n\t      forward: function(coords) {\n\t        return transformer(fromProj, toProj, coords);\n\t      },\n\t      inverse: function(coords) {\n\t        return transformer(toProj, fromProj, coords);\n\t      }\n\t    };\n\t    if (single) {\n\t      obj.oProj = toProj;\n\t    }\n\t    return obj;\n\t  }\n\t}\n\n\t/**\n\t * UTM zones are grouped, and assigned to one of a group of 6\n\t * sets.\n\t *\n\t * {int} @private\n\t */\n\tvar NUM_100K_SETS = 6;\n\n\t/**\n\t * The column letters (for easting) of the lower left value, per\n\t * set.\n\t *\n\t * {string} @private\n\t */\n\tvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n\t/**\n\t * The row letters (for northing) of the lower left value, per\n\t * set.\n\t *\n\t * {string} @private\n\t */\n\tvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\n\tvar A = 65; // A\n\tvar I = 73; // I\n\tvar O = 79; // O\n\tvar V = 86; // V\n\tvar Z = 90; // Z\n\tvar mgrs = {\n\t  forward: forward$1,\n\t  inverse: inverse$1,\n\t  toPoint: toPoint$1\n\t};\n\t/**\n\t * Conversion of lat/lon to MGRS.\n\t *\n\t * @param {object} ll Object literal with lat and lon properties on a\n\t *     WGS84 ellipsoid.\n\t * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n\t *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n\t * @return {string} the MGRS string for the given location and accuracy.\n\t */\n\tfunction forward$1(ll, accuracy) {\n\t  accuracy = accuracy || 5; // default accuracy 1m\n\t  return encode(LLtoUTM({\n\t    lat: ll[1],\n\t    lon: ll[0]\n\t  }), accuracy);\n\t}\n\n\t/**\n\t * Conversion of MGRS to lat/lon.\n\t *\n\t * @param {string} mgrs MGRS string.\n\t * @return {array} An array with left (longitude), bottom (latitude), right\n\t *     (longitude) and top (latitude) values in WGS84, representing the\n\t *     bounding box for the provided MGRS reference.\n\t */\n\tfunction inverse$1(mgrs) {\n\t  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n\t  if (bbox.lat && bbox.lon) {\n\t    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n\t  }\n\t  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n\t}\n\n\tfunction toPoint$1(mgrs) {\n\t  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n\t  if (bbox.lat && bbox.lon) {\n\t    return [bbox.lon, bbox.lat];\n\t  }\n\t  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n\t}\n\t/**\n\t * Conversion from degrees to radians.\n\t *\n\t * @private\n\t * @param {number} deg the angle in degrees.\n\t * @return {number} the angle in radians.\n\t */\n\tfunction degToRad(deg) {\n\t  return (deg * (Math.PI / 180.0));\n\t}\n\n\t/**\n\t * Conversion from radians to degrees.\n\t *\n\t * @private\n\t * @param {number} rad the angle in radians.\n\t * @return {number} the angle in degrees.\n\t */\n\tfunction radToDeg(rad) {\n\t  return (180.0 * (rad / Math.PI));\n\t}\n\n\t/**\n\t * Converts a set of Longitude and Latitude co-ordinates to UTM\n\t * using the WGS84 ellipsoid.\n\t *\n\t * @private\n\t * @param {object} ll Object literal with lat and lon properties\n\t *     representing the WGS84 coordinate to be converted.\n\t * @return {object} Object literal containing the UTM value with easting,\n\t *     northing, zoneNumber and zoneLetter properties, and an optional\n\t *     accuracy property in digits. Returns null if the conversion failed.\n\t */\n\tfunction LLtoUTM(ll) {\n\t  var Lat = ll.lat;\n\t  var Long = ll.lon;\n\t  var a = 6378137.0; //ellip.radius;\n\t  var eccSquared = 0.00669438; //ellip.eccsq;\n\t  var k0 = 0.9996;\n\t  var LongOrigin;\n\t  var eccPrimeSquared;\n\t  var N, T, C, A, M;\n\t  var LatRad = degToRad(Lat);\n\t  var LongRad = degToRad(Long);\n\t  var LongOriginRad;\n\t  var ZoneNumber;\n\t  // (int)\n\t  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n\t  //Make sure the longitude 180.00 is in Zone 60\n\t  if (Long === 180) {\n\t    ZoneNumber = 60;\n\t  }\n\n\t  // Special zone for Norway\n\t  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n\t    ZoneNumber = 32;\n\t  }\n\n\t  // Special zones for Svalbard\n\t  if (Lat >= 72.0 && Lat < 84.0) {\n\t    if (Long >= 0.0 && Long < 9.0) {\n\t      ZoneNumber = 31;\n\t    }\n\t    else if (Long >= 9.0 && Long < 21.0) {\n\t      ZoneNumber = 33;\n\t    }\n\t    else if (Long >= 21.0 && Long < 33.0) {\n\t      ZoneNumber = 35;\n\t    }\n\t    else if (Long >= 33.0 && Long < 42.0) {\n\t      ZoneNumber = 37;\n\t    }\n\t  }\n\n\t  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n\t  // in middle of\n\t  // zone\n\t  LongOriginRad = degToRad(LongOrigin);\n\n\t  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n\t  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n\t  T = Math.tan(LatRad) * Math.tan(LatRad);\n\t  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n\t  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n\t  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n\t  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n\t  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n\t  if (Lat < 0.0) {\n\t    UTMNorthing += 10000000.0; //10000000 meter offset for\n\t    // southern hemisphere\n\t  }\n\n\t  return {\n\t    northing: Math.round(UTMNorthing),\n\t    easting: Math.round(UTMEasting),\n\t    zoneNumber: ZoneNumber,\n\t    zoneLetter: getLetterDesignator(Lat)\n\t  };\n\t}\n\n\t/**\n\t * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n\t * class where the Zone can be specified as a single string eg.\"60N\" which\n\t * is then broken down into the ZoneNumber and ZoneLetter.\n\t *\n\t * @private\n\t * @param {object} utm An object literal with northing, easting, zoneNumber\n\t *     and zoneLetter properties. If an optional accuracy property is\n\t *     provided (in meters), a bounding box will be returned instead of\n\t *     latitude and longitude.\n\t * @return {object} An object literal containing either lat and lon values\n\t *     (if no accuracy was provided), or top, right, bottom and left values\n\t *     for the bounding box calculated according to the provided accuracy.\n\t *     Returns null if the conversion failed.\n\t */\n\tfunction UTMtoLL(utm) {\n\n\t  var UTMNorthing = utm.northing;\n\t  var UTMEasting = utm.easting;\n\t  var zoneLetter = utm.zoneLetter;\n\t  var zoneNumber = utm.zoneNumber;\n\t  // check the ZoneNummber is valid\n\t  if (zoneNumber < 0 || zoneNumber > 60) {\n\t    return null;\n\t  }\n\n\t  var k0 = 0.9996;\n\t  var a = 6378137.0; //ellip.radius;\n\t  var eccSquared = 0.00669438; //ellip.eccsq;\n\t  var eccPrimeSquared;\n\t  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n\t  var N1, T1, C1, R1, D, M;\n\t  var LongOrigin;\n\t  var mu, phi1Rad;\n\n\t  // remove 500,000 meter offset for longitude\n\t  var x = UTMEasting - 500000.0;\n\t  var y = UTMNorthing;\n\n\t  // We must know somehow if we are in the Northern or Southern\n\t  // hemisphere, this is the only time we use the letter So even\n\t  // if the Zone letter isn't exactly correct it should indicate\n\t  // the hemisphere correctly\n\t  if (zoneLetter < 'N') {\n\t    y -= 10000000.0; // remove 10,000,000 meter offset used\n\t    // for southern hemisphere\n\t  }\n\n\t  // There are 60 zones with zone 1 being at West -180 to -174\n\t  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n\t  // in middle of\n\t  // zone\n\n\t  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n\t  M = y / k0;\n\t  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n\t  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n\t  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n\t  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n\t  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n\t  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n\t  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n\t  D = x / (N1 * k0);\n\n\t  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n\t  lat = radToDeg(lat);\n\n\t  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n\t  lon = LongOrigin + radToDeg(lon);\n\n\t  var result;\n\t  if (utm.accuracy) {\n\t    var topRight = UTMtoLL({\n\t      northing: utm.northing + utm.accuracy,\n\t      easting: utm.easting + utm.accuracy,\n\t      zoneLetter: utm.zoneLetter,\n\t      zoneNumber: utm.zoneNumber\n\t    });\n\t    result = {\n\t      top: topRight.lat,\n\t      right: topRight.lon,\n\t      bottom: lat,\n\t      left: lon\n\t    };\n\t  }\n\t  else {\n\t    result = {\n\t      lat: lat,\n\t      lon: lon\n\t    };\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Calculates the MGRS letter designator for the given latitude.\n\t *\n\t * @private\n\t * @param {number} lat The latitude in WGS84 to get the letter designator\n\t *     for.\n\t * @return {char} The letter designator.\n\t */\n\tfunction getLetterDesignator(lat) {\n\t  //This is here as an error flag to show that the Latitude is\n\t  //outside MGRS limits\n\t  var LetterDesignator = 'Z';\n\n\t  if ((84 >= lat) && (lat >= 72)) {\n\t    LetterDesignator = 'X';\n\t  }\n\t  else if ((72 > lat) && (lat >= 64)) {\n\t    LetterDesignator = 'W';\n\t  }\n\t  else if ((64 > lat) && (lat >= 56)) {\n\t    LetterDesignator = 'V';\n\t  }\n\t  else if ((56 > lat) && (lat >= 48)) {\n\t    LetterDesignator = 'U';\n\t  }\n\t  else if ((48 > lat) && (lat >= 40)) {\n\t    LetterDesignator = 'T';\n\t  }\n\t  else if ((40 > lat) && (lat >= 32)) {\n\t    LetterDesignator = 'S';\n\t  }\n\t  else if ((32 > lat) && (lat >= 24)) {\n\t    LetterDesignator = 'R';\n\t  }\n\t  else if ((24 > lat) && (lat >= 16)) {\n\t    LetterDesignator = 'Q';\n\t  }\n\t  else if ((16 > lat) && (lat >= 8)) {\n\t    LetterDesignator = 'P';\n\t  }\n\t  else if ((8 > lat) && (lat >= 0)) {\n\t    LetterDesignator = 'N';\n\t  }\n\t  else if ((0 > lat) && (lat >= -8)) {\n\t    LetterDesignator = 'M';\n\t  }\n\t  else if ((-8 > lat) && (lat >= -16)) {\n\t    LetterDesignator = 'L';\n\t  }\n\t  else if ((-16 > lat) && (lat >= -24)) {\n\t    LetterDesignator = 'K';\n\t  }\n\t  else if ((-24 > lat) && (lat >= -32)) {\n\t    LetterDesignator = 'J';\n\t  }\n\t  else if ((-32 > lat) && (lat >= -40)) {\n\t    LetterDesignator = 'H';\n\t  }\n\t  else if ((-40 > lat) && (lat >= -48)) {\n\t    LetterDesignator = 'G';\n\t  }\n\t  else if ((-48 > lat) && (lat >= -56)) {\n\t    LetterDesignator = 'F';\n\t  }\n\t  else if ((-56 > lat) && (lat >= -64)) {\n\t    LetterDesignator = 'E';\n\t  }\n\t  else if ((-64 > lat) && (lat >= -72)) {\n\t    LetterDesignator = 'D';\n\t  }\n\t  else if ((-72 > lat) && (lat >= -80)) {\n\t    LetterDesignator = 'C';\n\t  }\n\t  return LetterDesignator;\n\t}\n\n\t/**\n\t * Encodes a UTM location as MGRS string.\n\t *\n\t * @private\n\t * @param {object} utm An object literal with easting, northing,\n\t *     zoneLetter, zoneNumber\n\t * @param {number} accuracy Accuracy in digits (1-5).\n\t * @return {string} MGRS string for the given UTM location.\n\t */\n\tfunction encode(utm, accuracy) {\n\t  // prepend with leading zeroes\n\t  var seasting = \"00000\" + utm.easting,\n\t    snorthing = \"00000\" + utm.northing;\n\n\t  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n\t}\n\n\t/**\n\t * Get the two letter 100k designator for a given UTM easting,\n\t * northing and zone number value.\n\t *\n\t * @private\n\t * @param {number} easting\n\t * @param {number} northing\n\t * @param {number} zoneNumber\n\t * @return the two letter 100k designator for the given UTM location.\n\t */\n\tfunction get100kID(easting, northing, zoneNumber) {\n\t  var setParm = get100kSetForZone(zoneNumber);\n\t  var setColumn = Math.floor(easting / 100000);\n\t  var setRow = Math.floor(northing / 100000) % 20;\n\t  return getLetter100kID(setColumn, setRow, setParm);\n\t}\n\n\t/**\n\t * Given a UTM zone number, figure out the MGRS 100K set it is in.\n\t *\n\t * @private\n\t * @param {number} i An UTM zone number.\n\t * @return {number} the 100k set the UTM zone is in.\n\t */\n\tfunction get100kSetForZone(i) {\n\t  var setParm = i % NUM_100K_SETS;\n\t  if (setParm === 0) {\n\t    setParm = NUM_100K_SETS;\n\t  }\n\n\t  return setParm;\n\t}\n\n\t/**\n\t * Get the two-letter MGRS 100k designator given information\n\t * translated from the UTM northing, easting and zone number.\n\t *\n\t * @private\n\t * @param {number} column the column index as it relates to the MGRS\n\t *        100k set spreadsheet, created from the UTM easting.\n\t *        Values are 1-8.\n\t * @param {number} row the row index as it relates to the MGRS 100k set\n\t *        spreadsheet, created from the UTM northing value. Values\n\t *        are from 0-19.\n\t * @param {number} parm the set block, as it relates to the MGRS 100k set\n\t *        spreadsheet, created from the UTM zone. Values are from\n\t *        1-60.\n\t * @return two letter MGRS 100k code.\n\t */\n\tfunction getLetter100kID(column, row, parm) {\n\t  // colOrigin and rowOrigin are the letters at the origin of the set\n\t  var index = parm - 1;\n\t  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n\t  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n\t  // colInt and rowInt are the letters to build to return\n\t  var colInt = colOrigin + column - 1;\n\t  var rowInt = rowOrigin + row;\n\t  var rollover = false;\n\n\t  if (colInt > Z) {\n\t    colInt = colInt - Z + A - 1;\n\t    rollover = true;\n\t  }\n\n\t  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n\t    colInt++;\n\t  }\n\n\t  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n\t    colInt++;\n\n\t    if (colInt === I) {\n\t      colInt++;\n\t    }\n\t  }\n\n\t  if (colInt > Z) {\n\t    colInt = colInt - Z + A - 1;\n\t  }\n\n\t  if (rowInt > V) {\n\t    rowInt = rowInt - V + A - 1;\n\t    rollover = true;\n\t  }\n\t  else {\n\t    rollover = false;\n\t  }\n\n\t  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n\t    rowInt++;\n\t  }\n\n\t  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n\t    rowInt++;\n\n\t    if (rowInt === I) {\n\t      rowInt++;\n\t    }\n\t  }\n\n\t  if (rowInt > V) {\n\t    rowInt = rowInt - V + A - 1;\n\t  }\n\n\t  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n\t  return twoLetter;\n\t}\n\n\t/**\n\t * Decode the UTM parameters from a MGRS string.\n\t *\n\t * @private\n\t * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n\t * @return {object} An object literal with easting, northing, zoneLetter,\n\t *     zoneNumber and accuracy (in meters) properties.\n\t */\n\tfunction decode(mgrsString) {\n\n\t  if (mgrsString && mgrsString.length === 0) {\n\t    throw (\"MGRSPoint coverting from nothing\");\n\t  }\n\n\t  var length = mgrsString.length;\n\n\t  var hunK = null;\n\t  var sb = \"\";\n\t  var testChar;\n\t  var i = 0;\n\n\t  // get Zone number\n\t  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n\t    if (i >= 2) {\n\t      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n\t    }\n\t    sb += testChar;\n\t    i++;\n\t  }\n\n\t  var zoneNumber = parseInt(sb, 10);\n\n\t  if (i === 0 || i + 3 > length) {\n\t    // A good MGRS string has to be 4-5 digits long,\n\t    // ##AAA/#AAA at least.\n\t    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n\t  }\n\n\t  var zoneLetter = mgrsString.charAt(i++);\n\n\t  // Should we check the zone letter here? Why not.\n\t  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n\t    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n\t  }\n\n\t  hunK = mgrsString.substring(i, i += 2);\n\n\t  var set = get100kSetForZone(zoneNumber);\n\n\t  var east100k = getEastingFromChar(hunK.charAt(0), set);\n\t  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n\t  // We have a bug where the northing may be 2000000 too low.\n\t  // How\n\t  // do we know when to roll over?\n\n\t  while (north100k < getMinNorthing(zoneLetter)) {\n\t    north100k += 2000000;\n\t  }\n\n\t  // calculate the char index for easting/northing separator\n\t  var remainder = length - i;\n\n\t  if (remainder % 2 !== 0) {\n\t    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n\t  }\n\n\t  var sep = remainder / 2;\n\n\t  var sepEasting = 0.0;\n\t  var sepNorthing = 0.0;\n\t  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n\t  if (sep > 0) {\n\t    accuracyBonus = 100000.0 / Math.pow(10, sep);\n\t    sepEastingString = mgrsString.substring(i, i + sep);\n\t    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n\t    sepNorthingString = mgrsString.substring(i + sep);\n\t    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n\t  }\n\n\t  easting = sepEasting + east100k;\n\t  northing = sepNorthing + north100k;\n\n\t  return {\n\t    easting: easting,\n\t    northing: northing,\n\t    zoneLetter: zoneLetter,\n\t    zoneNumber: zoneNumber,\n\t    accuracy: accuracyBonus\n\t  };\n\t}\n\n\t/**\n\t * Given the first letter from a two-letter MGRS 100k zone, and given the\n\t * MGRS table set for the zone number, figure out the easting value that\n\t * should be added to the other, secondary easting value.\n\t *\n\t * @private\n\t * @param {char} e The first letter from a two-letter MGRS 100k zone.\n\t * @param {number} set The MGRS table set for the zone number.\n\t * @return {number} The easting value for the given letter and set.\n\t */\n\tfunction getEastingFromChar(e, set) {\n\t  // colOrigin is the letter at the origin of the set for the\n\t  // column\n\t  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n\t  var eastingValue = 100000.0;\n\t  var rewindMarker = false;\n\n\t  while (curCol !== e.charCodeAt(0)) {\n\t    curCol++;\n\t    if (curCol === I) {\n\t      curCol++;\n\t    }\n\t    if (curCol === O) {\n\t      curCol++;\n\t    }\n\t    if (curCol > Z) {\n\t      if (rewindMarker) {\n\t        throw (\"Bad character: \" + e);\n\t      }\n\t      curCol = A;\n\t      rewindMarker = true;\n\t    }\n\t    eastingValue += 100000.0;\n\t  }\n\n\t  return eastingValue;\n\t}\n\n\t/**\n\t * Given the second letter from a two-letter MGRS 100k zone, and given the\n\t * MGRS table set for the zone number, figure out the northing value that\n\t * should be added to the other, secondary northing value. You have to\n\t * remember that Northings are determined from the equator, and the vertical\n\t * cycle of letters mean a 2000000 additional northing meters. This happens\n\t * approx. every 18 degrees of latitude. This method does *NOT* count any\n\t * additional northings. You have to figure out how many 2000000 meters need\n\t * to be added for the zone letter of the MGRS coordinate.\n\t *\n\t * @private\n\t * @param {char} n Second letter of the MGRS 100k zone\n\t * @param {number} set The MGRS table set number, which is dependent on the\n\t *     UTM zone number.\n\t * @return {number} The northing value for the given letter and set.\n\t */\n\tfunction getNorthingFromChar(n, set) {\n\n\t  if (n > 'V') {\n\t    throw (\"MGRSPoint given invalid Northing \" + n);\n\t  }\n\n\t  // rowOrigin is the letter at the origin of the set for the\n\t  // column\n\t  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n\t  var northingValue = 0.0;\n\t  var rewindMarker = false;\n\n\t  while (curRow !== n.charCodeAt(0)) {\n\t    curRow++;\n\t    if (curRow === I) {\n\t      curRow++;\n\t    }\n\t    if (curRow === O) {\n\t      curRow++;\n\t    }\n\t    // fixing a bug making whole application hang in this loop\n\t    // when 'n' is a wrong character\n\t    if (curRow > V) {\n\t      if (rewindMarker) { // making sure that this loop ends\n\t        throw (\"Bad character: \" + n);\n\t      }\n\t      curRow = A;\n\t      rewindMarker = true;\n\t    }\n\t    northingValue += 100000.0;\n\t  }\n\n\t  return northingValue;\n\t}\n\n\t/**\n\t * The function getMinNorthing returns the minimum northing value of a MGRS\n\t * zone.\n\t *\n\t * Ported from Geotrans' c Lattitude_Band_Value structure table.\n\t *\n\t * @private\n\t * @param {char} zoneLetter The MGRS zone to get the min northing for.\n\t * @return {number}\n\t */\n\tfunction getMinNorthing(zoneLetter) {\n\t  var northing;\n\t  switch (zoneLetter) {\n\t  case 'C':\n\t    northing = 1100000.0;\n\t    break;\n\t  case 'D':\n\t    northing = 2000000.0;\n\t    break;\n\t  case 'E':\n\t    northing = 2800000.0;\n\t    break;\n\t  case 'F':\n\t    northing = 3700000.0;\n\t    break;\n\t  case 'G':\n\t    northing = 4600000.0;\n\t    break;\n\t  case 'H':\n\t    northing = 5500000.0;\n\t    break;\n\t  case 'J':\n\t    northing = 6400000.0;\n\t    break;\n\t  case 'K':\n\t    northing = 7300000.0;\n\t    break;\n\t  case 'L':\n\t    northing = 8200000.0;\n\t    break;\n\t  case 'M':\n\t    northing = 9100000.0;\n\t    break;\n\t  case 'N':\n\t    northing = 0.0;\n\t    break;\n\t  case 'P':\n\t    northing = 800000.0;\n\t    break;\n\t  case 'Q':\n\t    northing = 1700000.0;\n\t    break;\n\t  case 'R':\n\t    northing = 2600000.0;\n\t    break;\n\t  case 'S':\n\t    northing = 3500000.0;\n\t    break;\n\t  case 'T':\n\t    northing = 4400000.0;\n\t    break;\n\t  case 'U':\n\t    northing = 5300000.0;\n\t    break;\n\t  case 'V':\n\t    northing = 6200000.0;\n\t    break;\n\t  case 'W':\n\t    northing = 7000000.0;\n\t    break;\n\t  case 'X':\n\t    northing = 7900000.0;\n\t    break;\n\t  default:\n\t    northing = -1.0;\n\t  }\n\t  if (northing >= 0.0) {\n\t    return northing;\n\t  }\n\t  else {\n\t    throw (\"Invalid zone letter: \" + zoneLetter);\n\t  }\n\n\t}\n\n\tfunction Point(x, y, z) {\n\t  if (!(this instanceof Point)) {\n\t    return new Point(x, y, z);\n\t  }\n\t  if (Array.isArray(x)) {\n\t    this.x = x[0];\n\t    this.y = x[1];\n\t    this.z = x[2] || 0.0;\n\t  } else if(typeof x === 'object') {\n\t    this.x = x.x;\n\t    this.y = x.y;\n\t    this.z = x.z || 0.0;\n\t  } else if (typeof x === 'string' && typeof y === 'undefined') {\n\t    var coords = x.split(',');\n\t    this.x = parseFloat(coords[0], 10);\n\t    this.y = parseFloat(coords[1], 10);\n\t    this.z = parseFloat(coords[2], 10) || 0.0;\n\t  } else {\n\t    this.x = x;\n\t    this.y = y;\n\t    this.z = z || 0.0;\n\t  }\n\t  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');\n\t}\n\n\tPoint.fromMGRS = function(mgrsStr) {\n\t  return new Point(toPoint$1(mgrsStr));\n\t};\n\tPoint.prototype.toMGRS = function(accuracy) {\n\t  return forward$1([this.x, this.y], accuracy);\n\t};\n\n\tvar version = \"2.5.0\";\n\n\tvar C00 = 1;\n\tvar C02 = 0.25;\n\tvar C04 = 0.046875;\n\tvar C06 = 0.01953125;\n\tvar C08 = 0.01068115234375;\n\tvar C22 = 0.75;\n\tvar C44 = 0.46875;\n\tvar C46 = 0.01302083333333333333;\n\tvar C48 = 0.00712076822916666666;\n\tvar C66 = 0.36458333333333333333;\n\tvar C68 = 0.00569661458333333333;\n\tvar C88 = 0.3076171875;\n\n\tvar pj_enfn = function(es) {\n\t  var en = [];\n\t  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));\n\t  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));\n\t  var t = es * es;\n\t  en[2] = t * (C44 - es * (C46 + es * C48));\n\t  t *= es;\n\t  en[3] = t * (C66 - es * C68);\n\t  en[4] = t * es * C88;\n\t  return en;\n\t};\n\n\tvar pj_mlfn = function(phi, sphi, cphi, en) {\n\t  cphi *= sphi;\n\t  sphi *= sphi;\n\t  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));\n\t};\n\n\tvar MAX_ITER = 20;\n\n\tvar pj_inv_mlfn = function(arg, es, en) {\n\t  var k = 1 / (1 - es);\n\t  var phi = arg;\n\t  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */\n\t    var s = Math.sin(phi);\n\t    var t = 1 - es * s * s;\n\t    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;\n\t    //phi -= t * (t * Math.sqrt(t)) * k;\n\t    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;\n\t    phi -= t;\n\t    if (Math.abs(t) < EPSLN) {\n\t      return phi;\n\t    }\n\t  }\n\t  //..reportError(\"cass:pj_inv_mlfn: Convergence error\");\n\t  return phi;\n\t};\n\n\t// Heavily based on this tmerc projection implementation\n\t// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/tmerc.js\n\n\tfunction init$2() {\n\t  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n\t  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n\t  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n\t  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n\t  if (this.es) {\n\t    this.en = pj_enfn(this.es);\n\t    this.ml0 = pj_mlfn(this.lat0, Math.sin(this.lat0), Math.cos(this.lat0), this.en);\n\t  }\n\t}\n\n\t/**\n\t    Transverse Mercator Forward  - long/lat to x/y\n\t    long/lat in radians\n\t  */\n\tfunction forward$2(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var delta_lon = adjust_lon(lon - this.long0);\n\t  var con;\n\t  var x, y;\n\t  var sin_phi = Math.sin(lat);\n\t  var cos_phi = Math.cos(lat);\n\n\t  if (!this.es) {\n\t    var b = cos_phi * Math.sin(delta_lon);\n\n\t    if ((Math.abs(Math.abs(b) - 1)) < EPSLN) {\n\t      return (93);\n\t    }\n\t    else {\n\t      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b)) + this.x0;\n\t      y = cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - Math.pow(b, 2));\n\t      b = Math.abs(y);\n\n\t      if (b >= 1) {\n\t        if ((b - 1) > EPSLN) {\n\t          return (93);\n\t        }\n\t        else {\n\t          y = 0;\n\t        }\n\t      }\n\t      else {\n\t        y = Math.acos(y);\n\t      }\n\n\t      if (lat < 0) {\n\t        y = -y;\n\t      }\n\n\t      y = this.a * this.k0 * (y - this.lat0) + this.y0;\n\t    }\n\t  }\n\t  else {\n\t    var al = cos_phi * delta_lon;\n\t    var als = Math.pow(al, 2);\n\t    var c = this.ep2 * Math.pow(cos_phi, 2);\n\t    var cs = Math.pow(c, 2);\n\t    var tq = Math.abs(cos_phi) > EPSLN ? Math.tan(lat) : 0;\n\t    var t = Math.pow(tq, 2);\n\t    var ts = Math.pow(t, 2);\n\t    con = 1 - this.es * Math.pow(sin_phi, 2);\n\t    al = al / Math.sqrt(con);\n\t    var ml = pj_mlfn(lat, sin_phi, cos_phi, this.en);\n\n\t    x = this.a * (this.k0 * al * (1 +\n\t      als / 6 * (1 - t + c +\n\t      als / 20 * (5 - 18 * t + ts + 14 * c - 58 * t * c +\n\t      als / 42 * (61 + 179 * ts - ts * t - 479 * t))))) +\n\t      this.x0;\n\n\t    y = this.a * (this.k0 * (ml - this.ml0 +\n\t      sin_phi * delta_lon * al / 2 * (1 +\n\t      als / 12 * (5 - t + 9 * c + 4 * cs +\n\t      als / 30 * (61 + ts - 58 * t + 270 * c - 330 * t * c +\n\t      als / 56 * (1385 + 543 * ts - ts * t - 3111 * t)))))) +\n\t      this.y0;\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\n\t  return p;\n\t}\n\n\t/**\n\t    Transverse Mercator Inverse  -  x/y to long/lat\n\t  */\n\tfunction inverse$2(p) {\n\t  var con, phi;\n\t  var lat, lon;\n\t  var x = (p.x - this.x0) * (1 / this.a);\n\t  var y = (p.y - this.y0) * (1 / this.a);\n\n\t  if (!this.es) {\n\t    var f = Math.exp(x / this.k0);\n\t    var g = 0.5 * (f - 1 / f);\n\t    var temp = this.lat0 + y / this.k0;\n\t    var h = Math.cos(temp);\n\t    con = Math.sqrt((1 - Math.pow(h, 2)) / (1 + Math.pow(g, 2)));\n\t    lat = Math.asin(con);\n\n\t    if (y < 0) {\n\t      lat = -lat;\n\t    }\n\n\t    if ((g === 0) && (h === 0)) {\n\t      lon = 0;\n\t    }\n\t    else {\n\t      lon = adjust_lon(Math.atan2(g, h) + this.long0);\n\t    }\n\t  }\n\t  else { // ellipsoidal form\n\t    con = this.ml0 + y / this.k0;\n\t    phi = pj_inv_mlfn(con, this.es, this.en);\n\n\t    if (Math.abs(phi) < HALF_PI) {\n\t      var sin_phi = Math.sin(phi);\n\t      var cos_phi = Math.cos(phi);\n\t      var tan_phi = Math.abs(cos_phi) > EPSLN ? Math.tan(phi) : 0;\n\t      var c = this.ep2 * Math.pow(cos_phi, 2);\n\t      var cs = Math.pow(c, 2);\n\t      var t = Math.pow(tan_phi, 2);\n\t      var ts = Math.pow(t, 2);\n\t      con = 1 - this.es * Math.pow(sin_phi, 2);\n\t      var d = x * Math.sqrt(con) / this.k0;\n\t      var ds = Math.pow(d, 2);\n\t      con = con * tan_phi;\n\n\t      lat = phi - (con * ds / (1 - this.es)) * 0.5 * (1 -\n\t        ds / 12 * (5 + 3 * t - 9 * c * t + c - 4 * cs -\n\t        ds / 30 * (61 + 90 * t - 252 * c * t + 45 * ts + 46 * c -\n\t        ds / 56 * (1385 + 3633 * t + 4095 * ts + 1574 * ts * t))));\n\n\t      lon = adjust_lon(this.long0 + (d * (1 -\n\t        ds / 6 * (1 + 2 * t + c -\n\t        ds / 20 * (5 + 28 * t + 24 * ts + 8 * c * t + 6 * c -\n\t        ds / 42 * (61 + 662 * t + 1320 * ts + 720 * ts * t)))) / cos_phi));\n\t    }\n\t    else {\n\t      lat = HALF_PI * sign(y);\n\t      lon = 0;\n\t    }\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  return p;\n\t}\n\n\tvar names$3 = [\"Transverse_Mercator\", \"Transverse Mercator\", \"tmerc\"];\n\tvar tmerc = {\n\t  init: init$2,\n\t  forward: forward$2,\n\t  inverse: inverse$2,\n\t  names: names$3\n\t};\n\n\tvar sinh = function(x) {\n\t  var r = Math.exp(x);\n\t  r = (r - 1 / r) / 2;\n\t  return r;\n\t};\n\n\tvar hypot = function(x, y) {\n\t  x = Math.abs(x);\n\t  y = Math.abs(y);\n\t  var a = Math.max(x, y);\n\t  var b = Math.min(x, y) / (a ? a : 1);\n\n\t  return a * Math.sqrt(1 + Math.pow(b, 2));\n\t};\n\n\tvar log1py = function(x) {\n\t  var y = 1 + x;\n\t  var z = y - 1;\n\n\t  return z === 0 ? x : x * Math.log(y) / z;\n\t};\n\n\tvar asinhy = function(x) {\n\t  var y = Math.abs(x);\n\t  y = log1py(y * (1 + y / (hypot(1, y) + 1)));\n\n\t  return x < 0 ? -y : y;\n\t};\n\n\tvar gatg = function(pp, B) {\n\t  var cos_2B = 2 * Math.cos(2 * B);\n\t  var i = pp.length - 1;\n\t  var h1 = pp[i];\n\t  var h2 = 0;\n\t  var h;\n\n\t  while (--i >= 0) {\n\t    h = -h2 + cos_2B * h1 + pp[i];\n\t    h2 = h1;\n\t    h1 = h;\n\t  }\n\n\t  return (B + h * Math.sin(2 * B));\n\t};\n\n\tvar clens = function(pp, arg_r) {\n\t  var r = 2 * Math.cos(arg_r);\n\t  var i = pp.length - 1;\n\t  var hr1 = pp[i];\n\t  var hr2 = 0;\n\t  var hr;\n\n\t  while (--i >= 0) {\n\t    hr = -hr2 + r * hr1 + pp[i];\n\t    hr2 = hr1;\n\t    hr1 = hr;\n\t  }\n\n\t  return Math.sin(arg_r) * hr;\n\t};\n\n\tvar cosh = function(x) {\n\t  var r = Math.exp(x);\n\t  r = (r + 1 / r) / 2;\n\t  return r;\n\t};\n\n\tvar clens_cmplx = function(pp, arg_r, arg_i) {\n\t  var sin_arg_r = Math.sin(arg_r);\n\t  var cos_arg_r = Math.cos(arg_r);\n\t  var sinh_arg_i = sinh(arg_i);\n\t  var cosh_arg_i = cosh(arg_i);\n\t  var r = 2 * cos_arg_r * cosh_arg_i;\n\t  var i = -2 * sin_arg_r * sinh_arg_i;\n\t  var j = pp.length - 1;\n\t  var hr = pp[j];\n\t  var hi1 = 0;\n\t  var hr1 = 0;\n\t  var hi = 0;\n\t  var hr2;\n\t  var hi2;\n\n\t  while (--j >= 0) {\n\t    hr2 = hr1;\n\t    hi2 = hi1;\n\t    hr1 = hr;\n\t    hi1 = hi;\n\t    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n\t    hi = -hi2 + i * hr1 + r * hi1;\n\t  }\n\n\t  r = sin_arg_r * cosh_arg_i;\n\t  i = cos_arg_r * sinh_arg_i;\n\n\t  return [r * hr - i * hi, r * hi + i * hr];\n\t};\n\n\t// Heavily based on this etmerc projection implementation\n\t// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/etmerc.js\n\n\tfunction init$3() {\n\t  if (this.es === undefined || this.es <= 0) {\n\t    throw new Error('incorrect elliptical usage');\n\t  }\n\n\t  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n\t  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n\t  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n\t  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n\t  this.cgb = [];\n\t  this.cbg = [];\n\t  this.utg = [];\n\t  this.gtu = [];\n\n\t  var f = this.es / (1 + Math.sqrt(1 - this.es));\n\t  var n = f / (2 - f);\n\t  var np = n;\n\n\t  this.cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\n\t  this.cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n\t  np = np * n;\n\t  this.cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n\t  this.cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n\t  np = np * n;\n\t  this.cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n\t  this.cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n\t  np = np * n;\n\t  this.cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n\t  this.cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\n\n\t  np = np * n;\n\t  this.cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n\t  this.cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n\t  np = np * n;\n\t  this.cgb[5] = np * (601676 / 22275);\n\t  this.cbg[5] = np * (444337 / 155925);\n\n\t  np = Math.pow(n, 2);\n\t  this.Qn = this.k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n\t  this.utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n\t  this.gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n\t  this.utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n\t  this.gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n\t  np = np * n;\n\t  this.utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\n\t  this.gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n\t  np = np * n;\n\t  this.utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n\t  this.gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n\t  np = np * n;\n\t  this.utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n\t  this.gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n\t  np = np * n;\n\t  this.utg[5] = np * (-20648693 / 638668800);\n\t  this.gtu[5] = np * (212378941 / 319334400);\n\n\t  var Z = gatg(this.cbg, this.lat0);\n\t  this.Zb = -this.Qn * (Z + clens(this.gtu, 2 * Z));\n\t}\n\n\tfunction forward$3(p) {\n\t  var Ce = adjust_lon(p.x - this.long0);\n\t  var Cn = p.y;\n\n\t  Cn = gatg(this.cbg, Cn);\n\t  var sin_Cn = Math.sin(Cn);\n\t  var cos_Cn = Math.cos(Cn);\n\t  var sin_Ce = Math.sin(Ce);\n\t  var cos_Ce = Math.cos(Ce);\n\n\t  Cn = Math.atan2(sin_Cn, cos_Ce * cos_Cn);\n\t  Ce = Math.atan2(sin_Ce * cos_Cn, hypot(sin_Cn, cos_Cn * cos_Ce));\n\t  Ce = asinhy(Math.tan(Ce));\n\n\t  var tmp = clens_cmplx(this.gtu, 2 * Cn, 2 * Ce);\n\n\t  Cn = Cn + tmp[0];\n\t  Ce = Ce + tmp[1];\n\n\t  var x;\n\t  var y;\n\n\t  if (Math.abs(Ce) <= 2.623395162778) {\n\t    x = this.a * (this.Qn * Ce) + this.x0;\n\t    y = this.a * (this.Qn * Cn + this.Zb) + this.y0;\n\t  }\n\t  else {\n\t    x = Infinity;\n\t    y = Infinity;\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\n\t  return p;\n\t}\n\n\tfunction inverse$3(p) {\n\t  var Ce = (p.x - this.x0) * (1 / this.a);\n\t  var Cn = (p.y - this.y0) * (1 / this.a);\n\n\t  Cn = (Cn - this.Zb) / this.Qn;\n\t  Ce = Ce / this.Qn;\n\n\t  var lon;\n\t  var lat;\n\n\t  if (Math.abs(Ce) <= 2.623395162778) {\n\t    var tmp = clens_cmplx(this.utg, 2 * Cn, 2 * Ce);\n\n\t    Cn = Cn + tmp[0];\n\t    Ce = Ce + tmp[1];\n\t    Ce = Math.atan(sinh(Ce));\n\n\t    var sin_Cn = Math.sin(Cn);\n\t    var cos_Cn = Math.cos(Cn);\n\t    var sin_Ce = Math.sin(Ce);\n\t    var cos_Ce = Math.cos(Ce);\n\n\t    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n\t    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n\t    lon = adjust_lon(Ce + this.long0);\n\t    lat = gatg(this.cgb, Cn);\n\t  }\n\t  else {\n\t    lon = Infinity;\n\t    lat = Infinity;\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  return p;\n\t}\n\n\tvar names$4 = [\"Extended_Transverse_Mercator\", \"Extended Transverse Mercator\", \"etmerc\"];\n\tvar etmerc = {\n\t  init: init$3,\n\t  forward: forward$3,\n\t  inverse: inverse$3,\n\t  names: names$4\n\t};\n\n\tvar adjust_zone = function(zone, lon) {\n\t  if (zone === undefined) {\n\t    zone = Math.floor((adjust_lon(lon) + Math.PI) * 30 / Math.PI) + 1;\n\n\t    if (zone < 0) {\n\t      return 0;\n\t    } else if (zone > 60) {\n\t      return 60;\n\t    }\n\t  }\n\t  return zone;\n\t};\n\n\tvar dependsOn = 'etmerc';\n\tfunction init$4() {\n\t  var zone = adjust_zone(this.zone, this.long0);\n\t  if (zone === undefined) {\n\t    throw new Error('unknown utm zone');\n\t  }\n\t  this.lat0 = 0;\n\t  this.long0 =  ((6 * Math.abs(zone)) - 183) * D2R;\n\t  this.x0 = 500000;\n\t  this.y0 = this.utmSouth ? 10000000 : 0;\n\t  this.k0 = 0.9996;\n\n\t  etmerc.init.apply(this);\n\t  this.forward = etmerc.forward;\n\t  this.inverse = etmerc.inverse;\n\t}\n\n\tvar names$5 = [\"Universal Transverse Mercator System\", \"utm\"];\n\tvar utm = {\n\t  init: init$4,\n\t  names: names$5,\n\t  dependsOn: dependsOn\n\t};\n\n\tvar srat = function(esinp, exp) {\n\t  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n\t};\n\n\tvar MAX_ITER$1 = 20;\n\tfunction init$6() {\n\t  var sphi = Math.sin(this.lat0);\n\t  var cphi = Math.cos(this.lat0);\n\t  cphi *= cphi;\n\t  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n\t  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n\t  this.phic0 = Math.asin(sphi / this.C);\n\t  this.ratexp = 0.5 * this.C * this.e;\n\t  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n\t}\n\n\tfunction forward$5(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n\t  p.x = this.C * lon;\n\t  return p;\n\t}\n\n\tfunction inverse$5(p) {\n\t  var DEL_TOL = 1e-14;\n\t  var lon = p.x / this.C;\n\t  var lat = p.y;\n\t  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n\t  for (var i = MAX_ITER$1; i > 0; --i) {\n\t    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;\n\t    if (Math.abs(lat - p.y) < DEL_TOL) {\n\t      break;\n\t    }\n\t    p.y = lat;\n\t  }\n\t  /* convergence failed */\n\t  if (!i) {\n\t    return null;\n\t  }\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$7 = [\"gauss\"];\n\tvar gauss = {\n\t  init: init$6,\n\t  forward: forward$5,\n\t  inverse: inverse$5,\n\t  names: names$7\n\t};\n\n\tfunction init$5() {\n\t  gauss.init.apply(this);\n\t  if (!this.rc) {\n\t    return;\n\t  }\n\t  this.sinc0 = Math.sin(this.phic0);\n\t  this.cosc0 = Math.cos(this.phic0);\n\t  this.R2 = 2 * this.rc;\n\t  if (!this.title) {\n\t    this.title = \"Oblique Stereographic Alternative\";\n\t  }\n\t}\n\n\tfunction forward$4(p) {\n\t  var sinc, cosc, cosl, k;\n\t  p.x = adjust_lon(p.x - this.long0);\n\t  gauss.forward.apply(this, [p]);\n\t  sinc = Math.sin(p.y);\n\t  cosc = Math.cos(p.y);\n\t  cosl = Math.cos(p.x);\n\t  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n\t  p.x = k * cosc * Math.sin(p.x);\n\t  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n\t  p.x = this.a * p.x + this.x0;\n\t  p.y = this.a * p.y + this.y0;\n\t  return p;\n\t}\n\n\tfunction inverse$4(p) {\n\t  var sinc, cosc, lon, lat, rho;\n\t  p.x = (p.x - this.x0) / this.a;\n\t  p.y = (p.y - this.y0) / this.a;\n\n\t  p.x /= this.k0;\n\t  p.y /= this.k0;\n\t  if ((rho = Math.sqrt(p.x * p.x + p.y * p.y))) {\n\t    var c = 2 * Math.atan2(rho, this.R2);\n\t    sinc = Math.sin(c);\n\t    cosc = Math.cos(c);\n\t    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n\t    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n\t  }\n\t  else {\n\t    lat = this.phic0;\n\t    lon = 0;\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  gauss.inverse.apply(this, [p]);\n\t  p.x = adjust_lon(p.x + this.long0);\n\t  return p;\n\t}\n\n\tvar names$6 = [\"Stereographic_North_Pole\", \"Oblique_Stereographic\", \"Polar_Stereographic\", \"sterea\",\"Oblique Stereographic Alternative\",\"Double_Stereographic\"];\n\tvar sterea = {\n\t  init: init$5,\n\t  forward: forward$4,\n\t  inverse: inverse$4,\n\t  names: names$6\n\t};\n\n\tfunction ssfn_(phit, sinphi, eccen) {\n\t  sinphi *= eccen;\n\t  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));\n\t}\n\n\tfunction init$7() {\n\t  this.coslat0 = Math.cos(this.lat0);\n\t  this.sinlat0 = Math.sin(this.lat0);\n\t  if (this.sphere) {\n\t    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n\t      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));\n\t    }\n\t  }\n\t  else {\n\t    if (Math.abs(this.coslat0) <= EPSLN) {\n\t      if (this.lat0 > 0) {\n\t        //North pole\n\t        //trace('stere:north pole');\n\t        this.con = 1;\n\t      }\n\t      else {\n\t        //South pole\n\t        //trace('stere:south pole');\n\t        this.con = -1;\n\t      }\n\t    }\n\t    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));\n\t    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n\t      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));\n\t    }\n\t    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);\n\t    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;\n\t    this.cosX0 = Math.cos(this.X0);\n\t    this.sinX0 = Math.sin(this.X0);\n\t  }\n\t}\n\n\t// Stereographic forward equations--mapping lat,long to x,y\n\tfunction forward$6(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var sinlat = Math.sin(lat);\n\t  var coslat = Math.cos(lat);\n\t  var A, X, sinX, cosX, ts, rh;\n\t  var dlon = adjust_lon(lon - this.long0);\n\n\t  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {\n\t    //case of the origine point\n\t    //trace('stere:this is the origin point');\n\t    p.x = NaN;\n\t    p.y = NaN;\n\t    return p;\n\t  }\n\t  if (this.sphere) {\n\t    //trace('stere:sphere case');\n\t    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));\n\t    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;\n\t    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;\n\t    return p;\n\t  }\n\t  else {\n\t    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;\n\t    cosX = Math.cos(X);\n\t    sinX = Math.sin(X);\n\t    if (Math.abs(this.coslat0) <= EPSLN) {\n\t      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);\n\t      rh = 2 * this.a * this.k0 * ts / this.cons;\n\t      p.x = this.x0 + rh * Math.sin(lon - this.long0);\n\t      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);\n\t      //trace(p.toString());\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sinlat0) < EPSLN) {\n\t      //Eq\n\t      //trace('stere:equateur');\n\t      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));\n\t      p.y = A * sinX;\n\t    }\n\t    else {\n\t      //other case\n\t      //trace('stere:normal case');\n\t      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));\n\t      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;\n\t    }\n\t    p.x = A * cosX * Math.sin(dlon) + this.x0;\n\t  }\n\t  //trace(p.toString());\n\t  return p;\n\t}\n\n\t//* Stereographic inverse equations--mapping x,y to lat/long\n\tfunction inverse$6(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var lon, lat, ts, ce, Chi;\n\t  var rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t  if (this.sphere) {\n\t    var c = 2 * Math.atan(rh / (2 * this.a * this.k0));\n\t    lon = this.long0;\n\t    lat = this.lat0;\n\t    if (rh <= EPSLN) {\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);\n\t    if (Math.abs(this.coslat0) < EPSLN) {\n\t      if (this.lat0 > 0) {\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n\t      }\n\t      else {\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n\t      }\n\t    }\n\t    else {\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));\n\t    }\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  else {\n\t    if (Math.abs(this.coslat0) <= EPSLN) {\n\t      if (rh <= EPSLN) {\n\t        lat = this.lat0;\n\t        lon = this.long0;\n\t        p.x = lon;\n\t        p.y = lat;\n\t        //trace(p.toString());\n\t        return p;\n\t      }\n\t      p.x *= this.con;\n\t      p.y *= this.con;\n\t      ts = rh * this.cons / (2 * this.a * this.k0);\n\t      lat = this.con * phi2z(this.e, ts);\n\t      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));\n\t    }\n\t    else {\n\t      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));\n\t      lon = this.long0;\n\t      if (rh <= EPSLN) {\n\t        Chi = this.X0;\n\t      }\n\t      else {\n\t        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));\n\t      }\n\t      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));\n\t    }\n\t  }\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  //trace(p.toString());\n\t  return p;\n\n\t}\n\n\tvar names$8 = [\"stere\", \"Stereographic_South_Pole\", \"Polar Stereographic (variant B)\"];\n\tvar stere = {\n\t  init: init$7,\n\t  forward: forward$6,\n\t  inverse: inverse$6,\n\t  names: names$8,\n\t  ssfn_: ssfn_\n\t};\n\n\t/*\n\t  references:\n\t    Formules et constantes pour le Calcul pour la\n\t    projection cylindrique conforme  axe oblique et pour la transformation entre\n\t    des systmes de rfrence.\n\t    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf\n\t  */\n\n\tfunction init$8() {\n\t  var phy0 = this.lat0;\n\t  this.lambda0 = this.long0;\n\t  var sinPhy0 = Math.sin(phy0);\n\t  var semiMajorAxis = this.a;\n\t  var invF = this.rf;\n\t  var flattening = 1 / invF;\n\t  var e2 = 2 * flattening - Math.pow(flattening, 2);\n\t  var e = this.e = Math.sqrt(e2);\n\t  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));\n\t  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));\n\t  this.b0 = Math.asin(sinPhy0 / this.alpha);\n\t  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));\n\t  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));\n\t  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));\n\t  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;\n\t}\n\n\tfunction forward$7(p) {\n\t  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));\n\t  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));\n\t  var S = -this.alpha * (Sa1 + Sa2) + this.K;\n\n\t  // spheric latitude\n\t  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);\n\n\t  // spheric longitude\n\t  var I = this.alpha * (p.x - this.lambda0);\n\n\t  // psoeudo equatorial rotation\n\t  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));\n\n\t  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));\n\n\t  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;\n\t  p.x = this.R * rotI + this.x0;\n\t  return p;\n\t}\n\n\tfunction inverse$7(p) {\n\t  var Y = p.x - this.x0;\n\t  var X = p.y - this.y0;\n\n\t  var rotI = Y / this.R;\n\t  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);\n\n\t  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));\n\t  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));\n\n\t  var lambda = this.lambda0 + I / this.alpha;\n\n\t  var S = 0;\n\t  var phy = b;\n\t  var prevPhy = -1000;\n\t  var iteration = 0;\n\t  while (Math.abs(phy - prevPhy) > 0.0000001) {\n\t    if (++iteration > 20) {\n\t      //...reportError(\"omercFwdInfinity\");\n\t      return;\n\t    }\n\t    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));\n\t    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));\n\t    prevPhy = phy;\n\t    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;\n\t  }\n\n\t  p.x = lambda;\n\t  p.y = phy;\n\t  return p;\n\t}\n\n\tvar names$9 = [\"somerc\"];\n\tvar somerc = {\n\t  init: init$8,\n\t  forward: forward$7,\n\t  inverse: inverse$7,\n\t  names: names$9\n\t};\n\n\t/* Initialize the Oblique Mercator  projection\n\t    ------------------------------------------*/\n\tfunction init$9() {\n\t  this.no_off = this.no_off || false;\n\t  this.no_rot = this.no_rot || false;\n\n\t  if (isNaN(this.k0)) {\n\t    this.k0 = 1;\n\t  }\n\t  var sinlat = Math.sin(this.lat0);\n\t  var coslat = Math.cos(this.lat0);\n\t  var con = this.e * sinlat;\n\n\t  this.bl = Math.sqrt(1 + this.es / (1 - this.es) * Math.pow(coslat, 4));\n\t  this.al = this.a * this.bl * this.k0 * Math.sqrt(1 - this.es) / (1 - con * con);\n\t  var t0 = tsfnz(this.e, this.lat0, sinlat);\n\t  var dl = this.bl / coslat * Math.sqrt((1 - this.es) / (1 - con * con));\n\t  if (dl * dl < 1) {\n\t    dl = 1;\n\t  }\n\t  var fl;\n\t  var gl;\n\t  if (!isNaN(this.longc)) {\n\t    //Central point and azimuth method\n\n\t    if (this.lat0 >= 0) {\n\t      fl = dl + Math.sqrt(dl * dl - 1);\n\t    }\n\t    else {\n\t      fl = dl - Math.sqrt(dl * dl - 1);\n\t    }\n\t    this.el = fl * Math.pow(t0, this.bl);\n\t    gl = 0.5 * (fl - 1 / fl);\n\t    this.gamma0 = Math.asin(Math.sin(this.alpha) / dl);\n\t    this.long0 = this.longc - Math.asin(gl * Math.tan(this.gamma0)) / this.bl;\n\n\t  }\n\t  else {\n\t    //2 points method\n\t    var t1 = tsfnz(this.e, this.lat1, Math.sin(this.lat1));\n\t    var t2 = tsfnz(this.e, this.lat2, Math.sin(this.lat2));\n\t    if (this.lat0 >= 0) {\n\t      this.el = (dl + Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n\t    }\n\t    else {\n\t      this.el = (dl - Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n\t    }\n\t    var hl = Math.pow(t1, this.bl);\n\t    var ll = Math.pow(t2, this.bl);\n\t    fl = this.el / hl;\n\t    gl = 0.5 * (fl - 1 / fl);\n\t    var jl = (this.el * this.el - ll * hl) / (this.el * this.el + ll * hl);\n\t    var pl = (ll - hl) / (ll + hl);\n\t    var dlon12 = adjust_lon(this.long1 - this.long2);\n\t    this.long0 = 0.5 * (this.long1 + this.long2) - Math.atan(jl * Math.tan(0.5 * this.bl * (dlon12)) / pl) / this.bl;\n\t    this.long0 = adjust_lon(this.long0);\n\t    var dlon10 = adjust_lon(this.long1 - this.long0);\n\t    this.gamma0 = Math.atan(Math.sin(this.bl * (dlon10)) / gl);\n\t    this.alpha = Math.asin(dl * Math.sin(this.gamma0));\n\t  }\n\n\t  if (this.no_off) {\n\t    this.uc = 0;\n\t  }\n\t  else {\n\t    if (this.lat0 >= 0) {\n\t      this.uc = this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n\t    }\n\t    else {\n\t      this.uc = -1 * this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n\t    }\n\t  }\n\n\t}\n\n\t/* Oblique Mercator forward equations--mapping lat,long to x,y\n\t    ----------------------------------------------------------*/\n\tfunction forward$8(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var us, vs;\n\t  var con;\n\t  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n\t    if (lat > 0) {\n\t      con = -1;\n\t    }\n\t    else {\n\t      con = 1;\n\t    }\n\t    vs = this.al / this.bl * Math.log(Math.tan(FORTPI + con * this.gamma0 * 0.5));\n\t    us = -1 * con * HALF_PI * this.al / this.bl;\n\t  }\n\t  else {\n\t    var t = tsfnz(this.e, lat, Math.sin(lat));\n\t    var ql = this.el / Math.pow(t, this.bl);\n\t    var sl = 0.5 * (ql - 1 / ql);\n\t    var tl = 0.5 * (ql + 1 / ql);\n\t    var vl = Math.sin(this.bl * (dlon));\n\t    var ul = (sl * Math.sin(this.gamma0) - vl * Math.cos(this.gamma0)) / tl;\n\t    if (Math.abs(Math.abs(ul) - 1) <= EPSLN) {\n\t      vs = Number.POSITIVE_INFINITY;\n\t    }\n\t    else {\n\t      vs = 0.5 * this.al * Math.log((1 - ul) / (1 + ul)) / this.bl;\n\t    }\n\t    if (Math.abs(Math.cos(this.bl * (dlon))) <= EPSLN) {\n\t      us = this.al * this.bl * (dlon);\n\t    }\n\t    else {\n\t      us = this.al * Math.atan2(sl * Math.cos(this.gamma0) + vl * Math.sin(this.gamma0), Math.cos(this.bl * dlon)) / this.bl;\n\t    }\n\t  }\n\n\t  if (this.no_rot) {\n\t    p.x = this.x0 + us;\n\t    p.y = this.y0 + vs;\n\t  }\n\t  else {\n\n\t    us -= this.uc;\n\t    p.x = this.x0 + vs * Math.cos(this.alpha) + us * Math.sin(this.alpha);\n\t    p.y = this.y0 + us * Math.cos(this.alpha) - vs * Math.sin(this.alpha);\n\t  }\n\t  return p;\n\t}\n\n\tfunction inverse$8(p) {\n\t  var us, vs;\n\t  if (this.no_rot) {\n\t    vs = p.y - this.y0;\n\t    us = p.x - this.x0;\n\t  }\n\t  else {\n\t    vs = (p.x - this.x0) * Math.cos(this.alpha) - (p.y - this.y0) * Math.sin(this.alpha);\n\t    us = (p.y - this.y0) * Math.cos(this.alpha) + (p.x - this.x0) * Math.sin(this.alpha);\n\t    us += this.uc;\n\t  }\n\t  var qp = Math.exp(-1 * this.bl * vs / this.al);\n\t  var sp = 0.5 * (qp - 1 / qp);\n\t  var tp = 0.5 * (qp + 1 / qp);\n\t  var vp = Math.sin(this.bl * us / this.al);\n\t  var up = (vp * Math.cos(this.gamma0) + sp * Math.sin(this.gamma0)) / tp;\n\t  var ts = Math.pow(this.el / Math.sqrt((1 + up) / (1 - up)), 1 / this.bl);\n\t  if (Math.abs(up - 1) < EPSLN) {\n\t    p.x = this.long0;\n\t    p.y = HALF_PI;\n\t  }\n\t  else if (Math.abs(up + 1) < EPSLN) {\n\t    p.x = this.long0;\n\t    p.y = -1 * HALF_PI;\n\t  }\n\t  else {\n\t    p.y = phi2z(this.e, ts);\n\t    p.x = adjust_lon(this.long0 - Math.atan2(sp * Math.cos(this.gamma0) - vp * Math.sin(this.gamma0), Math.cos(this.bl * us / this.al)) / this.bl);\n\t  }\n\t  return p;\n\t}\n\n\tvar names$10 = [\"Hotine_Oblique_Mercator\", \"Hotine Oblique Mercator\", \"Hotine_Oblique_Mercator_Azimuth_Natural_Origin\", \"Hotine_Oblique_Mercator_Azimuth_Center\", \"omerc\"];\n\tvar omerc = {\n\t  init: init$9,\n\t  forward: forward$8,\n\t  inverse: inverse$8,\n\t  names: names$10\n\t};\n\n\tfunction init$10() {\n\n\t  // array of:  r_maj,r_min,lat1,lat2,c_lon,c_lat,false_east,false_north\n\t  //double c_lat;                   /* center latitude                      */\n\t  //double c_lon;                   /* center longitude                     */\n\t  //double lat1;                    /* first standard parallel              */\n\t  //double lat2;                    /* second standard parallel             */\n\t  //double r_maj;                   /* major axis                           */\n\t  //double r_min;                   /* minor axis                           */\n\t  //double false_east;              /* x offset in meters                   */\n\t  //double false_north;             /* y offset in meters                   */\n\n\t  if (!this.lat2) {\n\t    this.lat2 = this.lat1;\n\t  } //if lat2 is not defined\n\t  if (!this.k0) {\n\t    this.k0 = 1;\n\t  }\n\t  this.x0 = this.x0 || 0;\n\t  this.y0 = this.y0 || 0;\n\t  // Standard Parallels cannot be equal and on opposite sides of the equator\n\t  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n\t    return;\n\t  }\n\n\t  var temp = this.b / this.a;\n\t  this.e = Math.sqrt(1 - temp * temp);\n\n\t  var sin1 = Math.sin(this.lat1);\n\t  var cos1 = Math.cos(this.lat1);\n\t  var ms1 = msfnz(this.e, sin1, cos1);\n\t  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n\t  var sin2 = Math.sin(this.lat2);\n\t  var cos2 = Math.cos(this.lat2);\n\t  var ms2 = msfnz(this.e, sin2, cos2);\n\t  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n\t  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n\t  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n\t    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n\t  }\n\t  else {\n\t    this.ns = sin1;\n\t  }\n\t  if (isNaN(this.ns)) {\n\t    this.ns = sin1;\n\t  }\n\t  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n\t  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n\t  if (!this.title) {\n\t    this.title = \"Lambert Conformal Conic\";\n\t  }\n\t}\n\n\t// Lambert Conformal conic forward equations--mapping lat,long to x,y\n\t// -----------------------------------------------------------------\n\tfunction forward$9(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  // singular cases :\n\t  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n\t    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n\t  }\n\n\t  var con = Math.abs(Math.abs(lat) - HALF_PI);\n\t  var ts, rh1;\n\t  if (con > EPSLN) {\n\t    ts = tsfnz(this.e, lat, Math.sin(lat));\n\t    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n\t  }\n\t  else {\n\t    con = lat * this.ns;\n\t    if (con <= 0) {\n\t      return null;\n\t    }\n\t    rh1 = 0;\n\t  }\n\t  var theta = this.ns * adjust_lon(lon - this.long0);\n\t  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n\t  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n\t  return p;\n\t}\n\n\t// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n\t// -----------------------------------------------------------------\n\tfunction inverse$9(p) {\n\n\t  var rh1, con, ts;\n\t  var lat, lon;\n\t  var x = (p.x - this.x0) / this.k0;\n\t  var y = (this.rh - (p.y - this.y0) / this.k0);\n\t  if (this.ns > 0) {\n\t    rh1 = Math.sqrt(x * x + y * y);\n\t    con = 1;\n\t  }\n\t  else {\n\t    rh1 = -Math.sqrt(x * x + y * y);\n\t    con = -1;\n\t  }\n\t  var theta = 0;\n\t  if (rh1 !== 0) {\n\t    theta = Math.atan2((con * x), (con * y));\n\t  }\n\t  if ((rh1 !== 0) || (this.ns > 0)) {\n\t    con = 1 / this.ns;\n\t    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n\t    lat = phi2z(this.e, ts);\n\t    if (lat === -9999) {\n\t      return null;\n\t    }\n\t  }\n\t  else {\n\t    lat = -HALF_PI;\n\t  }\n\t  lon = adjust_lon(theta / this.ns + this.long0);\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$11 = [\"Lambert Tangential Conformal Conic Projection\", \"Lambert_Conformal_Conic\", \"Lambert_Conformal_Conic_2SP\", \"lcc\"];\n\tvar lcc = {\n\t  init: init$10,\n\t  forward: forward$9,\n\t  inverse: inverse$9,\n\t  names: names$11\n\t};\n\n\tfunction init$11() {\n\t  this.a = 6377397.155;\n\t  this.es = 0.006674372230614;\n\t  this.e = Math.sqrt(this.es);\n\t  if (!this.lat0) {\n\t    this.lat0 = 0.863937979737193;\n\t  }\n\t  if (!this.long0) {\n\t    this.long0 = 0.7417649320975901 - 0.308341501185665;\n\t  }\n\t  /* if scale not set default to 0.9999 */\n\t  if (!this.k0) {\n\t    this.k0 = 0.9999;\n\t  }\n\t  this.s45 = 0.785398163397448; /* 45 */\n\t  this.s90 = 2 * this.s45;\n\t  this.fi0 = this.lat0;\n\t  this.e2 = this.es;\n\t  this.e = Math.sqrt(this.e2);\n\t  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));\n\t  this.uq = 1.04216856380474;\n\t  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);\n\t  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);\n\t  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;\n\t  this.k1 = this.k0;\n\t  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));\n\t  this.s0 = 1.37008346281555;\n\t  this.n = Math.sin(this.s0);\n\t  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);\n\t  this.ad = this.s90 - this.uq;\n\t}\n\n\t/* ellipsoid */\n\t/* calculate xy from lat/lon */\n\t/* Constants, identical to inverse transform function */\n\tfunction forward$10(p) {\n\t  var gfi, u, deltav, s, d, eps, ro;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var delta_lon = adjust_lon(lon - this.long0);\n\t  /* Transformation */\n\t  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));\n\t  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);\n\t  deltav = -delta_lon * this.alfa;\n\t  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));\n\t  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));\n\t  eps = this.n * d;\n\t  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);\n\t  p.y = ro * Math.cos(eps) / 1;\n\t  p.x = ro * Math.sin(eps) / 1;\n\n\t  if (!this.czech) {\n\t    p.y *= -1;\n\t    p.x *= -1;\n\t  }\n\t  return (p);\n\t}\n\n\t/* calculate lat/lon from xy */\n\tfunction inverse$10(p) {\n\t  var u, deltav, s, d, eps, ro, fi1;\n\t  var ok;\n\n\t  /* Transformation */\n\t  /* revert y, x*/\n\t  var tmp = p.x;\n\t  p.x = p.y;\n\t  p.y = tmp;\n\t  if (!this.czech) {\n\t    p.y *= -1;\n\t    p.x *= -1;\n\t  }\n\t  ro = Math.sqrt(p.x * p.x + p.y * p.y);\n\t  eps = Math.atan2(p.y, p.x);\n\t  d = eps / Math.sin(this.s0);\n\t  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);\n\t  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));\n\t  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));\n\t  p.x = this.long0 - deltav / this.alfa;\n\t  fi1 = u;\n\t  ok = 0;\n\t  var iter = 0;\n\t  do {\n\t    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);\n\t    if (Math.abs(fi1 - p.y) < 0.0000000001) {\n\t      ok = 1;\n\t    }\n\t    fi1 = p.y;\n\t    iter += 1;\n\t  } while (ok === 0 && iter < 15);\n\t  if (iter >= 15) {\n\t    return null;\n\t  }\n\n\t  return (p);\n\t}\n\n\tvar names$12 = [\"Krovak\", \"krovak\"];\n\tvar krovak = {\n\t  init: init$11,\n\t  forward: forward$10,\n\t  inverse: inverse$10,\n\t  names: names$12\n\t};\n\n\tvar mlfn = function(e0, e1, e2, e3, phi) {\n\t  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));\n\t};\n\n\tvar e0fn = function(x) {\n\t  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));\n\t};\n\n\tvar e1fn = function(x) {\n\t  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));\n\t};\n\n\tvar e2fn = function(x) {\n\t  return (0.05859375 * x * x * (1 + 0.75 * x));\n\t};\n\n\tvar e3fn = function(x) {\n\t  return (x * x * x * (35 / 3072));\n\t};\n\n\tvar gN = function(a, e, sinphi) {\n\t  var temp = e * sinphi;\n\t  return a / Math.sqrt(1 - temp * temp);\n\t};\n\n\tvar adjust_lat = function(x) {\n\t  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));\n\t};\n\n\tvar imlfn = function(ml, e0, e1, e2, e3) {\n\t  var phi;\n\t  var dphi;\n\n\t  phi = ml / e0;\n\t  for (var i = 0; i < 15; i++) {\n\t    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));\n\t    phi += dphi;\n\t    if (Math.abs(dphi) <= 0.0000000001) {\n\t      return phi;\n\t    }\n\t  }\n\n\t  //..reportError(\"IMLFN-CONV:Latitude failed to converge after 15 iterations\");\n\t  return NaN;\n\t};\n\n\tfunction init$12() {\n\t  if (!this.sphere) {\n\t    this.e0 = e0fn(this.es);\n\t    this.e1 = e1fn(this.es);\n\t    this.e2 = e2fn(this.es);\n\t    this.e3 = e3fn(this.es);\n\t    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n\t  }\n\t}\n\n\t/* Cassini forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------------------------*/\n\tfunction forward$11(p) {\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  var x, y;\n\t  var lam = p.x;\n\t  var phi = p.y;\n\t  lam = adjust_lon(lam - this.long0);\n\n\t  if (this.sphere) {\n\t    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));\n\t    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);\n\t  }\n\t  else {\n\t    //ellipsoid\n\t    var sinphi = Math.sin(phi);\n\t    var cosphi = Math.cos(phi);\n\t    var nl = gN(this.a, this.e, sinphi);\n\t    var tl = Math.tan(phi) * Math.tan(phi);\n\t    var al = lam * Math.cos(phi);\n\t    var asq = al * al;\n\t    var cl = this.es * cosphi * cosphi / (1 - this.es);\n\t    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\n\t    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));\n\t    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);\n\n\n\t  }\n\n\t  p.x = x + this.x0;\n\t  p.y = y + this.y0;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$11(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var x = p.x / this.a;\n\t  var y = p.y / this.a;\n\t  var phi, lam;\n\n\t  if (this.sphere) {\n\t    var dd = y + this.lat0;\n\t    phi = Math.asin(Math.sin(dd) * Math.cos(x));\n\t    lam = Math.atan2(Math.tan(x), Math.cos(dd));\n\t  }\n\t  else {\n\t    /* ellipsoid */\n\t    var ml1 = this.ml0 / this.a + y;\n\t    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);\n\t    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {\n\t      p.x = this.long0;\n\t      p.y = HALF_PI;\n\t      if (y < 0) {\n\t        p.y *= -1;\n\t      }\n\t      return p;\n\t    }\n\t    var nl1 = gN(this.a, this.e, Math.sin(phi1));\n\n\t    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);\n\t    var tl1 = Math.pow(Math.tan(phi1), 2);\n\t    var dl = x * this.a / nl1;\n\t    var dsq = dl * dl;\n\t    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);\n\t    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);\n\n\t  }\n\n\t  p.x = adjust_lon(lam + this.long0);\n\t  p.y = adjust_lat(phi);\n\t  return p;\n\n\t}\n\n\tvar names$13 = [\"Cassini\", \"Cassini_Soldner\", \"cass\"];\n\tvar cass = {\n\t  init: init$12,\n\t  forward: forward$11,\n\t  inverse: inverse$11,\n\t  names: names$13\n\t};\n\n\tvar qsfnz = function(eccent, sinphi) {\n\t  var con;\n\t  if (eccent > 1.0e-7) {\n\t    con = eccent * sinphi;\n\t    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));\n\t  }\n\t  else {\n\t    return (2 * sinphi);\n\t  }\n\t};\n\n\t/*\n\t  reference\n\t    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n\t    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n\t  */\n\n\tvar S_POLE = 1;\n\n\tvar N_POLE = 2;\n\tvar EQUIT = 3;\n\tvar OBLIQ = 4;\n\n\t/* Initialize the Lambert Azimuthal Equal Area projection\n\t  ------------------------------------------------------*/\n\tfunction init$13() {\n\t  var t = Math.abs(this.lat0);\n\t  if (Math.abs(t - HALF_PI) < EPSLN) {\n\t    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;\n\t  }\n\t  else if (Math.abs(t) < EPSLN) {\n\t    this.mode = this.EQUIT;\n\t  }\n\t  else {\n\t    this.mode = this.OBLIQ;\n\t  }\n\t  if (this.es > 0) {\n\t    var sinphi;\n\n\t    this.qp = qsfnz(this.e, 1);\n\t    this.mmf = 0.5 / (1 - this.es);\n\t    this.apa = authset(this.es);\n\t    switch (this.mode) {\n\t    case this.N_POLE:\n\t      this.dd = 1;\n\t      break;\n\t    case this.S_POLE:\n\t      this.dd = 1;\n\t      break;\n\t    case this.EQUIT:\n\t      this.rq = Math.sqrt(0.5 * this.qp);\n\t      this.dd = 1 / this.rq;\n\t      this.xmf = 1;\n\t      this.ymf = 0.5 * this.qp;\n\t      break;\n\t    case this.OBLIQ:\n\t      this.rq = Math.sqrt(0.5 * this.qp);\n\t      sinphi = Math.sin(this.lat0);\n\t      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;\n\t      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);\n\t      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);\n\t      this.ymf = (this.xmf = this.rq) / this.dd;\n\t      this.xmf *= this.dd;\n\t      break;\n\t    }\n\t  }\n\t  else {\n\t    if (this.mode === this.OBLIQ) {\n\t      this.sinph0 = Math.sin(this.lat0);\n\t      this.cosph0 = Math.cos(this.lat0);\n\t    }\n\t  }\n\t}\n\n\t/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------------------------*/\n\tfunction forward$12(p) {\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;\n\t  var lam = p.x;\n\t  var phi = p.y;\n\n\t  lam = adjust_lon(lam - this.long0);\n\t  if (this.sphere) {\n\t    sinphi = Math.sin(phi);\n\t    cosphi = Math.cos(phi);\n\t    coslam = Math.cos(lam);\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n\t      if (y <= EPSLN) {\n\t        return null;\n\t      }\n\t      y = Math.sqrt(2 / y);\n\t      x = y * cosphi * Math.sin(lam);\n\t      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n\t    }\n\t    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n\t      if (this.mode === this.N_POLE) {\n\t        coslam = -coslam;\n\t      }\n\t      if (Math.abs(phi + this.phi0) < EPSLN) {\n\t        return null;\n\t      }\n\t      y = FORTPI - phi * 0.5;\n\t      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));\n\t      x = y * Math.sin(lam);\n\t      y *= coslam;\n\t    }\n\t  }\n\t  else {\n\t    sinb = 0;\n\t    cosb = 0;\n\t    b = 0;\n\t    coslam = Math.cos(lam);\n\t    sinlam = Math.sin(lam);\n\t    sinphi = Math.sin(phi);\n\t    q = qsfnz(this.e, sinphi);\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      sinb = q / this.qp;\n\t      cosb = Math.sqrt(1 - sinb * sinb);\n\t    }\n\t    switch (this.mode) {\n\t    case this.OBLIQ:\n\t      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;\n\t      break;\n\t    case this.EQUIT:\n\t      b = 1 + cosb * coslam;\n\t      break;\n\t    case this.N_POLE:\n\t      b = HALF_PI + phi;\n\t      q = this.qp - q;\n\t      break;\n\t    case this.S_POLE:\n\t      b = phi - HALF_PI;\n\t      q = this.qp + q;\n\t      break;\n\t    }\n\t    if (Math.abs(b) < EPSLN) {\n\t      return null;\n\t    }\n\t    switch (this.mode) {\n\t    case this.OBLIQ:\n\t    case this.EQUIT:\n\t      b = Math.sqrt(2 / b);\n\t      if (this.mode === this.OBLIQ) {\n\t        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);\n\t      }\n\t      else {\n\t        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;\n\t      }\n\t      x = this.xmf * b * cosb * sinlam;\n\t      break;\n\t    case this.N_POLE:\n\t    case this.S_POLE:\n\t      if (q >= 0) {\n\t        x = (b = Math.sqrt(q)) * sinlam;\n\t        y = coslam * ((this.mode === this.S_POLE) ? b : -b);\n\t      }\n\t      else {\n\t        x = y = 0;\n\t      }\n\t      break;\n\t    }\n\t  }\n\n\t  p.x = this.a * x + this.x0;\n\t  p.y = this.a * y + this.y0;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$12(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var x = p.x / this.a;\n\t  var y = p.y / this.a;\n\t  var lam, phi, cCe, sCe, q, rho, ab;\n\t  if (this.sphere) {\n\t    var cosz = 0,\n\t      rh, sinz = 0;\n\n\t    rh = Math.sqrt(x * x + y * y);\n\t    phi = rh * 0.5;\n\t    if (phi > 1) {\n\t      return null;\n\t    }\n\t    phi = 2 * Math.asin(phi);\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      sinz = Math.sin(phi);\n\t      cosz = Math.cos(phi);\n\t    }\n\t    switch (this.mode) {\n\t    case this.EQUIT:\n\t      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);\n\t      x *= sinz;\n\t      y = cosz * rh;\n\t      break;\n\t    case this.OBLIQ:\n\t      phi = (Math.abs(rh) <= EPSLN) ? this.phi0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);\n\t      x *= sinz * this.cosph0;\n\t      y = (cosz - Math.sin(phi) * this.sinph0) * rh;\n\t      break;\n\t    case this.N_POLE:\n\t      y = -y;\n\t      phi = HALF_PI - phi;\n\t      break;\n\t    case this.S_POLE:\n\t      phi -= HALF_PI;\n\t      break;\n\t    }\n\t    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);\n\t  }\n\t  else {\n\t    ab = 0;\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      x /= this.dd;\n\t      y *= this.dd;\n\t      rho = Math.sqrt(x * x + y * y);\n\t      if (rho < EPSLN) {\n\t        p.x = 0;\n\t        p.y = this.phi0;\n\t        return p;\n\t      }\n\t      sCe = 2 * Math.asin(0.5 * rho / this.rq);\n\t      cCe = Math.cos(sCe);\n\t      x *= (sCe = Math.sin(sCe));\n\t      if (this.mode === this.OBLIQ) {\n\t        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;\n\t        q = this.qp * ab;\n\t        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;\n\t      }\n\t      else {\n\t        ab = y * sCe / rho;\n\t        q = this.qp * ab;\n\t        y = rho * cCe;\n\t      }\n\t    }\n\t    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n\t      if (this.mode === this.N_POLE) {\n\t        y = -y;\n\t      }\n\t      q = (x * x + y * y);\n\t      if (!q) {\n\t        p.x = 0;\n\t        p.y = this.phi0;\n\t        return p;\n\t      }\n\t      ab = 1 - q / this.qp;\n\t      if (this.mode === this.S_POLE) {\n\t        ab = -ab;\n\t      }\n\t    }\n\t    lam = Math.atan2(x, y);\n\t    phi = authlat(Math.asin(ab), this.apa);\n\t  }\n\n\t  p.x = adjust_lon(this.long0 + lam);\n\t  p.y = phi;\n\t  return p;\n\t}\n\n\t/* determine latitude from authalic latitude */\n\tvar P00 = 0.33333333333333333333;\n\n\tvar P01 = 0.17222222222222222222;\n\tvar P02 = 0.10257936507936507936;\n\tvar P10 = 0.06388888888888888888;\n\tvar P11 = 0.06640211640211640211;\n\tvar P20 = 0.01641501294219154443;\n\n\tfunction authset(es) {\n\t  var t;\n\t  var APA = [];\n\t  APA[0] = es * P00;\n\t  t = es * es;\n\t  APA[0] += t * P01;\n\t  APA[1] = t * P10;\n\t  t *= es;\n\t  APA[0] += t * P02;\n\t  APA[1] += t * P11;\n\t  APA[2] = t * P20;\n\t  return APA;\n\t}\n\n\tfunction authlat(beta, APA) {\n\t  var t = beta + beta;\n\t  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));\n\t}\n\n\tvar names$14 = [\"Lambert Azimuthal Equal Area\", \"Lambert_Azimuthal_Equal_Area\", \"laea\"];\n\tvar laea = {\n\t  init: init$13,\n\t  forward: forward$12,\n\t  inverse: inverse$12,\n\t  names: names$14,\n\t  S_POLE: S_POLE,\n\t  N_POLE: N_POLE,\n\t  EQUIT: EQUIT,\n\t  OBLIQ: OBLIQ\n\t};\n\n\tvar asinz = function(x) {\n\t  if (Math.abs(x) > 1) {\n\t    x = (x > 1) ? 1 : -1;\n\t  }\n\t  return Math.asin(x);\n\t};\n\n\tfunction init$14() {\n\n\t  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n\t    return;\n\t  }\n\t  this.temp = this.b / this.a;\n\t  this.es = 1 - Math.pow(this.temp, 2);\n\t  this.e3 = Math.sqrt(this.es);\n\n\t  this.sin_po = Math.sin(this.lat1);\n\t  this.cos_po = Math.cos(this.lat1);\n\t  this.t1 = this.sin_po;\n\t  this.con = this.sin_po;\n\t  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);\n\t  this.qs1 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n\t  this.sin_po = Math.sin(this.lat2);\n\t  this.cos_po = Math.cos(this.lat2);\n\t  this.t2 = this.sin_po;\n\t  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);\n\t  this.qs2 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n\t  this.sin_po = Math.sin(this.lat0);\n\t  this.cos_po = Math.cos(this.lat0);\n\t  this.t3 = this.sin_po;\n\t  this.qs0 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n\t  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n\t    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);\n\t  }\n\t  else {\n\t    this.ns0 = this.con;\n\t  }\n\t  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;\n\t  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;\n\t}\n\n\t/* Albers Conical Equal Area forward equations--mapping lat,long to x,y\n\t  -------------------------------------------------------------------*/\n\tfunction forward$13(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  this.sin_phi = Math.sin(lat);\n\t  this.cos_phi = Math.cos(lat);\n\n\t  var qs = qsfnz(this.e3, this.sin_phi, this.cos_phi);\n\t  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;\n\t  var theta = this.ns0 * adjust_lon(lon - this.long0);\n\t  var x = rh1 * Math.sin(theta) + this.x0;\n\t  var y = this.rh - rh1 * Math.cos(theta) + this.y0;\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$13(p) {\n\t  var rh1, qs, con, theta, lon, lat;\n\n\t  p.x -= this.x0;\n\t  p.y = this.rh - p.y + this.y0;\n\t  if (this.ns0 >= 0) {\n\t    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = 1;\n\t  }\n\t  else {\n\t    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = -1;\n\t  }\n\t  theta = 0;\n\t  if (rh1 !== 0) {\n\t    theta = Math.atan2(con * p.x, con * p.y);\n\t  }\n\t  con = rh1 * this.ns0 / this.a;\n\t  if (this.sphere) {\n\t    lat = Math.asin((this.c - con * con) / (2 * this.ns0));\n\t  }\n\t  else {\n\t    qs = (this.c - con * con) / this.ns0;\n\t    lat = this.phi1z(this.e3, qs);\n\t  }\n\n\t  lon = adjust_lon(theta / this.ns0 + this.long0);\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\t/* Function to compute phi1, the latitude for the inverse of the\n\t   Albers Conical Equal-Area projection.\n\t-------------------------------------------*/\n\tfunction phi1z(eccent, qs) {\n\t  var sinphi, cosphi, con, com, dphi;\n\t  var phi = asinz(0.5 * qs);\n\t  if (eccent < EPSLN) {\n\t    return phi;\n\t  }\n\n\t  var eccnts = eccent * eccent;\n\t  for (var i = 1; i <= 25; i++) {\n\t    sinphi = Math.sin(phi);\n\t    cosphi = Math.cos(phi);\n\t    con = eccent * sinphi;\n\t    com = 1 - con * con;\n\t    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n\t    phi = phi + dphi;\n\t    if (Math.abs(dphi) <= 1e-7) {\n\t      return phi;\n\t    }\n\t  }\n\t  return null;\n\t}\n\n\tvar names$15 = [\"Albers_Conic_Equal_Area\", \"Albers\", \"aea\"];\n\tvar aea = {\n\t  init: init$14,\n\t  forward: forward$13,\n\t  inverse: inverse$13,\n\t  names: names$15,\n\t  phi1z: phi1z\n\t};\n\n\t/*\n\t  reference:\n\t    Wolfram Mathworld \"Gnomonic Projection\"\n\t    http://mathworld.wolfram.com/GnomonicProjection.html\n\t    Accessed: 12th November 2009\n\t  */\n\tfunction init$15() {\n\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  this.sin_p14 = Math.sin(this.lat0);\n\t  this.cos_p14 = Math.cos(this.lat0);\n\t  // Approximation for projecting points to the horizon (infinity)\n\t  this.infinity_dist = 1000 * this.a;\n\t  this.rc = 1;\n\t}\n\n\t/* Gnomonic forward equations--mapping lat,long to x,y\n\t    ---------------------------------------------------*/\n\tfunction forward$14(p) {\n\t  var sinphi, cosphi; /* sin and cos value        */\n\t  var dlon; /* delta longitude value      */\n\t  var coslon; /* cos of longitude        */\n\t  var ksp; /* scale factor          */\n\t  var g;\n\t  var x, y;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  dlon = adjust_lon(lon - this.long0);\n\n\t  sinphi = Math.sin(lat);\n\t  cosphi = Math.cos(lat);\n\n\t  coslon = Math.cos(dlon);\n\t  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n\t  ksp = 1;\n\t  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n\t    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;\n\t    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;\n\t  }\n\t  else {\n\n\t    // Point is in the opposing hemisphere and is unprojectable\n\t    // We still need to return a reasonable point, so we project\n\t    // to infinity, on a bearing\n\t    // equivalent to the northern hemisphere equivalent\n\t    // This is a reasonable approximation for short shapes and lines that\n\t    // straddle the horizon.\n\n\t    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);\n\t    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\n\t  }\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$14(p) {\n\t  var rh; /* Rho */\n\t  var sinc, cosc;\n\t  var c;\n\t  var lon, lat;\n\n\t  /* Inverse equations\n\t      -----------------*/\n\t  p.x = (p.x - this.x0) / this.a;\n\t  p.y = (p.y - this.y0) / this.a;\n\n\t  p.x /= this.k0;\n\t  p.y /= this.k0;\n\n\t  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {\n\t    c = Math.atan2(rh, this.rc);\n\t    sinc = Math.sin(c);\n\t    cosc = Math.cos(c);\n\n\t    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);\n\t    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);\n\t    lon = adjust_lon(this.long0 + lon);\n\t  }\n\t  else {\n\t    lat = this.phic0;\n\t    lon = 0;\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$16 = [\"gnom\"];\n\tvar gnom = {\n\t  init: init$15,\n\t  forward: forward$14,\n\t  inverse: inverse$14,\n\t  names: names$16\n\t};\n\n\tvar iqsfnz = function(eccent, q) {\n\t  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));\n\t  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {\n\t    if (q < 0) {\n\t      return (-1 * HALF_PI);\n\t    }\n\t    else {\n\t      return HALF_PI;\n\t    }\n\t  }\n\t  //var phi = 0.5* q/(1-eccent*eccent);\n\t  var phi = Math.asin(0.5 * q);\n\t  var dphi;\n\t  var sin_phi;\n\t  var cos_phi;\n\t  var con;\n\t  for (var i = 0; i < 30; i++) {\n\t    sin_phi = Math.sin(phi);\n\t    cos_phi = Math.cos(phi);\n\t    con = eccent * sin_phi;\n\t    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n\t    phi += dphi;\n\t    if (Math.abs(dphi) <= 0.0000000001) {\n\t      return phi;\n\t    }\n\t  }\n\n\t  //console.log(\"IQSFN-CONV:Latitude failed to converge after 30 iterations\");\n\t  return NaN;\n\t};\n\n\t/*\n\t  reference:\n\t    \"Cartographic Projection Procedures for the UNIX Environment-\n\t    A User's Manual\" by Gerald I. Evenden,\n\t    USGS Open File Report 90-284and Release 4 Interim Reports (2003)\n\t*/\n\tfunction init$16() {\n\t  //no-op\n\t  if (!this.sphere) {\n\t    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n\t  }\n\t}\n\n\t/* Cylindrical Equal Area forward equations--mapping lat,long to x,y\n\t    ------------------------------------------------------------*/\n\tfunction forward$15(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var x, y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  if (this.sphere) {\n\t    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);\n\t    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);\n\t  }\n\t  else {\n\t    var qs = qsfnz(this.e, Math.sin(lat));\n\t    x = this.x0 + this.a * this.k0 * dlon;\n\t    y = this.y0 + this.a * qs * 0.5 / this.k0;\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long\n\t    ------------------------------------------------------------*/\n\tfunction inverse$15(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var lon, lat;\n\n\t  if (this.sphere) {\n\t    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));\n\t    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));\n\t  }\n\t  else {\n\t    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);\n\t    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$17 = [\"cea\"];\n\tvar cea = {\n\t  init: init$16,\n\t  forward: forward$15,\n\t  inverse: inverse$15,\n\t  names: names$17\n\t};\n\n\tfunction init$17() {\n\n\t  this.x0 = this.x0 || 0;\n\t  this.y0 = this.y0 || 0;\n\t  this.lat0 = this.lat0 || 0;\n\t  this.long0 = this.long0 || 0;\n\t  this.lat_ts = this.lat_ts || 0;\n\t  this.title = this.title || \"Equidistant Cylindrical (Plate Carre)\";\n\n\t  this.rc = Math.cos(this.lat_ts);\n\t}\n\n\t// forward equations--mapping lat,long to x,y\n\t// -----------------------------------------------------------------\n\tfunction forward$16(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var dlat = adjust_lat(lat - this.lat0);\n\t  p.x = this.x0 + (this.a * dlon * this.rc);\n\t  p.y = this.y0 + (this.a * dlat);\n\t  return p;\n\t}\n\n\t// inverse equations--mapping x,y to lat/long\n\t// -----------------------------------------------------------------\n\tfunction inverse$16(p) {\n\n\t  var x = p.x;\n\t  var y = p.y;\n\n\t  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));\n\t  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));\n\t  return p;\n\t}\n\n\tvar names$18 = [\"Equirectangular\", \"Equidistant_Cylindrical\", \"eqc\"];\n\tvar eqc = {\n\t  init: init$17,\n\t  forward: forward$16,\n\t  inverse: inverse$16,\n\t  names: names$18\n\t};\n\n\tvar MAX_ITER$2 = 20;\n\n\tfunction init$18() {\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  this.temp = this.b / this.a;\n\t  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles\n\t  this.e = Math.sqrt(this.es);\n\t  this.e0 = e0fn(this.es);\n\t  this.e1 = e1fn(this.es);\n\t  this.e2 = e2fn(this.es);\n\t  this.e3 = e3fn(this.es);\n\t  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas\n\t}\n\n\t/* Polyconic forward equations--mapping lat,long to x,y\n\t    ---------------------------------------------------*/\n\tfunction forward$17(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var x, y, el;\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  el = dlon * Math.sin(lat);\n\t  if (this.sphere) {\n\t    if (Math.abs(lat) <= EPSLN) {\n\t      x = this.a * dlon;\n\t      y = -1 * this.a * this.lat0;\n\t    }\n\t    else {\n\t      x = this.a * Math.sin(el) / Math.tan(lat);\n\t      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));\n\t    }\n\t  }\n\t  else {\n\t    if (Math.abs(lat) <= EPSLN) {\n\t      x = this.a * dlon;\n\t      y = -1 * this.ml0;\n\t    }\n\t    else {\n\t      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);\n\t      x = nl * Math.sin(el);\n\t      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));\n\t    }\n\n\t  }\n\t  p.x = x + this.x0;\n\t  p.y = y + this.y0;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$17(p) {\n\t  var lon, lat, x, y, i;\n\t  var al, bl;\n\t  var phi, dphi;\n\t  x = p.x - this.x0;\n\t  y = p.y - this.y0;\n\n\t  if (this.sphere) {\n\t    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {\n\t      lon = adjust_lon(x / this.a + this.long0);\n\t      lat = 0;\n\t    }\n\t    else {\n\t      al = this.lat0 + y / this.a;\n\t      bl = x * x / this.a / this.a + al * al;\n\t      phi = al;\n\t      var tanphi;\n\t      for (i = MAX_ITER$2; i; --i) {\n\t        tanphi = Math.tan(phi);\n\t        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);\n\t        phi += dphi;\n\t        if (Math.abs(dphi) <= EPSLN) {\n\t          lat = phi;\n\t          break;\n\t        }\n\t      }\n\t      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));\n\t    }\n\t  }\n\t  else {\n\t    if (Math.abs(y + this.ml0) <= EPSLN) {\n\t      lat = 0;\n\t      lon = adjust_lon(this.long0 + x / this.a);\n\t    }\n\t    else {\n\n\t      al = (this.ml0 + y) / this.a;\n\t      bl = x * x / this.a / this.a + al * al;\n\t      phi = al;\n\t      var cl, mln, mlnp, ma;\n\t      var con;\n\t      for (i = MAX_ITER$2; i; --i) {\n\t        con = this.e * Math.sin(phi);\n\t        cl = Math.sqrt(1 - con * con) * Math.tan(phi);\n\t        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\t        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);\n\t        ma = mln / this.a;\n\t        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);\n\t        phi -= dphi;\n\t        if (Math.abs(dphi) <= EPSLN) {\n\t          lat = phi;\n\t          break;\n\t        }\n\t      }\n\n\t      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);\n\t      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);\n\t      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));\n\t    }\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$19 = [\"Polyconic\", \"poly\"];\n\tvar poly = {\n\t  init: init$18,\n\t  forward: forward$17,\n\t  inverse: inverse$17,\n\t  names: names$19\n\t};\n\n\t/*\n\t  reference\n\t    Department of Land and Survey Technical Circular 1973/32\n\t      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf\n\t    OSG Technical Report 4.1\n\t      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf\n\t  */\n\n\t/**\n\t * iterations: Number of iterations to refine inverse transform.\n\t *     0 -> km accuracy\n\t *     1 -> m accuracy -- suitable for most mapping applications\n\t *     2 -> mm accuracy\n\t */\n\n\n\tfunction init$19() {\n\t  this.A = [];\n\t  this.A[1] = 0.6399175073;\n\t  this.A[2] = -0.1358797613;\n\t  this.A[3] = 0.063294409;\n\t  this.A[4] = -0.02526853;\n\t  this.A[5] = 0.0117879;\n\t  this.A[6] = -0.0055161;\n\t  this.A[7] = 0.0026906;\n\t  this.A[8] = -0.001333;\n\t  this.A[9] = 0.00067;\n\t  this.A[10] = -0.00034;\n\n\t  this.B_re = [];\n\t  this.B_im = [];\n\t  this.B_re[1] = 0.7557853228;\n\t  this.B_im[1] = 0;\n\t  this.B_re[2] = 0.249204646;\n\t  this.B_im[2] = 0.003371507;\n\t  this.B_re[3] = -0.001541739;\n\t  this.B_im[3] = 0.041058560;\n\t  this.B_re[4] = -0.10162907;\n\t  this.B_im[4] = 0.01727609;\n\t  this.B_re[5] = -0.26623489;\n\t  this.B_im[5] = -0.36249218;\n\t  this.B_re[6] = -0.6870983;\n\t  this.B_im[6] = -1.1651967;\n\n\t  this.C_re = [];\n\t  this.C_im = [];\n\t  this.C_re[1] = 1.3231270439;\n\t  this.C_im[1] = 0;\n\t  this.C_re[2] = -0.577245789;\n\t  this.C_im[2] = -0.007809598;\n\t  this.C_re[3] = 0.508307513;\n\t  this.C_im[3] = -0.112208952;\n\t  this.C_re[4] = -0.15094762;\n\t  this.C_im[4] = 0.18200602;\n\t  this.C_re[5] = 1.01418179;\n\t  this.C_im[5] = 1.64497696;\n\t  this.C_re[6] = 1.9660549;\n\t  this.C_im[6] = 2.5127645;\n\n\t  this.D = [];\n\t  this.D[1] = 1.5627014243;\n\t  this.D[2] = 0.5185406398;\n\t  this.D[3] = -0.03333098;\n\t  this.D[4] = -0.1052906;\n\t  this.D[5] = -0.0368594;\n\t  this.D[6] = 0.007317;\n\t  this.D[7] = 0.01220;\n\t  this.D[8] = 0.00394;\n\t  this.D[9] = -0.0013;\n\t}\n\n\t/**\n\t    New Zealand Map Grid Forward  - long/lat to x/y\n\t    long/lat in radians\n\t  */\n\tfunction forward$18(p) {\n\t  var n;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var delta_lat = lat - this.lat0;\n\t  var delta_lon = lon - this.long0;\n\n\t  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda\n\t  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.\n\t  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;\n\t  var d_lambda = delta_lon;\n\t  var d_phi_n = 1; // d_phi^0\n\n\t  var d_psi = 0;\n\t  for (n = 1; n <= 10; n++) {\n\t    d_phi_n = d_phi_n * d_phi;\n\t    d_psi = d_psi + this.A[n] * d_phi_n;\n\t  }\n\n\t  // 2. Calculate theta\n\t  var th_re = d_psi;\n\t  var th_im = d_lambda;\n\n\t  // 3. Calculate z\n\t  var th_n_re = 1;\n\t  var th_n_im = 0; // theta^0\n\t  var th_n_re1;\n\t  var th_n_im1;\n\n\t  var z_re = 0;\n\t  var z_im = 0;\n\t  for (n = 1; n <= 6; n++) {\n\t    th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n\t    th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n\t    th_n_re = th_n_re1;\n\t    th_n_im = th_n_im1;\n\t    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;\n\t    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;\n\t  }\n\n\t  // 4. Calculate easting and northing\n\t  p.x = (z_im * this.a) + this.x0;\n\t  p.y = (z_re * this.a) + this.y0;\n\n\t  return p;\n\t}\n\n\t/**\n\t    New Zealand Map Grid Inverse  -  x/y to long/lat\n\t  */\n\tfunction inverse$18(p) {\n\t  var n;\n\t  var x = p.x;\n\t  var y = p.y;\n\n\t  var delta_x = x - this.x0;\n\t  var delta_y = y - this.y0;\n\n\t  // 1. Calculate z\n\t  var z_re = delta_y / this.a;\n\t  var z_im = delta_x / this.a;\n\n\t  // 2a. Calculate theta - first approximation gives km accuracy\n\t  var z_n_re = 1;\n\t  var z_n_im = 0; // z^0\n\t  var z_n_re1;\n\t  var z_n_im1;\n\n\t  var th_re = 0;\n\t  var th_im = 0;\n\t  for (n = 1; n <= 6; n++) {\n\t    z_n_re1 = z_n_re * z_re - z_n_im * z_im;\n\t    z_n_im1 = z_n_im * z_re + z_n_re * z_im;\n\t    z_n_re = z_n_re1;\n\t    z_n_im = z_n_im1;\n\t    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;\n\t    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;\n\t  }\n\n\t  // 2b. Iterate to refine the accuracy of the calculation\n\t  //        0 iterations gives km accuracy\n\t  //        1 iteration gives m accuracy -- good enough for most mapping applications\n\t  //        2 iterations bives mm accuracy\n\t  for (var i = 0; i < this.iterations; i++) {\n\t    var th_n_re = th_re;\n\t    var th_n_im = th_im;\n\t    var th_n_re1;\n\t    var th_n_im1;\n\n\t    var num_re = z_re;\n\t    var num_im = z_im;\n\t    for (n = 2; n <= 6; n++) {\n\t      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n\t      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n\t      th_n_re = th_n_re1;\n\t      th_n_im = th_n_im1;\n\t      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n\t      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n\t    }\n\n\t    th_n_re = 1;\n\t    th_n_im = 0;\n\t    var den_re = this.B_re[1];\n\t    var den_im = this.B_im[1];\n\t    for (n = 2; n <= 6; n++) {\n\t      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n\t      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n\t      th_n_re = th_n_re1;\n\t      th_n_im = th_n_im1;\n\t      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n\t      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n\t    }\n\n\t    // Complex division\n\t    var den2 = den_re * den_re + den_im * den_im;\n\t    th_re = (num_re * den_re + num_im * den_im) / den2;\n\t    th_im = (num_im * den_re - num_re * den_im) / den2;\n\t  }\n\n\t  // 3. Calculate d_phi              ...                                    // and d_lambda\n\t  var d_psi = th_re;\n\t  var d_lambda = th_im;\n\t  var d_psi_n = 1; // d_psi^0\n\n\t  var d_phi = 0;\n\t  for (n = 1; n <= 9; n++) {\n\t    d_psi_n = d_psi_n * d_psi;\n\t    d_phi = d_phi + this.D[n] * d_psi_n;\n\t  }\n\n\t  // 4. Calculate latitude and longitude\n\t  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.\n\t  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);\n\t  var lon = this.long0 + d_lambda;\n\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  return p;\n\t}\n\n\tvar names$20 = [\"New_Zealand_Map_Grid\", \"nzmg\"];\n\tvar nzmg = {\n\t  init: init$19,\n\t  forward: forward$18,\n\t  inverse: inverse$18,\n\t  names: names$20\n\t};\n\n\t/*\n\t  reference\n\t    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n\t    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n\t  */\n\n\n\t/* Initialize the Miller Cylindrical projection\n\t  -------------------------------------------*/\n\tfunction init$20() {\n\t  //no-op\n\t}\n\n\t/* Miller Cylindrical forward equations--mapping lat,long to x,y\n\t    ------------------------------------------------------------*/\n\tfunction forward$19(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var x = this.x0 + this.a * dlon;\n\t  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Miller Cylindrical inverse equations--mapping x,y to lat/long\n\t    ------------------------------------------------------------*/\n\tfunction inverse$19(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\n\t  var lon = adjust_lon(this.long0 + p.x / this.a);\n\t  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$21 = [\"Miller_Cylindrical\", \"mill\"];\n\tvar mill = {\n\t  init: init$20,\n\t  forward: forward$19,\n\t  inverse: inverse$19,\n\t  names: names$21\n\t};\n\n\tvar MAX_ITER$3 = 20;\n\tfunction init$21() {\n\t  /* Place parameters in static storage for common use\n\t    -------------------------------------------------*/\n\n\n\t  if (!this.sphere) {\n\t    this.en = pj_enfn(this.es);\n\t  }\n\t  else {\n\t    this.n = 1;\n\t    this.m = 0;\n\t    this.es = 0;\n\t    this.C_y = Math.sqrt((this.m + 1) / this.n);\n\t    this.C_x = this.C_y / (this.m + 1);\n\t  }\n\n\t}\n\n\t/* Sinusoidal forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------*/\n\tfunction forward$20(p) {\n\t  var x, y;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t    -----------------*/\n\t  lon = adjust_lon(lon - this.long0);\n\n\t  if (this.sphere) {\n\t    if (!this.m) {\n\t      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n\t    }\n\t    else {\n\t      var k = this.n * Math.sin(lat);\n\t      for (var i = MAX_ITER$3; i; --i) {\n\t        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n\t        lat -= V;\n\t        if (Math.abs(V) < EPSLN) {\n\t          break;\n\t        }\n\t      }\n\t    }\n\t    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n\t    y = this.a * this.C_y * lat;\n\n\t  }\n\t  else {\n\n\t    var s = Math.sin(lat);\n\t    var c = Math.cos(lat);\n\t    y = this.a * pj_mlfn(lat, s, c, this.en);\n\t    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$20(p) {\n\t  var lat, temp, lon, s;\n\n\t  p.x -= this.x0;\n\t  lon = p.x / this.a;\n\t  p.y -= this.y0;\n\t  lat = p.y / this.a;\n\n\t  if (this.sphere) {\n\t    lat /= this.C_y;\n\t    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n\t    if (this.m) {\n\t      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n\t    }\n\t    else if (this.n !== 1) {\n\t      lat = asinz(Math.sin(lat) / this.n);\n\t    }\n\t    lon = adjust_lon(lon + this.long0);\n\t    lat = adjust_lat(lat);\n\t  }\n\t  else {\n\t    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n\t    s = Math.abs(lat);\n\t    if (s < HALF_PI) {\n\t      s = Math.sin(lat);\n\t      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n\t      //temp = this.long0 + p.x / (this.a * Math.cos(lat));\n\t      lon = adjust_lon(temp);\n\t    }\n\t    else if ((s - EPSLN) < HALF_PI) {\n\t      lon = this.long0;\n\t    }\n\t  }\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$22 = [\"Sinusoidal\", \"sinu\"];\n\tvar sinu = {\n\t  init: init$21,\n\t  forward: forward$20,\n\t  inverse: inverse$20,\n\t  names: names$22\n\t};\n\n\tfunction init$22() {}\n\t/* Mollweide forward equations--mapping lat,long to x,y\n\t    ----------------------------------------------------*/\n\tfunction forward$21(p) {\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var delta_lon = adjust_lon(lon - this.long0);\n\t  var theta = lat;\n\t  var con = Math.PI * Math.sin(lat);\n\n\t  /* Iterate using the Newton-Raphson method to find theta\n\t      -----------------------------------------------------*/\n\t  while (true) {\n\t    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n\t    theta += delta_theta;\n\t    if (Math.abs(delta_theta) < EPSLN) {\n\t      break;\n\t    }\n\t  }\n\t  theta /= 2;\n\n\t  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n\t       this is done here because of precision problems with \"cos(theta)\"\n\t       --------------------------------------------------------------------------*/\n\t  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n\t    delta_lon = 0;\n\t  }\n\t  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n\t  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$21(p) {\n\t  var theta;\n\t  var arg;\n\n\t  /* Inverse equations\n\t      -----------------*/\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  arg = p.y / (1.4142135623731 * this.a);\n\n\t  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n\t       a number very close to one is used instead.\n\t       -------------------------------------------------------------------*/\n\t  if (Math.abs(arg) > 0.999999999999) {\n\t    arg = 0.999999999999;\n\t  }\n\t  theta = Math.asin(arg);\n\t  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));\n\t  if (lon < (-Math.PI)) {\n\t    lon = -Math.PI;\n\t  }\n\t  if (lon > Math.PI) {\n\t    lon = Math.PI;\n\t  }\n\t  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n\t  if (Math.abs(arg) > 1) {\n\t    arg = 1;\n\t  }\n\t  var lat = Math.asin(arg);\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$23 = [\"Mollweide\", \"moll\"];\n\tvar moll = {\n\t  init: init$22,\n\t  forward: forward$21,\n\t  inverse: inverse$21,\n\t  names: names$23\n\t};\n\n\tfunction init$23() {\n\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  // Standard Parallels cannot be equal and on opposite sides of the equator\n\t  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n\t    return;\n\t  }\n\t  this.lat2 = this.lat2 || this.lat1;\n\t  this.temp = this.b / this.a;\n\t  this.es = 1 - Math.pow(this.temp, 2);\n\t  this.e = Math.sqrt(this.es);\n\t  this.e0 = e0fn(this.es);\n\t  this.e1 = e1fn(this.es);\n\t  this.e2 = e2fn(this.es);\n\t  this.e3 = e3fn(this.es);\n\n\t  this.sinphi = Math.sin(this.lat1);\n\t  this.cosphi = Math.cos(this.lat1);\n\n\t  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);\n\t  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);\n\n\t  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {\n\t    this.ns = this.sinphi;\n\t  }\n\t  else {\n\t    this.sinphi = Math.sin(this.lat2);\n\t    this.cosphi = Math.cos(this.lat2);\n\t    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);\n\t    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);\n\t    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);\n\t  }\n\t  this.g = this.ml1 + this.ms1 / this.ns;\n\t  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n\t  this.rh = this.a * (this.g - this.ml0);\n\t}\n\n\t/* Equidistant Conic forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------------*/\n\tfunction forward$22(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var rh1;\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  if (this.sphere) {\n\t    rh1 = this.a * (this.g - lat);\n\t  }\n\t  else {\n\t    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);\n\t    rh1 = this.a * (this.g - ml);\n\t  }\n\t  var theta = this.ns * adjust_lon(lon - this.long0);\n\t  var x = this.x0 + rh1 * Math.sin(theta);\n\t  var y = this.y0 + this.rh - rh1 * Math.cos(theta);\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$22(p) {\n\t  p.x -= this.x0;\n\t  p.y = this.rh - p.y + this.y0;\n\t  var con, rh1, lat, lon;\n\t  if (this.ns >= 0) {\n\t    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = 1;\n\t  }\n\t  else {\n\t    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = -1;\n\t  }\n\t  var theta = 0;\n\t  if (rh1 !== 0) {\n\t    theta = Math.atan2(con * p.x, con * p.y);\n\t  }\n\n\t  if (this.sphere) {\n\t    lon = adjust_lon(this.long0 + theta / this.ns);\n\t    lat = adjust_lat(this.g - rh1 / this.a);\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  else {\n\t    var ml = this.g - rh1 / this.a;\n\t    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);\n\t    lon = adjust_lon(this.long0 + theta / this.ns);\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\n\t}\n\n\tvar names$24 = [\"Equidistant_Conic\", \"eqdc\"];\n\tvar eqdc = {\n\t  init: init$23,\n\t  forward: forward$22,\n\t  inverse: inverse$22,\n\t  names: names$24\n\t};\n\n\t/* Initialize the Van Der Grinten projection\n\t  ----------------------------------------*/\n\tfunction init$24() {\n\t  //this.R = 6370997; //Radius of earth\n\t  this.R = this.a;\n\t}\n\n\tfunction forward$23(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  /* Forward equations\n\t    -----------------*/\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var x, y;\n\n\t  if (Math.abs(lat) <= EPSLN) {\n\t    x = this.x0 + this.R * dlon;\n\t    y = this.y0;\n\t  }\n\t  var theta = asinz(2 * Math.abs(lat / Math.PI));\n\t  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {\n\t    x = this.x0;\n\t    if (lat >= 0) {\n\t      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);\n\t    }\n\t    else {\n\t      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);\n\t    }\n\t    //  return(OK);\n\t  }\n\t  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));\n\t  var asq = al * al;\n\t  var sinth = Math.sin(theta);\n\t  var costh = Math.cos(theta);\n\n\t  var g = costh / (sinth + costh - 1);\n\t  var gsq = g * g;\n\t  var m = g * (2 / sinth - 1);\n\t  var msq = m * m;\n\t  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);\n\t  if (dlon < 0) {\n\t    con = -con;\n\t  }\n\t  x = this.x0 + con;\n\t  //con = Math.abs(con / (Math.PI * this.R));\n\t  var q = asq + g;\n\t  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);\n\t  if (lat >= 0) {\n\t    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n\t    y = this.y0 + con;\n\t  }\n\t  else {\n\t    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n\t    y = this.y0 - con;\n\t  }\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Van Der Grinten inverse equations--mapping x,y to lat/long\n\t  ---------------------------------------------------------*/\n\tfunction inverse$23(p) {\n\t  var lon, lat;\n\t  var xx, yy, xys, c1, c2, c3;\n\t  var a1;\n\t  var m1;\n\t  var con;\n\t  var th1;\n\t  var d;\n\n\t  /* inverse equations\n\t    -----------------*/\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  con = Math.PI * this.R;\n\t  xx = p.x / con;\n\t  yy = p.y / con;\n\t  xys = xx * xx + yy * yy;\n\t  c1 = -Math.abs(yy) * (1 + xys);\n\t  c2 = c1 - 2 * yy * yy + xx * xx;\n\t  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;\n\t  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;\n\t  a1 = (c1 - c2 * c2 / 3 / c3) / c3;\n\t  m1 = 2 * Math.sqrt(-a1 / 3);\n\t  con = ((3 * d) / a1) / m1;\n\t  if (Math.abs(con) > 1) {\n\t    if (con >= 0) {\n\t      con = 1;\n\t    }\n\t    else {\n\t      con = -1;\n\t    }\n\t  }\n\t  th1 = Math.acos(con) / 3;\n\t  if (p.y >= 0) {\n\t    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n\t  }\n\t  else {\n\t    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n\t  }\n\n\t  if (Math.abs(xx) < EPSLN) {\n\t    lon = this.long0;\n\t  }\n\t  else {\n\t    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$25 = [\"Van_der_Grinten_I\", \"VanDerGrinten\", \"vandg\"];\n\tvar vandg = {\n\t  init: init$24,\n\t  forward: forward$23,\n\t  inverse: inverse$23,\n\t  names: names$25\n\t};\n\n\tfunction init$25() {\n\t  this.sin_p12 = Math.sin(this.lat0);\n\t  this.cos_p12 = Math.cos(this.lat0);\n\t}\n\n\tfunction forward$24(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var sinphi = Math.sin(p.y);\n\t  var cosphi = Math.cos(p.y);\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;\n\t  if (this.sphere) {\n\t    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n\t      //North Pole case\n\t      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);\n\t      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n\t      //South Pole case\n\t      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);\n\t      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else {\n\t      //default case\n\t      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);\n\t      c = Math.acos(cos_c);\n\t      kp = c / Math.sin(c);\n\t      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);\n\t      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));\n\t      return p;\n\t    }\n\t  }\n\t  else {\n\t    e0 = e0fn(this.es);\n\t    e1 = e1fn(this.es);\n\t    e2 = e2fn(this.es);\n\t    e3 = e3fn(this.es);\n\t    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n\t      //North Pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n\t      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);\n\t      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n\t      //South Pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n\t      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);\n\t      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else {\n\t      //Default case\n\t      tanphi = sinphi / cosphi;\n\t      Nl1 = gN(this.a, this.e, this.sin_p12);\n\t      Nl = gN(this.a, this.e, sinphi);\n\t      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));\n\t      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));\n\t      if (Az === 0) {\n\t        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n\t      }\n\t      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {\n\t        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n\t      }\n\t      else {\n\t        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));\n\t      }\n\t      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);\n\t      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);\n\t      GH = G * H;\n\t      Hs = H * H;\n\t      s2 = s * s;\n\t      s3 = s2 * s;\n\t      s4 = s3 * s;\n\t      s5 = s4 * s;\n\t      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);\n\t      p.x = this.x0 + c * Math.sin(Az);\n\t      p.y = this.y0 + c * Math.cos(Az);\n\t      return p;\n\t    }\n\t  }\n\n\n\t}\n\n\tfunction inverse$24(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F;\n\t  if (this.sphere) {\n\t    rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t    if (rh > (2 * HALF_PI * this.a)) {\n\t      return;\n\t    }\n\t    z = rh / this.a;\n\n\t    sinz = Math.sin(z);\n\t    cosz = Math.cos(z);\n\n\t    lon = this.long0;\n\t    if (Math.abs(rh) <= EPSLN) {\n\t      lat = this.lat0;\n\t    }\n\t    else {\n\t      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);\n\t      con = Math.abs(this.lat0) - HALF_PI;\n\t      if (Math.abs(con) <= EPSLN) {\n\t        if (this.lat0 >= 0) {\n\t          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n\t        }\n\t        else {\n\t          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n\t        }\n\t      }\n\t      else {\n\t        /*con = cosz - this.sin_p12 * Math.sin(lat);\n\t        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {\n\t          //no-op, just keep the lon value as is\n\t        } else {\n\t          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));\n\t          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));\n\t        }*/\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));\n\t      }\n\t    }\n\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  else {\n\t    e0 = e0fn(this.es);\n\t    e1 = e1fn(this.es);\n\t    e2 = e2fn(this.es);\n\t    e3 = e3fn(this.es);\n\t    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n\t      //North pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t      M = Mlp - rh;\n\t      lat = imlfn(M / this.a, e0, e1, e2, e3);\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n\t      //South pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t      M = rh - Mlp;\n\n\t      lat = imlfn(M / this.a, e0, e1, e2, e3);\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t    else {\n\t      //default case\n\t      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t      Az = Math.atan2(p.x, p.y);\n\t      N1 = gN(this.a, this.e, this.sin_p12);\n\t      cosAz = Math.cos(Az);\n\t      tmp = this.e * this.cos_p12 * cosAz;\n\t      A = -tmp * tmp / (1 - this.es);\n\t      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);\n\t      D = rh / N1;\n\t      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;\n\t      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;\n\t      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);\n\t      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));\n\t      lat = Math.atan((1 - this.es * F * this.sin_p12 / Math.sin(psi)) * Math.tan(psi) / (1 - this.es));\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t  }\n\n\t}\n\n\tvar names$26 = [\"Azimuthal_Equidistant\", \"aeqd\"];\n\tvar aeqd = {\n\t  init: init$25,\n\t  forward: forward$24,\n\t  inverse: inverse$24,\n\t  names: names$26\n\t};\n\n\tfunction init$26() {\n\t  //double temp;      /* temporary variable    */\n\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  this.sin_p14 = Math.sin(this.lat0);\n\t  this.cos_p14 = Math.cos(this.lat0);\n\t}\n\n\t/* Orthographic forward equations--mapping lat,long to x,y\n\t    ---------------------------------------------------*/\n\tfunction forward$25(p) {\n\t  var sinphi, cosphi; /* sin and cos value        */\n\t  var dlon; /* delta longitude value      */\n\t  var coslon; /* cos of longitude        */\n\t  var ksp; /* scale factor          */\n\t  var g, x, y;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  dlon = adjust_lon(lon - this.long0);\n\n\t  sinphi = Math.sin(lat);\n\t  cosphi = Math.cos(lat);\n\n\t  coslon = Math.cos(dlon);\n\t  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n\t  ksp = 1;\n\t  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n\t    x = this.a * ksp * cosphi * Math.sin(dlon);\n\t    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\t  }\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$25(p) {\n\t  var rh; /* height above ellipsoid      */\n\t  var z; /* angle          */\n\t  var sinz, cosz; /* sin of z and cos of z      */\n\t  var con;\n\t  var lon, lat;\n\t  /* Inverse equations\n\t      -----------------*/\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t  z = asinz(rh / this.a);\n\n\t  sinz = Math.sin(z);\n\t  cosz = Math.cos(z);\n\n\t  lon = this.long0;\n\t  if (Math.abs(rh) <= EPSLN) {\n\t    lat = this.lat0;\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  lat = asinz(cosz * this.sin_p14 + (p.y * sinz * this.cos_p14) / rh);\n\t  con = Math.abs(this.lat0) - HALF_PI;\n\t  if (Math.abs(con) <= EPSLN) {\n\t    if (this.lat0 >= 0) {\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n\t    }\n\t    else {\n\t      lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n\t    }\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz), rh * this.cos_p14 * cosz - p.y * this.sin_p14 * sinz));\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$27 = [\"ortho\"];\n\tvar ortho = {\n\t  init: init$26,\n\t  forward: forward$25,\n\t  inverse: inverse$25,\n\t  names: names$27\n\t};\n\n\t// QSC projection rewritten from the original PROJ4\n\t// https://github.com/OSGeo/proj.4/blob/master/src/PJ_qsc.c\n\n\t/* constants */\n\tvar FACE_ENUM = {\n\t    FRONT: 1,\n\t    RIGHT: 2,\n\t    BACK: 3,\n\t    LEFT: 4,\n\t    TOP: 5,\n\t    BOTTOM: 6\n\t};\n\n\tvar AREA_ENUM = {\n\t    AREA_0: 1,\n\t    AREA_1: 2,\n\t    AREA_2: 3,\n\t    AREA_3: 4\n\t};\n\n\tfunction init$27() {\n\n\t  this.x0 = this.x0 || 0;\n\t  this.y0 = this.y0 || 0;\n\t  this.lat0 = this.lat0 || 0;\n\t  this.long0 = this.long0 || 0;\n\t  this.lat_ts = this.lat_ts || 0;\n\t  this.title = this.title || \"Quadrilateralized Spherical Cube\";\n\n\t  /* Determine the cube face from the center of projection. */\n\t  if (this.lat0 >= HALF_PI - FORTPI / 2.0) {\n\t    this.face = FACE_ENUM.TOP;\n\t  } else if (this.lat0 <= -(HALF_PI - FORTPI / 2.0)) {\n\t    this.face = FACE_ENUM.BOTTOM;\n\t  } else if (Math.abs(this.long0) <= FORTPI) {\n\t    this.face = FACE_ENUM.FRONT;\n\t  } else if (Math.abs(this.long0) <= HALF_PI + FORTPI) {\n\t    this.face = this.long0 > 0.0 ? FACE_ENUM.RIGHT : FACE_ENUM.LEFT;\n\t  } else {\n\t    this.face = FACE_ENUM.BACK;\n\t  }\n\n\t  /* Fill in useful values for the ellipsoid <-> sphere shift\n\t   * described in [LK12]. */\n\t  if (this.es !== 0) {\n\t    this.one_minus_f = 1 - (this.a - this.b) / this.a;\n\t    this.one_minus_f_squared = this.one_minus_f * this.one_minus_f;\n\t  }\n\t}\n\n\t// QSC forward equations--mapping lat,long to x,y\n\t// -----------------------------------------------------------------\n\tfunction forward$26(p) {\n\t  var xy = {x: 0, y: 0};\n\t  var lat, lon;\n\t  var theta, phi;\n\t  var t, mu;\n\t  /* nu; */\n\t  var area = {value: 0};\n\n\t  // move lon according to projection's lon\n\t  p.x -= this.long0;\n\n\t  /* Convert the geodetic latitude to a geocentric latitude.\n\t   * This corresponds to the shift from the ellipsoid to the sphere\n\t   * described in [LK12]. */\n\t  if (this.es !== 0) {//if (P->es != 0) {\n\t    lat = Math.atan(this.one_minus_f_squared * Math.tan(p.y));\n\t  } else {\n\t    lat = p.y;\n\t  }\n\n\t  /* Convert the input lat, lon into theta, phi as used by QSC.\n\t   * This depends on the cube face and the area on it.\n\t   * For the top and bottom face, we can compute theta and phi\n\t   * directly from phi, lam. For the other faces, we must use\n\t   * unit sphere cartesian coordinates as an intermediate step. */\n\t  lon = p.x; //lon = lp.lam;\n\t  if (this.face === FACE_ENUM.TOP) {\n\t    phi = HALF_PI - lat;\n\t    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n\t      area.value = AREA_ENUM.AREA_0;\n\t      theta = lon - HALF_PI;\n\t    } else if (lon > HALF_PI + FORTPI || lon <= -(HALF_PI + FORTPI)) {\n\t      area.value = AREA_ENUM.AREA_1;\n\t      theta = (lon > 0.0 ? lon - SPI : lon + SPI);\n\t    } else if (lon > -(HALF_PI + FORTPI) && lon <= -FORTPI) {\n\t      area.value = AREA_ENUM.AREA_2;\n\t      theta = lon + HALF_PI;\n\t    } else {\n\t      area.value = AREA_ENUM.AREA_3;\n\t      theta = lon;\n\t    }\n\t  } else if (this.face === FACE_ENUM.BOTTOM) {\n\t    phi = HALF_PI + lat;\n\t    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n\t      area.value = AREA_ENUM.AREA_0;\n\t      theta = -lon + HALF_PI;\n\t    } else if (lon < FORTPI && lon >= -FORTPI) {\n\t      area.value = AREA_ENUM.AREA_1;\n\t      theta = -lon;\n\t    } else if (lon < -FORTPI && lon >= -(HALF_PI + FORTPI)) {\n\t      area.value = AREA_ENUM.AREA_2;\n\t      theta = -lon - HALF_PI;\n\t    } else {\n\t      area.value = AREA_ENUM.AREA_3;\n\t      theta = (lon > 0.0 ? -lon + SPI : -lon - SPI);\n\t    }\n\t  } else {\n\t    var q, r, s;\n\t    var sinlat, coslat;\n\t    var sinlon, coslon;\n\n\t    if (this.face === FACE_ENUM.RIGHT) {\n\t      lon = qsc_shift_lon_origin(lon, +HALF_PI);\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      lon = qsc_shift_lon_origin(lon, +SPI);\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      lon = qsc_shift_lon_origin(lon, -HALF_PI);\n\t    }\n\t    sinlat = Math.sin(lat);\n\t    coslat = Math.cos(lat);\n\t    sinlon = Math.sin(lon);\n\t    coslon = Math.cos(lon);\n\t    q = coslat * coslon;\n\t    r = coslat * sinlon;\n\t    s = sinlat;\n\n\t    if (this.face === FACE_ENUM.FRONT) {\n\t      phi = Math.acos(q);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, r, area);\n\t    } else if (this.face === FACE_ENUM.RIGHT) {\n\t      phi = Math.acos(r);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, -q, area);\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      phi = Math.acos(-q);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, -r, area);\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      phi = Math.acos(-r);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, q, area);\n\t    } else {\n\t      /* Impossible */\n\t      phi = theta = 0;\n\t      area.value = AREA_ENUM.AREA_0;\n\t    }\n\t  }\n\n\t  /* Compute mu and nu for the area of definition.\n\t   * For mu, see Eq. (3-21) in [OL76], but note the typos:\n\t   * compare with Eq. (3-14). For nu, see Eq. (3-38). */\n\t  mu = Math.atan((12 / SPI) * (theta + Math.acos(Math.sin(theta) * Math.cos(FORTPI)) - HALF_PI));\n\t  t = Math.sqrt((1 - Math.cos(phi)) / (Math.cos(mu) * Math.cos(mu)) / (1 - Math.cos(Math.atan(1 / Math.cos(theta)))));\n\n\t  /* Apply the result to the real area. */\n\t  if (area.value === AREA_ENUM.AREA_1) {\n\t    mu += HALF_PI;\n\t  } else if (area.value === AREA_ENUM.AREA_2) {\n\t    mu += SPI;\n\t  } else if (area.value === AREA_ENUM.AREA_3) {\n\t    mu += 1.5 * SPI;\n\t  }\n\n\t  /* Now compute x, y from mu and nu */\n\t  xy.x = t * Math.cos(mu);\n\t  xy.y = t * Math.sin(mu);\n\t  xy.x = xy.x * this.a + this.x0;\n\t  xy.y = xy.y * this.a + this.y0;\n\n\t  p.x = xy.x;\n\t  p.y = xy.y;\n\t  return p;\n\t}\n\n\t// QSC inverse equations--mapping x,y to lat/long\n\t// -----------------------------------------------------------------\n\tfunction inverse$26(p) {\n\t  var lp = {lam: 0, phi: 0};\n\t  var mu, nu, cosmu, tannu;\n\t  var tantheta, theta, cosphi, phi;\n\t  var t;\n\t  var area = {value: 0};\n\n\t  /* de-offset */\n\t  p.x = (p.x - this.x0) / this.a;\n\t  p.y = (p.y - this.y0) / this.a;\n\n\t  /* Convert the input x, y to the mu and nu angles as used by QSC.\n\t   * This depends on the area of the cube face. */\n\t  nu = Math.atan(Math.sqrt(p.x * p.x + p.y * p.y));\n\t  mu = Math.atan2(p.y, p.x);\n\t  if (p.x >= 0.0 && p.x >= Math.abs(p.y)) {\n\t    area.value = AREA_ENUM.AREA_0;\n\t  } else if (p.y >= 0.0 && p.y >= Math.abs(p.x)) {\n\t    area.value = AREA_ENUM.AREA_1;\n\t    mu -= HALF_PI;\n\t  } else if (p.x < 0.0 && -p.x >= Math.abs(p.y)) {\n\t    area.value = AREA_ENUM.AREA_2;\n\t    mu = (mu < 0.0 ? mu + SPI : mu - SPI);\n\t  } else {\n\t    area.value = AREA_ENUM.AREA_3;\n\t    mu += HALF_PI;\n\t  }\n\n\t  /* Compute phi and theta for the area of definition.\n\t   * The inverse projection is not described in the original paper, but some\n\t   * good hints can be found here (as of 2011-12-14):\n\t   * http://fits.gsfc.nasa.gov/fitsbits/saf.93/saf.9302\n\t   * (search for \"Message-Id: <9302181759.AA25477 at fits.cv.nrao.edu>\") */\n\t  t = (SPI / 12) * Math.tan(mu);\n\t  tantheta = Math.sin(t) / (Math.cos(t) - (1 / Math.sqrt(2)));\n\t  theta = Math.atan(tantheta);\n\t  cosmu = Math.cos(mu);\n\t  tannu = Math.tan(nu);\n\t  cosphi = 1 - cosmu * cosmu * tannu * tannu * (1 - Math.cos(Math.atan(1 / Math.cos(theta))));\n\t  if (cosphi < -1) {\n\t    cosphi = -1;\n\t  } else if (cosphi > +1) {\n\t    cosphi = +1;\n\t  }\n\n\t  /* Apply the result to the real area on the cube face.\n\t   * For the top and bottom face, we can compute phi and lam directly.\n\t   * For the other faces, we must use unit sphere cartesian coordinates\n\t   * as an intermediate step. */\n\t  if (this.face === FACE_ENUM.TOP) {\n\t    phi = Math.acos(cosphi);\n\t    lp.phi = HALF_PI - phi;\n\t    if (area.value === AREA_ENUM.AREA_0) {\n\t      lp.lam = theta + HALF_PI;\n\t    } else if (area.value === AREA_ENUM.AREA_1) {\n\t      lp.lam = (theta < 0.0 ? theta + SPI : theta - SPI);\n\t    } else if (area.value === AREA_ENUM.AREA_2) {\n\t      lp.lam = theta - HALF_PI;\n\t    } else /* area.value == AREA_ENUM.AREA_3 */ {\n\t      lp.lam = theta;\n\t    }\n\t  } else if (this.face === FACE_ENUM.BOTTOM) {\n\t    phi = Math.acos(cosphi);\n\t    lp.phi = phi - HALF_PI;\n\t    if (area.value === AREA_ENUM.AREA_0) {\n\t      lp.lam = -theta + HALF_PI;\n\t    } else if (area.value === AREA_ENUM.AREA_1) {\n\t      lp.lam = -theta;\n\t    } else if (area.value === AREA_ENUM.AREA_2) {\n\t      lp.lam = -theta - HALF_PI;\n\t    } else /* area.value == AREA_ENUM.AREA_3 */ {\n\t      lp.lam = (theta < 0.0 ? -theta - SPI : -theta + SPI);\n\t    }\n\t  } else {\n\t    /* Compute phi and lam via cartesian unit sphere coordinates. */\n\t    var q, r, s;\n\t    q = cosphi;\n\t    t = q * q;\n\t    if (t >= 1) {\n\t      s = 0;\n\t    } else {\n\t      s = Math.sqrt(1 - t) * Math.sin(theta);\n\t    }\n\t    t += s * s;\n\t    if (t >= 1) {\n\t      r = 0;\n\t    } else {\n\t      r = Math.sqrt(1 - t);\n\t    }\n\t    /* Rotate q,r,s into the correct area. */\n\t    if (area.value === AREA_ENUM.AREA_1) {\n\t      t = r;\n\t      r = -s;\n\t      s = t;\n\t    } else if (area.value === AREA_ENUM.AREA_2) {\n\t      r = -r;\n\t      s = -s;\n\t    } else if (area.value === AREA_ENUM.AREA_3) {\n\t      t = r;\n\t      r = s;\n\t      s = -t;\n\t    }\n\t    /* Rotate q,r,s into the correct cube face. */\n\t    if (this.face === FACE_ENUM.RIGHT) {\n\t      t = q;\n\t      q = -r;\n\t      r = t;\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      q = -q;\n\t      r = -r;\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      t = q;\n\t      q = r;\n\t      r = -t;\n\t    }\n\t    /* Now compute phi and lam from the unit sphere coordinates. */\n\t    lp.phi = Math.acos(-s) - HALF_PI;\n\t    lp.lam = Math.atan2(r, q);\n\t    if (this.face === FACE_ENUM.RIGHT) {\n\t      lp.lam = qsc_shift_lon_origin(lp.lam, -HALF_PI);\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      lp.lam = qsc_shift_lon_origin(lp.lam, -SPI);\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      lp.lam = qsc_shift_lon_origin(lp.lam, +HALF_PI);\n\t    }\n\t  }\n\n\t  /* Apply the shift from the sphere to the ellipsoid as described\n\t   * in [LK12]. */\n\t  if (this.es !== 0) {\n\t    var invert_sign;\n\t    var tanphi, xa;\n\t    invert_sign = (lp.phi < 0 ? 1 : 0);\n\t    tanphi = Math.tan(lp.phi);\n\t    xa = this.b / Math.sqrt(tanphi * tanphi + this.one_minus_f_squared);\n\t    lp.phi = Math.atan(Math.sqrt(this.a * this.a - xa * xa) / (this.one_minus_f * xa));\n\t    if (invert_sign) {\n\t      lp.phi = -lp.phi;\n\t    }\n\t  }\n\n\t  lp.lam += this.long0;\n\t  p.x = lp.lam;\n\t  p.y = lp.phi;\n\t  return p;\n\t}\n\n\t/* Helper function for forward projection: compute the theta angle\n\t * and determine the area number. */\n\tfunction qsc_fwd_equat_face_theta(phi, y, x, area) {\n\t  var theta;\n\t  if (phi < EPSLN) {\n\t    area.value = AREA_ENUM.AREA_0;\n\t    theta = 0.0;\n\t  } else {\n\t    theta = Math.atan2(y, x);\n\t    if (Math.abs(theta) <= FORTPI) {\n\t      area.value = AREA_ENUM.AREA_0;\n\t    } else if (theta > FORTPI && theta <= HALF_PI + FORTPI) {\n\t      area.value = AREA_ENUM.AREA_1;\n\t      theta -= HALF_PI;\n\t    } else if (theta > HALF_PI + FORTPI || theta <= -(HALF_PI + FORTPI)) {\n\t      area.value = AREA_ENUM.AREA_2;\n\t      theta = (theta >= 0.0 ? theta - SPI : theta + SPI);\n\t    } else {\n\t      area.value = AREA_ENUM.AREA_3;\n\t      theta += HALF_PI;\n\t    }\n\t  }\n\t  return theta;\n\t}\n\n\t/* Helper function: shift the longitude. */\n\tfunction qsc_shift_lon_origin(lon, offset) {\n\t  var slon = lon + offset;\n\t  if (slon < -SPI) {\n\t    slon += TWO_PI;\n\t  } else if (slon > +SPI) {\n\t    slon -= TWO_PI;\n\t  }\n\t  return slon;\n\t}\n\n\tvar names$28 = [\"Quadrilateralized Spherical Cube\", \"Quadrilateralized_Spherical_Cube\", \"qsc\"];\n\tvar qsc = {\n\t  init: init$27,\n\t  forward: forward$26,\n\t  inverse: inverse$26,\n\t  names: names$28\n\t};\n\n\t// Robinson projection\n\t// Based on https://github.com/OSGeo/proj.4/blob/master/src/PJ_robin.c\n\t// Polynomial coeficients from http://article.gmane.org/gmane.comp.gis.proj-4.devel/6039\n\n\tvar COEFS_X = [\n\t    [1.0000, 2.2199e-17, -7.15515e-05, 3.1103e-06],\n\t    [0.9986, -0.000482243, -2.4897e-05, -1.3309e-06],\n\t    [0.9954, -0.00083103, -4.48605e-05, -9.86701e-07],\n\t    [0.9900, -0.00135364, -5.9661e-05, 3.6777e-06],\n\t    [0.9822, -0.00167442, -4.49547e-06, -5.72411e-06],\n\t    [0.9730, -0.00214868, -9.03571e-05, 1.8736e-08],\n\t    [0.9600, -0.00305085, -9.00761e-05, 1.64917e-06],\n\t    [0.9427, -0.00382792, -6.53386e-05, -2.6154e-06],\n\t    [0.9216, -0.00467746, -0.00010457, 4.81243e-06],\n\t    [0.8962, -0.00536223, -3.23831e-05, -5.43432e-06],\n\t    [0.8679, -0.00609363, -0.000113898, 3.32484e-06],\n\t    [0.8350, -0.00698325, -6.40253e-05, 9.34959e-07],\n\t    [0.7986, -0.00755338, -5.00009e-05, 9.35324e-07],\n\t    [0.7597, -0.00798324, -3.5971e-05, -2.27626e-06],\n\t    [0.7186, -0.00851367, -7.01149e-05, -8.6303e-06],\n\t    [0.6732, -0.00986209, -0.000199569, 1.91974e-05],\n\t    [0.6213, -0.010418, 8.83923e-05, 6.24051e-06],\n\t    [0.5722, -0.00906601, 0.000182, 6.24051e-06],\n\t    [0.5322, -0.00677797, 0.000275608, 6.24051e-06]\n\t];\n\n\tvar COEFS_Y = [\n\t    [-5.20417e-18, 0.0124, 1.21431e-18, -8.45284e-11],\n\t    [0.0620, 0.0124, -1.26793e-09, 4.22642e-10],\n\t    [0.1240, 0.0124, 5.07171e-09, -1.60604e-09],\n\t    [0.1860, 0.0123999, -1.90189e-08, 6.00152e-09],\n\t    [0.2480, 0.0124002, 7.10039e-08, -2.24e-08],\n\t    [0.3100, 0.0123992, -2.64997e-07, 8.35986e-08],\n\t    [0.3720, 0.0124029, 9.88983e-07, -3.11994e-07],\n\t    [0.4340, 0.0123893, -3.69093e-06, -4.35621e-07],\n\t    [0.4958, 0.0123198, -1.02252e-05, -3.45523e-07],\n\t    [0.5571, 0.0121916, -1.54081e-05, -5.82288e-07],\n\t    [0.6176, 0.0119938, -2.41424e-05, -5.25327e-07],\n\t    [0.6769, 0.011713, -3.20223e-05, -5.16405e-07],\n\t    [0.7346, 0.0113541, -3.97684e-05, -6.09052e-07],\n\t    [0.7903, 0.0109107, -4.89042e-05, -1.04739e-06],\n\t    [0.8435, 0.0103431, -6.4615e-05, -1.40374e-09],\n\t    [0.8936, 0.00969686, -6.4636e-05, -8.547e-06],\n\t    [0.9394, 0.00840947, -0.000192841, -4.2106e-06],\n\t    [0.9761, 0.00616527, -0.000256, -4.2106e-06],\n\t    [1.0000, 0.00328947, -0.000319159, -4.2106e-06]\n\t];\n\n\tvar FXC = 0.8487;\n\tvar FYC = 1.3523;\n\tvar C1 = R2D/5; // rad to 5-degree interval\n\tvar RC1 = 1/C1;\n\tvar NODES = 18;\n\n\tvar poly3_val = function(coefs, x) {\n\t    return coefs[0] + x * (coefs[1] + x * (coefs[2] + x * coefs[3]));\n\t};\n\n\tvar poly3_der = function(coefs, x) {\n\t    return coefs[1] + x * (2 * coefs[2] + x * 3 * coefs[3]);\n\t};\n\n\tfunction newton_rapshon(f_df, start, max_err, iters) {\n\t    var x = start;\n\t    for (; iters; --iters) {\n\t        var upd = f_df(x);\n\t        x -= upd;\n\t        if (Math.abs(upd) < max_err) {\n\t            break;\n\t        }\n\t    }\n\t    return x;\n\t}\n\n\tfunction init$28() {\n\t    this.x0 = this.x0 || 0;\n\t    this.y0 = this.y0 || 0;\n\t    this.long0 = this.long0 || 0;\n\t    this.es = 0;\n\t    this.title = this.title || \"Robinson\";\n\t}\n\n\tfunction forward$27(ll) {\n\t    var lon = adjust_lon(ll.x - this.long0);\n\n\t    var dphi = Math.abs(ll.y);\n\t    var i = Math.floor(dphi * C1);\n\t    if (i < 0) {\n\t        i = 0;\n\t    } else if (i >= NODES) {\n\t        i = NODES - 1;\n\t    }\n\t    dphi = R2D * (dphi - RC1 * i);\n\t    var xy = {\n\t        x: poly3_val(COEFS_X[i], dphi) * lon,\n\t        y: poly3_val(COEFS_Y[i], dphi)\n\t    };\n\t    if (ll.y < 0) {\n\t        xy.y = -xy.y;\n\t    }\n\n\t    xy.x = xy.x * this.a * FXC + this.x0;\n\t    xy.y = xy.y * this.a * FYC + this.y0;\n\t    return xy;\n\t}\n\n\tfunction inverse$27(xy) {\n\t    var ll = {\n\t        x: (xy.x - this.x0) / (this.a * FXC),\n\t        y: Math.abs(xy.y - this.y0) / (this.a * FYC)\n\t    };\n\n\t    if (ll.y >= 1) { // pathologic case\n\t        ll.x /= COEFS_X[NODES][0];\n\t        ll.y = xy.y < 0 ? -HALF_PI : HALF_PI;\n\t    } else {\n\t        // find table interval\n\t        var i = Math.floor(ll.y * NODES);\n\t        if (i < 0) {\n\t            i = 0;\n\t        } else if (i >= NODES) {\n\t            i = NODES - 1;\n\t        }\n\t        for (;;) {\n\t            if (COEFS_Y[i][0] > ll.y) {\n\t                --i;\n\t            } else if (COEFS_Y[i+1][0] <= ll.y) {\n\t                ++i;\n\t            } else {\n\t                break;\n\t            }\n\t        }\n\t        // linear interpolation in 5 degree interval\n\t        var coefs = COEFS_Y[i];\n\t        var t = 5 * (ll.y - coefs[0]) / (COEFS_Y[i+1][0] - coefs[0]);\n\t        // find t so that poly3_val(coefs, t) = ll.y\n\t        t = newton_rapshon(function(x) {\n\t            return (poly3_val(coefs, x) - ll.y) / poly3_der(coefs, x);\n\t        }, t, EPSLN, 100);\n\n\t        ll.x /= poly3_val(COEFS_X[i], t);\n\t        ll.y = (5 * i + t) * D2R;\n\t        if (xy.y < 0) {\n\t            ll.y = -ll.y;\n\t        }\n\t    }\n\n\t    ll.x = adjust_lon(ll.x + this.long0);\n\t    return ll;\n\t}\n\n\tvar names$29 = [\"Robinson\", \"robin\"];\n\tvar robin = {\n\t  init: init$28,\n\t  forward: forward$27,\n\t  inverse: inverse$27,\n\t  names: names$29\n\t};\n\n\tvar includedProjections = function(proj4){\n\t  proj4.Proj.projections.add(tmerc);\n\t  proj4.Proj.projections.add(etmerc);\n\t  proj4.Proj.projections.add(utm);\n\t  proj4.Proj.projections.add(sterea);\n\t  proj4.Proj.projections.add(stere);\n\t  proj4.Proj.projections.add(somerc);\n\t  proj4.Proj.projections.add(omerc);\n\t  proj4.Proj.projections.add(lcc);\n\t  proj4.Proj.projections.add(krovak);\n\t  proj4.Proj.projections.add(cass);\n\t  proj4.Proj.projections.add(laea);\n\t  proj4.Proj.projections.add(aea);\n\t  proj4.Proj.projections.add(gnom);\n\t  proj4.Proj.projections.add(cea);\n\t  proj4.Proj.projections.add(eqc);\n\t  proj4.Proj.projections.add(poly);\n\t  proj4.Proj.projections.add(nzmg);\n\t  proj4.Proj.projections.add(mill);\n\t  proj4.Proj.projections.add(sinu);\n\t  proj4.Proj.projections.add(moll);\n\t  proj4.Proj.projections.add(eqdc);\n\t  proj4.Proj.projections.add(vandg);\n\t  proj4.Proj.projections.add(aeqd);\n\t  proj4.Proj.projections.add(ortho);\n\t  proj4.Proj.projections.add(qsc);\n\t  proj4.Proj.projections.add(robin);\n\t};\n\n\tproj4$1.defaultDatum = 'WGS84'; //default datum\n\tproj4$1.Proj = Projection;\n\tproj4$1.WGS84 = new proj4$1.Proj('WGS84');\n\tproj4$1.Point = Point;\n\tproj4$1.toPoint = toPoint;\n\tproj4$1.defs = defs;\n\tproj4$1.transform = transform;\n\tproj4$1.mgrs = mgrs;\n\tproj4$1.version = version;\n\tincludedProjections(proj4$1);\n\n\treturn proj4$1;\n\n})));\n","/**\n * @module ol/source/BingMaps\n */\n\nimport {createFromTileUrlFunctions} from '../tileurlfunction.js';\nimport {applyTransform, intersects} from '../extent.js';\nimport {jsonp as requestJSONP} from '../net.js';\nimport {get as getProjection, getTransformFromProjections} from '../proj.js';\nimport SourceState from './State.js';\nimport TileImage from './TileImage.js';\nimport {createOrUpdate, quadKey} from '../tilecoord.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n\n/**\n * The attribution containing a link to the Microsoft Bing Maps Platform APIs\n * Terms Of Use.\n * @const\n * @type {string}\n */\nconst TOS_ATTRIBUTION = '<a class=\"ol-attribution-bing-tos\" ' +\n      'href=\"https://www.microsoft.com/maps/product/terms.html\">' +\n      'Terms of Use</a>';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize=2048] Cache size.\n * @property {boolean} [hidpi=false] If `true` hidpi tiles will be requested.\n * @property {string} [culture='en-us'] Culture code.\n * @property {string} key Bing Maps API key. Get yours at http://www.bingmapsportal.com/.\n * @property {string} imagerySet Type of imagery.\n * @property {number} [maxZoom=21] Max zoom. Default is what's advertized by the BingMaps service.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @typedef {Object} BingMapsImageryMetadataResponse\n * @property {number} statusCode The response status code\n * @property {string} statusDescription The response status description\n * @property {string} authenticationResultCode The authentication result code\n * @property {Array<ResourceSet>} resourceSets The array of resource sets\n */\n\n\n/**\n * @typedef {Object} ResourceSet\n * @property {Array<Resource>} resources\n */\n\n\n/**\n * @typedef {Object} Resource\n * @property {number} imageHeight The image height\n * @property {number} imageWidth The image width\n * @property {number} zoomMin The minimum zoom level\n * @property {number} zoomMax The maximum zoom level\n * @property {string} imageUrl The image URL\n * @property {Array<string>} imageUrlSubdomains The image URL subdomains for rotation\n * @property {Array<ImageryProvider>} [imageryProviders] The array of ImageryProviders\n */\n\n\n/**\n * @typedef {Object} ImageryProvider\n * @property {Array<CoverageArea>} coverageAreas The coverage areas\n * @property {string} [attribution] The attribution\n */\n\n\n/**\n * @typedef {Object} CoverageArea\n * @property {number} zoomMin The minimum zoom\n * @property {number} zoomMax The maximum zoom\n * @property {Array<number>} bbox The coverage bounding box\n */\n\n\n/**\n * @classdesc\n * Layer source for Bing Maps tile data.\n * @api\n */\nclass BingMaps extends TileImage {\n  /**\n   * @param {Options} options Bing Maps options.\n   */\n  constructor(options) {\n\n    const hidpi = options.hidpi !== undefined ? options.hidpi : false;\n\n    super({\n      cacheSize: options.cacheSize,\n      crossOrigin: 'anonymous',\n      opaque: true,\n      projection: getProjection('EPSG:3857'),\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      state: SourceState.LOADING,\n      tileLoadFunction: options.tileLoadFunction,\n      tilePixelRatio: hidpi ? 2 : 1,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition\n    });\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = hidpi;\n\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.culture_ = options.culture !== undefined ? options.culture : 'en-us';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxZoom_ = options.maxZoom !== undefined ? options.maxZoom : -1;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.apiKey_ = options.key;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.imagerySet_ = options.imagerySet;\n\n    const url = 'https://dev.virtualearth.net/REST/v1/Imagery/Metadata/' +\n        this.imagerySet_ +\n        '?uriScheme=https&include=ImageryProviders&key=' + this.apiKey_ +\n        '&c=' + this.culture_;\n\n    requestJSONP(url, this.handleImageryMetadataResponse.bind(this), undefined,\n      'jsonp');\n\n  }\n\n  /**\n   * Get the api key used for this source.\n   *\n   * @return {string} The api key.\n   * @api\n   */\n  getApiKey() {\n    return this.apiKey_;\n  }\n\n  /**\n   * Get the imagery set associated with this source.\n   *\n   * @return {string} The imagery set.\n   * @api\n   */\n  getImagerySet() {\n    return this.imagerySet_;\n  }\n\n  /**\n   * @param {BingMapsImageryMetadataResponse} response Response.\n   */\n  handleImageryMetadataResponse(response) {\n    if (response.statusCode != 200 ||\n        response.statusDescription != 'OK' ||\n        response.authenticationResultCode != 'ValidCredentials' ||\n        response.resourceSets.length != 1 ||\n        response.resourceSets[0].resources.length != 1) {\n      this.setState(SourceState.ERROR);\n      return;\n    }\n\n    const resource = response.resourceSets[0].resources[0];\n    const maxZoom = this.maxZoom_ == -1 ? resource.zoomMax : this.maxZoom_;\n\n    const sourceProjection = this.getProjection();\n    const extent = extentFromProjection(sourceProjection);\n    const scale = this.hidpi_ ? 2 : 1;\n    const tileSize = resource.imageWidth == resource.imageHeight ?\n      resource.imageWidth / scale :\n      [resource.imageWidth / scale, resource.imageHeight / scale];\n\n    const tileGrid = createXYZ({\n      extent: extent,\n      minZoom: resource.zoomMin,\n      maxZoom: maxZoom,\n      tileSize: tileSize\n    });\n    this.tileGrid = tileGrid;\n\n    const culture = this.culture_;\n    const hidpi = this.hidpi_;\n    this.tileUrlFunction = createFromTileUrlFunctions(\n      resource.imageUrlSubdomains.map(function(subdomain) {\n        const quadKeyTileCoord = [0, 0, 0];\n        const imageUrl = resource.imageUrl\n          .replace('{subdomain}', subdomain)\n          .replace('{culture}', culture);\n        return (\n          /**\n           * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n           * @param {number} pixelRatio Pixel ratio.\n           * @param {import(\"../proj/Projection.js\").default} projection Projection.\n           * @return {string|undefined} Tile URL.\n           */\n          function(tileCoord, pixelRatio, projection) {\n            if (!tileCoord) {\n              return undefined;\n            } else {\n              createOrUpdate(tileCoord[0], tileCoord[1], -tileCoord[2] - 1, quadKeyTileCoord);\n              let url = imageUrl;\n              if (hidpi) {\n                url += '&dpi=d1&device=mobile';\n              }\n              return url.replace('{quadkey}', quadKey(quadKeyTileCoord));\n            }\n          }\n        );\n      }));\n\n    if (resource.imageryProviders) {\n      const transform = getTransformFromProjections(\n        getProjection('EPSG:4326'), this.getProjection());\n\n      this.setAttributions(function(frameState) {\n        const attributions = [];\n        const viewState = frameState.viewState;\n        const tileGrid = this.getTileGrid();\n        const tileCoord = tileGrid.getTileCoordForCoordAndResolution(viewState.center, viewState.resolution);\n        const zoom = tileCoord[0];\n        resource.imageryProviders.map(function(imageryProvider) {\n          let intersecting = false;\n          const coverageAreas = imageryProvider.coverageAreas;\n          for (let i = 0, ii = coverageAreas.length; i < ii; ++i) {\n            const coverageArea = coverageAreas[i];\n            if (zoom >= coverageArea.zoomMin && zoom <= coverageArea.zoomMax) {\n              const bbox = coverageArea.bbox;\n              const epsg4326Extent = [bbox[1], bbox[0], bbox[3], bbox[2]];\n              const extent = applyTransform(epsg4326Extent, transform);\n              if (intersects(extent, frameState.extent)) {\n                intersecting = true;\n                break;\n              }\n            }\n          }\n          if (intersecting) {\n            attributions.push(imageryProvider.attribution);\n          }\n        });\n\n        attributions.push(TOS_ATTRIBUTION);\n        return attributions;\n      }.bind(this));\n    }\n\n    this.setState(SourceState.READY);\n  }\n}\n\nexport default BingMaps;\n","/**\n * @module ol/proj/proj4\n */\nimport {addCoordinateTransforms, addProjection, addEquivalentProjections, get} from '../proj.js';\nimport {get as getTransform} from './transforms.js';\nimport Projection from './Projection.js';\n\n/**\n * Make projections defined in proj4 (with `proj4.defs()`) available in\n * OpenLayers.\n *\n * This function should be called whenever changes are made to the proj4\n * registry, e.g. after calling `proj4.defs()`. Existing transforms will not be\n * modified by this function.\n *\n * @param {?} proj4 Proj4.\n * @api\n */\nexport function register(proj4) {\n  const projCodes = Object.keys(proj4.defs);\n  const len = projCodes.length;\n  let i, j;\n  for (i = 0; i < len; ++i) {\n    const code = projCodes[i];\n    if (!get(code)) {\n      const def = proj4.defs(code);\n      addProjection(new Projection({\n        code: code,\n        axisOrientation: def.axis,\n        metersPerUnit: def.to_meter,\n        units: def.units\n      }));\n    }\n  }\n  for (i = 0; i < len; ++i) {\n    const code1 = projCodes[i];\n    const proj1 = get(code1);\n    for (j = 0; j < len; ++j) {\n      const code2 = projCodes[j];\n      const proj2 = get(code2);\n      if (!getTransform(code1, code2)) {\n        if (proj4.defs[code1] === proj4.defs[code2]) {\n          addEquivalentProjections([proj1, proj2]);\n        } else {\n          const transform = proj4(code1, code2);\n          addCoordinateTransforms(proj1, proj2, transform.forward, transform.inverse);\n        }\n      }\n    }\n  }\n}\n","/**\n * @module ol/source/Stamen\n */\n\nimport {ATTRIBUTION as OSM_ATTRIBUTION} from './OSM.js';\nimport XYZ from './XYZ.js';\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst ATTRIBUTIONS = [\n  'Map tiles by <a href=\"https://stamen.com/\">Stamen Design</a>, ' +\n        'under <a href=\"https://creativecommons.org/licenses/by/3.0/\">CC BY' +\n        ' 3.0</a>.',\n  OSM_ATTRIBUTION\n];\n\n\n/**\n * @type {Object<string, {extension: string, opaque: boolean}>}\n */\nconst LayerConfig = {\n  'terrain': {\n    extension: 'jpg',\n    opaque: true\n  },\n  'terrain-background': {\n    extension: 'jpg',\n    opaque: true\n  },\n  'terrain-labels': {\n    extension: 'png',\n    opaque: false\n  },\n  'terrain-lines': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-background': {\n    extension: 'png',\n    opaque: true\n  },\n  'toner': {\n    extension: 'png',\n    opaque: true\n  },\n  'toner-hybrid': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-labels': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-lines': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-lite': {\n    extension: 'png',\n    opaque: true\n  },\n  'watercolor': {\n    extension: 'jpg',\n    opaque: true\n  }\n};\n\n\n/**\n * @type {Object<string, {minZoom: number, maxZoom: number}>}\n */\nconst ProviderConfig = {\n  'terrain': {\n    minZoom: 4,\n    maxZoom: 18\n  },\n  'toner': {\n    minZoom: 0,\n    maxZoom: 20\n  },\n  'watercolor': {\n    minZoom: 1,\n    maxZoom: 16\n  }\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize=2048] Cache size.\n * @property {string} layer Layer name.\n * @property {number} [minZoom] Minimum zoom.\n * @property {number} [maxZoom] Maximum zoom.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction]\n * Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source for the Stamen tile server.\n * @api\n */\nclass Stamen extends XYZ {\n  /**\n   * @param {Options} options Stamen options.\n   */\n  constructor(options) {\n    const i = options.layer.indexOf('-');\n    const provider = i == -1 ? options.layer : options.layer.slice(0, i);\n    const providerConfig = ProviderConfig[provider];\n\n    const layerConfig = LayerConfig[options.layer];\n\n    const url = options.url !== undefined ? options.url :\n      'https://stamen-tiles-{a-d}.a.ssl.fastly.net/' + options.layer +\n        '/{z}/{x}/{y}.' + layerConfig.extension;\n\n    super({\n      attributions: ATTRIBUTIONS,\n      cacheSize: options.cacheSize,\n      crossOrigin: 'anonymous',\n      maxZoom: options.maxZoom != undefined ? options.maxZoom : providerConfig.maxZoom,\n      minZoom: options.minZoom != undefined ? options.minZoom : providerConfig.minZoom,\n      opaque: layerConfig.opaque,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileLoadFunction: options.tileLoadFunction,\n      url: url,\n      wrapX: options.wrapX\n    });\n\n  }\n\n}\n\nexport default Stamen;\n","/**\n * @module ol/format/GPX\n */\nimport Feature from '../Feature.js';\nimport {includes} from '../array.js';\nimport {transformWithOptions} from './Feature.js';\nimport XMLFeature from './XMLFeature.js';\nimport {readString, readDecimal, readNonNegativeInteger, readDateTime, writeStringTextNode, writeNonNegativeIntegerTextNode, writeDecimalTextNode, writeDateTimeTextNode} from './xsd.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport Point from '../geom/Point.js';\nimport {get as getProjection} from '../proj.js';\nimport {createElementNS, makeArrayPusher, makeArraySerializer, makeChildAppender,\n  makeObjectPropertySetter, makeSequence, makeSimpleNodeFactory, makeStructureNS,\n  OBJECT_PROPERTY_NODE_FACTORY, parseNode, pushParseAndPop, pushSerializeAndPop,\n  XML_SCHEMA_INSTANCE_URI} from '../xml.js';\n\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://www.topografix.com/GPX/1/0',\n  'http://www.topografix.com/GPX/1/1'\n];\n\n\n/**\n * @const\n * @type {string}\n */\nconst SCHEMA_LOCATION = 'http://www.topografix.com/GPX/1/1 ' +\n    'http://www.topografix.com/GPX/1/1/gpx.xsd';\n\n\n/**\n * @const\n * @type {Object<string, function(Node, Array<*>): (Feature|undefined)>}\n */\nconst FEATURE_READER = {\n  'rte': readRte,\n  'trk': readTrk,\n  'wpt': readWpt\n};\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst GPX_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'rte': makeArrayPusher(readRte),\n    'trk': makeArrayPusher(readTrk),\n    'wpt': makeArrayPusher(readWpt)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'text': makeObjectPropertySetter(readString, 'linkText'),\n    'type': makeObjectPropertySetter(readString, 'linkType')\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst GPX_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'rte': makeChildAppender(writeRte),\n    'trk': makeChildAppender(writeTrk),\n    'wpt': makeChildAppender(writeWpt)\n  });\n\n\n/**\n * @typedef {Object} Options\n * @property {function(Feature, Node)} [readExtensions] Callback function\n * to process `extensions` nodes. To prevent memory leaks, this callback function must\n * not store any references to the node. Note that the `extensions`\n * node is not allowed in GPX 1.0. Moreover, only `extensions`\n * nodes from `wpt`, `rte` and `trk` can be processed, as those are\n * directly mapped to a feature.\n */\n\n/**\n * @typedef {Object} LayoutOptions\n * @property {boolean} [hasZ]\n * @property {boolean} [hasM]\n */\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GPX format.\n *\n * Note that {@link module:ol/format/GPX~GPX#readFeature} only reads the first\n * feature of the source.\n *\n * When reading, routes (`<rte>`) are converted into LineString geometries, and\n * tracks (`<trk>`) into MultiLineString. Any properties on route and track\n * waypoints are ignored.\n *\n * When writing, LineString geometries are output as routes (`<rte>`), and\n * MultiLineString as tracks (`<trk>`).\n *\n * @api\n */\nclass GPX extends XMLFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @type {function(Feature, Node)|undefined}\n     * @private\n     */\n    this.readExtensions_ = options.readExtensions;\n  }\n\n  /**\n   * @param {Array<Feature>} features List of features.\n   * @private\n   */\n  handleReadExtensions_(features) {\n    if (!features) {\n      features = [];\n    }\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      const feature = features[i];\n      if (this.readExtensions_) {\n        const extensionsNode = feature.get('extensionsNode_') || null;\n        this.readExtensions_(feature, extensionsNode);\n      }\n      feature.set('extensionsNode_', undefined);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return null;\n    }\n    const featureReader = FEATURE_READER[node.localName];\n    if (!featureReader) {\n      return null;\n    }\n    const feature = featureReader(node, [this.getReadOptions(node, opt_options)]);\n    if (!feature) {\n      return null;\n    }\n    this.handleReadExtensions_([feature]);\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return [];\n    }\n    if (node.localName == 'gpx') {\n      /** @type {Array<Feature>} */\n      const features = pushParseAndPop([], GPX_PARSERS,\n        node, [this.getReadOptions(node, opt_options)]);\n      if (features) {\n        this.handleReadExtensions_(features);\n        return features;\n      } else {\n        return [];\n      }\n    }\n    return [];\n  }\n\n  /**\n   * Encode an array of features in the GPX format as an XML node.\n   * LineString geometries are output as routes (`<rte>`), and MultiLineString\n   * as tracks (`<trk>`).\n   *\n   * @param {Array<Feature>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   * @override\n   * @api\n   */\n  writeFeaturesNode(features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    //FIXME Serialize metadata\n    const gpx = createElementNS('http://www.topografix.com/GPX/1/1', 'gpx');\n    const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n    gpx.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n    gpx.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n    gpx.setAttribute('version', '1.1');\n    gpx.setAttribute('creator', 'OpenLayers');\n\n    pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */\n      ({node: gpx}), GPX_SERIALIZERS, GPX_NODE_FACTORY, features, [opt_options]);\n    return gpx;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst RTE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\n    'extensions': parseExtensions,\n    'type': makeObjectPropertySetter(readString),\n    'rtept': parseRtePt\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst RTEPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst TRK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\n    'type': makeObjectPropertySetter(readString),\n    'extensions': parseExtensions,\n    'trkseg': parseTrkSeg\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst TRKSEG_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'trkpt': parseTrkPt\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst TRKPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst WPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime),\n    'magvar': makeObjectPropertySetter(readDecimal),\n    'geoidheight': makeObjectPropertySetter(readDecimal),\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'sym': makeObjectPropertySetter(readString),\n    'type': makeObjectPropertySetter(readString),\n    'fix': makeObjectPropertySetter(readString),\n    'sat': makeObjectPropertySetter(readNonNegativeInteger),\n    'hdop': makeObjectPropertySetter(readDecimal),\n    'vdop': makeObjectPropertySetter(readDecimal),\n    'pdop': makeObjectPropertySetter(readDecimal),\n    'ageofdgpsdata': makeObjectPropertySetter(readDecimal),\n    'dgpsid': makeObjectPropertySetter(readNonNegativeInteger),\n    'extensions': parseExtensions\n  });\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst LINK_SEQUENCE = ['text', 'type'];\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst LINK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'text': makeChildAppender(writeStringTextNode),\n    'type': makeChildAppender(writeStringTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst RTE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'rtept'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst RTE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'rtept': makeArraySerializer(makeChildAppender(writeWptType))\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst RTEPT_TYPE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'ele', 'time'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst TRK_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'trkseg'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst TRK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'trkseg': makeArraySerializer(makeChildAppender(writeTrkSeg))\n  });\n\n\n/**\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst TRKSEG_NODE_FACTORY = makeSimpleNodeFactory('trkpt');\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst TRKSEG_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'trkpt': makeChildAppender(writeWptType)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst WPT_TYPE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'ele', 'time', 'magvar', 'geoidheight', 'name', 'cmt', 'desc', 'src',\n    'link', 'sym', 'type', 'fix', 'sat', 'hdop', 'vdop', 'pdop',\n    'ageofdgpsdata', 'dgpsid'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst WPT_TYPE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeChildAppender(writeDecimalTextNode),\n    'time': makeChildAppender(writeDateTimeTextNode),\n    'magvar': makeChildAppender(writeDecimalTextNode),\n    'geoidheight': makeChildAppender(writeDecimalTextNode),\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'sym': makeChildAppender(writeStringTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'fix': makeChildAppender(writeStringTextNode),\n    'sat': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'hdop': makeChildAppender(writeDecimalTextNode),\n    'vdop': makeChildAppender(writeDecimalTextNode),\n    'pdop': makeChildAppender(writeDecimalTextNode),\n    'ageofdgpsdata': makeChildAppender(writeDecimalTextNode),\n    'dgpsid': makeChildAppender(writeNonNegativeIntegerTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object<string, string>}\n */\nconst GEOMETRY_TYPE_TO_NODENAME = {\n  'Point': 'wpt',\n  'LineString': 'rte',\n  'MultiLineString': 'trk'\n};\n\n\n/**\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nfunction GPX_NODE_FACTORY(value, objectStack, opt_nodeName) {\n  const geometry = /** @type {Feature} */ (value).getGeometry();\n  if (geometry) {\n    const nodeName = GEOMETRY_TYPE_TO_NODENAME[geometry.getType()];\n    if (nodeName) {\n      const parentNode = objectStack[objectStack.length - 1].node;\n      return createElementNS(parentNode.namespaceURI, nodeName);\n    }\n  }\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {LayoutOptions} layoutOptions Layout options.\n * @param {Element} node Node.\n * @param {!Object} values Values.\n * @return {Array<number>} Flat coordinates.\n */\nfunction appendCoordinate(flatCoordinates, layoutOptions, node, values) {\n  flatCoordinates.push(\n    parseFloat(node.getAttribute('lon')),\n    parseFloat(node.getAttribute('lat')));\n  if ('ele' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['ele']));\n    delete values['ele'];\n    layoutOptions.hasZ = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  if ('time' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['time']));\n    delete values['time'];\n    layoutOptions.hasM = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  return flatCoordinates;\n}\n\n\n/**\n * Choose GeometryLayout based on flags in layoutOptions and adjust flatCoordinates\n * and ends arrays by shrinking them accordingly (removing unused zero entries).\n *\n * @param {LayoutOptions} layoutOptions Layout options.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {Array<number>=} ends Ends.\n * @return {GeometryLayout} Layout.\n */\nfunction applyLayoutOptions(layoutOptions, flatCoordinates, ends) {\n  let layout = GeometryLayout.XY;\n  let stride = 2;\n  if (layoutOptions.hasZ && layoutOptions.hasM) {\n    layout = GeometryLayout.XYZM;\n    stride = 4;\n  } else if (layoutOptions.hasZ) {\n    layout = GeometryLayout.XYZ;\n    stride = 3;\n  } else if (layoutOptions.hasM) {\n    layout = GeometryLayout.XYM;\n    stride = 3;\n  }\n  if (stride !== 4) {\n    for (let i = 0, ii = flatCoordinates.length / 4; i < ii; i++) {\n      flatCoordinates[i * stride] = flatCoordinates[i * 4];\n      flatCoordinates[i * stride + 1] = flatCoordinates[i * 4 + 1];\n      if (layoutOptions.hasZ) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 2];\n      }\n      if (layoutOptions.hasM) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 3];\n      }\n    }\n    flatCoordinates.length = flatCoordinates.length / 4 * stride;\n    if (ends) {\n      for (let i = 0, ii = ends.length; i < ii; i++) {\n        ends[i] = ends[i] / 4 * stride;\n      }\n    }\n  }\n  return layout;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseLink(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const href = node.getAttribute('href');\n  if (href !== null) {\n    values['link'] = href;\n  }\n  parseNode(LINK_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseExtensions(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  values['extensionsNode_'] = node;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseRtePt(node, objectStack) {\n  const values = pushParseAndPop({}, RTEPT_PARSERS, node, objectStack);\n  if (values) {\n    const rteValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n    const flatCoordinates = /** @type {Array<number>} */ (rteValues['flatCoordinates']);\n    const layoutOptions = /** @type {LayoutOptions} */ (rteValues['layoutOptions']);\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkPt(node, objectStack) {\n  const values = pushParseAndPop({}, TRKPT_PARSERS, node, objectStack);\n  if (values) {\n    const trkValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n    const flatCoordinates = /** @type {Array<number>} */ (trkValues['flatCoordinates']);\n    const layoutOptions = /** @type {LayoutOptions} */ (trkValues['layoutOptions']);\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkSeg(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  parseNode(TRKSEG_PARSERS, node, objectStack);\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  const ends = /** @type {Array<number>} */ (values['ends']);\n  ends.push(flatCoordinates.length);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Track.\n */\nfunction readRte(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({\n    'flatCoordinates': [],\n    'layoutOptions': {}\n  }, RTE_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const layoutOptions = /** @type {LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates);\n  const geometry = new LineString(flatCoordinates, layout);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Track.\n */\nfunction readTrk(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({\n    'flatCoordinates': [],\n    'ends': [],\n    'layoutOptions': {}\n  }, TRK_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const ends = /** @type {Array<number>} */ (values['ends']);\n  delete values['ends'];\n  const layoutOptions = /** @type {LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates, ends);\n  const geometry = new MultiLineString(flatCoordinates, layout, ends);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Waypoint.\n */\nfunction readWpt(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({}, WPT_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const layoutOptions = /** @type {LayoutOptions} */ ({});\n  const coordinates = appendCoordinate([], layoutOptions, node, values);\n  const layout = applyLayoutOptions(layoutOptions, coordinates);\n  const geometry = new Point(coordinates, layout);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {string} value Value for the link's `href` attribute.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeLink(node, value, objectStack) {\n  node.setAttribute('href', value);\n  const context = objectStack[objectStack.length - 1];\n  const properties = context['properties'];\n  const link = [\n    properties['linkText'],\n    properties['linkType']\n  ];\n  pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */ ({node: node}),\n    LINK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    link, objectStack, LINK_SEQUENCE);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWptType(node, coordinate, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const parentNode = context.node;\n  const namespaceURI = parentNode.namespaceURI;\n  const properties = context['properties'];\n  //FIXME Projection handling\n  node.setAttributeNS(null, 'lat', String(coordinate[1]));\n  node.setAttributeNS(null, 'lon', String(coordinate[0]));\n  const geometryLayout = context['geometryLayout'];\n  switch (geometryLayout) {\n    case GeometryLayout.XYZM:\n      if (coordinate[3] !== 0) {\n        properties['time'] = coordinate[3];\n      }\n      // fall through\n    case GeometryLayout.XYZ:\n      if (coordinate[2] !== 0) {\n        properties['ele'] = coordinate[2];\n      }\n      break;\n    case GeometryLayout.XYM:\n      if (coordinate[2] !== 0) {\n        properties['time'] = coordinate[2];\n      }\n      break;\n    default:\n      // pass\n  }\n  const orderedKeys = (node.nodeName == 'rtept') ?\n    RTEPT_TYPE_SEQUENCE[namespaceURI] :\n    WPT_TYPE_SEQUENCE[namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */\n    ({node: node, 'properties': properties}),\n    WPT_TYPE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeRte(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  const properties = feature.getProperties();\n  const context = {node: node};\n  context['properties'] = properties;\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == GeometryType.LINE_STRING) {\n    const lineString = /** @type {LineString} */ (transformWithOptions(geometry, true, options));\n    context['geometryLayout'] = lineString.getLayout();\n    properties['rtept'] = lineString.getCoordinates();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = RTE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context,\n    RTE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrk(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  const properties = feature.getProperties();\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const context = {node: node};\n  context['properties'] = properties;\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == GeometryType.MULTI_LINE_STRING) {\n    const multiLineString = /** @type {MultiLineString} */ (transformWithOptions(geometry, true, options));\n    properties['trkseg'] = multiLineString.getLineStrings();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = TRK_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context,\n    TRK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {LineString} lineString LineString.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrkSeg(node, lineString, objectStack) {\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const context = {node: node};\n  context['geometryLayout'] = lineString.getLayout();\n  context['properties'] = {};\n  pushSerializeAndPop(context,\n    TRKSEG_SERIALIZERS, TRKSEG_NODE_FACTORY,\n    lineString.getCoordinates(), objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWpt(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  const context = objectStack[objectStack.length - 1];\n  context['properties'] = feature.getProperties();\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == GeometryType.POINT) {\n    const point = /** @type {Point} */ (transformWithOptions(geometry, true, options));\n    context['geometryLayout'] = point.getLayout();\n    writeWptType(node, point.getCoordinates(), objectStack);\n  }\n}\n\n\nexport default GPX;\n","/**\n * @module ol/format/KML\n */\nimport Feature from '../Feature.js';\nimport {extend, includes} from '../array.js';\nimport {assert} from '../asserts.js';\nimport {asArray} from '../color.js';\nimport {transformWithOptions} from './Feature.js';\nimport XMLFeature from './XMLFeature.js';\nimport {readDecimal, readBoolean, readString, writeStringTextNode, writeCDATASection, writeDecimalTextNode, writeBooleanTextNode} from './xsd.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {toRadians} from '../math.js';\nimport {get as getProjection} from '../proj.js';\nimport Fill from '../style/Fill.js';\nimport Icon from '../style/Icon.js';\nimport IconAnchorUnits from '../style/IconAnchorUnits.js';\nimport IconOrigin from '../style/IconOrigin.js';\nimport Stroke from '../style/Stroke.js';\nimport Style from '../style/Style.js';\nimport Text from '../style/Text.js';\nimport {createElementNS, getAllTextContent, isDocument, makeArrayExtender,\n  makeArrayPusher, makeChildAppender, makeObjectPropertySetter,\n  makeReplacer, makeSequence, makeSimpleNodeFactory, makeStructureNS,\n  OBJECT_PROPERTY_NODE_FACTORY, parse, parseNode, pushParseAndPop,\n  pushSerializeAndPop, XML_SCHEMA_INSTANCE_URI} from '../xml.js';\n\n/**\n * @typedef {Object} Vec2\n * @property {number} x\n * @property {IconAnchorUnits} xunits\n * @property {number} y\n * @property {IconAnchorUnits} yunits\n * @property {IconOrigin} origin\n */\n\n/**\n * @typedef {Object} GxTrackObject\n * @property {Array<number>} flatCoordinates\n * @property {Array<number>} whens\n */\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst GX_NAMESPACE_URIS = [\n  'http://www.google.com/kml/ext/2.2'\n];\n\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://earth.google.com/kml/2.0',\n  'http://earth.google.com/kml/2.1',\n  'http://earth.google.com/kml/2.2',\n  'http://www.opengis.net/kml/2.2'\n];\n\n\n/**\n * @const\n * @type {string}\n */\nconst SCHEMA_LOCATION = 'http://www.opengis.net/kml/2.2 ' +\n    'https://developers.google.com/kml/schema/kml22gx.xsd';\n\n\n/**\n * @type {Object<string, IconAnchorUnits>}\n */\nconst ICON_ANCHOR_UNITS_MAP = {\n  'fraction': IconAnchorUnits.FRACTION,\n  'pixels': IconAnchorUnits.PIXELS,\n  'insetPixels': IconAnchorUnits.PIXELS\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst PLACEMARK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': extendedDataParser,\n    'Region': regionParser,\n    'MultiGeometry': makeObjectPropertySetter(\n      readMultiGeometry, 'geometry'),\n    'LineString': makeObjectPropertySetter(\n      readLineString, 'geometry'),\n    'LinearRing': makeObjectPropertySetter(\n      readLinearRing, 'geometry'),\n    'Point': makeObjectPropertySetter(\n      readPoint, 'geometry'),\n    'Polygon': makeObjectPropertySetter(\n      readPolygon, 'geometry'),\n    'Style': makeObjectPropertySetter(readStyle),\n    'StyleMap': placemarkStyleMapParser,\n    'address': makeObjectPropertySetter(readString),\n    'description': makeObjectPropertySetter(readString),\n    'name': makeObjectPropertySetter(readString),\n    'open': makeObjectPropertySetter(readBoolean),\n    'phoneNumber': makeObjectPropertySetter(readString),\n    'styleUrl': makeObjectPropertySetter(readURI),\n    'visibility': makeObjectPropertySetter(readBoolean)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'MultiTrack': makeObjectPropertySetter(\n        readGxMultiTrack, 'geometry'),\n      'Track': makeObjectPropertySetter(\n        readGxTrack, 'geometry')\n    }\n  ));\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst NETWORK_LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': extendedDataParser,\n    'Region': regionParser,\n    'Link': linkParser,\n    'address': makeObjectPropertySetter(readString),\n    'description': makeObjectPropertySetter(readString),\n    'name': makeObjectPropertySetter(readString),\n    'open': makeObjectPropertySetter(readBoolean),\n    'phoneNumber': makeObjectPropertySetter(readString),\n    'visibility': makeObjectPropertySetter(readBoolean)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeObjectPropertySetter(readURI)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst REGION_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LatLonAltBox': latLonAltBoxParser,\n    'Lod': lodParser\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst KML_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'Document', 'Placemark'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst KML_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Document': makeChildAppender(writeDocument),\n    'Placemark': makeChildAppender(writePlacemark)\n  });\n\n\n/**\n * @type {import(\"../color.js\").Color}\n */\nlet DEFAULT_COLOR;\n\n/**\n * @type {Fill}\n */\nlet DEFAULT_FILL_STYLE = null;\n\n/**\n * Get the default fill style (or null if not yet set).\n * @return {Fill} The default fill style.\n */\nexport function getDefaultFillStyle() {\n  return DEFAULT_FILL_STYLE;\n}\n\n/**\n * @type {import(\"../size.js\").Size}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR;\n\n/**\n * @type {IconAnchorUnits}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n\n/**\n * @type {IconAnchorUnits}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n\n/**\n * @type {import(\"../size.js\").Size}\n */\nlet DEFAULT_IMAGE_STYLE_SIZE;\n\n/**\n * @type {string}\n */\nlet DEFAULT_IMAGE_STYLE_SRC;\n\n/**\n * @type {number}\n */\nlet DEFAULT_IMAGE_SCALE_MULTIPLIER;\n\n/**\n * @type {import(\"../style/Image.js\").default}\n */\nlet DEFAULT_IMAGE_STYLE = null;\n\n/**\n * Get the default image style (or null if not yet set).\n * @return {import(\"../style/Image.js\").default} The default image style.\n */\nexport function getDefaultImageStyle() {\n  return DEFAULT_IMAGE_STYLE;\n}\n\n/**\n * @type {string}\n */\nlet DEFAULT_NO_IMAGE_STYLE;\n\n/**\n * @type {Stroke}\n */\nlet DEFAULT_STROKE_STYLE = null;\n\n/**\n * Get the default stroke style (or null if not yet set).\n * @return {Stroke} The default stroke style.\n */\nexport function getDefaultStrokeStyle() {\n  return DEFAULT_STROKE_STYLE;\n}\n\n/**\n * @type {Stroke}\n */\nlet DEFAULT_TEXT_STROKE_STYLE;\n\n/**\n * @type {Text}\n */\nlet DEFAULT_TEXT_STYLE = null;\n\n/**\n * Get the default text style (or null if not yet set).\n * @return {Text} The default text style.\n */\nexport function getDefaultTextStyle() {\n  return DEFAULT_TEXT_STYLE;\n}\n\n/**\n * @type {Style}\n */\nlet DEFAULT_STYLE = null;\n\n/**\n * Get the default style (or null if not yet set).\n * @return {Style} The default style.\n */\nexport function getDefaultStyle() {\n  return DEFAULT_STYLE;\n}\n\n/**\n * @type {Array<Style>}\n */\nlet DEFAULT_STYLE_ARRAY = null;\n\n/**\n * Get the default style array (or null if not yet set).\n * @return {Array<Style>} The default style.\n */\nexport function getDefaultStyleArray() {\n  return DEFAULT_STYLE_ARRAY;\n}\n\n\nfunction createStyleDefaults() {\n\n  DEFAULT_COLOR = [255, 255, 255, 1];\n\n  DEFAULT_FILL_STYLE = new Fill({\n    color: DEFAULT_COLOR\n  });\n\n  DEFAULT_IMAGE_STYLE_ANCHOR = [20, 2]; // FIXME maybe [8, 32] ?\n\n  DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS = IconAnchorUnits.PIXELS;\n\n  DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS = IconAnchorUnits.PIXELS;\n\n  DEFAULT_IMAGE_STYLE_SIZE = [64, 64];\n\n  DEFAULT_IMAGE_STYLE_SRC =\n      'https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png';\n\n  DEFAULT_IMAGE_SCALE_MULTIPLIER = 0.5;\n\n  DEFAULT_IMAGE_STYLE = new Icon({\n    anchor: DEFAULT_IMAGE_STYLE_ANCHOR,\n    anchorOrigin: IconOrigin.BOTTOM_LEFT,\n    anchorXUnits: DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,\n    anchorYUnits: DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,\n    crossOrigin: 'anonymous',\n    rotation: 0,\n    scale: DEFAULT_IMAGE_SCALE_MULTIPLIER,\n    size: DEFAULT_IMAGE_STYLE_SIZE,\n    src: DEFAULT_IMAGE_STYLE_SRC\n  });\n\n  DEFAULT_NO_IMAGE_STYLE = 'NO_IMAGE';\n\n  DEFAULT_STROKE_STYLE = new Stroke({\n    color: DEFAULT_COLOR,\n    width: 1\n  });\n\n  DEFAULT_TEXT_STROKE_STYLE = new Stroke({\n    color: [51, 51, 51, 1],\n    width: 2\n  });\n\n  DEFAULT_TEXT_STYLE = new Text({\n    font: 'bold 16px Helvetica',\n    fill: DEFAULT_FILL_STYLE,\n    stroke: DEFAULT_TEXT_STROKE_STYLE,\n    scale: 0.8\n  });\n\n  DEFAULT_STYLE = new Style({\n    fill: DEFAULT_FILL_STYLE,\n    image: DEFAULT_IMAGE_STYLE,\n    text: DEFAULT_TEXT_STYLE,\n    stroke: DEFAULT_STROKE_STYLE,\n    zIndex: 0\n  });\n\n  DEFAULT_STYLE_ARRAY = [DEFAULT_STYLE];\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [extractStyles=true] Extract styles from the KML.\n * @property {boolean} [showPointNames=true] Show names as labels for placemarks which contain points.\n * @property {Array<Style>} [defaultStyle] Default style. The\n * default default style is the same as Google Earth.\n * @property {boolean} [writeStyles=true] Write styles into KML.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the KML format.\n *\n * {@link module:ol/format/KML~KML#readFeature} will read the first feature from\n * a KML source.\n *\n * MultiGeometries are converted into GeometryCollections if they are a mix of\n * geometry types, and into MultiPoint/MultiLineString/MultiPolygon if they are\n * all of the same type.\n *\n * Note that the KML format uses the URL() constructor. Older browsers such as IE\n * which do not support this will need a URL polyfill to be loaded before use.\n *\n * @api\n */\nclass KML extends XMLFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    if (!DEFAULT_STYLE_ARRAY) {\n      createStyleDefaults();\n    }\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @private\n     * @type {Array<Style>}\n     */\n    this.defaultStyle_ = options.defaultStyle ?\n      options.defaultStyle : DEFAULT_STYLE_ARRAY;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.extractStyles_ = options.extractStyles !== undefined ?\n      options.extractStyles : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.writeStyles_ = options.writeStyles !== undefined ?\n      options.writeStyles : true;\n\n    /**\n     * @private\n     * @type {!Object<string, (Array<Style>|string)>}\n     */\n    this.sharedStyles_ = {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.showPointNames_ = options.showPointNames !== undefined ?\n      options.showPointNames : true;\n\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   * @return {Array<Feature>|undefined} Features.\n   */\n  readDocumentOrFolder_(node, objectStack) {\n    // FIXME use scope somehow\n    const parsersNS = makeStructureNS(\n      NAMESPACE_URIS, {\n        'Document': makeArrayExtender(this.readDocumentOrFolder_, this),\n        'Folder': makeArrayExtender(this.readDocumentOrFolder_, this),\n        'Placemark': makeArrayPusher(this.readPlacemark_, this),\n        'Style': this.readSharedStyle_.bind(this),\n        'StyleMap': this.readSharedStyleMap_.bind(this)\n      });\n    /** @type {Array<Feature>} */\n    const features = pushParseAndPop([], parsersNS, node, objectStack, this);\n    if (features) {\n      return features;\n    } else {\n      return undefined;\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   * @return {Feature|undefined} Feature.\n   */\n  readPlacemark_(node, objectStack) {\n    const object = pushParseAndPop({'geometry': null},\n      PLACEMARK_PARSERS, node, objectStack);\n    if (!object) {\n      return undefined;\n    }\n    const feature = new Feature();\n    const id = node.getAttribute('id');\n    if (id !== null) {\n      feature.setId(id);\n    }\n    const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n\n    const geometry = object['geometry'];\n    if (geometry) {\n      transformWithOptions(geometry, false, options);\n    }\n    feature.setGeometry(geometry);\n    delete object['geometry'];\n\n    if (this.extractStyles_) {\n      const style = object['Style'];\n      const styleUrl = object['styleUrl'];\n      const styleFunction = createFeatureStyleFunction(\n        style, styleUrl, this.defaultStyle_, this.sharedStyles_,\n        this.showPointNames_);\n      feature.setStyle(styleFunction);\n    }\n    delete object['Style'];\n    // we do not remove the styleUrl property from the object, so it\n    // gets stored on feature when setProperties is called\n\n    feature.setProperties(object);\n\n    return feature;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   */\n  readSharedStyle_(node, objectStack) {\n    const id = node.getAttribute('id');\n    if (id !== null) {\n      const style = readStyle(node, objectStack);\n      if (style) {\n        let styleUri;\n        let baseURI = node.baseURI;\n        if (!baseURI || baseURI == 'about:blank') {\n          baseURI = window.location.href;\n        }\n        if (baseURI) {\n          const url = new URL('#' + id, baseURI);\n          styleUri = url.href;\n        } else {\n          styleUri = '#' + id;\n        }\n        this.sharedStyles_[styleUri] = style;\n      }\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   */\n  readSharedStyleMap_(node, objectStack) {\n    const id = node.getAttribute('id');\n    if (id === null) {\n      return;\n    }\n    const styleMapValue = readStyleMapValue(node, objectStack);\n    if (!styleMapValue) {\n      return;\n    }\n    let styleUri;\n    let baseURI = node.baseURI;\n    if (!baseURI || baseURI == 'about:blank') {\n      baseURI = window.location.href;\n    }\n    if (baseURI) {\n      const url = new URL('#' + id, baseURI);\n      styleUri = url.href;\n    } else {\n      styleUri = '#' + id;\n    }\n    this.sharedStyles_[styleUri] = styleMapValue;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return null;\n    }\n    const feature = this.readPlacemark_(\n      node, [this.getReadOptions(node, opt_options)]);\n    if (feature) {\n      return feature;\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return [];\n    }\n    let features;\n    const localName = node.localName;\n    if (localName == 'Document' || localName == 'Folder') {\n      features = this.readDocumentOrFolder_(\n        node, [this.getReadOptions(node, opt_options)]);\n      if (features) {\n        return features;\n      } else {\n        return [];\n      }\n    } else if (localName == 'Placemark') {\n      const feature = this.readPlacemark_(\n        node, [this.getReadOptions(node, opt_options)]);\n      if (feature) {\n        return [feature];\n      } else {\n        return [];\n      }\n    } else if (localName == 'kml') {\n      features = [];\n      for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n        const fs = this.readFeaturesFromNode(n, opt_options);\n        if (fs) {\n          extend(features, fs);\n        }\n      }\n      return features;\n    } else {\n      return [];\n    }\n  }\n\n  /**\n   * Read the name of the KML.\n   *\n   * @param {Document|Element|string} source Source.\n   * @return {string|undefined} Name.\n   * @api\n   */\n  readName(source) {\n    if (!source) {\n      return undefined;\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readNameFromDocument(doc);\n    } else if (isDocument(source)) {\n      return this.readNameFromDocument(/** @type {Document} */ (source));\n    } else {\n      return this.readNameFromNode(/** @type {Element} */ (source));\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {string|undefined} Name.\n   */\n  readNameFromDocument(doc) {\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        const name = this.readNameFromNode(/** @type {Element} */ (n));\n        if (name) {\n          return name;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {string|undefined} Name.\n   */\n  readNameFromNode(node) {\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          n.localName == 'name') {\n        return readString(n);\n      }\n    }\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      const localName = n.localName;\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          (localName == 'Document' ||\n           localName == 'Folder' ||\n           localName == 'Placemark' ||\n           localName == 'kml')) {\n        const name = this.readNameFromNode(n);\n        if (name) {\n          return name;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Read the network links of the KML.\n   *\n   * @param {Document|Element|string} source Source.\n   * @return {Array<Object>} Network links.\n   * @api\n   */\n  readNetworkLinks(source) {\n    const networkLinks = [];\n    if (typeof source === 'string') {\n      const doc = parse(source);\n      extend(networkLinks, this.readNetworkLinksFromDocument(doc));\n    } else if (isDocument(source)) {\n      extend(networkLinks, this.readNetworkLinksFromDocument(\n        /** @type {Document} */ (source)));\n    } else {\n      extend(networkLinks, this.readNetworkLinksFromNode(\n        /** @type {Element} */ (source)));\n    }\n    return networkLinks;\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {Array<Object>} Network links.\n   */\n  readNetworkLinksFromDocument(doc) {\n    const networkLinks = [];\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        extend(networkLinks, this.readNetworkLinksFromNode(/** @type {Element} */ (n)));\n      }\n    }\n    return networkLinks;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {Array<Object>} Network links.\n   */\n  readNetworkLinksFromNode(node) {\n    const networkLinks = [];\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          n.localName == 'NetworkLink') {\n        const obj = pushParseAndPop({}, NETWORK_LINK_PARSERS,\n          n, []);\n        networkLinks.push(obj);\n      }\n    }\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      const localName = n.localName;\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          (localName == 'Document' ||\n           localName == 'Folder' ||\n           localName == 'kml')) {\n        extend(networkLinks, this.readNetworkLinksFromNode(n));\n      }\n    }\n    return networkLinks;\n  }\n\n  /**\n   * Read the regions of the KML.\n   *\n   * @param {Document|Element|string} source Source.\n   * @return {Array<Object>} Regions.\n   * @api\n   */\n  readRegion(source) {\n    const regions = [];\n    if (typeof source === 'string') {\n      const doc = parse(source);\n      extend(regions, this.readRegionFromDocument(doc));\n    } else if (isDocument(source)) {\n      extend(regions, this.readRegionFromDocument(\n        /** @type {Document} */ (source)));\n    } else {\n      extend(regions, this.readRegionFromNode(\n        /** @type {Element} */ (source)));\n    }\n    return regions;\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {Array<Object>} Region.\n   */\n  readRegionFromDocument(doc) {\n    const regions = [];\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        extend(regions, this.readRegionFromNode(/** @type {Element} */ (n)));\n      }\n    }\n    return regions;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {Array<Object>} Region.\n   * @api\n   */\n  readRegionFromNode(node) {\n    const regions = [];\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          n.localName == 'Region') {\n        const obj = pushParseAndPop({}, REGION_PARSERS,\n          n, []);\n        regions.push(obj);\n      }\n    }\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      const localName = n.localName;\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          (localName == 'Document' ||\n           localName == 'Folder' ||\n           localName == 'kml')) {\n        extend(regions, this.readRegionFromNode(n));\n      }\n    }\n    return regions;\n  }\n\n  /**\n   * Encode an array of features in the KML format as an XML node. GeometryCollections,\n   * MultiPoints, MultiLineStrings, and MultiPolygons are output as MultiGeometries.\n   *\n   * @param {Array<Feature>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   * @override\n   * @api\n   */\n  writeFeaturesNode(features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    const kml = createElementNS(NAMESPACE_URIS[4], 'kml');\n    const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n    kml.setAttributeNS(xmlnsUri, 'xmlns:gx', GX_NAMESPACE_URIS[0]);\n    kml.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n    kml.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n\n    const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: kml};\n    /** @type {!Object<string, (Array<Feature>|Feature|undefined)>} */\n    const properties = {};\n    if (features.length > 1) {\n      properties['Document'] = features;\n    } else if (features.length == 1) {\n      properties['Placemark'] = features[0];\n    }\n    const orderedKeys = KML_SEQUENCE[kml.namespaceURI];\n    const values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, KML_SERIALIZERS,\n      OBJECT_PROPERTY_NODE_FACTORY, values, [opt_options], orderedKeys,\n      this);\n    return kml;\n  }\n}\n\n\n/**\n * @param {Style|undefined} foundStyle Style.\n * @param {string} name Name.\n * @return {Style} style Style.\n */\nfunction createNameStyleFunction(foundStyle, name) {\n  let textStyle = null;\n  const textOffset = [0, 0];\n  let textAlign = 'start';\n  if (foundStyle.getImage()) {\n    let imageSize = foundStyle.getImage().getImageSize();\n    if (imageSize === null) {\n      imageSize = DEFAULT_IMAGE_STYLE_SIZE;\n    }\n    if (imageSize.length == 2) {\n      const imageScale = foundStyle.getImage().getScale();\n      // Offset the label to be centered to the right of the icon, if there is\n      // one.\n      textOffset[0] = imageScale * imageSize[0] / 2;\n      textOffset[1] = -imageScale * imageSize[1] / 2;\n      textAlign = 'left';\n    }\n  }\n  if (foundStyle.getText() !== null) {\n    // clone the text style, customizing it with name, alignments and offset.\n    // Note that kml does not support many text options that OpenLayers does (rotation, textBaseline).\n    const foundText = foundStyle.getText();\n    textStyle = foundText.clone();\n    textStyle.setFont(foundText.getFont() || DEFAULT_TEXT_STYLE.getFont());\n    textStyle.setScale(foundText.getScale() || DEFAULT_TEXT_STYLE.getScale());\n    textStyle.setFill(foundText.getFill() || DEFAULT_TEXT_STYLE.getFill());\n    textStyle.setStroke(foundText.getStroke() || DEFAULT_TEXT_STROKE_STYLE);\n  } else {\n    textStyle = DEFAULT_TEXT_STYLE.clone();\n  }\n  textStyle.setText(name);\n  textStyle.setOffsetX(textOffset[0]);\n  textStyle.setOffsetY(textOffset[1]);\n  textStyle.setTextAlign(textAlign);\n\n  const nameStyle = new Style({\n    text: textStyle\n  });\n  return nameStyle;\n}\n\n\n/**\n * @param {Array<Style>|undefined} style Style.\n * @param {string} styleUrl Style URL.\n * @param {Array<Style>} defaultStyle Default style.\n * @param {!Object<string, (Array<Style>|string)>} sharedStyles Shared styles.\n * @param {boolean|undefined} showPointNames true to show names for point placemarks.\n * @return {import(\"../style/Style.js\").StyleFunction} Feature style function.\n */\nfunction createFeatureStyleFunction(style, styleUrl, defaultStyle, sharedStyles, showPointNames) {\n\n  return (\n    /**\n     * @param {Feature} feature feature.\n     * @param {number} resolution Resolution.\n     * @return {Array<Style>} Style.\n     */\n    function(feature, resolution) {\n      let drawName = showPointNames;\n      /** @type {Style|undefined} */\n      let nameStyle;\n      let name = '';\n      if (drawName) {\n        const geometry = feature.getGeometry();\n        if (geometry) {\n          drawName = geometry.getType() === GeometryType.POINT;\n        }\n      }\n\n      if (drawName) {\n        name = /** @type {string} */ (feature.get('name'));\n        drawName = drawName && !!name;\n      }\n\n      if (style) {\n        if (drawName) {\n          nameStyle = createNameStyleFunction(style[0], name);\n          return style.concat(nameStyle);\n        }\n        return style;\n      }\n      if (styleUrl) {\n        const foundStyle = findStyle(styleUrl, defaultStyle, sharedStyles);\n        if (drawName) {\n          nameStyle = createNameStyleFunction(foundStyle[0], name);\n          return foundStyle.concat(nameStyle);\n        }\n        return foundStyle;\n      }\n      if (drawName) {\n        nameStyle = createNameStyleFunction(defaultStyle[0], name);\n        return defaultStyle.concat(nameStyle);\n      }\n      return defaultStyle;\n    }\n  );\n}\n\n\n/**\n * @param {Array<Style>|string|undefined} styleValue Style value.\n * @param {Array<Style>} defaultStyle Default style.\n * @param {!Object<string, (Array<Style>|string)>} sharedStyles\n * Shared styles.\n * @return {Array<Style>} Style.\n */\nfunction findStyle(styleValue, defaultStyle, sharedStyles) {\n  if (Array.isArray(styleValue)) {\n    return styleValue;\n  } else if (typeof styleValue === 'string') {\n    // KML files in the wild occasionally forget the leading `#` on styleUrls\n    // defined in the same document.  Add a leading `#` if it enables to find\n    // a style.\n    if (!(styleValue in sharedStyles) && ('#' + styleValue in sharedStyles)) {\n      styleValue = '#' + styleValue;\n    }\n    return findStyle(sharedStyles[styleValue], defaultStyle, sharedStyles);\n  } else {\n    return defaultStyle;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {import(\"../color.js\").Color|undefined} Color.\n */\nfunction readColor(node) {\n  const s = getAllTextContent(node, false);\n  // The KML specification states that colors should not include a leading `#`\n  // but we tolerate them.\n  const m = /^\\s*#?\\s*([0-9A-Fa-f]{8})\\s*$/.exec(s);\n  if (m) {\n    const hexColor = m[1];\n    return [\n      parseInt(hexColor.substr(6, 2), 16),\n      parseInt(hexColor.substr(4, 2), 16),\n      parseInt(hexColor.substr(2, 2), 16),\n      parseInt(hexColor.substr(0, 2), 16) / 255\n    ];\n\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {Array<number>|undefined} Flat coordinates.\n */\nexport function readFlatCoordinates(node) {\n  let s = getAllTextContent(node, false);\n  const flatCoordinates = [];\n  // The KML specification states that coordinate tuples should not include\n  // spaces, but we tolerate them.\n  const re =\n      /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*,\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)(?:\\s*,\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?))?\\s*/i;\n  let m;\n  while ((m = re.exec(s))) {\n    const x = parseFloat(m[1]);\n    const y = parseFloat(m[2]);\n    const z = m[3] ? parseFloat(m[3]) : 0;\n    flatCoordinates.push(x, y, z);\n    s = s.substr(m[0].length);\n  }\n  if (s !== '') {\n    return undefined;\n  }\n  return flatCoordinates;\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {string} URI.\n */\nfunction readURI(node) {\n  const s = getAllTextContent(node, false).trim();\n  let baseURI = node.baseURI;\n  if (!baseURI || baseURI == 'about:blank') {\n    baseURI = window.location.href;\n  }\n  if (baseURI) {\n    const url = new URL(s, baseURI);\n    return url.href;\n  } else {\n    return s;\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @return {Vec2} Vec2.\n */\nfunction readVec2(node) {\n  const xunits = node.getAttribute('xunits');\n  const yunits = node.getAttribute('yunits');\n  let origin;\n  if (xunits !== 'insetPixels') {\n    if (yunits !== 'insetPixels') {\n      origin = IconOrigin.BOTTOM_LEFT;\n    } else {\n      origin = IconOrigin.TOP_LEFT;\n    }\n  } else {\n    if (yunits !== 'insetPixels') {\n      origin = IconOrigin.BOTTOM_RIGHT;\n    } else {\n      origin = IconOrigin.TOP_RIGHT;\n    }\n  }\n  return {\n    x: parseFloat(node.getAttribute('x')),\n    xunits: ICON_ANCHOR_UNITS_MAP[xunits],\n    y: parseFloat(node.getAttribute('y')),\n    yunits: ICON_ANCHOR_UNITS_MAP[yunits],\n    origin: origin\n  };\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Scale.\n */\nfunction readScale(node) {\n  return readDecimal(node);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst STYLE_MAP_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Pair': pairDataParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<Style>|string|undefined} StyleMap.\n */\nfunction readStyleMapValue(node, objectStack) {\n  return pushParseAndPop(undefined,\n    STYLE_MAP_PARSERS, node, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst ICON_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Icon': makeObjectPropertySetter(readIcon),\n    'heading': makeObjectPropertySetter(readDecimal),\n    'hotSpot': makeObjectPropertySetter(readVec2),\n    'scale': makeObjectPropertySetter(readScale)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction iconStyleParser(node, objectStack) {\n  // FIXME refreshMode\n  // FIXME refreshInterval\n  // FIXME viewRefreshTime\n  // FIXME viewBoundScale\n  // FIXME viewFormat\n  // FIXME httpQuery\n  const object = pushParseAndPop(\n    {}, ICON_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const IconObject = 'Icon' in object ? object['Icon'] : {};\n  const drawIcon = (!('Icon' in object) || Object.keys(IconObject).length > 0);\n  let src;\n  const href = /** @type {string|undefined} */\n      (IconObject['href']);\n  if (href) {\n    src = href;\n  } else if (drawIcon) {\n    src = DEFAULT_IMAGE_STYLE_SRC;\n  }\n  let anchor, anchorXUnits, anchorYUnits;\n  let anchorOrigin = IconOrigin.BOTTOM_LEFT;\n  const hotSpot = /** @type {Vec2|undefined} */\n      (object['hotSpot']);\n  if (hotSpot) {\n    anchor = [hotSpot.x, hotSpot.y];\n    anchorXUnits = hotSpot.xunits;\n    anchorYUnits = hotSpot.yunits;\n    anchorOrigin = hotSpot.origin;\n  } else if (src === DEFAULT_IMAGE_STYLE_SRC) {\n    anchor = DEFAULT_IMAGE_STYLE_ANCHOR;\n    anchorXUnits = DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n    anchorYUnits = DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n  } else if (/^http:\\/\\/maps\\.(?:google|gstatic)\\.com\\//.test(src)) {\n    anchor = [0.5, 0];\n    anchorXUnits = IconAnchorUnits.FRACTION;\n    anchorYUnits = IconAnchorUnits.FRACTION;\n  }\n\n  let offset;\n  const x = /** @type {number|undefined} */\n      (IconObject['x']);\n  const y = /** @type {number|undefined} */\n      (IconObject['y']);\n  if (x !== undefined && y !== undefined) {\n    offset = [x, y];\n  }\n\n  let size;\n  const w = /** @type {number|undefined} */\n      (IconObject['w']);\n  const h = /** @type {number|undefined} */\n      (IconObject['h']);\n  if (w !== undefined && h !== undefined) {\n    size = [w, h];\n  }\n\n  let rotation;\n  const heading = /** @type {number} */\n      (object['heading']);\n  if (heading !== undefined) {\n    rotation = toRadians(heading);\n  }\n\n  let scale = /** @type {number|undefined} */\n      (object['scale']);\n\n  if (drawIcon) {\n    if (src == DEFAULT_IMAGE_STYLE_SRC) {\n      size = DEFAULT_IMAGE_STYLE_SIZE;\n      if (scale === undefined) {\n        scale = DEFAULT_IMAGE_SCALE_MULTIPLIER;\n      }\n    }\n\n    const imageStyle = new Icon({\n      anchor: anchor,\n      anchorOrigin: anchorOrigin,\n      anchorXUnits: anchorXUnits,\n      anchorYUnits: anchorYUnits,\n      crossOrigin: 'anonymous', // FIXME should this be configurable?\n      offset: offset,\n      offsetOrigin: IconOrigin.BOTTOM_LEFT,\n      rotation: rotation,\n      scale: scale,\n      size: size,\n      src: src\n    });\n    styleObject['imageStyle'] = imageStyle;\n  } else {\n    // handle the case when we explicitly want to draw no icon.\n    styleObject['imageStyle'] = DEFAULT_NO_IMAGE_STYLE;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst LABEL_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'scale': makeObjectPropertySetter(readScale)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction labelStyleParser(node, objectStack) {\n  // FIXME colorMode\n  const object = pushParseAndPop(\n    {}, LABEL_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const textStyle = new Text({\n    fill: new Fill({\n      color: /** @type {import(\"../color.js\").Color} */\n          ('color' in object ? object['color'] : DEFAULT_COLOR)\n    }),\n    scale: /** @type {number|undefined} */\n        (object['scale'])\n  });\n  styleObject['textStyle'] = textStyle;\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst LINE_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'width': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction lineStyleParser(node, objectStack) {\n  // FIXME colorMode\n  // FIXME gx:outerColor\n  // FIXME gx:outerWidth\n  // FIXME gx:physicalWidth\n  // FIXME gx:labelVisibility\n  const object = pushParseAndPop(\n    {}, LINE_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const strokeStyle = new Stroke({\n    color: /** @type {import(\"../color.js\").Color} */\n        ('color' in object ? object['color'] : DEFAULT_COLOR),\n    width: /** @type {number} */ ('width' in object ? object['width'] : 1)\n  });\n  styleObject['strokeStyle'] = strokeStyle;\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst POLY_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'fill': makeObjectPropertySetter(readBoolean),\n    'outline': makeObjectPropertySetter(readBoolean)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction polyStyleParser(node, objectStack) {\n  // FIXME colorMode\n  const object = pushParseAndPop(\n    {}, POLY_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const fillStyle = new Fill({\n    color: /** @type {import(\"../color.js\").Color} */\n        ('color' in object ? object['color'] : DEFAULT_COLOR)\n  });\n  styleObject['fillStyle'] = fillStyle;\n  const fill = /** @type {boolean|undefined} */ (object['fill']);\n  if (fill !== undefined) {\n    styleObject['fill'] = fill;\n  }\n  const outline = /** @type {boolean|undefined} */ (object['outline']);\n  if (outline !== undefined) {\n    styleObject['outline'] = outline;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst FLAT_LINEAR_RING_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'coordinates': makeReplacer(readFlatCoordinates)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<number>} LinearRing flat coordinates.\n */\nfunction readFlatLinearRing(node, objectStack) {\n  return pushParseAndPop(null,\n    FLAT_LINEAR_RING_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction gxCoordParser(node, objectStack) {\n  const gxTrackObject = /** @type {GxTrackObject} */\n      (objectStack[objectStack.length - 1]);\n  const flatCoordinates = gxTrackObject.flatCoordinates;\n  const s = getAllTextContent(node, false);\n  const re =\n      /^\\s*([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s*$/i;\n  const m = re.exec(s);\n  if (m) {\n    const x = parseFloat(m[1]);\n    const y = parseFloat(m[2]);\n    const z = parseFloat(m[3]);\n    flatCoordinates.push(x, y, z, 0);\n  } else {\n    flatCoordinates.push(0, 0, 0, 0);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst GX_MULTITRACK_GEOMETRY_PARSERS = makeStructureNS(\n  GX_NAMESPACE_URIS, {\n    'Track': makeArrayPusher(readGxTrack)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {MultiLineString|undefined} MultiLineString.\n */\nfunction readGxMultiTrack(node, objectStack) {\n  const lineStrings = pushParseAndPop([],\n    GX_MULTITRACK_GEOMETRY_PARSERS, node, objectStack);\n  if (!lineStrings) {\n    return undefined;\n  }\n  return new MultiLineString(lineStrings);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst GX_TRACK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'when': whenParser\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'coord': gxCoordParser\n    }));\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {LineString|undefined} LineString.\n */\nfunction readGxTrack(node, objectStack) {\n  const gxTrackObject = pushParseAndPop(\n    /** @type {GxTrackObject} */ ({\n      flatCoordinates: [],\n      whens: []\n    }), GX_TRACK_PARSERS, node, objectStack);\n  if (!gxTrackObject) {\n    return undefined;\n  }\n  const flatCoordinates = gxTrackObject.flatCoordinates;\n  const whens = gxTrackObject.whens;\n  for (let i = 0, ii = Math.min(flatCoordinates.length, whens.length); i < ii; ++i) {\n    flatCoordinates[4 * i + 3] = whens[i];\n  }\n  return new LineString(flatCoordinates, GeometryLayout.XYZM);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst ICON_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeObjectPropertySetter(readURI)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'x': makeObjectPropertySetter(readDecimal),\n      'y': makeObjectPropertySetter(readDecimal),\n      'w': makeObjectPropertySetter(readDecimal),\n      'h': makeObjectPropertySetter(readDecimal)\n    }));\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object} Icon object.\n */\nfunction readIcon(node, objectStack) {\n  const iconObject = pushParseAndPop(\n    {}, ICON_PARSERS, node, objectStack);\n  if (iconObject) {\n    return iconObject;\n  } else {\n    return null;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst GEOMETRY_FLAT_COORDINATES_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'coordinates': makeReplacer(readFlatCoordinates)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<number>} Flat coordinates.\n */\nfunction readFlatCoordinatesFromNode(node, objectStack) {\n  return pushParseAndPop(null,\n    GEOMETRY_FLAT_COORDINATES_PARSERS, node, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst EXTRUDE_AND_ALTITUDE_MODE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'extrude': makeObjectPropertySetter(readBoolean),\n    'tessellate': makeObjectPropertySetter(readBoolean),\n    'altitudeMode': makeObjectPropertySetter(readString)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {LineString|undefined} LineString.\n */\nfunction readLineString(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const lineString = new LineString(flatCoordinates, GeometryLayout.XYZ);\n    lineString.setProperties(properties);\n    return lineString;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Polygon|undefined} Polygon.\n */\nfunction readLinearRing(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const polygon = new Polygon(flatCoordinates, GeometryLayout.XYZ, [flatCoordinates.length]);\n    polygon.setProperties(properties);\n    return polygon;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst MULTI_GEOMETRY_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LineString': makeArrayPusher(readLineString),\n    'LinearRing': makeArrayPusher(readLinearRing),\n    'MultiGeometry': makeArrayPusher(readMultiGeometry),\n    'Point': makeArrayPusher(readPoint),\n    'Polygon': makeArrayPusher(readPolygon)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {import(\"../geom/Geometry.js\").default} Geometry.\n */\nfunction readMultiGeometry(node, objectStack) {\n  const geometries = pushParseAndPop([],\n    MULTI_GEOMETRY_PARSERS, node, objectStack);\n  if (!geometries) {\n    return null;\n  }\n  if (geometries.length === 0) {\n    return new GeometryCollection(geometries);\n  }\n  let multiGeometry;\n  let homogeneous = true;\n  const type = geometries[0].getType();\n  let geometry;\n  for (let i = 1, ii = geometries.length; i < ii; ++i) {\n    geometry = geometries[i];\n    if (geometry.getType() != type) {\n      homogeneous = false;\n      break;\n    }\n  }\n  if (homogeneous) {\n    let layout;\n    let flatCoordinates;\n    if (type == GeometryType.POINT) {\n      const point = geometries[0];\n      layout = point.getLayout();\n      flatCoordinates = point.getFlatCoordinates();\n      for (let i = 1, ii = geometries.length; i < ii; ++i) {\n        geometry = geometries[i];\n        extend(flatCoordinates, geometry.getFlatCoordinates());\n      }\n      multiGeometry = new MultiPoint(flatCoordinates, layout);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.LINE_STRING) {\n      multiGeometry = new MultiLineString(geometries);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.POLYGON) {\n      multiGeometry = new MultiPolygon(geometries);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.GEOMETRY_COLLECTION) {\n      multiGeometry = new GeometryCollection(geometries);\n    } else {\n      assert(false, 37); // Unknown geometry type found\n    }\n  } else {\n    multiGeometry = new GeometryCollection(geometries);\n  }\n  return (\n    /** @type {import(\"../geom/Geometry.js\").default} */ (multiGeometry)\n  );\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Point|undefined} Point.\n */\nfunction readPoint(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const point = new Point(flatCoordinates, GeometryLayout.XYZ);\n    point.setProperties(properties);\n    return point;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst FLAT_LINEAR_RINGS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'innerBoundaryIs': innerBoundaryIsParser,\n    'outerBoundaryIs': outerBoundaryIsParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Polygon|undefined} Polygon.\n */\nfunction readPolygon(node, objectStack) {\n  const properties = pushParseAndPop(/** @type {Object<string,*>} */ ({}),\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatLinearRings = pushParseAndPop([null],\n    FLAT_LINEAR_RINGS_PARSERS, node, objectStack);\n  if (flatLinearRings && flatLinearRings[0]) {\n    const flatCoordinates = flatLinearRings[0];\n    const ends = [flatCoordinates.length];\n    for (let i = 1, ii = flatLinearRings.length; i < ii; ++i) {\n      extend(flatCoordinates, flatLinearRings[i]);\n      ends.push(flatCoordinates.length);\n    }\n    const polygon = new Polygon(flatCoordinates, GeometryLayout.XYZ, ends);\n    polygon.setProperties(properties);\n    return polygon;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'IconStyle': iconStyleParser,\n    'LabelStyle': labelStyleParser,\n    'LineStyle': lineStyleParser,\n    'PolyStyle': polyStyleParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<Style>} Style.\n */\nfunction readStyle(node, objectStack) {\n  const styleObject = pushParseAndPop(\n    {}, STYLE_PARSERS, node, objectStack);\n  if (!styleObject) {\n    return null;\n  }\n  let fillStyle = /** @type {Fill} */\n      ('fillStyle' in styleObject ?\n        styleObject['fillStyle'] : DEFAULT_FILL_STYLE);\n  const fill = /** @type {boolean|undefined} */ (styleObject['fill']);\n  if (fill !== undefined && !fill) {\n    fillStyle = null;\n  }\n  let imageStyle;\n  if ('imageStyle' in styleObject) {\n    if (styleObject['imageStyle'] != DEFAULT_NO_IMAGE_STYLE) {\n      imageStyle = styleObject['imageStyle'];\n    }\n  } else {\n    imageStyle = DEFAULT_IMAGE_STYLE;\n  }\n  const textStyle = /** @type {Text} */\n      ('textStyle' in styleObject ?\n        styleObject['textStyle'] : DEFAULT_TEXT_STYLE);\n  let strokeStyle = /** @type {Stroke} */\n      ('strokeStyle' in styleObject ?\n        styleObject['strokeStyle'] : DEFAULT_STROKE_STYLE);\n  const outline = /** @type {boolean|undefined} */\n      (styleObject['outline']);\n  if (outline !== undefined && !outline) {\n    strokeStyle = null;\n  }\n  return [new Style({\n    fill: fillStyle,\n    image: imageStyle,\n    stroke: strokeStyle,\n    text: textStyle,\n    zIndex: undefined // FIXME\n  })];\n}\n\n\n/**\n * Reads an array of geometries and creates arrays for common geometry\n * properties. Then sets them to the multi geometry.\n * @param {MultiPoint|MultiLineString|MultiPolygon} multiGeometry A multi-geometry.\n * @param {Array<import(\"../geom/Geometry.js\").default>} geometries List of geometries.\n */\nfunction setCommonGeometryProperties(multiGeometry, geometries) {\n  const ii = geometries.length;\n  const extrudes = new Array(geometries.length);\n  const tessellates = new Array(geometries.length);\n  const altitudeModes = new Array(geometries.length);\n  let hasExtrude, hasTessellate, hasAltitudeMode;\n  hasExtrude = hasTessellate = hasAltitudeMode = false;\n  for (let i = 0; i < ii; ++i) {\n    const geometry = geometries[i];\n    extrudes[i] = geometry.get('extrude');\n    tessellates[i] = geometry.get('tessellate');\n    altitudeModes[i] = geometry.get('altitudeMode');\n    hasExtrude = hasExtrude || extrudes[i] !== undefined;\n    hasTessellate = hasTessellate || tessellates[i] !== undefined;\n    hasAltitudeMode = hasAltitudeMode || altitudeModes[i];\n  }\n  if (hasExtrude) {\n    multiGeometry.set('extrude', extrudes);\n  }\n  if (hasTessellate) {\n    multiGeometry.set('tessellate', tessellates);\n  }\n  if (hasAltitudeMode) {\n    multiGeometry.set('altitudeMode', altitudeModes);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'displayName': makeObjectPropertySetter(readString),\n    'value': makeObjectPropertySetter(readString)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction dataParser(node, objectStack) {\n  const name = node.getAttribute('name');\n  parseNode(DATA_PARSERS, node, objectStack);\n  const featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  if (name !== null) {\n    featureObject[name] = featureObject.value;\n  } else if (featureObject.displayName !== null) {\n    featureObject[featureObject.displayName] = featureObject.value;\n  }\n  delete featureObject['value'];\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst EXTENDED_DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Data': dataParser,\n    'SchemaData': schemaDataParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction extendedDataParser(node, objectStack) {\n  parseNode(EXTENDED_DATA_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction regionParser(node, objectStack) {\n  parseNode(REGION_PARSERS, node, objectStack);\n}\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst PAIR_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Style': makeObjectPropertySetter(readStyle),\n    'key': makeObjectPropertySetter(readString),\n    'styleUrl': makeObjectPropertySetter(readURI)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction pairDataParser(node, objectStack) {\n  const pairObject = pushParseAndPop(\n    {}, PAIR_PARSERS, node, objectStack);\n  if (!pairObject) {\n    return;\n  }\n  const key = /** @type {string|undefined} */\n      (pairObject['key']);\n  if (key && key == 'normal') {\n    const styleUrl = /** @type {string|undefined} */\n        (pairObject['styleUrl']);\n    if (styleUrl) {\n      objectStack[objectStack.length - 1] = styleUrl;\n    }\n    const style = /** @type {Style} */\n        (pairObject['Style']);\n    if (style) {\n      objectStack[objectStack.length - 1] = style;\n    }\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction placemarkStyleMapParser(node, objectStack) {\n  const styleMapValue = readStyleMapValue(node, objectStack);\n  if (!styleMapValue) {\n    return;\n  }\n  const placemarkObject = objectStack[objectStack.length - 1];\n  if (Array.isArray(styleMapValue)) {\n    placemarkObject['Style'] = styleMapValue;\n  } else if (typeof styleMapValue === 'string') {\n    placemarkObject['styleUrl'] = styleMapValue;\n  } else {\n    assert(false, 38); // `styleMapValue` has an unknown type\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst SCHEMA_DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'SimpleData': simpleDataParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction schemaDataParser(node, objectStack) {\n  parseNode(SCHEMA_DATA_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction simpleDataParser(node, objectStack) {\n  const name = node.getAttribute('name');\n  if (name !== null) {\n    const data = readString(node);\n    const featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    featureObject[name] = data;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst LAT_LON_ALT_BOX_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'altitudeMode': makeObjectPropertySetter(readString),\n    'minAltitude': makeObjectPropertySetter(readDecimal),\n    'maxAltitude': makeObjectPropertySetter(readDecimal),\n    'north': makeObjectPropertySetter(readDecimal),\n    'south': makeObjectPropertySetter(readDecimal),\n    'east': makeObjectPropertySetter(readDecimal),\n    'west': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction latLonAltBoxParser(node, objectStack) {\n  const object = pushParseAndPop({}, LAT_LON_ALT_BOX_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const regionObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const extent = [\n    parseFloat(object['west']),\n    parseFloat(object['south']),\n    parseFloat(object['east']),\n    parseFloat(object['north'])\n  ];\n  regionObject['extent'] = extent;\n  regionObject['altitudeMode'] = object['altitudeMode'];\n  regionObject['minAltitude'] = parseFloat(object['minAltitude']);\n  regionObject['maxAltitude'] = parseFloat(object['maxAltitude']);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst LOD_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'minLodPixels': makeObjectPropertySetter(readDecimal),\n    'maxLodPixels': makeObjectPropertySetter(readDecimal),\n    'minFadeExtent': makeObjectPropertySetter(readDecimal),\n    'maxFadeExtent': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction lodParser(node, objectStack) {\n  const object = pushParseAndPop({}, LOD_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const lodObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  lodObject['minLodPixels'] = parseFloat(object['minLodPixels']);\n  lodObject['maxLodPixels'] = parseFloat(object['maxLodPixels']);\n  lodObject['minFadeExtent'] = parseFloat(object['minFadeExtent']);\n  lodObject['maxFadeExtent'] = parseFloat(object['maxFadeExtent']);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst INNER_BOUNDARY_IS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeReplacer(readFlatLinearRing)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction innerBoundaryIsParser(node, objectStack) {\n  /** @type {Array<number>|undefined} */\n  const flatLinearRing = pushParseAndPop(undefined,\n    INNER_BOUNDARY_IS_PARSERS, node, objectStack);\n  if (flatLinearRing) {\n    const flatLinearRings = /** @type {Array<Array<number>>} */\n        (objectStack[objectStack.length - 1]);\n    flatLinearRings.push(flatLinearRing);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst OUTER_BOUNDARY_IS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeReplacer(readFlatLinearRing)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction outerBoundaryIsParser(node, objectStack) {\n  /** @type {Array<number>|undefined} */\n  const flatLinearRing = pushParseAndPop(undefined,\n    OUTER_BOUNDARY_IS_PARSERS, node, objectStack);\n  if (flatLinearRing) {\n    const flatLinearRings = /** @type {Array<Array<number>>} */\n        (objectStack[objectStack.length - 1]);\n    flatLinearRings[0] = flatLinearRing;\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction linkParser(node, objectStack) {\n  parseNode(LINK_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction whenParser(node, objectStack) {\n  const gxTrackObject = /** @type {GxTrackObject} */\n      (objectStack[objectStack.length - 1]);\n  const whens = gxTrackObject.whens;\n  const s = getAllTextContent(node, false);\n  const when = Date.parse(s);\n  whens.push(isNaN(when) ? 0 : when);\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the color to.\n * @param {import(\"../color.js\").Color|string} color Color.\n */\nfunction writeColorTextNode(node, color) {\n  const rgba = asArray(color);\n  const opacity = (rgba.length == 4) ? rgba[3] : 1;\n  /** @type {Array<string|number>} */\n  const abgr = [opacity * 255, rgba[2], rgba[1], rgba[0]];\n  for (let i = 0; i < 4; ++i) {\n    const hex = Math.floor(/** @type {number} */ (abgr[i])).toString(16);\n    abgr[i] = (hex.length == 1) ? '0' + hex : hex;\n  }\n  writeStringTextNode(node, abgr.join(''));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the coordinates to.\n * @param {Array<number>} coordinates Coordinates.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeCoordinatesTextNode(node, coordinates, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n\n  const layout = context['layout'];\n  const stride = context['stride'];\n\n  let dimension;\n  if (layout == GeometryLayout.XY ||\n      layout == GeometryLayout.XYM) {\n    dimension = 2;\n  } else if (layout == GeometryLayout.XYZ ||\n      layout == GeometryLayout.XYZM) {\n    dimension = 3;\n  } else {\n    assert(false, 34); // Invalid geometry layout\n  }\n\n  const ii = coordinates.length;\n  let text = '';\n  if (ii > 0) {\n    text += coordinates[0];\n    for (let d = 1; d < dimension; ++d) {\n      text += ',' + coordinates[d];\n    }\n    for (let i = stride; i < ii; i += stride) {\n      text += ' ' + coordinates[i];\n      for (let d = 1; d < dimension; ++d) {\n        text += ',' + coordinates[i + d];\n      }\n    }\n  }\n  writeStringTextNode(node, text);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst EXTENDEDDATA_NODE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Data': makeChildAppender(writeDataNode),\n    'value': makeChildAppender(writeDataNodeValue),\n    'displayName': makeChildAppender(writeDataNodeName)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {{name: *, value: *}} pair Name value pair.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeDataNode(node, pair, objectStack) {\n  node.setAttribute('name', pair.name);\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const value = pair.value;\n\n  if (typeof value == 'object') {\n    if (value !== null && value.displayName) {\n      pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n        OBJECT_PROPERTY_NODE_FACTORY, [value.displayName], objectStack, ['displayName']);\n    }\n\n    if (value !== null && value.value) {\n      pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n        OBJECT_PROPERTY_NODE_FACTORY, [value.value], objectStack, ['value']);\n    }\n  } else {\n    pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n      OBJECT_PROPERTY_NODE_FACTORY, [value], objectStack, ['value']);\n  }\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the name to.\n * @param {string} name DisplayName.\n */\nfunction writeDataNodeName(node, name) {\n  writeCDATASection(node, name);\n}\n\n\n/**\n * @param {Node} node Node to append a CDATA Section with the value to.\n * @param {string} value Value.\n */\nfunction writeDataNodeValue(node, value) {\n  writeStringTextNode(node, value);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst DOCUMENT_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Placemark': makeChildAppender(writePlacemark)\n  });\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst DOCUMENT_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  const parentNode = objectStack[objectStack.length - 1].node;\n  return createElementNS(parentNode.namespaceURI, 'Placemark');\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<Feature>} features Features.\n * @param {Array<*>} objectStack Object stack.\n * @this {KML}\n */\nfunction writeDocument(node, features, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context, DOCUMENT_SERIALIZERS,\n    DOCUMENT_NODE_FACTORY, features, objectStack, undefined,\n    this);\n}\n\n\n/**\n * A factory for creating Data nodes.\n * @const\n * @type {function(*, Array<*>): (Node|undefined)}\n */\nconst DATA_NODE_FACTORY = makeSimpleNodeFactory('Data');\n\n\n/**\n * @param {Node} node Node.\n * @param {{names: Array<string>, values: (Array<*>)}} namesAndValues Names and values.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeExtendedData(node, namesAndValues, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const names = namesAndValues.names;\n  const values = namesAndValues.values;\n  const length = names.length;\n\n  for (let i = 0; i < length; i++) {\n    pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n      DATA_NODE_FACTORY, [{name: names[i], value: values[i]}], objectStack);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst ICON_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'href'\n  ],\n  makeStructureNS(GX_NAMESPACE_URIS, [\n    'x', 'y', 'w', 'h'\n  ]));\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst ICON_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeChildAppender(writeStringTextNode)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'x': makeChildAppender(writeDecimalTextNode),\n      'y': makeChildAppender(writeDecimalTextNode),\n      'w': makeChildAppender(writeDecimalTextNode),\n      'h': makeChildAppender(writeDecimalTextNode)\n    }));\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst GX_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  return createElementNS(GX_NAMESPACE_URIS[0],\n    'gx:' + opt_nodeName);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Object} icon Icon object.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeIcon(node, icon, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const parentNode = objectStack[objectStack.length - 1].node;\n  let orderedKeys = ICON_SEQUENCE[parentNode.namespaceURI];\n  let values = makeSequence(icon, orderedKeys);\n  pushSerializeAndPop(context,\n    ICON_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n  orderedKeys =\n      ICON_SEQUENCE[GX_NAMESPACE_URIS[0]];\n  values = makeSequence(icon, orderedKeys);\n  pushSerializeAndPop(context, ICON_SERIALIZERS,\n    GX_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst ICON_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'scale', 'heading', 'Icon', 'hotSpot'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst ICON_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Icon': makeChildAppender(writeIcon),\n    'heading': makeChildAppender(writeDecimalTextNode),\n    'hotSpot': makeChildAppender(writeVec2),\n    'scale': makeChildAppender(writeScaleTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {import(\"../style/Icon.js\").default} style Icon style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeIconStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const properties = {};\n  const src = style.getSrc();\n  const size = style.getSize();\n  const iconImageSize = style.getImageSize();\n  const iconProperties = {\n    'href': src\n  };\n\n  if (size) {\n    iconProperties['w'] = size[0];\n    iconProperties['h'] = size[1];\n    const anchor = style.getAnchor(); // top-left\n    const origin = style.getOrigin(); // top-left\n\n    if (origin && iconImageSize && origin[0] !== 0 && origin[1] !== size[1]) {\n      iconProperties['x'] = origin[0];\n      iconProperties['y'] = iconImageSize[1] - (origin[1] + size[1]);\n    }\n\n    if (anchor && (anchor[0] !== size[0] / 2 || anchor[1] !== size[1] / 2)) {\n      const /** @type {Vec2} */ hotSpot = {\n        x: anchor[0],\n        xunits: IconAnchorUnits.PIXELS,\n        y: size[1] - anchor[1],\n        yunits: IconAnchorUnits.PIXELS\n      };\n      properties['hotSpot'] = hotSpot;\n    }\n  }\n\n  properties['Icon'] = iconProperties;\n\n  const scale = style.getScale();\n  if (scale !== 1) {\n    properties['scale'] = scale;\n  }\n\n  const rotation = style.getRotation();\n  if (rotation !== 0) {\n    properties['heading'] = rotation; // 0-360\n  }\n\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = ICON_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, ICON_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst LABEL_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'color', 'scale'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst LABEL_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'scale': makeChildAppender(writeScaleTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Text} style style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeLabelStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const properties = {};\n  const fill = style.getFill();\n  if (fill) {\n    properties['color'] = fill.getColor();\n  }\n  const scale = style.getScale();\n  if (scale && scale !== 1) {\n    properties['scale'] = scale;\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys =\n      LABEL_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, LABEL_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst LINE_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'color', 'width'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst LINE_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'width': makeChildAppender(writeDecimalTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Stroke} style style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeLineStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const properties = {\n    'color': style.getColor(),\n    'width': style.getWidth()\n  };\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = LINE_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, LINE_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, string>}\n */\nconst GEOMETRY_TYPE_TO_NODENAME = {\n  'Point': 'Point',\n  'LineString': 'LineString',\n  'LinearRing': 'LinearRing',\n  'Polygon': 'Polygon',\n  'MultiPoint': 'MultiGeometry',\n  'MultiLineString': 'MultiGeometry',\n  'MultiPolygon': 'MultiGeometry',\n  'GeometryCollection': 'MultiGeometry'\n};\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst GEOMETRY_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  if (value) {\n    const parentNode = objectStack[objectStack.length - 1].node;\n    return createElementNS(parentNode.namespaceURI,\n      GEOMETRY_TYPE_TO_NODENAME[/** @type {import(\"../geom/Geometry.js\").default} */ (value).getType()]);\n  }\n};\n\n\n/**\n * A factory for creating Point nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst POINT_NODE_FACTORY = makeSimpleNodeFactory('Point');\n\n\n/**\n * A factory for creating LineString nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst LINE_STRING_NODE_FACTORY = makeSimpleNodeFactory('LineString');\n\n\n/**\n * A factory for creating LinearRing nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst LINEAR_RING_NODE_FACTORY = makeSimpleNodeFactory('LinearRing');\n\n\n/**\n * A factory for creating Polygon nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst POLYGON_NODE_FACTORY = makeSimpleNodeFactory('Polygon');\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst MULTI_GEOMETRY_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LineString': makeChildAppender(\n      writePrimitiveGeometry),\n    'Point': makeChildAppender(\n      writePrimitiveGeometry),\n    'Polygon': makeChildAppender(writePolygon),\n    'GeometryCollection': makeChildAppender(\n      writeMultiGeometry)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeMultiGeometry(node, geometry, objectStack) {\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const context = {node: node};\n  const type = geometry.getType();\n  /** @type {Array<import(\"../geom/Geometry.js\").default>} */\n  let geometries;\n  /** @type {function(*, Array<*>, string=): (Node|undefined)} */\n  let factory;\n  if (type == GeometryType.GEOMETRY_COLLECTION) {\n    geometries = /** @type {GeometryCollection} */ (geometry).getGeometries();\n    factory = GEOMETRY_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_POINT) {\n    geometries = /** @type {MultiPoint} */ (geometry).getPoints();\n    factory = POINT_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_LINE_STRING) {\n    geometries =\n        (/** @type {MultiLineString} */ (geometry)).getLineStrings();\n    factory = LINE_STRING_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_POLYGON) {\n    geometries =\n        (/** @type {MultiPolygon} */ (geometry)).getPolygons();\n    factory = POLYGON_NODE_FACTORY;\n  } else {\n    assert(false, 39); // Unknown geometry type\n  }\n  pushSerializeAndPop(context,\n    MULTI_GEOMETRY_SERIALIZERS, factory,\n    geometries, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst BOUNDARY_IS_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeChildAppender(\n      writePrimitiveGeometry)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {import(\"../geom/LinearRing.js\").default} linearRing Linear ring.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeBoundaryIs(node, linearRing, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context,\n    BOUNDARY_IS_SERIALIZERS,\n    LINEAR_RING_NODE_FACTORY, [linearRing], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst PLACEMARK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': makeChildAppender(writeExtendedData),\n    'MultiGeometry': makeChildAppender(writeMultiGeometry),\n    'LineString': makeChildAppender(writePrimitiveGeometry),\n    'LinearRing': makeChildAppender(writePrimitiveGeometry),\n    'Point': makeChildAppender(writePrimitiveGeometry),\n    'Polygon': makeChildAppender(writePolygon),\n    'Style': makeChildAppender(writeStyle),\n    'address': makeChildAppender(writeStringTextNode),\n    'description': makeChildAppender(writeStringTextNode),\n    'name': makeChildAppender(writeStringTextNode),\n    'open': makeChildAppender(writeBooleanTextNode),\n    'phoneNumber': makeChildAppender(writeStringTextNode),\n    'styleUrl': makeChildAppender(writeStringTextNode),\n    'visibility': makeChildAppender(writeBooleanTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst PLACEMARK_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'open', 'visibility', 'address', 'phoneNumber', 'description',\n    'styleUrl', 'Style'\n  ]);\n\n\n/**\n * A factory for creating ExtendedData nodes.\n * @const\n * @type {function(*, Array<*>): (Node|undefined)}\n */\nconst EXTENDEDDATA_NODE_FACTORY = makeSimpleNodeFactory('ExtendedData');\n\n\n/**\n * FIXME currently we do serialize arbitrary/custom feature properties\n * (ExtendedData).\n * @param {Element} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n * @this {KML}\n */\nfunction writePlacemark(node, feature, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n\n  // set id\n  if (feature.getId()) {\n    node.setAttribute('id', /** @type {string} */ (feature.getId()));\n  }\n\n  // serialize properties (properties unknown to KML are not serialized)\n  const properties = feature.getProperties();\n\n  // don't export these to ExtendedData\n  const filter = {'address': 1, 'description': 1, 'name': 1, 'open': 1,\n    'phoneNumber': 1, 'styleUrl': 1, 'visibility': 1};\n  filter[feature.getGeometryName()] = 1;\n  const keys = Object.keys(properties || {}).sort().filter(function(v) {\n    return !filter[v];\n  });\n\n  if (keys.length > 0) {\n    const sequence = makeSequence(properties, keys);\n    const namesAndValues = {names: keys, values: sequence};\n    pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n      EXTENDEDDATA_NODE_FACTORY, [namesAndValues], objectStack);\n  }\n\n  const styleFunction = feature.getStyleFunction();\n  if (styleFunction) {\n    // FIXME the styles returned by the style function are supposed to be\n    // resolution-independent here\n    const styles = styleFunction(feature, 0);\n    if (styles) {\n      const style = Array.isArray(styles) ? styles[0] : styles;\n      if (this.writeStyles_) {\n        properties['Style'] = style;\n      }\n      const textStyle = style.getText();\n      if (textStyle) {\n        properties['name'] = textStyle.getText();\n      }\n    }\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = PLACEMARK_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n\n  // serialize geometry\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (transformWithOptions(geometry, true, options));\n  }\n  pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n    GEOMETRY_NODE_FACTORY, [geometry], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst PRIMITIVE_GEOMETRY_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'extrude', 'tessellate', 'altitudeMode', 'coordinates'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst PRIMITIVE_GEOMETRY_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'extrude': makeChildAppender(writeBooleanTextNode),\n    'tessellate': makeChildAppender(writeBooleanTextNode),\n    'altitudeMode': makeChildAppender(writeStringTextNode),\n    'coordinates': makeChildAppender(writeCoordinatesTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePrimitiveGeometry(node, geometry, objectStack) {\n  const flatCoordinates = geometry.getFlatCoordinates();\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  context['layout'] = geometry.getLayout();\n  context['stride'] = geometry.getStride();\n\n  // serialize properties (properties unknown to KML are not serialized)\n  const properties = geometry.getProperties();\n  properties.coordinates = flatCoordinates;\n\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = PRIMITIVE_GEOMETRY_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, PRIMITIVE_GEOMETRY_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst POLYGON_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'outerBoundaryIs': makeChildAppender(\n      writeBoundaryIs),\n    'innerBoundaryIs': makeChildAppender(\n      writeBoundaryIs)\n  });\n\n\n/**\n * A factory for creating innerBoundaryIs nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst INNER_BOUNDARY_NODE_FACTORY = makeSimpleNodeFactory('innerBoundaryIs');\n\n\n/**\n * A factory for creating outerBoundaryIs nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst OUTER_BOUNDARY_NODE_FACTORY = makeSimpleNodeFactory('outerBoundaryIs');\n\n\n/**\n * @param {Node} node Node.\n * @param {Polygon} polygon Polygon.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePolygon(node, polygon, objectStack) {\n  const linearRings = polygon.getLinearRings();\n  const outerRing = linearRings.shift();\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  // inner rings\n  pushSerializeAndPop(context,\n    POLYGON_SERIALIZERS,\n    INNER_BOUNDARY_NODE_FACTORY,\n    linearRings, objectStack);\n  // outer ring\n  pushSerializeAndPop(context,\n    POLYGON_SERIALIZERS,\n    OUTER_BOUNDARY_NODE_FACTORY,\n    [outerRing], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst POLY_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode)\n  });\n\n\n/**\n * A factory for creating coordinates nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst COLOR_NODE_FACTORY = makeSimpleNodeFactory('color');\n\n\n/**\n * @param {Node} node Node.\n * @param {Fill} style Style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePolyStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context, POLY_STYLE_SERIALIZERS,\n    COLOR_NODE_FACTORY, [style.getColor()], objectStack);\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the scale to.\n * @param {number|undefined} scale Scale.\n */\nfunction writeScaleTextNode(node, scale) {\n  // the Math is to remove any excess decimals created by float arithmetic\n  writeDecimalTextNode(node,\n    Math.round(scale * 1e6) / 1e6);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'IconStyle', 'LabelStyle', 'LineStyle', 'PolyStyle'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'IconStyle': makeChildAppender(writeIconStyle),\n    'LabelStyle': makeChildAppender(writeLabelStyle),\n    'LineStyle': makeChildAppender(writeLineStyle),\n    'PolyStyle': makeChildAppender(writePolyStyle)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Style} style Style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const properties = {};\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  const imageStyle = style.getImage();\n  const textStyle = style.getText();\n  if (imageStyle && typeof /** @type {?} */ (imageStyle).getSrc === 'function') {\n    properties['IconStyle'] = imageStyle;\n  }\n  if (textStyle) {\n    properties['LabelStyle'] = textStyle;\n  }\n  if (strokeStyle) {\n    properties['LineStyle'] = strokeStyle;\n  }\n  if (fillStyle) {\n    properties['PolyStyle'] = fillStyle;\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Element} node Node to append a TextNode with the Vec2 to.\n * @param {Vec2} vec2 Vec2.\n */\nfunction writeVec2(node, vec2) {\n  node.setAttribute('x', String(vec2.x));\n  node.setAttribute('y', String(vec2.y));\n  node.setAttribute('xunits', vec2.xunits);\n  node.setAttribute('yunits', vec2.yunits);\n}\n\n\nexport default KML;\n","/**\n * @module ol/format/TopoJSON\n */\nimport Feature from '../Feature.js';\nimport {transformWithOptions} from './Feature.js';\nimport JSONFeature from './JSONFeature.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {get as getProjection} from '../proj.js';\n\n/**\n * @typedef {import(\"topojson-specification\").Topology} TopoJSONTopology\n * @typedef {import(\"topojson-specification\").GeometryCollection} TopoJSONGeometryCollection\n * @typedef {import(\"topojson-specification\").GeometryObject} TopoJSONGeometry\n * @typedef {import(\"topojson-specification\").Point} TopoJSONPoint\n * @typedef {import(\"topojson-specification\").MultiPoint} TopoJSONMultiPoint\n * @typedef {import(\"topojson-specification\").LineString} TopoJSONLineString\n * @typedef {import(\"topojson-specification\").MultiLineString} TopoJSONMultiLineString\n * @typedef {import(\"topojson-specification\").Polygon} TopoJSONPolygon\n * @typedef {import(\"topojson-specification\").MultiPolygon} TopoJSONMultiPolygon\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {string} [layerName] Set the name of the TopoJSON topology\n * `objects`'s children as feature property with the specified name. This means\n * that when set to `'layer'`, a topology like\n * ```\n * {\n *   \"type\": \"Topology\",\n *   \"objects\": {\n *     \"example\": {\n *       \"type\": \"GeometryCollection\",\n *       \"geometries\": []\n *     }\n *   }\n * }\n * ```\n * will result in features that have a property `'layer'` set to `'example'`.\n * When not set, no property will be added to features.\n * @property {Array<string>} [layers] Names of the TopoJSON topology's\n * `objects`'s children to read features from.  If not provided, features will\n * be read from all children.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading data in the TopoJSON format.\n *\n * @api\n */\nclass TopoJSON extends JSONFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.layerName_ = options.layerName;\n\n    /**\n     * @private\n     * @type {Array<string>}\n     */\n    this.layers_ = options.layers ? options.layers : null;\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection(\n      options.dataProjection ?\n        options.dataProjection : 'EPSG:4326');\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromObject(object, opt_options) {\n    if (object.type == 'Topology') {\n      const topoJSONTopology = /** @type {TopoJSONTopology} */ (object);\n      let transform, scale = null, translate = null;\n      if (topoJSONTopology['transform']) {\n        transform = topoJSONTopology['transform'];\n        scale = transform['scale'];\n        translate = transform['translate'];\n      }\n      const arcs = topoJSONTopology['arcs'];\n      if (transform) {\n        transformArcs(arcs, scale, translate);\n      }\n      /** @type {Array<Feature>} */\n      const features = [];\n      const topoJSONFeatures = topoJSONTopology['objects'];\n      const property = this.layerName_;\n      let feature;\n      for (const objectName in topoJSONFeatures) {\n        if (this.layers_ && this.layers_.indexOf(objectName) == -1) {\n          continue;\n        }\n        if (topoJSONFeatures[objectName].type === 'GeometryCollection') {\n          feature = /** @type {TopoJSONGeometryCollection} */ (topoJSONFeatures[objectName]);\n          features.push.apply(features, readFeaturesFromGeometryCollection(\n            feature, arcs, scale, translate, property, objectName, opt_options));\n        } else {\n          feature = /** @type {TopoJSONGeometry} */ (topoJSONFeatures[objectName]);\n          features.push(readFeatureFromGeometry(\n            feature, arcs, scale, translate, property, objectName, opt_options));\n        }\n      }\n      return features;\n    } else {\n      return [];\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readProjectionFromObject(object) {\n    return this.dataProjection;\n  }\n\n}\n\n\n/**\n * @const\n * @type {Object<string, function(TopoJSONGeometry, Array, ...Array=): import(\"../geom/Geometry.js\").default>}\n */\nconst GEOMETRY_READERS = {\n  'Point': readPointGeometry,\n  'LineString': readLineStringGeometry,\n  'Polygon': readPolygonGeometry,\n  'MultiPoint': readMultiPointGeometry,\n  'MultiLineString': readMultiLineStringGeometry,\n  'MultiPolygon': readMultiPolygonGeometry\n};\n\n\n/**\n * Concatenate arcs into a coordinate array.\n * @param {Array<number>} indices Indices of arcs to concatenate.  Negative\n *     values indicate arcs need to be reversed.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs (already\n *     transformed).\n * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates array.\n */\nfunction concatenateArcs(indices, arcs) {\n  /** @type {Array<import(\"../coordinate.js\").Coordinate>} */\n  const coordinates = [];\n  let index, arc;\n  for (let i = 0, ii = indices.length; i < ii; ++i) {\n    index = indices[i];\n    if (i > 0) {\n      // splicing together arcs, discard last point\n      coordinates.pop();\n    }\n    if (index >= 0) {\n      // forward arc\n      arc = arcs[index];\n    } else {\n      // reverse arc\n      arc = arcs[~index].slice().reverse();\n    }\n    coordinates.push.apply(coordinates, arc);\n  }\n  // provide fresh copies of coordinate arrays\n  for (let j = 0, jj = coordinates.length; j < jj; ++j) {\n    coordinates[j] = coordinates[j].slice();\n  }\n  return coordinates;\n}\n\n\n/**\n * Create a point from a TopoJSON geometry object.\n *\n * @param {TopoJSONPoint} object TopoJSON object.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @return {Point} Geometry.\n */\nfunction readPointGeometry(object, scale, translate) {\n  const coordinates = object['coordinates'];\n  if (scale && translate) {\n    transformVertex(coordinates, scale, translate);\n  }\n  return new Point(coordinates);\n}\n\n\n/**\n * Create a multi-point from a TopoJSON geometry object.\n *\n * @param {TopoJSONMultiPoint} object TopoJSON object.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @return {MultiPoint} Geometry.\n */\nfunction readMultiPointGeometry(object, scale, translate) {\n  const coordinates = object['coordinates'];\n  if (scale && translate) {\n    for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n      transformVertex(coordinates[i], scale, translate);\n    }\n  }\n  return new MultiPoint(coordinates);\n}\n\n\n/**\n * Create a linestring from a TopoJSON geometry object.\n *\n * @param {TopoJSONLineString} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {LineString} Geometry.\n */\nfunction readLineStringGeometry(object, arcs) {\n  const coordinates = concatenateArcs(object['arcs'], arcs);\n  return new LineString(coordinates);\n}\n\n\n/**\n * Create a multi-linestring from a TopoJSON geometry object.\n *\n * @param {TopoJSONMultiLineString} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {MultiLineString} Geometry.\n */\nfunction readMultiLineStringGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object['arcs'].length; i < ii; ++i) {\n    coordinates[i] = concatenateArcs(object['arcs'][i], arcs);\n  }\n  return new MultiLineString(coordinates);\n}\n\n\n/**\n * Create a polygon from a TopoJSON geometry object.\n *\n * @param {TopoJSONPolygon} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {Polygon} Geometry.\n */\nfunction readPolygonGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object['arcs'].length; i < ii; ++i) {\n    coordinates[i] = concatenateArcs(object['arcs'][i], arcs);\n  }\n  return new Polygon(coordinates);\n}\n\n\n/**\n * Create a multi-polygon from a TopoJSON geometry object.\n *\n * @param {TopoJSONMultiPolygon} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {MultiPolygon} Geometry.\n */\nfunction readMultiPolygonGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object['arcs'].length; i < ii; ++i) {\n    // for each polygon\n    const polyArray = object['arcs'][i];\n    const ringCoords = [];\n    for (let j = 0, jj = polyArray.length; j < jj; ++j) {\n      // for each ring\n      ringCoords[j] = concatenateArcs(polyArray[j], arcs);\n    }\n    coordinates[i] = ringCoords;\n  }\n  return new MultiPolygon(coordinates);\n}\n\n\n/**\n * Create features from a TopoJSON GeometryCollection object.\n *\n * @param {TopoJSONGeometryCollection} collection TopoJSON Geometry\n *     object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @param {string|undefined} property Property to set the `GeometryCollection`'s parent\n *     object to.\n * @param {string} name Name of the `Topology`'s child object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {Array<Feature>} Array of features.\n */\nfunction readFeaturesFromGeometryCollection(collection, arcs, scale, translate, property, name, opt_options) {\n  const geometries = collection['geometries'];\n  const features = [];\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    features[i] = readFeatureFromGeometry(\n      geometries[i], arcs, scale, translate, property, name, opt_options);\n  }\n  return features;\n}\n\n\n/**\n * Create a feature from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON geometry object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @param {string|undefined} property Property to set the `GeometryCollection`'s parent\n *     object to.\n * @param {string} name Name of the `Topology`'s child object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {Feature} Feature.\n */\nfunction readFeatureFromGeometry(object, arcs, scale, translate, property, name, opt_options) {\n  let geometry;\n  const type = object.type;\n  const geometryReader = GEOMETRY_READERS[type];\n  if ((type === 'Point') || (type === 'MultiPoint')) {\n    geometry = geometryReader(object, scale, translate);\n  } else {\n    geometry = geometryReader(object, arcs);\n  }\n  const feature = new Feature();\n  feature.setGeometry(/** @type {import(\"../geom/Geometry.js\").default} */ (\n    transformWithOptions(geometry, false, opt_options)));\n  if (object.id !== undefined) {\n    feature.setId(object.id);\n  }\n  let properties = object.properties;\n  if (property) {\n    if (!properties) {\n      properties = {};\n    }\n    properties[property] = name;\n  }\n  if (properties) {\n    feature.setProperties(properties);\n  }\n  return feature;\n}\n\n\n/**\n * Apply a linear transform to array of arcs.  The provided array of arcs is\n * modified in place.\n *\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformArcs(arcs, scale, translate) {\n  for (let i = 0, ii = arcs.length; i < ii; ++i) {\n    transformArc(arcs[i], scale, translate);\n  }\n}\n\n\n/**\n * Apply a linear transform to an arc.  The provided arc is modified in place.\n *\n * @param {Array<import(\"../coordinate.js\").Coordinate>} arc Arc.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformArc(arc, scale, translate) {\n  let x = 0;\n  let y = 0;\n  for (let i = 0, ii = arc.length; i < ii; ++i) {\n    const vertex = arc[i];\n    x += vertex[0];\n    y += vertex[1];\n    vertex[0] = x;\n    vertex[1] = y;\n    transformVertex(vertex, scale, translate);\n  }\n}\n\n\n/**\n * Apply a linear transform to a vertex.  The provided vertex is modified in\n * place.\n *\n * @param {import(\"../coordinate.js\").Coordinate} vertex Vertex.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformVertex(vertex, scale, translate) {\n  vertex[0] = vertex[0] * scale[0] + translate[0];\n  vertex[1] = vertex[1] * scale[1] + translate[1];\n}\n\n\nexport default TopoJSON;\n","/**\n * @module ol/format/TextFeature\n */\nimport {abstract} from '../util.js';\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for text feature formats.\n *\n * @abstract\n */\nclass TextFeature extends FeatureFormat {\n  constructor() {\n    super();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getType() {\n    return FormatType.TEXT;\n  }\n\n  /**\n   * Read the feature from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   * @api\n   */\n  readFeature(source, opt_options) {\n    return this.readFeatureFromText(getText(source), this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {string} text Text.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n  readFeatureFromText(text, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the features from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  readFeatures(source, opt_options) {\n    return this.readFeaturesFromText(getText(source), this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {string} text Text.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n  readFeaturesFromText(text, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the geometry from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   * @api\n   */\n  readGeometry(source, opt_options) {\n    return this.readGeometryFromText(getText(source), this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {string} text Text.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometryFromText(text, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the projection from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n  readProjection(source) {\n    return this.readProjectionFromText(getText(source));\n  }\n\n  /**\n   * @param {string} text Text.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjectionFromText(text) {\n    return this.dataProjection;\n  }\n\n  /**\n   * Encode a feature as a string.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded feature.\n   * @api\n   */\n  writeFeature(feature, opt_options) {\n    return this.writeFeatureText(feature, this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../Feature.js\").default} feature Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @protected\n   * @return {string} Text.\n   */\n  writeFeatureText(feature, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded features.\n   * @api\n   */\n  writeFeatures(features, opt_options) {\n    return this.writeFeaturesText(features, this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @protected\n   * @return {string} Text.\n   */\n  writeFeaturesText(features, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Write a single geometry.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Geometry.\n   * @api\n   */\n  writeGeometry(geometry, opt_options) {\n    return this.writeGeometryText(geometry, this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @protected\n   * @return {string} Text.\n   */\n  writeGeometryText(geometry, opt_options) {\n    return abstract();\n  }\n}\n\n\n/**\n * @param {Document|Node|Object|string} source Source.\n * @return {string} Text.\n */\nfunction getText(source) {\n  if (typeof source === 'string') {\n    return source;\n  } else {\n    return '';\n  }\n}\n\n\nexport default TextFeature;\n","/**\n * @module ol/format/IGC\n */\nimport Feature from '../Feature.js';\nimport {transformWithOptions} from './Feature.js';\nimport TextFeature from './TextFeature.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport LineString from '../geom/LineString.js';\nimport {get as getProjection} from '../proj.js';\n\n/**\n * IGC altitude/z. One of 'barometric', 'gps', 'none'.\n * @enum {string}\n */\nconst IGCZ = {\n  BAROMETRIC: 'barometric',\n  GPS: 'gps',\n  NONE: 'none'\n};\n\n/**\n * @const\n * @type {RegExp}\n */\nconst B_RECORD_RE =\n    /^B(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{5})([NS])(\\d{3})(\\d{5})([EW])([AV])(\\d{5})(\\d{5})/;\n\n\n/**\n * @const\n * @type {RegExp}\n */\nconst H_RECORD_RE = /^H.([A-Z]{3}).*?:(.*)/;\n\n\n/**\n * @const\n * @type {RegExp}\n */\nconst HFDTE_RECORD_RE = /^HFDTE(\\d{2})(\\d{2})(\\d{2})/;\n\n\n/**\n * A regular expression matching the newline characters `\\r\\n`, `\\r` and `\\n`.\n *\n * @const\n * @type {RegExp}\n */\nconst NEWLINE_RE = /\\r\\n|\\r|\\n/;\n\n\n/**\n * @typedef {Object} Options\n * @property {IGCZ|string} [altitudeMode='none'] Altitude mode. Possible\n * values are `'barometric'`, `'gps'`, and `'none'`.\n */\n\n\n/**\n * @classdesc\n * Feature format for `*.igc` flight recording files.\n *\n * As IGC sources contain a single feature,\n * {@link module:ol/format/IGC~IGC#readFeatures} will return the feature in an\n * array\n *\n * @api\n */\nclass IGC extends TextFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @private\n     * @type {IGCZ}\n     */\n    this.altitudeMode_ = options.altitudeMode ? options.altitudeMode : IGCZ.NONE;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromText(text, opt_options) {\n    const altitudeMode = this.altitudeMode_;\n    const lines = text.split(NEWLINE_RE);\n    /** @type {Object<string, string>} */\n    const properties = {};\n    const flatCoordinates = [];\n    let year = 2000;\n    let month = 0;\n    let day = 1;\n    let lastDateTime = -1;\n    let i, ii;\n    for (i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      let m;\n      if (line.charAt(0) == 'B') {\n        m = B_RECORD_RE.exec(line);\n        if (m) {\n          const hour = parseInt(m[1], 10);\n          const minute = parseInt(m[2], 10);\n          const second = parseInt(m[3], 10);\n          let y = parseInt(m[4], 10) + parseInt(m[5], 10) / 60000;\n          if (m[6] == 'S') {\n            y = -y;\n          }\n          let x = parseInt(m[7], 10) + parseInt(m[8], 10) / 60000;\n          if (m[9] == 'W') {\n            x = -x;\n          }\n          flatCoordinates.push(x, y);\n          if (altitudeMode != IGCZ.NONE) {\n            let z;\n            if (altitudeMode == IGCZ.GPS) {\n              z = parseInt(m[11], 10);\n            } else if (altitudeMode == IGCZ.BAROMETRIC) {\n              z = parseInt(m[12], 10);\n            } else {\n              z = 0;\n            }\n            flatCoordinates.push(z);\n          }\n          let dateTime = Date.UTC(year, month, day, hour, minute, second);\n          // Detect UTC midnight wrap around.\n          if (dateTime < lastDateTime) {\n            dateTime = Date.UTC(year, month, day + 1, hour, minute, second);\n          }\n          flatCoordinates.push(dateTime / 1000);\n          lastDateTime = dateTime;\n        }\n      } else if (line.charAt(0) == 'H') {\n        m = HFDTE_RECORD_RE.exec(line);\n        if (m) {\n          day = parseInt(m[1], 10);\n          month = parseInt(m[2], 10) - 1;\n          year = 2000 + parseInt(m[3], 10);\n        } else {\n          m = H_RECORD_RE.exec(line);\n          if (m) {\n            properties[m[1]] = m[2].trim();\n          }\n        }\n      }\n    }\n    if (flatCoordinates.length === 0) {\n      return null;\n    }\n    const layout = altitudeMode == IGCZ.NONE ? GeometryLayout.XYM : GeometryLayout.XYZM;\n    const lineString = new LineString(flatCoordinates, layout);\n    const feature = new Feature(transformWithOptions(lineString, false, opt_options));\n    feature.setProperties(properties);\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromText(text, opt_options) {\n    const feature = this.readFeatureFromText(text, opt_options);\n    if (feature) {\n      return [feature];\n    } else {\n      return [];\n    }\n  }\n\n}\n\nexport default IGC;\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.quickselect = factory());\n}(this, (function () { 'use strict';\n\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) swap(arr, left, right);\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) i++;\n            while (compare(arr[j], t) > 0) j--;\n        }\n\n        if (compare(arr[left], t) === 0) swap(arr, left, j);\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nreturn quickselect;\n\n})));\n"],"sourceRoot":""}